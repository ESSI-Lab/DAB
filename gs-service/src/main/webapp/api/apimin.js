!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};
m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},
last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],
g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a);},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&
a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},
globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c)if(g)for(;f>e;e++){if(d=b.apply(a[e],c),d===!1)break}else for(e in a){if(d=b.apply(a[e],c),d===!1)break}else if(g)for(;f>e;e++){if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;
return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,
e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},
support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,
E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+
L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>
10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1])if(9===k){if(h=b.getElementById(j),
!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else{if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;
while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,
b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,
d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&
e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);
return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,
f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||
q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),
(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&
16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=
a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||
c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+
a);},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f)if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else{if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,
match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&
ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==
typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===
b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&
++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;
while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||
"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===
!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();
return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),
gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),
f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g)while(b=
b[d]){if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}
function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):
r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-
1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,
s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&
"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),
e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||
ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;
function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,
c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==
c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||
!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&
m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=
a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,
c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:
c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?
i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,
f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,
arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):
--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",
J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&
y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==
K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&
j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?
b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,
b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>
1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),
delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,
a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=
function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,
k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,
_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=
_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=
c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&
!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||
y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=
k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&
d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&
!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==
!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=
d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==
ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,
d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=
a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=
aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,
e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,
this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&
(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,
arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,
b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=ba;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},
off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?
m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,
ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>",
"</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&
m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",
!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=
a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+
">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===
m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,
h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++])oa.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||
m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,
b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,
a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=
arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,
this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,
b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),
typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,
null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==
g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],
c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==
h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||
{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText=
"margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",
display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--)if(b=Ta[e]+c,b in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,
"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,
"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===
c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=
Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=
parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+
"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,
b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==
typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=
Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,
""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,
bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),
$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,
m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=
b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=
g.start,g.start="width"===d||"height"===d?1:0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,
i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?
h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=
a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),
d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==
!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,
a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=
m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),
k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,
c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");
return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),
f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>
1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,
b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+
c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||
a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===
c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,
b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||
(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,
b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=
this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=
f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&
!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&
(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==
b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=
a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",
data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,
"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j=
{};while(b=Cb.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,
v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;h=m.event&&
k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&
v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},
k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&
(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=
c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},
wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&
"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,
b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=
this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&
a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==
c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&
b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",
function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;
m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?
"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&
m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),
this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),
f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;
if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=
m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:
a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,
c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===
m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}
function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass=
"ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul",
"Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,
gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=
e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),
-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}
function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===
i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),
e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+
this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,
t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),
s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||
"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,
n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),
r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,
namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=
function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&
(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=
e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,
_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,
i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);
return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=
this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),
this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,
{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",
hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",
distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&
(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&
(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,
this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},
_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),
height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),
i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;
return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,
y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),
p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},
e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>
a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>
l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?
n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:
n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,
arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),
h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",
height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?
this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),
this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),
"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",
!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===
e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),
this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();
this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),
this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,
t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,
t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=
o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=
t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),
i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=l&&u.down||u,c=function(){o._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(n=d),n=n||d.easing||u.easing,a=a||d.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,
t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:c,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,c):e.animate(this.showProps,a,n,c)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=
t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,
tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",
[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||
this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);
break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);
break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||
(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+
n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],
this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),
this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||
0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));
s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=
this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=
e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),
void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),
e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||
o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&
(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",
s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),
this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),
this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&
(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),
this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),
t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===
this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},
_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&
(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),
this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,
t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,
{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||
this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},
1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?
this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,
function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?
this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?
!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),
this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),
this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+
" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):
(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?
this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?
(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},
_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?
"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,
e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):
this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+
"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,
title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=
0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),
i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,
n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),
this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):
("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),v===n&&(v=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==
typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,
h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,
t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),
i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),
o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&
e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);
return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),
e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),
a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),
e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),
e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),
t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,
i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):
0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||
e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),
a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),
this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,
this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=
null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864E5)/7)+1},parseDate:function(t,
i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=
t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?
(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h;},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case "d":v=x("d");break;case "D":w("D",d,c);break;case "o":y=x("o");break;case "m":g=x("m");break;case "M":g=w("M",p,f);break;case "y":m=x("y");break;case "@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case "!":r=
new Date((x("!")-this._ticksTo1970)/1E4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case "'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+
1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1E7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,
o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case "d":d+=l("d",t.getDate(),2);break;case "D":d+=u("D",t.getDay(),n,a);break;case "o":d+=
l("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":d+=l("m",t.getMonth()+1,2);break;case "M":d+=u("M",t.getMonth(),o,r);break;case "y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case "@":d+=t.getTime();break;case "!":d+=1E4*t.getTime()+this._ticksTo1970;break;case "'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,
n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case "d":case "m":case "y":case "@":i+="0123456789";break;case "D":case "M":return null;case "'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=
e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,
i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case "d":case "D":r+=parseInt(l[1],10);break;case "w":case "W":r+=7*parseInt(l[1],10);break;case "m":case "M":o+=
parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case "y":case "Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>
12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===
e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,
+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,H,z,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),
Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),
$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+
i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+
(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+
o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",
M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+
"<tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,
Z,1-P)),F=0;H>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],j=z.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+
" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===
G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),
b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+
i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":
"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===
i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},
_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=
this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,
"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;
e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+
t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,
helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},
_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>
0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];
if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),
this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,
t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=
this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=
!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),
e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},
_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||
(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||
e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==
this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-
this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),
i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):
s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*
i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+
s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=
i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?
-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&
"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},
_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=
!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,
a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},
t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=
!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&
(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=
i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),
n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<
n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&
s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,
s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",
{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",
{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),
10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",
aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),
e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),
this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===
String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),
t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||
(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,
this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=
!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-
o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-
n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),
!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||
this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};
return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?
o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=
e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,
s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),
s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+
i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),
this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;
return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,
[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=
e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,
step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):
d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-
i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+
(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,
o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*
o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&
!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,
o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable",
"ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");
t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>
f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,
i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,
drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},
this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),
this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",
this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&
e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?
(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),
e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==
this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),
this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),
this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),
this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),
void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();
s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",
alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+
" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=
this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&
(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),
!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",
width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),
height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||
(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),
this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t=
{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},
_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),
i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),
this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),
n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;
var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case "fit":return a>=l&&d>=r&&o>=u&&c>=h;case "intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case "pointer":return e(n.pageY,
u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case "touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||
t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&
e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||
[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===
r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:
e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,
parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},
lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=
[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=
l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||
{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==
e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,
a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,
h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),
null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=
n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",
olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=
i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==
e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},
h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,
{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==
i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=
0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case "top":i=0;break;case "middle":i=.5;break;case "bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case "left":s=0;break;case "center":s=.5;break;case "right":s=1;break;default:s=e[1]/t.width}return{x:s,
y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?
(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),
t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&
s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,
arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-
1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position",
"top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,
a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),
_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,
[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,
easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/
2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,
t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+
(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:
["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor",
"opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top",
"bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),
outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),
o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-
o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*
a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",
o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||
"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),
"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=
function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom",
"left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/
2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),
e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},
d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar",
"aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),
void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,
t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):
(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;
this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),
this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,
width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),
n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),
this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&
((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",
t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=
!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),
this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,
"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=
this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||
t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},
_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),
this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},
_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},
_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},
_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),
this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",
t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),
this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===
e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",
this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},
_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,
max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},
_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=
this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),
i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),
this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:
(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t=
{x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===
this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=
this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==
!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?
(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),
this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case "orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case "value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case "values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case "step":case "min":case "max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=
!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:
1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");
return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&
("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?
"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,
s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),
t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;
n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",
items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),
this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),
this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===
t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,
top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),
o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==
this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),
!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<
o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-
o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,
t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===
this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=
this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),
"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||
i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===
this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+
this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/
2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),
this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=
[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,
a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&
this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=
a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");
return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||
0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],
this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=
1);else{for(n=1E4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===
this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",
t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in
t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||
this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=
[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),
10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():
a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==
this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&
(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?
s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],
"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===
this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),
this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),
this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&
this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",
{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),
this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==
this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}
var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?
1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=
this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+
"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+
e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5E4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,
i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),
void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==
typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?
!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&
(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",
delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,
n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;
if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),
clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,
!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,
t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&
this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",
"aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role",
"tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),
this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),
a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===
this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,
{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,
i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||
this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,
s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",
-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&
this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),
this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=
this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,
i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+
i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=
t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},
_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},
_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=
t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){n._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,i))})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){l.of=
e,o.is(":hidden")||o.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),
this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],
this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),
this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=e("<div>").attr("role",
"tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),
a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});if(typeof YAHOO=="undefined"||!YAHOO)var YAHOO={};YAHOO.namespace=function(){var b=arguments,g=null,e,c,f;for(e=0;e<b.length;e=e+1){f=(""+b[e]).split(".");g=YAHOO;for(c=f[0]=="YAHOO"?1:0;c<f.length;c=c+1){g[f[c]]=g[f[c]]||{};g=g[f[c]]}}return g};YAHOO.log=function(d,a,c){var b=YAHOO.widget.Logger;if(b&&b.log)return b.log(d,a,c);else return false};
YAHOO.register=function(a,f,e){var k=YAHOO.env.modules,c,j,h,g,d;if(!k[a])k[a]={versions:[],builds:[]};c=k[a];j=e.version;h=e.build;g=YAHOO.env.listeners;c.name=a;c.version=j;c.build=h;c.versions.push(j);c.builds.push(h);c.mainClass=f;for(d=0;d<g.length;d=d+1)g[d](c);if(f){f.VERSION=j;f.BUILD=h}else YAHOO.log("mainClass is undefined for module "+a,"warn")};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null};
YAHOO.env.parseUA=function(d){var e=function(i){var j=0;return parseFloat(i.replace(/\./g,function(){return j++==1?"":"."}))},h=navigator,g={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:h&&h.cajaVersion,secure:false,os:null},c=d||navigator&&navigator.userAgent,f=window&&window.location,b=f&&f.href,a;g.secure=b&&b.toLowerCase().indexOf("https")===0;if(c){if(/windows|win32/i.test(c))g.os="windows";else if(/macintosh/i.test(c))g.os="macintosh";
else if(/rhino/i.test(c))g.os="rhino";if(/KHTML/.test(c))g.webkit=1;a=c.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){g.webkit=e(a[1]);if(/ Mobile\//.test(c)){g.mobile="Apple";a=c.match(/OS ([^\s]*)/);if(a&&a[1])a=e(a[1].replace("_","."));g.ios=a;g.ipad=g.ipod=g.iphone=0;a=c.match(/iPad|iPod|iPhone/);if(a&&a[0])g[a[0].toLowerCase()]=g.ios}else{a=c.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/);if(a)g.mobile=a[0];if(/webOS/.test(c)){g.mobile="WebOS";a=c.match(/webOS\/([^\s]*);/);if(a&&a[1])g.webos=
e(a[1])}if(/ Android/.test(c)){g.mobile="Android";a=c.match(/Android ([^\s]*);/);if(a&&a[1])g.android=e(a[1])}}a=c.match(/Chrome\/([^\s]*)/);if(a&&a[1])g.chrome=e(a[1]);else{a=c.match(/AdobeAIR\/([^\s]*)/);if(a)g.air=a[0]}}if(!g.webkit){a=c.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){g.opera=e(a[1]);a=c.match(/Version\/([^\s]*)/);if(a&&a[1])g.opera=e(a[1]);a=c.match(/Opera Mini[^;]*/);if(a)g.mobile=a[0]}else{a=c.match(/MSIE\s([^;]*)/);if(a&&a[1])g.ie=e(a[1]);else{a=c.match(/Gecko\/([^\s]*)/);if(a){g.gecko=
1;a=c.match(/rv:([^\s\)]*)/);if(a&&a[1])g.gecko=e(a[1])}}}}}return g};YAHOO.env.ua=YAHOO.env.parseUA();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var b=YAHOO_config.listener,a=YAHOO.env.listeners,d=true,c;if(b){for(c=0;c<a.length;c++)if(a[c]==b){d=false;break}if(d)a.push(b)}}})();YAHOO.lang=YAHOO.lang||{};
(function(){var f=YAHOO.lang,a=Object.prototype,c="[object Array]",h="[object Function]",i="[object Object]",b=[],g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},d=["toString","valueOf"],e={isArray:function(j){return a.toString.apply(j)===c},isBoolean:function(j){return typeof j==="boolean"},isFunction:function(j){return typeof j==="function"||a.toString.apply(j)===h},isNull:function(j){return j===null},isNumber:function(j){return typeof j==="number"&&isFinite(j)},
isObject:function(j){return j&&(typeof j==="object"||f.isFunction(j))||false},isString:function(j){return typeof j==="string"},isUndefined:function(j){return typeof j==="undefined"},_IEEnumFix:YAHOO.env.ua.ie?function(l,k){var j,n,m;for(j=0;j<d.length;j=j+1){n=d[j];m=k[n];if(f.isFunction(m)&&m!=a[n])l[n]=m}}:function(){},escapeHTML:function(j){return j.replace(/[&<>"'\/`]/g,function(k){return g[k]})},extend:function(m,n,l){if(!n||!m)throw new Error("extend failed, please check that "+"all dependencies are included.");
var k=function(){},j;k.prototype=n.prototype;m.prototype=new k;m.prototype.constructor=m;m.superclass=n.prototype;if(n.prototype.constructor==a.constructor)n.prototype.constructor=n;if(l){for(j in l)if(f.hasOwnProperty(l,j))m.prototype[j]=l[j];f._IEEnumFix(m.prototype,l)}},augmentObject:function(n,m){if(!m||!n)throw new Error("Absorb failed, verify dependencies.");var j=arguments,l,o,k=j[2];if(k&&k!==true)for(l=2;l<j.length;l=l+1)n[j[l]]=m[j[l]];else{for(o in m)if(k||!(o in n))n[o]=m[o];f._IEEnumFix(n,
m)}return n},augmentProto:function(m,l){if(!l||!m)throw new Error("Augment failed, verify dependencies.");var j=[m.prototype,l.prototype],k;for(k=2;k<arguments.length;k=k+1)j.push(arguments[k]);f.augmentObject.apply(this,j);return m},dump:function(j,p){var l,n,r=[],t="{...}",k="f(){...}",q=", ",m=" => ";if(!f.isObject(j))return j+"";else if(j instanceof Date||"nodeType"in j&&"tagName"in j)return j;else if(f.isFunction(j))return k;p=f.isNumber(p)?p:3;if(f.isArray(j)){r.push("[");for(l=0,n=j.length;l<
n;l=l+1){if(f.isObject(j[l]))r.push(p>0?f.dump(j[l],p-1):t);else r.push(j[l]);r.push(q)}if(r.length>1)r.pop();r.push("]")}else{r.push("{");for(l in j)if(f.hasOwnProperty(j,l)){r.push(l+m);if(f.isObject(j[l]))r.push(p>0?f.dump(j[l],p-1):t);else r.push(j[l]);r.push(q)}if(r.length>1)r.pop();r.push("}")}return r.join("")},substitute:function(x,y,E,l){var D,C,B,G,t,u,F=[],p,z=x.length,A="dump",r=" ",q="{",m="}",n,w;for(;;){D=x.lastIndexOf(q,z);if(D<0)break;C=x.indexOf(m,D);if(D+1>C)break;p=x.substring(D+
1,C);G=p;u=null;B=G.indexOf(r);if(B>-1){u=G.substring(B+1);G=G.substring(0,B)}t=y[G];if(E)t=E(G,t,u);if(f.isObject(t))if(f.isArray(t))t=f.dump(t,parseInt(u,10));else{u=u||"";n=u.indexOf(A);if(n>-1)u=u.substring(4);w=t.toString();if(w===i||n>-1)t=f.dump(t,parseInt(u,10));else t=w}else if(!f.isString(t)&&!f.isNumber(t)){t="~-"+F.length+"-~";F[F.length]=p}x=x.substring(0,D)+t+x.substring(C+1);if(l===false)z=D-1}for(D=F.length-1;D>=0;D=D-1)x=x.replace(new RegExp("~-"+D+"-~"),"{"+F[D]+"}","g");return x},
trim:function(j){try{return j.replace(/^\s+|\s+$/g,"")}catch(k){return j}},merge:function(){var n={},k=arguments,j=k.length,m;for(m=0;m<j;m=m+1)f.augmentObject(n,k[m],true);return n},later:function(t,k,u,n,p){t=t||0;k=k||{};var l=u,s=n,q,j;if(f.isString(u))l=k[u];if(!l)throw new TypeError("method undefined");if(!f.isUndefined(n)&&!f.isArray(s))s=[n];q=function(){l.apply(k,s||b)};j=p?setInterval(q,t):setTimeout(q,t);return{interval:p,cancel:function(){if(this.interval)clearInterval(j);else clearTimeout(j)}}},
isValue:function(j){return f.isObject(j)||f.isString(j)||f.isNumber(j)||f.isBoolean(j)}};f.hasOwnProperty=a.hasOwnProperty?function(j,k){return j&&j.hasOwnProperty&&j.hasOwnProperty(k)}:function(j,k){return!f.isUndefined(j[k])&&j.constructor.prototype[k]!==j[k]};e.augmentObject(f,e,true);YAHOO.util.Lang=f;f.augment=f.augmentProto;YAHOO.augment=f.augmentProto;YAHOO.extend=f.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.9.0",build:"2800"});
(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var e=YAHOO.util,k=YAHOO.lang,L=YAHOO.env.ua,a=YAHOO.lang.trim,B={},F={},m=/^t(?:able|d|h)$/i,w=/color$/i,j=window.document,v=j.documentElement,C="ownerDocument",M="defaultView",U="documentElement",S="compatMode",z="offsetLeft",o="offsetTop",T="offsetParent",x="parentNode",K="nodeType",c="tagName",n="scrollLeft",H="scrollTop",p="getBoundingClientRect",V="getComputedStyle",y="currentStyle",l="CSS1Compat",A="BackCompat",E="class",f="className",
i="",b=" ",R="(?:^|\\s)",J="(?= |$)",t="g",O="position",D="fixed",u="relative",I="left",N="top",Q="medium",P="borderLeftWidth",q="borderTopWidth",d=L.opera,h=L.webkit,g=L.gecko,s=L.ie;e.Dom={CUSTOM_ATTRIBUTES:!v.hasAttribute?{"for":"htmlFor","class":f}:{"htmlFor":"for","className":E},DOT_ATTRIBUTES:{checked:true},get:function(aa){var ac,X,ab,Z,W,G,Y=null;if(aa){if(typeof aa=="string"||typeof aa=="number"){ac=aa+"";aa=j.getElementById(aa);G=aa?aa.attributes:null;if(aa&&G&&G.id&&G.id.value===ac)return aa;
else if(aa&&j.all){aa=null;X=j.all[ac];if(X&&X.length)for(Z=0,W=X.length;Z<W;++Z)if(X[Z].id===ac)return X[Z]}}else if(e.Element&&aa instanceof e.Element)aa=aa.get("element");else if(!aa.nodeType&&"length"in aa){ab=[];for(Z=0,W=aa.length;Z<W;++Z)ab[ab.length]=e.Dom.get(aa[Z]);aa=ab}Y=aa}return Y},getComputedStyle:function(G,W){if(window[V])return G[C][M][V](G,null)[W];else if(G[y])return e.Dom.IE_ComputedStyle.get(G,W)},getStyle:function(G,W){return e.Dom.batch(G,e.Dom._getStyle,W)},_getStyle:function(){if(window[V])return function(G,
Y){Y=Y==="float"?Y="cssFloat":e.Dom._toCamel(Y);var X=G.style[Y],W;if(!X){W=G[C][M][V](G,null);if(W)X=W[Y]}return X};else if(v[y])return function(G,Y){var X;switch(Y){case "opacity":X=100;try{X=G.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(Z){try{X=G.filters("alpha").opacity}catch(W){}}return X/100;case "float":Y="styleFloat";default:Y=e.Dom._toCamel(Y);X=G[y]?G[y][Y]:null;return G.style[Y]||X}}}(),setStyle:function(G,W,X){e.Dom.batch(G,e.Dom._setStyle,{prop:W,val:X})},_setStyle:function(){if(!window.getComputedStyle&&
j.documentElement.currentStyle)return function(W,G){var X=e.Dom._toCamel(G.prop),Y=G.val;if(W)switch(X){case "opacity":if(Y===""||Y===null||Y===1)W.style.removeAttribute("filter");else if(k.isString(W.style.filter)){W.style.filter="alpha(opacity="+Y*100+")";if(!W[y]||!W[y].hasLayout)W.style.zoom=1}break;case "float":X="styleFloat";default:W.style[X]=Y}else;};else return function(W,G){var X=e.Dom._toCamel(G.prop),Y=G.val;if(W){if(X=="float")X="cssFloat";W.style[X]=Y}else;}}(),getXY:function(G){return e.Dom.batch(G,
e.Dom._getXY)},_canPosition:function(G){return e.Dom._getStyle(G,"display")!=="none"&&e.Dom._inDoc(G)},_getXY:function(W){var X,G,Z,ab,Y,aa,ac=Math.round,ad=false;if(e.Dom._canPosition(W)){Z=W[p]();ab=W[C];X=e.Dom.getDocumentScrollLeft(ab);G=e.Dom.getDocumentScrollTop(ab);ad=[Z[I],Z[N]];if(Y||aa){ad[0]-=aa;ad[1]-=Y}if(G||X){ad[0]+=X;ad[1]+=G}ad[0]=ac(ad[0]);ad[1]=ac(ad[1])}else;return ad},getX:function(G){var W=function(X){return e.Dom.getXY(X)[0]};return e.Dom.batch(G,W,e.Dom,true)},getY:function(G){var W=
function(X){return e.Dom.getXY(X)[1]};return e.Dom.batch(G,W,e.Dom,true)},setXY:function(G,X,W){e.Dom.batch(G,e.Dom._setXY,{pos:X,noRetry:W})},_setXY:function(G,Z){var aa=e.Dom._getStyle(G,O),Y=e.Dom.setStyle,ad=Z.pos,W=Z.noRetry,ab=[parseInt(e.Dom.getComputedStyle(G,I),10),parseInt(e.Dom.getComputedStyle(G,N),10)],ac,X;ac=e.Dom._getXY(G);if(!ad||ac===false)return false;if(aa=="static"){aa=u;Y(G,O,aa)}if(isNaN(ab[0]))ab[0]=aa==u?0:G[z];if(isNaN(ab[1]))ab[1]=aa==u?0:G[o];if(ad[0]!==null)Y(G,I,ad[0]-
ac[0]+ab[0]+"px");if(ad[1]!==null)Y(G,N,ad[1]-ac[1]+ab[1]+"px");if(!W){X=e.Dom._getXY(G);if(ad[0]!==null&&X[0]!=ad[0]||ad[1]!==null&&X[1]!=ad[1])e.Dom._setXY(G,{pos:ad,noRetry:true})}},setX:function(W,G){e.Dom.setXY(W,[G,null])},setY:function(G,W){e.Dom.setXY(G,[null,W])},getRegion:function(G){var W=function(X){var Y=false;if(e.Dom._canPosition(X))Y=e.Region.getRegion(X);else;return Y};return e.Dom.batch(G,W,e.Dom,true)},getClientWidth:function(){return e.Dom.getViewportWidth()},getClientHeight:function(){return e.Dom.getViewportHeight()},
getElementsByClassName:function(ab,af,ac,ae,X,ad){af=af||"*";ac=ac?e.Dom.get(ac):null||j;if(!ac)return[];var W=[],G=ac.getElementsByTagName(af),Z=e.Dom.hasClass;for(var Y=0,aa=G.length;Y<aa;++Y)if(Z(G[Y],ab))W[W.length]=G[Y];if(ae)e.Dom.batch(W,ae,X,ad);return W},hasClass:function(W,G){return e.Dom.batch(W,e.Dom._hasClass,G)},_hasClass:function(X,W){var G=false,Y;if(X&&W){Y=e.Dom._getAttribute(X,f)||i;if(Y)Y=Y.replace(/\s+/g,b);if(W.exec)G=W.test(Y);else G=W&&(b+Y+b).indexOf(b+W+b)>-1}else;return G},
addClass:function(W,G){return e.Dom.batch(W,e.Dom._addClass,G)},_addClass:function(X,W){var G=false,Y;if(X&&W){Y=e.Dom._getAttribute(X,f)||i;if(!e.Dom._hasClass(X,W)){e.Dom.setAttribute(X,f,a(Y+b+W));G=true}}else;return G},removeClass:function(W,G){return e.Dom.batch(W,e.Dom._removeClass,G)},_removeClass:function(Y,X){var W=false,aa,Z,G;if(Y&&X){aa=e.Dom._getAttribute(Y,f)||i;e.Dom.setAttribute(Y,f,aa.replace(e.Dom._getClassRegex(X),i));Z=e.Dom._getAttribute(Y,f);if(aa!==Z){e.Dom.setAttribute(Y,f,
a(Z));W=true;if(e.Dom._getAttribute(Y,f)===""){G=Y.hasAttribute&&Y.hasAttribute(E)?E:f;Y.removeAttribute(G)}}}else;return W},replaceClass:function(X,W,G){return e.Dom.batch(X,e.Dom._replaceClass,{from:W,to:G})},_replaceClass:function(Y,X){var W,ab,aa,G=false,Z;if(Y&&X){ab=X.from;aa=X.to;if(!aa)G=false;else if(!ab)G=e.Dom._addClass(Y,X.to);else if(ab!==aa){Z=e.Dom._getAttribute(Y,f)||i;W=(b+Z.replace(e.Dom._getClassRegex(ab),b+aa).replace(/\s+/g,b)).split(e.Dom._getClassRegex(aa));W.splice(1,0,b+aa);
e.Dom.setAttribute(Y,f,a(W.join(i)));G=true}}else;return G},generateId:function(G,X){X=X||"yui-gen";var W=function(Y){if(Y&&Y.id)return Y.id;var Z=X+YAHOO.env._id_counter++;if(Y){if(Y[C]&&Y[C].getElementById(Z))return e.Dom.generateId(Y,Z+X);Y.id=Z}return Z};return e.Dom.batch(G,W,e.Dom,true)||W.apply(e.Dom,arguments)},isAncestor:function(W,X){W=e.Dom.get(W);X=e.Dom.get(X);var G=false;if(W&&X&&(W[K]&&X[K]))if(W.contains&&W!==X)G=W.contains(X);else{if(W.compareDocumentPosition)G=!!(W.compareDocumentPosition(X)&
16)}else;return G},inDocument:function(G,W){return e.Dom._inDoc(e.Dom.get(G),W)},_inDoc:function(W,X){var G=false;if(W&&W[c]){X=X||W[C];G=e.Dom.isAncestor(X[U],W)}else;return G},getElementsBy:function(W,af,ab,ad,X,ac,ae){af=af||"*";ab=ab?e.Dom.get(ab):null||j;var aa=ae?null:[],G;if(ab){G=ab.getElementsByTagName(af);for(var Y=0,Z=G.length;Y<Z;++Y)if(W(G[Y]))if(ae){aa=G[Y];break}else aa[aa.length]=G[Y];if(ad)e.Dom.batch(aa,ad,X,ac)}return aa},getElementBy:function(X,G,W){return e.Dom.getElementsBy(X,
G,W,null,null,null,true)},batch:function(X,ab,aa,Z){var Y=[],W=Z?aa:null;X=X&&(X[c]||X.item)?X:e.Dom.get(X);if(X&&ab){if(X[c]||X.length===undefined)return ab.call(W,X,aa);for(var G=0;G<X.length;++G)Y[Y.length]=ab.call(W||X[G],X[G],aa)}else return false;return Y},getDocumentHeight:function(){var W=j[S]!=l||h?j.body.scrollHeight:v.scrollHeight,G=Math.max(W,e.Dom.getViewportHeight());return G},getDocumentWidth:function(){var W=j[S]!=l||h?j.body.scrollWidth:v.scrollWidth,G=Math.max(W,e.Dom.getViewportWidth());
return G},getViewportHeight:function(){var G=self.innerHeight,W=j[S];if((W||s)&&!d)G=W==l?v.clientHeight:j.body.clientHeight;return G},getViewportWidth:function(){var G=self.innerWidth,W=j[S];if(W||s)G=W==l?v.clientWidth:j.body.clientWidth;return G},getAncestorBy:function(G,W){while(G=G[x])if(e.Dom._testElement(G,W))return G;return null},getAncestorByClassName:function(W,G){W=e.Dom.get(W);if(!W)return null;var X=function(Y){return e.Dom.hasClass(Y,G)};return e.Dom.getAncestorBy(W,X)},getAncestorByTagName:function(W,
G){W=e.Dom.get(W);if(!W)return null;var X=function(Y){return Y[c]&&Y[c].toUpperCase()==G.toUpperCase()};return e.Dom.getAncestorBy(W,X)},getPreviousSiblingBy:function(G,W){while(G){G=G.previousSibling;if(e.Dom._testElement(G,W))return G}return null},getPreviousSibling:function(G){G=e.Dom.get(G);if(!G)return null;return e.Dom.getPreviousSiblingBy(G)},getNextSiblingBy:function(G,W){while(G){G=G.nextSibling;if(e.Dom._testElement(G,W))return G}return null},getNextSibling:function(G){G=e.Dom.get(G);if(!G)return null;
return e.Dom.getNextSiblingBy(G)},getFirstChildBy:function(G,X){var W=e.Dom._testElement(G.firstChild,X)?G.firstChild:null;return W||e.Dom.getNextSiblingBy(G.firstChild,X)},getFirstChild:function(G,W){G=e.Dom.get(G);if(!G)return null;return e.Dom.getFirstChildBy(G)},getLastChildBy:function(G,X){if(!G)return null;var W=e.Dom._testElement(G.lastChild,X)?G.lastChild:null;return W||e.Dom.getPreviousSiblingBy(G.lastChild,X)},getLastChild:function(G){G=e.Dom.get(G);return e.Dom.getLastChildBy(G)},getChildrenBy:function(W,
Y){var X=e.Dom.getFirstChildBy(W,Y),G=X?[X]:[];e.Dom.getNextSiblingBy(X,function(Z){if(!Y||Y(Z))G[G.length]=Z;return false});return G},getChildren:function(G){G=e.Dom.get(G);if(!G);return e.Dom.getChildrenBy(G)},getDocumentScrollLeft:function(G){G=G||j;return Math.max(G[U].scrollLeft,G.body.scrollLeft)},getDocumentScrollTop:function(G){G=G||j;return Math.max(G[U].scrollTop,G.body.scrollTop)},insertBefore:function(W,G){W=e.Dom.get(W);G=e.Dom.get(G);if(!W||!G||!G[x])return null;return G[x].insertBefore(W,
G)},insertAfter:function(W,G){W=e.Dom.get(W);G=e.Dom.get(G);if(!W||!G||!G[x])return null;if(G.nextSibling)return G[x].insertBefore(W,G.nextSibling);else return G[x].appendChild(W)},getClientRegion:function(){var X=e.Dom.getDocumentScrollTop(),W=e.Dom.getDocumentScrollLeft(),Y=e.Dom.getViewportWidth()+W,G=e.Dom.getViewportHeight()+X;return new e.Region(X,Y,G,W)},setAttribute:function(W,G,X){e.Dom.batch(W,e.Dom._setAttribute,{attr:G,val:X})},_setAttribute:function(X,W){var G=e.Dom._toCamel(W.attr),
Y=W.val;if(X&&X.setAttribute)if(e.Dom.DOT_ATTRIBUTES[G]&&X.tagName&&X.tagName!="BUTTON")X[G]=Y;else{G=e.Dom.CUSTOM_ATTRIBUTES[G]||G;X.setAttribute(G,Y)}else;},getAttribute:function(W,G){return e.Dom.batch(W,e.Dom._getAttribute,G)},_getAttribute:function(W,G){var X;G=e.Dom.CUSTOM_ATTRIBUTES[G]||G;if(e.Dom.DOT_ATTRIBUTES[G])X=W[G];else if(W&&"getAttribute"in W)if(/^(?:href|src)$/.test(G))X=W.getAttribute(G,2);else X=W.getAttribute(G);else;return X},_toCamel:function(W){var X=B;function G(Y,Z){return Z.toUpperCase()}
return X[W]||(X[W]=W.indexOf("-")===-1?W:W.replace(/-([a-z])/gi,G))},_getClassRegex:function(W){var G;if(W!==undefined)if(W.exec)G=W;else{G=F[W];if(!G){W=W.replace(e.Dom._patterns.CLASS_RE_TOKENS,"\\$1");W=W.replace(/\s+/g,b);G=F[W]=new RegExp(R+W+J,t)}}return G},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(G,W){return G&&G[K]==1&&(!W||W(G))},_calcBorders:function(X,Y){var W=parseInt(e.Dom[V](X,q),10)||0,G=parseInt(e.Dom[V](X,P),10)||
0;if(g)if(m.test(X[c])){W=0;G=0}Y[0]+=G;Y[1]+=W;return Y}};var r=e.Dom[V];if(L.opera)e.Dom[V]=function(W,G){var X=r(W,G);if(w.test(G))X=e.Dom.Color.toRGB(X);return X};if(L.webkit)e.Dom[V]=function(W,G){var X=r(W,G);if(X==="rgba(0, 0, 0, 0)")X="transparent";return X};if(L.ie&&L.ie>=8)e.Dom.DOT_ATTRIBUTES.type=true})();YAHOO.util.Region=function(d,e,a,c){this.top=d;this.y=d;this[1]=d;this.right=e;this.bottom=a;this.left=c;this.x=c;this[0]=c;this.width=this.right-this.left;this.height=this.bottom-this.top};
YAHOO.util.Region.prototype.contains=function(a){return a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom};YAHOO.util.Region.prototype.getArea=function(){return(this.bottom-this.top)*(this.right-this.left)};YAHOO.util.Region.prototype.intersect=function(f){var d=Math.max(this.top,f.top),e=Math.min(this.right,f.right),a=Math.min(this.bottom,f.bottom),c=Math.max(this.left,f.left);if(a>=d&&e>=c)return new YAHOO.util.Region(d,e,a,c);else return null};
YAHOO.util.Region.prototype.union=function(f){var d=Math.min(this.top,f.top),e=Math.max(this.right,f.right),a=Math.max(this.bottom,f.bottom),c=Math.min(this.left,f.left);return new YAHOO.util.Region(d,e,a,c)};YAHOO.util.Region.prototype.toString=function(){return"Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}"};
YAHOO.util.Region.getRegion=function(e){var g=YAHOO.util.Dom.getXY(e),d=g[1],f=g[0]+e.offsetWidth,a=g[1]+e.offsetHeight,c=g[0];return new YAHOO.util.Region(d,f,a,c)};YAHOO.util.Point=function(a,b){if(YAHOO.lang.isArray(a)){b=a[1];a=a[0]}YAHOO.util.Point.superclass.constructor.call(this,b,a,b,a)};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);
(function(){var b=YAHOO.util,a="clientTop",f="clientLeft",j="parentNode",k="right",w="hasLayout",i="px",u="opacity",l="auto",d="borderLeftWidth",g="borderTopWidth",p="borderRightWidth",v="borderBottomWidth",s="visible",q="transparent",n="height",e="width",h="style",t="currentStyle",r=/^width|height$/,o=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,m={get:function(x,z){var y="",A=x[t][z];if(z===u)y=b.Dom.getStyle(x,u);else if(!A||A.indexOf&&A.indexOf(i)>-1)y=
A;else if(b.Dom.IE_COMPUTED[z])y=b.Dom.IE_COMPUTED[z](x,z);else if(o.test(A))y=b.Dom.IE.ComputedStyle.getPixel(x,z);else y=A;return y},getOffset:function(z,E){var B=z[t][E],x=E.charAt(0).toUpperCase()+E.substr(1),C="offset"+x,y="pixel"+x,A="",D;if(B==l){D=z[C];if(D===undefined)A=0;A=D;if(r.test(E)){z[h][E]=D;if(z[C]>D)A=D-(z[C]-D);z[h][E]=l}}else{if(!z[h][y]&&!z[h][E])z[h][E]=B;A=z[h][y]}return A+i},getBorderWidth:function(x,z){var y=null;if(!x[t][w])x[h].zoom=1;switch(z){case g:y=x[a];break;case v:y=
x.offsetHeight-x.clientHeight-x[a];break;case d:y=x[f];break;case p:y=x.offsetWidth-x.clientWidth-x[f];break}return y+i},getPixel:function(y,x){var A=null,B=y[t][k],z=y[t][x];y[h][k]=z;A=y[h].pixelRight;y[h][k]=B;return A+i},getMargin:function(y,x){var z;if(y[t][x]==l)z=0+i;else z=b.Dom.IE.ComputedStyle.getPixel(y,x);return z},getVisibility:function(y,x){var z;while((z=y[t])&&z[x]=="inherit")y=y[j];return z?z[x]:s},getColor:function(y,x){return b.Dom.Color.toRGB(y[t][x])||q},getBorderColor:function(y,
x){var z=y[t],A=z[x]||z.color;return b.Dom.Color.toRGB(b.Dom.Color.toHex(A))}},c={};c.top=c.right=c.bottom=c.left=c[e]=c[n]=m.getOffset;c.color=m.getColor;c[g]=c[p]=c[v]=c[d]=m.getBorderWidth;c.marginTop=c.marginRight=c.marginBottom=c.marginLeft=m.getMargin;c.visibility=m.getVisibility;c.borderColor=c.borderTopColor=c.borderRightColor=c.borderBottomColor=c.borderLeftColor=m.getBorderColor;b.Dom.IE_COMPUTED=c;b.Dom.IE_ComputedStyle=m})();
(function(){var c="toString",a=parseInt,b=RegExp,d=YAHOO.util;d.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(e){if(!d.Dom.Color.re_RGB.test(e))e=d.Dom.Color.toHex(e);
if(d.Dom.Color.re_hex.exec(e))e="rgb("+[a(b.$1,16),a(b.$2,16),a(b.$3,16)].join(", ")+")";return e},toHex:function(f){f=d.Dom.Color.KEYWORDS[f]||f;if(d.Dom.Color.re_RGB.exec(f)){f=[Number(b.$1).toString(16),Number(b.$2).toString(16),Number(b.$3).toString(16)];for(var e=0;e<f.length;e++)if(f[e].length<2)f[e]="0"+f[e];f=f.join("")}if(f.length<6)f=f.replace(d.Dom.Color.re_hex3,"$1$1");if(f!=="transparent"&&f.indexOf("#")<0)f="#"+f;return f.toUpperCase()}}})();
YAHOO.register("dom",YAHOO.util.Dom,{version:"2.9.0",build:"2800"});YAHOO.util.CustomEvent=function(d,c,b,a,e){this.type=d;this.scope=c||window;this.silent=b;this.fireOnce=e;this.fired=false;this.firedWith=null;this.signature=a||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent);var f="_YUICEOnSubscribe";if(d!==f)this.subscribeEvent=new YAHOO.util.CustomEvent(f,this,true);this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;
YAHOO.util.CustomEvent.prototype={subscribe:function(b,c,d){if(!b)throw new Error("Invalid callback for subscriber to '"+this.type+"'");if(this.subscribeEvent)this.subscribeEvent.fire(b,c,d);var a=new YAHOO.util.Subscriber(b,c,d);if(this.fireOnce&&this.fired)this.notify(a,this.firedWith);else this.subscribers.push(a)},unsubscribe:function(d,f){if(!d)return this.unsubscribeAll();var e=false;for(var b=0,a=this.subscribers.length;b<a;++b){var c=this.subscribers[b];if(c&&c.contains(d,f)){this._delete(b);
e=true}}return e},fire:function(){this.lastError=null;var h=[],a=this.subscribers.length;var d=[].slice.call(arguments,0),c=true,f,b=false;if(this.fireOnce)if(this.fired)return true;else this.firedWith=d;this.fired=true;if(!a&&this.silent)return true;if(!this.silent);var e=this.subscribers.slice();for(f=0;f<a;++f){var g=e[f];if(!g||!g.fn)b=true;else{c=this.notify(g,d);if(false===c){if(!this.silent);break}}}return c!==false},notify:function(g,c){var b,i=null,f=g.getScope(this.scope),a=YAHOO.util.Event.throwErrors;
if(!this.silent);if(this.signature==YAHOO.util.CustomEvent.FLAT){if(c.length>0)i=c[0];try{b=g.fn.call(f,i,g.obj)}catch(h){this.lastError=h;if(a)throw h;}}else try{b=g.fn.call(f,this.type,c,g.obj)}catch(d){this.lastError=d;if(a)throw d;}return b},unsubscribeAll:function(){var a=this.subscribers.length,b;for(b=a-1;b>-1;b--)this._delete(b);this.subscribers=[];return a},_delete:function(a){var b=this.subscribers[a];if(b){delete b.fn;delete b.obj}this.subscribers.splice(a,1)},toString:function(){return"CustomEvent: "+
"'"+this.type+"', "+"context: "+this.scope}};YAHOO.util.Subscriber=function(a,b,c){this.fn=a;this.obj=YAHOO.lang.isUndefined(b)?null:b;this.overrideContext=c};YAHOO.util.Subscriber.prototype.getScope=function(a){if(this.overrideContext)if(this.overrideContext===true)return this.obj;else return this.overrideContext;return a};YAHOO.util.Subscriber.prototype.contains=function(a,b){if(b)return this.fn==a&&this.obj==b;else return this.fn==a};
YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};
if(!YAHOO.util.Event){YAHOO.util.Event=function(){var g=false,h=[],j=[],a=0,e=[],b=0,c={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},d=YAHOO.env.ua.ie,f="focusin",i="focusout";return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:d,_interval:null,_dri:null,_specialTypes:{focusin:d?"focusin":"focus",focusout:d?"focusout":"blur"},DOMReady:false,throwErrors:false,
startInterval:function(){if(!this._interval)this._interval=YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true)},onAvailable:function(q,m,o,p,n){var k=YAHOO.lang.isString(q)?[q]:q;for(var l=0;l<k.length;l=l+1)e.push({id:k[l],fn:m,obj:o,overrideContext:p,checkReady:n});a=this.POLL_RETRYS;this.startInterval()},onContentReady:function(n,k,l,m){this.onAvailable(n,k,l,m,true)},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments)},_addListener:function(m,
k,v,p,t,y){if(!v||!v.call)return false;if(this._isValidCollection(m)){var w=true;for(var q=0,s=m.length;q<s;++q)w=this.on(m[q],k,v,p,t)&&w;return w}else if(YAHOO.lang.isString(m)){var o=this.getEl(m);if(o)m=o;else{this.onAvailable(m,function(){YAHOO.util.Event._addListener(m,k,v,p,t,y)});return true}}if(!m)return false;if("unload"==k&&p!==this){j[j.length]=[m,k,v,p,t];return true}var l=m;if(t)if(t===true)l=p;else l=t;var n=function(z){return v.call(l,YAHOO.util.Event.getEvent(z,m),p)};var x=[m,k,
v,n,l,p,t,y];var r=h.length;h[r]=x;try{this._simpleAdd(m,k,n,y)}catch(u){this.lastError=u;this.removeListener(m,k,v);return false}return true},_getType:function(k){return this._specialTypes[k]||k},addListener:function(m,p,l,n,o){var k=(p==f||p==i)&&!YAHOO.env.ua.ie?true:false;return this._addListener(m,this._getType(p),l,n,o,k)},addFocusListener:function(l,k,m,n){return this.on(l,f,k,m,n)},removeFocusListener:function(l,k){return this.removeListener(l,f,k)},addBlurListener:function(l,k,m,n){return this.on(l,
i,k,m,n)},removeBlurListener:function(l,k){return this.removeListener(l,i,k)},removeListener:function(l,k,r){var m,p,u;k=this._getType(k);if(typeof l=="string")l=this.getEl(l);else if(this._isValidCollection(l)){var s=true;for(m=l.length-1;m>-1;m--)s=this.removeListener(l[m],k,r)&&s;return s}if(!r||!r.call)return this.purgeElement(l,false,k);if("unload"==k){for(m=j.length-1;m>-1;m--){u=j[m];if(u&&u[0]==l&&u[1]==k&&u[2]==r){j.splice(m,1);return true}}return false}var n=null;var o=arguments[3];if("undefined"===
typeof o)o=this._getCacheIndex(h,l,k,r);if(o>=0)n=h[o];if(!l||!n)return false;var t=n[this.CAPTURE]===true?true:false;try{this._simpleRemove(l,k,n[this.WFN],t)}catch(q){this.lastError=q;return false}delete h[o][this.WFN];delete h[o][this.FN];h.splice(o,1);return true},getTarget:function(m,l){var k=m.target||m.srcElement;return this.resolveTextNode(k)},resolveTextNode:function(l){try{if(l&&3==l.nodeType)return l.parentNode}catch(k){return null}return l},getPageX:function(l){var k=l.pageX;if(!k&&0!==
k){k=l.clientX||0;if(this.isIE)k+=this._getScrollLeft()}return k},getPageY:function(k){var l=k.pageY;if(!l&&0!==l){l=k.clientY||0;if(this.isIE)l+=this._getScrollTop()}return l},getXY:function(k){return[this.getPageX(k),this.getPageY(k)]},getRelatedTarget:function(l){var k=l.relatedTarget;if(!k)if(l.type=="mouseout")k=l.toElement;else if(l.type=="mouseover")k=l.fromElement;return this.resolveTextNode(k)},getTime:function(m){if(!m.time){var l=(new Date).getTime();try{m.time=l}catch(k){this.lastError=
k;return l}}return m.time},stopEvent:function(k){this.stopPropagation(k);this.preventDefault(k)},stopPropagation:function(k){if(k.stopPropagation)k.stopPropagation();else k.cancelBubble=true},preventDefault:function(k){if(k.preventDefault)k.preventDefault();else k.returnValue=false},getEvent:function(m,k){var l=m||window.event;if(!l){var n=this.getEvent.caller;while(n){l=n.arguments[0];if(l&&Event==l.constructor)break;n=n.caller}}return l},getCharCode:function(l){var k=l.keyCode||l.charCode||0;if(YAHOO.env.ua.webkit&&
k in c)k=c[k];return k},_getCacheIndex:function(n,q,r,p){for(var o=0,m=n.length;o<m;o=o+1){var k=n[o];if(k&&k[this.FN]==p&&k[this.EL]==q&&k[this.TYPE]==r)return o}return-1},generateId:function(k){var l=k.id;if(!l){l="yuievtautoid-"+b;++b;k.id=l}return l},_isValidCollection:function(l){try{return l&&typeof l!=="string"&&l.length&&!l.tagName&&!l.alert&&typeof l[0]!=="undefined"}catch(k){return false}},elCache:{},getEl:function(k){return typeof k==="string"?document.getElementById(k):k},clearCache:function(){},
DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(l){if(!g){g=true;var k=YAHOO.util.Event;k._ready();k._tryPreloadAttach()}},_ready:function(l){var k=YAHOO.util.Event;if(!k.DOMReady){k.DOMReady=true;k.DOMReadyEvent.fire();k._simpleRemove(document,"DOMContentLoaded",k._ready)}},_tryPreloadAttach:function(){if(e.length===0){a=0;if(this._interval){this._interval.cancel();this._interval=null}return}if(this.locked)return;if(this.isIE)if(!this.DOMReady){this.startInterval();
return}this.locked=true;var q=!g;if(!q)q=a>0&&e.length>0;var p=[];var r=function(t,u){var s=t;if(u.overrideContext)if(u.overrideContext===true)s=u.obj;else s=u.overrideContext;u.fn.call(s,u.obj)};var l,k,o,n,m=[];for(l=0,k=e.length;l<k;l=l+1){o=e[l];if(o){n=this.getEl(o.id);if(n)if(o.checkReady){if(g||n.nextSibling||!q){m.push(o);e[l]=null}}else{r(n,o);e[l]=null}else p.push(o)}}for(l=0,k=m.length;l<k;l=l+1){o=m[l];r(this.getEl(o.id),o)}a--;if(q){for(l=e.length-1;l>-1;l--){o=e[l];if(!o||!o.id)e.splice(l,
1)}this.startInterval()}else if(this._interval){this._interval.cancel();this._interval=null}this.locked=false},purgeElement:function(p,q,s){var n=YAHOO.lang.isString(p)?this.getEl(p):p;var r=this.getListeners(n,s),o,k;if(r)for(o=r.length-1;o>-1;o--){var m=r[o];this.removeListener(n,m.type,m.fn)}if(q&&n&&n.childNodes)for(o=0,k=n.childNodes.length;o<k;++o)this.purgeElement(n.childNodes[o],q,s)},getListeners:function(n,k){var q=[],m;if(!k)m=[h,j];else if(k==="unload")m=[j];else{k=this._getType(k);m=
[h]}var s=YAHOO.lang.isString(n)?this.getEl(n):n;for(var p=0;p<m.length;p=p+1){var u=m[p];if(u)for(var r=0,t=u.length;r<t;++r){var o=u[r];if(o&&o[this.EL]===s&&(!k||k===o[this.TYPE]))q.push({type:o[this.TYPE],fn:o[this.FN],obj:o[this.OBJ],adjust:o[this.OVERRIDE],scope:o[this.ADJ_SCOPE],index:r})}}return q.length?q:null},_unload:function(s){var m=YAHOO.util.Event,p,o,n,r,q,t=j.slice(),k;for(p=0,r=j.length;p<r;++p){n=t[p];if(n){try{k=window;if(n[m.ADJ_SCOPE])if(n[m.ADJ_SCOPE]===true)k=n[m.UNLOAD_OBJ];
else k=n[m.ADJ_SCOPE];n[m.FN].call(k,m.getEvent(s,n[m.EL]),n[m.UNLOAD_OBJ])}catch(w){}t[p]=null}}n=null;k=null;j=null;if(h){for(o=h.length-1;o>-1;o--){n=h[o];if(n)try{m.removeListener(n[m.EL],n[m.TYPE],n[m.FN],o)}catch(v){}}n=null}try{m._simpleRemove(window,"unload",m._unload);m._simpleRemove(window,"load",m._load)}catch(u){}},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var k=document.documentElement,l=document.body;
if(k&&(k.scrollTop||k.scrollLeft))return[k.scrollTop,k.scrollLeft];else if(l)return[l.scrollTop,l.scrollLeft];else return[0,0]},regCE:function(){},_simpleAdd:function(){if(window.addEventListener)return function(m,n,l,k){m.addEventListener(n,l,k)};else if(window.attachEvent)return function(m,n,l,k){m.attachEvent("on"+n,l)};else return function(){}}(),_simpleRemove:function(){if(window.removeEventListener)return function(m,n,l,k){m.removeEventListener(n,l,k)};else if(window.detachEvent)return function(l,
m,k){l.detachEvent("on"+m,k)};else return function(){}}()}}();(function(){var a=YAHOO.util.Event;a.on=a.addListener;a.onFocus=a.addFocusListener;a.onBlur=a.addBlurListener;if(a.isIE)if(self!==self.top)document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;a._ready()}};else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var b=document.createElement("p");a._dri=setInterval(function(){try{b.doScroll("left");clearInterval(a._dri);
a._dri=null;a._ready();b=null}catch(c){}},a.POLL_INTERVAL)}else if(a.webkit&&a.webkit<525)a._dri=setInterval(function(){var c=document.readyState;if("loaded"==c||"complete"==c){clearInterval(a._dri);a._dri=null;a._ready()}},a.POLL_INTERVAL);else a._simpleAdd(document,"DOMContentLoaded",a._ready);a._simpleAdd(window,"load",a._load);a._simpleAdd(window,"unload",a._unload);a._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};
YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(a,c,f,e){this.__yui_events=this.__yui_events||{};var d=this.__yui_events[a];if(d)d.subscribe(c,f,e);else{this.__yui_subscribers=this.__yui_subscribers||{};var b=this.__yui_subscribers;if(!b[a])b[a]=[];b[a].push({fn:c,obj:f,overrideContext:e})}},unsubscribe:function(c,e,g){this.__yui_events=this.__yui_events||{};var a=this.__yui_events;if(c){var f=a[c];if(f)return f.unsubscribe(e,g)}else{var b=true;for(var d in a)if(YAHOO.lang.hasOwnProperty(a,
d))b=b&&a[d].unsubscribe(e,g);return b}return false},unsubscribeAll:function(a){return this.unsubscribe(a)},createEvent:function(b,g){this.__yui_events=this.__yui_events||{};var e=g||{},d=this.__yui_events,f;if(d[b]);else{f=new YAHOO.util.CustomEvent(b,e.scope||this,e.silent,YAHOO.util.CustomEvent.FLAT,e.fireOnce);d[b]=f;if(e.onSubscribeCallback)f.subscribeEvent.subscribe(e.onSubscribeCallback);this.__yui_subscribers=this.__yui_subscribers||{};var a=this.__yui_subscribers[b];if(a)for(var c=0;c<a.length;++c)f.subscribe(a[c].fn,
a[c].obj,a[c].overrideContext)}return d[b]},fireEvent:function(b){this.__yui_events=this.__yui_events||{};var d=this.__yui_events[b];if(!d)return null;var a=[];for(var c=1;c<arguments.length;++c)a.push(arguments[c]);return d.fire.apply(d,a)},hasEvent:function(a){if(this.__yui_events)if(this.__yui_events[a])return true;return false}};
(function(){var a=YAHOO.util.Event,c=YAHOO.lang;YAHOO.util.KeyListener=function(d,i,e,f){if(!d);else if(!i);else if(!e);if(!f)f=YAHOO.util.KeyListener.KEYDOWN;var g=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(c.isString(d))d=document.getElementById(d);if(c.isFunction(e))g.subscribe(e);else g.subscribe(e.fn,e.scope,e.correctScope);function h(o,n){if(!i.shift)i.shift=false;if(!i.alt)i.alt=
false;if(!i.ctrl)i.ctrl=false;if(o.shiftKey==i.shift&&o.altKey==i.alt&&o.ctrlKey==i.ctrl){var j,m=i.keys,l;if(YAHOO.lang.isArray(m))for(var k=0;k<m.length;k++){j=m[k];l=a.getCharCode(o);if(j==l){g.fire(l,o);break}}else{l=a.getCharCode(o);if(m==l)g.fire(l,o)}}}this.enable=function(){if(!this.enabled){a.on(d,f,h);this.enabledEvent.fire(i)}this.enabled=true};this.disable=function(){if(this.enabled){a.removeListener(d,f,h);this.disabledEvent.fire(i)}this.enabled=false};this.toString=function(){return"KeyListener ["+
i.keys+"] "+d.tagName+(d.id?"["+d.id+"]":"")}};var b=YAHOO.util.KeyListener;b.KEYDOWN="keydown";b.KEYUP="keyup";b.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.9.0",build:"2800"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.9.0",build:"2800"});(function(){var d=YAHOO.util.Dom,b=YAHOO.util.Event,f=YAHOO.lang,e=YAHOO.widget;YAHOO.widget.TreeView=function(h,g){if(h)this.init(h);if(g)this.buildTreeFromObject(g);else if(f.trim(this._el.innerHTML))this.buildTreeFromMarkup(h)};var c=e.TreeView;c.prototype={id:null,_el:null,_nodes:null,locked:false,_expandAnim:null,_collapseAnim:null,_animCount:0,maxAnim:2,_hasDblClickSubscriber:false,_dblClickTimer:null,currentFocus:null,singleNodeHighlight:false,_currentlyHighlighted:null,setExpandAnim:function(g){this._expandAnim=
e.TVAnim.isValid(g)?g:null},setCollapseAnim:function(g){this._collapseAnim=e.TVAnim.isValid(g)?g:null},animateExpand:function(i,j){if(this._expandAnim&&this._animCount<this.maxAnim){var g=this;var h=e.TVAnim.getAnim(this._expandAnim,i,function(){g.expandComplete(j)});if(h){++this._animCount;this.fireEvent("animStart",{"node":j,"type":"expand"});h.animate()}return true}return false},animateCollapse:function(i,j){if(this._collapseAnim&&this._animCount<this.maxAnim){var g=this;var h=e.TVAnim.getAnim(this._collapseAnim,
i,function(){g.collapseComplete(j)});if(h){++this._animCount;this.fireEvent("animStart",{"node":j,"type":"collapse"});h.animate()}return true}return false},expandComplete:function(g){--this._animCount;this.fireEvent("animComplete",{"node":g,"type":"expand"})},collapseComplete:function(g){--this._animCount;this.fireEvent("animComplete",{"node":g,"type":"collapse"})},init:function(i){this._el=d.get(i);this.id=d.generateId(this._el,"yui-tv-auto-id-");this.createEvent("animStart",this);this.createEvent("animComplete",
this);this.createEvent("collapse",this);this.createEvent("collapseComplete",this);this.createEvent("expand",this);this.createEvent("expandComplete",this);this.createEvent("enterKeyPressed",this);this.createEvent("clickEvent",this);this.createEvent("focusChanged",this);var g=this;this.createEvent("dblClickEvent",{scope:this,onSubscribeCallback:function(){g._hasDblClickSubscriber=true}});this.createEvent("labelClick",this);this.createEvent("highlightEvent",this);this._nodes=[];c.trees[this.id]=this;
this.root=new e.RootNode(this);var h=e.LogWriter;if(this._initEditor)this._initEditor()},buildTreeFromObject:function(g){var h=function(q,n){var m,r,l,k,p,j,o;for(m=0;m<n.length;m++){r=n[m];if(f.isString(r))l=new e.TextNode(r,q);else if(f.isObject(r)){k=r.children;delete r.children;p=r.type||"text";delete r.type;switch(f.isString(p)&&p.toLowerCase()){case "text":l=new e.TextNode(r,q);break;case "menu":l=new e.MenuNode(r,q);break;case "html":l=new e.HTMLNode(r,q);break;default:if(f.isString(p))j=e[p];
else j=p;if(f.isObject(j)){for(o=j;o&&o!==e.Node;o=o.superclass.constructor);if(o)l=new j(r,q);else;}else;}if(k)h(l,k)}else;}};if(!f.isArray(g))g=[g];h(this.root,g)},buildTreeFromMarkup:function(i){var h=function(j){var n,q,m=[],l={},k,o;for(n=d.getFirstChild(j);n;n=d.getNextSibling(n))switch(n.tagName.toUpperCase()){case "LI":k="";l={expanded:d.hasClass(n,"expanded"),title:n.title||n.alt||null,className:f.trim(n.className.replace(/\bexpanded\b/,""))||null};q=n.firstChild;if(q.nodeType==3){k=f.trim(q.nodeValue.replace(/[\n\t\r]*/g,
""));if(k){l.type="text";l.label=k}else q=d.getNextSibling(q)}if(!k)if(q.tagName.toUpperCase()=="A"){l.type="text";l.label=q.innerHTML;l.href=q.href;l.target=q.target;l.title=q.title||q.alt||l.title}else{l.type="html";var p=document.createElement("div");p.appendChild(q.cloneNode(true));l.html=p.innerHTML;l.hasIcon=true}q=d.getNextSibling(q);switch(q&&q.tagName.toUpperCase()){case "UL":case "OL":l.children=h(q);break}if(YAHOO.lang.JSON){o=n.getAttribute("yuiConfig");if(o){o=YAHOO.lang.JSON.parse(o);
l=YAHOO.lang.merge(l,o)}}m.push(l);break;case "UL":case "OL":l={type:"text",label:"",children:h(q)};m.push(l);break}return m};var g=d.getChildrenBy(d.get(i),function(k){var j=k.tagName.toUpperCase();return j=="UL"||j=="OL"});if(g.length)this.buildTreeFromObject(h(g[0]));else;},_getEventTargetTdEl:function(h){var i=b.getTarget(h);while(i&&!(i.tagName.toUpperCase()=="TD"&&d.hasClass(i.parentNode,"ygtvrow")))i=d.getAncestorByTagName(i,"td");if(f.isNull(i))return null;if(/\bygtv(blank)?depthcell/.test(i.className))return null;
if(i.id){var g=i.id.match(/\bygtv([^\d]*)(.*)/);if(g&&g[2]&&this._nodes[g[2]])return i}return null},_onClickEvent:function(j){var h=this,l=this._getEventTargetTdEl(j),i,k,g=function(m){i.focus();if(m||!i.href){i.toggle();try{b.preventDefault(j)}catch(n){}}};if(!l)return;i=this.getNodeByElement(l);if(!i)return;k=b.getTarget(j);if(d.hasClass(k,i.labelStyle)||d.getAncestorByClassName(k,i.labelStyle))this.fireEvent("labelClick",i);if(this._closeEditor)this._closeEditor(false);if(/\bygtv[tl][mp]h?h?/.test(l.className))g(true);
else if(this._dblClickTimer){window.clearTimeout(this._dblClickTimer);this._dblClickTimer=null}else if(this._hasDblClickSubscriber)this._dblClickTimer=window.setTimeout(function(){h._dblClickTimer=null;if(h.fireEvent("clickEvent",{event:j,node:i})!==false)g()},200);else if(h.fireEvent("clickEvent",{event:j,node:i})!==false)g()},_onDblClickEvent:function(g){if(!this._hasDblClickSubscriber)return;var h=this._getEventTargetTdEl(g);if(!h)return;if(!/\bygtv[tl][mp]h?h?/.test(h.className)){this.fireEvent("dblClickEvent",
{event:g,node:this.getNodeByElement(h)});if(this._dblClickTimer){window.clearTimeout(this._dblClickTimer);this._dblClickTimer=null}}},_onMouseOverEvent:function(g){var h;if((h=this._getEventTargetTdEl(g))&&(h=this.getNodeByElement(h))&&(h=h.getToggleEl()))h.className=h.className.replace(/\bygtv([lt])([mp])\b/gi,"ygtv$1$2h")},_onMouseOutEvent:function(g){var h;if((h=this._getEventTargetTdEl(g))&&(h=this.getNodeByElement(h))&&(h=h.getToggleEl()))h.className=h.className.replace(/\bygtv([lt])([mp])h\b/gi,
"ygtv$1$2")},_onKeyDownEvent:function(l){var n=b.getTarget(l),k=this.getNodeByElement(n),j=k,g=YAHOO.util.KeyListener.KEY;switch(l.keyCode){case g.UP:do if(j.previousSibling)j=j.previousSibling;else j=j.parent;while(j&&!j._canHaveFocus());if(j)j.focus();b.preventDefault(l);break;case g.DOWN:do if(j.nextSibling)j=j.nextSibling;else{j.expand();j=(j.children.length||null)&&j.children[0]}while(j&&!j._canHaveFocus);if(j)j.focus();b.preventDefault(l);break;case g.LEFT:do if(j.parent)j=j.parent;else j=j.previousSibling;
while(j&&!j._canHaveFocus());if(j)j.focus();b.preventDefault(l);break;case g.RIGHT:var i=this,m,h=function(o){i.unsubscribe("expandComplete",h);m(o)};m=function(o){do if(o.isDynamic()&&!o.childrenRendered){i.subscribe("expandComplete",h);o.expand();o=null;break}else{o.expand();if(o.children.length)o=o.children[0];else o=o.nextSibling}while(o&&!o._canHaveFocus());if(o)o.focus()};m(j);b.preventDefault(l);break;case g.ENTER:if(k.href)if(k.target)window.open(k.href,k.target);else window.location(k.href);
else k.toggle();this.fireEvent("enterKeyPressed",k);b.preventDefault(l);break;case g.HOME:j=this.getRoot();if(j.children.length)j=j.children[0];if(j._canHaveFocus())j.focus();b.preventDefault(l);break;case g.END:j=j.parent.children;j=j[j.length-1];if(j._canHaveFocus())j.focus();b.preventDefault(l);break;case 107:case 187:if(l.shiftKey)k.parent.expandAll();else k.expand();break;case 109:case 189:if(l.shiftKey)k.parent.collapseAll();else k.collapse();break;default:break}},render:function(){var g=this.root.getHtml(),
h=this.getEl();h.innerHTML=g;if(!this._hasEvents){b.on(h,"click",this._onClickEvent,this,true);b.on(h,"dblclick",this._onDblClickEvent,this,true);b.on(h,"mouseover",this._onMouseOverEvent,this,true);b.on(h,"mouseout",this._onMouseOutEvent,this,true);b.on(h,"keydown",this._onKeyDownEvent,this,true)}this._hasEvents=true},getEl:function(){if(!this._el)this._el=d.get(this.id);return this._el},regNode:function(g){this._nodes[g.index]=g},getRoot:function(){return this.root},setDynamicLoad:function(g,h){this.root.setDynamicLoad(g,
h)},expandAll:function(){if(!this.locked)this.root.expandAll()},collapseAll:function(){if(!this.locked)this.root.collapseAll()},getNodeByIndex:function(h){var g=this._nodes[h];return g?g:null},getNodeByProperty:function(j,h){for(var g in this._nodes)if(this._nodes.hasOwnProperty(g)){var k=this._nodes[g];if(j in k&&k[j]==h||k.data&&h==k.data[j])return k}return null},getNodesByProperty:function(k,j){var g=[];for(var h in this._nodes)if(this._nodes.hasOwnProperty(h)){var l=this._nodes[h];if(k in l&&
l[k]==j||l.data&&j==l.data[k])g.push(l)}return g.length?g:null},getNodesBy:function(j){var g=[];for(var h in this._nodes)if(this._nodes.hasOwnProperty(h)){var k=this._nodes[h];if(j(k))g.push(k)}return g.length?g:null},getNodeByElement:function(i){var j=i,g,h=/ygtv([^\d]*)(.*)/;do{if(j&&j.id){g=j.id.match(h);if(g&&g[2])return this.getNodeByIndex(g[2])}j=j.parentNode;if(!j||!j.tagName)break}while(j.id!==this.id&&j.tagName.toLowerCase()!=="body");return null},getHighlightedNode:function(){return this._currentlyHighlighted},
removeNode:function(h,g){if(h.isRoot())return false;var i=h.parent;if(i.parent)i=i.parent;this._deleteNode(h);if(g&&i&&i.childrenRendered)i.refresh();return true},_removeChildren_animComplete:function(g){this.unsubscribe(this._removeChildren_animComplete);this.removeChildren(g.node)},removeChildren:function(g){if(g.expanded){if(this._collapseAnim){this.subscribe("animComplete",this._removeChildren_animComplete,this,true);e.Node.prototype.collapse.call(g);return}g.collapse()}while(g.children.length)this._deleteNode(g.children[0]);
if(g.isRoot())e.Node.prototype.expand.call(g);g.childrenRendered=false;g.dynamicLoadComplete=false;g.updateIcon()},_deleteNode:function(g){this.removeChildren(g);this.popNode(g)},popNode:function(k){var l=k.parent;var h=[];for(var j=0,g=l.children.length;j<g;++j)if(l.children[j]!=k)h[h.length]=l.children[j];l.children=h;l.childrenRendered=false;if(k.previousSibling)k.previousSibling.nextSibling=k.nextSibling;if(k.nextSibling)k.nextSibling.previousSibling=k.previousSibling;if(this.currentFocus==k)this.currentFocus=
null;if(this._currentlyHighlighted==k)this._currentlyHighlighted=null;k.parent=null;k.previousSibling=null;k.nextSibling=null;k.tree=null;delete this._nodes[k.index]},destroy:function(){if(this._destroyEditor)this._destroyEditor();var h=this.getEl();b.removeListener(h,"click");b.removeListener(h,"dblclick");b.removeListener(h,"mouseover");b.removeListener(h,"mouseout");b.removeListener(h,"keydown");for(var g=0;g<this._nodes.length;g++){var j=this._nodes[g];if(j&&j.destroy)j.destroy()}h.innerHTML=
"";this._hasEvents=false},toString:function(){return"TreeView "+this.id},getNodeCount:function(){return this.getRoot().getNodeCount()},getTreeDefinition:function(){return this.getRoot().getNodeDefinition()},onExpand:function(g){},onCollapse:function(g){},setNodesProperty:function(g,i,h){this.root.setNodesProperty(g,i);if(h)this.root.refresh()},onEventToggleHighlight:function(h){var g;if("node"in h&&h.node instanceof e.Node)g=h.node;else if(h instanceof e.Node)g=h;else return false;g.toggleHighlight();
return false}};var a=c.prototype;a.draw=a.render;YAHOO.augment(c,YAHOO.util.EventProvider);c.nodeCount=0;c.trees=[];c.getTree=function(h){var g=c.trees[h];return g?g:null};c.getNode=function(h,i){var g=c.getTree(h);return g?g.getNodeByIndex(i):null};c.FOCUS_CLASS_NAME="ygtvfocus"})();
(function(){var b=YAHOO.util.Dom,c=YAHOO.lang,a=YAHOO.util.Event;YAHOO.widget.Node=function(f,e,d){if(f)this.init(f,e,d)};YAHOO.widget.Node.prototype={index:0,children:null,tree:null,data:null,parent:null,depth:-1,expanded:false,multiExpand:true,renderHidden:false,childrenRendered:false,dynamicLoadComplete:false,previousSibling:null,nextSibling:null,_dynLoad:false,dataLoader:null,isLoading:false,hasIcon:true,iconMode:0,nowrap:false,isLeaf:false,contentStyle:"",contentElId:null,enableHighlight:true,
highlightState:0,propagateHighlightUp:false,propagateHighlightDown:false,className:null,_type:"Node",init:function(g,f,d){this.data={};this.children=[];this.index=YAHOO.widget.TreeView.nodeCount;++YAHOO.widget.TreeView.nodeCount;this.contentElId="ygtvcontentel"+this.index;if(c.isObject(g))for(var e in g)if(g.hasOwnProperty(e))if(e.charAt(0)!="_"&&!c.isUndefined(this[e])&&!c.isFunction(this[e]))this[e]=g[e];else this.data[e]=g[e];if(!c.isUndefined(d))this.expanded=d;this.createEvent("parentChange",
this);if(f)f.appendChild(this)},applyParent:function(e){if(!e)return false;this.tree=e.tree;this.parent=e;this.depth=e.depth+1;this.tree.regNode(this);e.childrenRendered=false;for(var f=0,d=this.children.length;f<d;++f)this.children[f].applyParent(this);this.fireEvent("parentChange");return true},appendChild:function(e){if(this.hasChildren()){var d=this.children[this.children.length-1];d.nextSibling=e;e.previousSibling=d}this.children[this.children.length]=e;e.applyParent(this);if(this.childrenRendered&&
this.expanded)this.getChildrenEl().style.display="";return e},appendTo:function(d){return d.appendChild(this)},insertBefore:function(d){var f=d.parent;if(f){if(this.tree)this.tree.popNode(this);var e=d.isChildOf(f);f.children.splice(e,0,this);if(d.previousSibling)d.previousSibling.nextSibling=this;this.previousSibling=d.previousSibling;this.nextSibling=d;d.previousSibling=this;this.applyParent(f)}return this},insertAfter:function(d){var f=d.parent;if(f){if(this.tree)this.tree.popNode(this);var e=
d.isChildOf(f);if(!d.nextSibling){this.nextSibling=null;return this.appendTo(f)}f.children.splice(e+1,0,this);d.nextSibling.previousSibling=this;this.previousSibling=d;this.nextSibling=d.nextSibling;d.nextSibling=this;this.applyParent(f)}return this},isChildOf:function(e){if(e&&e.children)for(var f=0,d=e.children.length;f<d;++f)if(e.children[f]===this)return f;return-1},getSiblings:function(){var d=this.parent.children.slice(0);for(var e=0;e<d.length&&d[e]!=this;e++);d.splice(e,1);if(d.length)return d;
return null},showChildren:function(){if(!this.tree.animateExpand(this.getChildrenEl(),this))if(this.hasChildren())this.getChildrenEl().style.display=""},hideChildren:function(){if(!this.tree.animateCollapse(this.getChildrenEl(),this))this.getChildrenEl().style.display="none"},getElId:function(){return"ygtv"+this.index},getChildrenElId:function(){return"ygtvc"+this.index},getToggleElId:function(){return"ygtvt"+this.index},getEl:function(){return b.get(this.getElId())},getChildrenEl:function(){return b.get(this.getChildrenElId())},
getToggleEl:function(){return b.get(this.getToggleElId())},getContentEl:function(){return b.get(this.contentElId)},collapse:function(){if(!this.expanded)return;var d=this.tree.onCollapse(this);if(false===d)return;d=this.tree.fireEvent("collapse",this);if(false===d)return;if(!this.getEl())this.expanded=false;else{this.hideChildren();this.expanded=false;this.updateIcon()}d=this.tree.fireEvent("collapseComplete",this)},expand:function(f){if(this.isLoading||this.expanded&&!f)return;var d=true;if(!f){d=
this.tree.onExpand(this);if(false===d)return;d=this.tree.fireEvent("expand",this)}if(false===d)return;if(!this.getEl()){this.expanded=true;return}if(!this.childrenRendered)this.getChildrenEl().innerHTML=this.renderChildren();else;this.expanded=true;this.updateIcon();if(this.isLoading){this.expanded=false;return}if(!this.multiExpand){var g=this.getSiblings();for(var e=0;g&&e<g.length;++e)if(g[e]!=this&&g[e].expanded)g[e].collapse()}this.showChildren();d=this.tree.fireEvent("expandComplete",this)},
updateIcon:function(){if(this.hasIcon){var d=this.getToggleEl();if(d)d.className=d.className.replace(/\bygtv(([tl][pmn]h?)|(loading))\b/gi,this.getStyle())}d=b.get("ygtvtableel"+this.index);if(d)if(this.expanded)b.replaceClass(d,"ygtv-collapsed","ygtv-expanded");else b.replaceClass(d,"ygtv-expanded","ygtv-collapsed")},getStyle:function(){if(this.isLoading)return"ygtvloading";else{var e=this.nextSibling?"t":"l";var d="n";if(this.hasChildren(true)||this.isDynamic()&&!this.getIconMode())d=this.expanded?
"m":"p";return"ygtv"+e+d}},getHoverStyle:function(){var d=this.getStyle();if(this.hasChildren(true)&&!this.isLoading)d+="h";return d},expandAll:function(){var d=this.children.length;for(var e=0;e<d;++e){var f=this.children[e];if(f.isDynamic())break;else if(!f.multiExpand)break;else{f.expand();f.expandAll()}}},collapseAll:function(){for(var d=0;d<this.children.length;++d){this.children[d].collapse();this.children[d].collapseAll()}},setDynamicLoad:function(d,e){if(d){this.dataLoader=d;this._dynLoad=
true}else{this.dataLoader=null;this._dynLoad=false}if(e)this.iconMode=e},isRoot:function(){return this==this.tree.root},isDynamic:function(){if(this.isLeaf)return false;else return!this.isRoot()&&(this._dynLoad||this.tree.root._dynLoad)},getIconMode:function(){return this.iconMode||this.tree.root.iconMode},hasChildren:function(d){if(this.isLeaf)return false;else return this.children.length>0||d&&this.isDynamic()&&!this.dynamicLoadComplete},toggle:function(){if(!this.tree.locked&&(this.hasChildren(true)||
this.isDynamic()))if(this.expanded)this.collapse();else this.expand()},getHtml:function(){this.childrenRendered=false;return['<div class="ygtvitem" id="',this.getElId(),'">',this.getNodeHtml(),this.getChildrenHtml(),"</div>"].join("")},getChildrenHtml:function(){var d=[];d[d.length]='<div class="ygtvchildren" id="'+this.getChildrenElId()+'"';if(!this.expanded||!this.hasChildren())d[d.length]=' style="display:none;"';d[d.length]=">";if(this.hasChildren(true)&&this.expanded||this.renderHidden&&!this.isDynamic())d[d.length]=
this.renderChildren();d[d.length]="</div>";return d.join("")},renderChildren:function(){var d=this;if(this.isDynamic()&&!this.dynamicLoadComplete){this.isLoading=true;this.tree.locked=true;if(this.dataLoader)setTimeout(function(){d.dataLoader(d,function(){d.loadComplete()})},10);else if(this.tree.root.dataLoader)setTimeout(function(){d.tree.root.dataLoader(d,function(){d.loadComplete()})},10);else return"Error: data loader not found or not specified.";return""}else return this.completeRender()},completeRender:function(){var e=
[];for(var d=0;d<this.children.length;++d)e[e.length]=this.children[d].getHtml();this.childrenRendered=true;return e.join("")},loadComplete:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.propagateHighlightDown)if(this.highlightState===1&&!this.tree.singleNodeHighlight)for(var d=0;d<this.children.length;d++)this.children[d].highlight(true);else if(this.highlightState===0||this.tree.singleNodeHighlight)for(d=0;d<this.children.length;d++)this.children[d].unhighlight(true);this.dynamicLoadComplete=
true;this.isLoading=false;this.expand(true);this.tree.locked=false},getAncestor:function(e){if(e>=this.depth||e<0)return null;var d=this.parent;while(d.depth>e)d=d.parent;return d},getDepthStyle:function(d){return this.getAncestor(d).nextSibling?"ygtvdepthcell":"ygtvblankdepthcell"},getNodeHtml:function(){var e=[];e[e.length]='<table id="ygtvtableel'+this.index+'" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth'+this.depth;e[e.length]=" ygtv-"+(this.expanded?"expanded":"collapsed");
if(this.enableHighlight)e[e.length]=" ygtv-highlight"+this.highlightState;if(this.className)e[e.length]=" "+this.className;e[e.length]='"><tr class="ygtvrow">';for(var d=0;d<this.depth;++d)e[e.length]='<td class="ygtvcell '+this.getDepthStyle(d)+'"><div class="ygtvspacer"></div></td>';if(this.hasIcon){e[e.length]='<td id="'+this.getToggleElId();e[e.length]='" class="ygtvcell ';e[e.length]=this.getStyle();e[e.length]='"><a href="#" class="ygtvspacer">&#160;</a></td>'}e[e.length]='<td id="'+this.contentElId;
e[e.length]='" class="ygtvcell ';e[e.length]=this.contentStyle+' ygtvcontent" ';e[e.length]=this.nowrap?' nowrap="nowrap" ':"";e[e.length]=" >";e[e.length]=this.getContentHtml();e[e.length]="</td></tr></table>";return e.join("")},getContentHtml:function(){return""},refresh:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.hasIcon){var d=this.getToggleEl();if(d)d.className=d.className.replace(/\bygtv[lt][nmp]h*\b/gi,this.getStyle())}},toString:function(){return this._type+" ("+
this.index+")"},_focusHighlightedItems:[],_focusedItem:null,_canHaveFocus:function(){return this.getEl().getElementsByTagName("a").length>0},_removeFocus:function(){if(this._focusedItem){a.removeListener(this._focusedItem,"blur");this._focusedItem=null}var d;while(d=this._focusHighlightedItems.shift())b.removeClass(d,YAHOO.widget.TreeView.FOCUS_CLASS_NAME)},focus:function(){var f=false,d=this;if(this.tree.currentFocus)this.tree.currentFocus._removeFocus();var e=function(g){if(g.parent){e(g.parent);
g.parent.expand()}};e(this);b.getElementsBy(function(g){return/ygtv(([tl][pmn]h?)|(content))/.test(g.className)},"td",d.getEl().firstChild,function(h){b.addClass(h,YAHOO.widget.TreeView.FOCUS_CLASS_NAME);if(!f){var g=h.getElementsByTagName("a");if(g.length){g=g[0];g.focus();d._focusedItem=g;a.on(g,"blur",function(){d.tree.fireEvent("focusChanged",{oldNode:d.tree.currentFocus,newNode:null});d.tree.currentFocus=null;d._removeFocus()});f=true}}d._focusHighlightedItems.push(h)});if(f){this.tree.fireEvent("focusChanged",
{oldNode:this.tree.currentFocus,newNode:this});this.tree.currentFocus=this}else{this.tree.fireEvent("focusChanged",{oldNode:d.tree.currentFocus,newNode:null});this.tree.currentFocus=null;this._removeFocus()}return f},getNodeCount:function(){for(var d=0,e=0;d<this.children.length;d++)e+=this.children[d].getNodeCount();return e+1},getNodeDefinition:function(){if(this.isDynamic())return false;var g,d=c.merge(this.data),f=[];if(this.expanded)d.expanded=this.expanded;if(!this.multiExpand)d.multiExpand=
this.multiExpand;if(this.renderHidden)d.renderHidden=this.renderHidden;if(!this.hasIcon)d.hasIcon=this.hasIcon;if(this.nowrap)d.nowrap=this.nowrap;if(this.className)d.className=this.className;if(this.editable)d.editable=this.editable;if(!this.enableHighlight)d.enableHighlight=this.enableHighlight;if(this.highlightState)d.highlightState=this.highlightState;if(this.propagateHighlightUp)d.propagateHighlightUp=this.propagateHighlightUp;if(this.propagateHighlightDown)d.propagateHighlightDown=this.propagateHighlightDown;
d.type=this._type;for(var e=0;e<this.children.length;e++){g=this.children[e].getNodeDefinition();if(g===false)return false;f.push(g)}if(f.length)d.children=f;return d},getToggleLink:function(){return"return false;"},setNodesProperty:function(d,g,f){if(d.charAt(0)!="_"&&!c.isUndefined(this[d])&&!c.isFunction(this[d]))this[d]=g;else this.data[d]=g;for(var e=0;e<this.children.length;e++)this.children[e].setNodesProperty(d,g);if(f)this.refresh()},toggleHighlight:function(){if(this.enableHighlight)if(this.highlightState==
1)this.unhighlight();else this.highlight()},highlight:function(e){if(this.enableHighlight){if(this.tree.singleNodeHighlight){if(this.tree._currentlyHighlighted)this.tree._currentlyHighlighted.unhighlight(e);this.tree._currentlyHighlighted=this}this.highlightState=1;this._setHighlightClassName();if(!this.tree.singleNodeHighlight){if(this.propagateHighlightDown)for(var d=0;d<this.children.length;d++)this.children[d].highlight(true);if(this.propagateHighlightUp)if(this.parent)this.parent._childrenHighlighted()}if(!e)this.tree.fireEvent("highlightEvent",
this)}},unhighlight:function(e){if(this.enableHighlight){this.tree._currentlyHighlighted=null;this.highlightState=0;this._setHighlightClassName();if(!this.tree.singleNodeHighlight){if(this.propagateHighlightDown)for(var d=0;d<this.children.length;d++)this.children[d].unhighlight(true);if(this.propagateHighlightUp)if(this.parent)this.parent._childrenHighlighted()}if(!e)this.tree.fireEvent("highlightEvent",this)}},_childrenHighlighted:function(){var f=false,e=false;if(this.enableHighlight){for(var d=
0;d<this.children.length;d++)switch(this.children[d].highlightState){case 0:e=true;break;case 1:f=true;break;case 2:f=e=true;break}if(f&&e)this.highlightState=2;else if(f)this.highlightState=1;else this.highlightState=0;this._setHighlightClassName();if(this.propagateHighlightUp)if(this.parent)this.parent._childrenHighlighted()}},_setHighlightClassName:function(){var d=b.get("ygtvtableel"+this.index);if(d)d.className=d.className.replace(/\bygtv-highlight\d\b/gi,"ygtv-highlight"+this.highlightState)}};
YAHOO.augment(YAHOO.widget.Node,YAHOO.util.EventProvider)})();YAHOO.widget.RootNode=function(a){this.init(null,null,true);this.tree=a};
YAHOO.extend(YAHOO.widget.RootNode,YAHOO.widget.Node,{_type:"RootNode",getNodeHtml:function(){return""},toString:function(){return this._type},loadComplete:function(){this.tree.draw()},getNodeCount:function(){for(var a=0,b=0;a<this.children.length;a++)b+=this.children[a].getNodeCount();return b},getNodeDefinition:function(){for(var c,a=[],b=0;b<this.children.length;b++){c=this.children[b].getNodeDefinition();if(c===false)return false;a.push(c)}return a},collapse:function(){},expand:function(){},getSiblings:function(){return null},
focus:function(){}});
(function(){var b=YAHOO.util.Dom,c=YAHOO.lang,a=YAHOO.util.Event;YAHOO.widget.TextNode=function(f,e,d){if(f){if(c.isString(f))f={label:f};this.init(f,e,d);this.setUpLabel(f)}};YAHOO.extend(YAHOO.widget.TextNode,YAHOO.widget.Node,{labelStyle:"ygtvlabel",labelElId:null,label:null,title:null,href:null,target:"_self",_type:"TextNode",setUpLabel:function(d){if(c.isString(d))d={label:d};else if(d.style)this.labelStyle=d.style;this.label=d.label;this.labelElId="ygtvlabelel"+this.index},getLabelEl:function(){return b.get(this.labelElId)},
getContentHtml:function(){var d=[];d[d.length]=this.href?"<a":"<span";d[d.length]=' id="'+c.escapeHTML(this.labelElId)+'"';d[d.length]=' class="'+c.escapeHTML(this.labelStyle)+'"';if(this.href){d[d.length]=' href="'+c.escapeHTML(this.href)+'"';d[d.length]=' target="'+c.escapeHTML(this.target)+'"'}if(this.title)d[d.length]=' title="'+c.escapeHTML(this.title)+'"';d[d.length]=" >";d[d.length]=c.escapeHTML(this.label);d[d.length]=this.href?"</a>":"</span>";return d.join("")},getNodeDefinition:function(){var d=
YAHOO.widget.TextNode.superclass.getNodeDefinition.call(this);if(d===false)return false;d.label=this.label;if(this.labelStyle!="ygtvlabel")d.style=this.labelStyle;if(this.title)d.title=this.title;if(this.href)d.href=this.href;if(this.target!="_self")d.target=this.target;return d},toString:function(){return YAHOO.widget.TextNode.superclass.toString.call(this)+": "+this.label},onLabelClick:function(){return false},refresh:function(){YAHOO.widget.TextNode.superclass.refresh.call(this);var d=this.getLabelEl();
d.innerHTML=this.label;if(d.tagName.toUpperCase()=="A"){d.href=this.href;d.target=this.target}}})})();YAHOO.widget.MenuNode=function(c,b,a){YAHOO.widget.MenuNode.superclass.constructor.call(this,c,b,a);this.multiExpand=false};YAHOO.extend(YAHOO.widget.MenuNode,YAHOO.widget.TextNode,{_type:"MenuNode"});
(function(){var b=YAHOO.util.Dom,c=YAHOO.lang,a=YAHOO.util.Event;var d=function(h,g,f,e){if(h){this.init(h,g,f);this.initContent(h,e)}};YAHOO.widget.HTMLNode=d;YAHOO.extend(d,YAHOO.widget.Node,{contentStyle:"ygtvhtml",html:null,_type:"HTMLNode",initContent:function(f,e){this.setHtml(f);this.contentElId="ygtvcontentel"+this.index;if(!c.isUndefined(e))this.hasIcon=e},setHtml:function(f){this.html=c.isObject(f)&&"html"in f?f.html:f;var e=this.getContentEl();if(e)if(f.nodeType&&f.nodeType==1&&f.tagName)e.innerHTML=
"";else e.innerHTML=this.html},getContentHtml:function(){if(typeof this.html==="string")return this.html;else{d._deferredNodes.push(this);if(!d._timer)d._timer=window.setTimeout(function(){var e;while(e=d._deferredNodes.pop())e.getContentEl().appendChild(e.html);d._timer=null},0);return""}},getNodeDefinition:function(){var e=d.superclass.getNodeDefinition.call(this);if(e===false)return false;e.html=this.html;return e}});d._deferredNodes=[];d._timer=null})();
(function(){var b=YAHOO.util.Dom,c=YAHOO.lang,a=YAHOO.util.Event,d=YAHOO.widget.Calendar;YAHOO.widget.DateNode=function(g,f,e){YAHOO.widget.DateNode.superclass.constructor.call(this,g,f,e)};YAHOO.extend(YAHOO.widget.DateNode,YAHOO.widget.TextNode,{_type:"DateNode",calendarConfig:null,fillEditorContainer:function(g){var h,f=g.inputContainer;if(c.isUndefined(d)){b.replaceClass(g.editorPanel,"ygtv-edit-DateNode","ygtv-edit-TextNode");YAHOO.widget.DateNode.superclass.fillEditorContainer.call(this,g);
return}if(g.nodeType!=this._type){g.nodeType=this._type;g.saveOnEnter=false;g.node.destroyEditorContents(g);g.inputObject=h=new d(f.appendChild(document.createElement("div")));if(this.calendarConfig){h.cfg.applyConfig(this.calendarConfig,true);h.cfg.fireQueue()}h.selectEvent.subscribe(function(){this.tree._closeEditor(true)},this,true)}else h=g.inputObject;g.oldValue=this.label;h.cfg.setProperty("selected",this.label,false);var i=h.cfg.getProperty("DATE_FIELD_DELIMITER");var e=this.label.split(i);
h.cfg.setProperty("pagedate",e[h.cfg.getProperty("MDY_MONTH_POSITION")-1]+i+e[h.cfg.getProperty("MDY_YEAR_POSITION")-1]);h.cfg.fireQueue();h.render();h.oDomContainer.focus()},getEditorValue:function(f){if(c.isUndefined(d))return f.inputElement.value;else{var h=f.inputObject,g=h.getSelectedDates()[0],e=[];e[h.cfg.getProperty("MDY_DAY_POSITION")-1]=g.getDate();e[h.cfg.getProperty("MDY_MONTH_POSITION")-1]=g.getMonth()+1;e[h.cfg.getProperty("MDY_YEAR_POSITION")-1]=g.getFullYear();return e.join(h.cfg.getProperty("DATE_FIELD_DELIMITER"))}},
displayEditedValue:function(g,e){var f=e.node;f.label=g;f.getLabelEl().innerHTML=g},getNodeDefinition:function(){var e=YAHOO.widget.DateNode.superclass.getNodeDefinition.call(this);if(e===false)return false;if(this.calendarConfig)e.calendarConfig=this.calendarConfig;return e}})})();
(function(){var e=YAHOO.util.Dom,f=YAHOO.lang,b=YAHOO.util.Event,d=YAHOO.widget.TreeView,c=d.prototype;d.editorData={active:false,whoHasIt:null,nodeType:null,editorPanel:null,inputContainer:null,buttonsContainer:null,node:null,saveOnEnter:true,oldValue:undefined};c.validator=null;c._initEditor=function(){this.createEvent("editorSaveEvent",this);this.createEvent("editorCancelEvent",this)};c._nodeEditing=function(m){if(m.fillEditorContainer&&m.editable){var i,k,l,j,h=d.editorData;h.active=true;h.whoHasIt=
this;if(!h.nodeType){h.editorPanel=i=this.getEl().appendChild(document.createElement("div"));e.addClass(i,"ygtv-label-editor");i.tabIndex=0;l=h.buttonsContainer=i.appendChild(document.createElement("div"));e.addClass(l,"ygtv-button-container");j=l.appendChild(document.createElement("button"));e.addClass(j,"ygtvok");j.innerHTML=" ";j=l.appendChild(document.createElement("button"));e.addClass(j,"ygtvcancel");j.innerHTML=" ";b.on(l,"click",function(q){var r=b.getTarget(q),o=d.editorData,p=o.node,n=o.whoHasIt;
if(e.hasClass(r,"ygtvok")){b.stopEvent(q);n._closeEditor(true)}if(e.hasClass(r,"ygtvcancel")){b.stopEvent(q);n._closeEditor(false)}});h.inputContainer=i.appendChild(document.createElement("div"));e.addClass(h.inputContainer,"ygtv-input");b.on(i,"keydown",function(q){var p=d.editorData,n=YAHOO.util.KeyListener.KEY,o=p.whoHasIt;switch(q.keyCode){case n.ENTER:b.stopEvent(q);if(p.saveOnEnter)o._closeEditor(true);break;case n.ESCAPE:b.stopEvent(q);o._closeEditor(false);break}})}else i=h.editorPanel;h.node=
m;if(h.nodeType)e.removeClass(i,"ygtv-edit-"+h.nodeType);e.addClass(i," ygtv-edit-"+m._type);e.setStyle(i,"display","block");e.setXY(i,e.getXY(m.getContentEl()));i.focus();m.fillEditorContainer(h);return true}};c.onEventEditNode=function(h){if(h instanceof YAHOO.widget.Node)h.editNode();else if(h.node instanceof YAHOO.widget.Node)h.node.editNode();return false};c._closeEditor=function(j){var h=d.editorData,i=h.node,k=true;if(!i||!h.active)return;if(j)k=h.node.saveEditorValue(h)!==false;else this.fireEvent("editorCancelEvent",
i);if(k){e.setStyle(h.editorPanel,"display","none");h.active=false;i.focus()}};c._destroyEditor=function(){var h=d.editorData;if(h&&h.nodeType&&(!h.active||h.whoHasIt===this)){b.removeListener(h.editorPanel,"keydown");b.removeListener(h.buttonContainer,"click");h.node.destroyEditorContents(h);document.body.removeChild(h.editorPanel);h.nodeType=h.editorPanel=h.inputContainer=h.buttonsContainer=h.whoHasIt=h.node=null;h.active=false}};var g=YAHOO.widget.Node.prototype;g.editable=false;g.editNode=function(){this.tree._nodeEditing(this)};
g.fillEditorContainer=null;g.destroyEditorContents=function(h){b.purgeElement(h.inputContainer,true);h.inputContainer.innerHTML=""};g.saveEditorValue=function(h){var j=h.node,k,i=j.tree.validator;k=this.getEditorValue(h);if(f.isFunction(i)){k=i(k,h.oldValue,j);if(f.isUndefined(k))return false}if(this.tree.fireEvent("editorSaveEvent",{newValue:k,oldValue:h.oldValue,node:j})!==false)this.displayEditedValue(k,h)};g.getEditorValue=function(h){};g.displayEditedValue=function(i,h){};var a=YAHOO.widget.TextNode.prototype;
a.fillEditorContainer=function(i){var h;if(i.nodeType!=this._type){i.nodeType=this._type;i.saveOnEnter=true;i.node.destroyEditorContents(i);i.inputElement=h=i.inputContainer.appendChild(document.createElement("input"))}else h=i.inputElement;i.oldValue=this.label;h.value=this.label;h.focus();h.select()};a.getEditorValue=function(h){return h.inputElement.value};a.displayEditedValue=function(j,h){var i=h.node;i.label=j;i.getLabelEl().innerHTML=j};a.destroyEditorContents=function(h){h.inputContainer.innerHTML=
""}})();YAHOO.widget.TVAnim=function(){return{FADE_IN:"TVFadeIn",FADE_OUT:"TVFadeOut",getAnim:function(b,a,c){if(YAHOO.widget[b])return new YAHOO.widget[b](a,c);else return null},isValid:function(a){return YAHOO.widget[a]}}}();YAHOO.widget.TVFadeIn=function(a,b){this.el=a;this.callback=b};
YAHOO.widget.TVFadeIn.prototype={animate:function(){var e=this;var d=this.el.style;d.opacity=.1;d.filter="alpha(opacity=10)";d.display="";var c=.4;var b=new YAHOO.util.Anim(this.el,{opacity:{from:.1,to:1,unit:""}},c);b.onComplete.subscribe(function(){e.onComplete()});b.animate()},onComplete:function(){this.callback()},toString:function(){return"TVFadeIn"}};YAHOO.widget.TVFadeOut=function(a,b){this.el=a;this.callback=b};
YAHOO.widget.TVFadeOut.prototype={animate:function(){var d=this;var c=.4;var b=new YAHOO.util.Anim(this.el,{opacity:{from:1,to:.1,unit:""}},c);b.onComplete.subscribe(function(){d.onComplete()});b.animate()},onComplete:function(){var a=this.el.style;a.display="none";a.opacity=1;a.filter="alpha(opacity=100)";this.callback()},toString:function(){return"TVFadeOut"}};YAHOO.register("treeview",YAHOO.widget.TreeView,{version:"2.9.0",build:"2800"});(function(root,factory){if(typeof exports==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else root.ol=factory()})(this,function(){var OPENLAYERS={};var l,aa=this;function ca(a){return void 0!==a}function u(a,c,d){a=a.split(".");d=d||aa;a[0]in d||!d.execScript||d.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&ca(c)?d[e]=c:d[e]?d=d[e]:d=d[e]={}}function da(a){a.Wb=function(){return a.Mg?a.Mg:a.Mg=new a}}function ea(a){var c=
typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c}function fa(a){var c=ea(a);return"array"==c||"object"==c&&"number"==typeof a.length}function ga(a){return"string"==typeof a}function ha(a){return"number"==typeof a}function ia(a){return"function"==ea(a)}function ja(a){var c=typeof a;return"object"==c&&null!=a||"function"==c}function x(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,c,d){return a.call.apply(a.bind,arguments)}function na(a,
c,d){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return a.apply(c,d)}}return function(){return a.apply(c,arguments)}}function pa(a,c,d){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return pa.apply(null,arguments)}function qa(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=d.slice();
c.push.apply(c,arguments);return a.apply(this,c)}}function y(a,c){function d(){}d.prototype=c.prototype;a.ia=c.prototype;a.prototype=new d;a.prototype.constructor=a;a.sp=function(a,d,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return c.prototype[d].apply(a,h)}}var ra,sa;function ta(){}var ua;var va=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function wa(a){if(!xa.test(a))return a;-1!=a.indexOf("&")&&
(a=a.replace(ya,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(za,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ba,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ca,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Da,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Ea,"&#0;"));return a}var ya=/&/g,za=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,Ea=/\x00/g,xa=/[\x00&<>"']/,Fa=String.prototype.repeat?function(a,c){return a.repeat(c)}:function(a,c){return Array(c+1).join(a)};function Ga(a,c){var d=ca(c)?a.toFixed(c):String(a),e=d.indexOf(".");
-1==e&&(e=d.length);return Fa("0",Math.max(0,2-e))+d}function Ha(a,c){for(var d=0,e=va(String(a)).split("."),f=va(String(c)).split("."),g=Math.max(e.length,f.length),h=0;0==d&&h<g;h++){var k=e[h]||"",m=f[h]||"",n=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var q=n.exec(k)||["","",""],r=p.exec(m)||["","",""];if(0==q[0].length&&0==r[0].length)break;d=Ia(0==q[1].length?0:parseInt(q[1],10),0==r[1].length?0:parseInt(r[1],10))||Ia(0==q[2].length,0==r[2].length)||Ia(q[2],r[2])}while(0==d)}return d}
function Ia(a,c){return a<c?-1:a>c?1:0}function La(a,c,d){return Math.min(Math.max(a,c),d)}var Ma=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function Na(a,c,d,e,f,g){var h=f-d,k=g-e;if(0!==h||0!==k){var m=((a-d)*h+(c-e)*k)/(h*h+k*k);1<m?(d=f,e=g):0<m&&(d+=h*m,e+=k*m)}return Oa(a,c,d,e)}function Oa(a,c,d,e){a=d-a;c=e-c;return a*a+c*c}function Pa(a){return a*Math.PI/180}function Qa(a,c){var d=a%c;return 0>d*c?d+c:d}function Ra(a,c,d){return a+
d*(c-a)}function Sa(a){return function(c){if(c)return[La(c[0],a[0],a[2]),La(c[1],a[1],a[3])]}}function Ua(a){return a}function Va(a,c){return a>c?1:a<c?-1:0}function Wa(a,c){return 0<=a.indexOf(c)}function Xa(a,c,d){var e=a.length;if(a[0]<=c)return 0;if(!(c<=a[e-1]))if(0<d)for(d=1;d<e;++d){if(a[d]<c)return d-1}else if(0>d)for(d=1;d<e;++d){if(a[d]<=c)return d}else for(d=1;d<e;++d){if(a[d]==c)return d;if(a[d]<c)return a[d-1]-c<c-a[d]?d-1:d}return e-1}function Ya(a){return a.reduce(function(a,d){return Array.isArray(d)?
a.concat(Ya(d)):a.concat(d)},[])}function Za(a,c){var d,e=fa(c)?c:[c],f=e.length;for(d=0;d<f;d++)a[a.length]=e[d]}function $a(a,c){var d=a.indexOf(c),e=-1<d;e&&a.splice(d,1);return e}function ab(a,c){for(var d=a.length>>>0,e,f=0;f<d;f++)if(e=a[f],c(e,f,a))return e;return null}function bb(a,c){var d=a.length;if(d!==c.length)return!1;for(var e=0;e<d;e++)if(a[e]!==c[e])return!1;return!0}function cb(a){var c=db,d=a.length,e=Array(a.length),f;for(f=0;f<d;f++)e[f]={index:f,value:a[f]};e.sort(function(a,
d){return c(a.value,d.value)||a.index-d.index});for(f=0;f<a.length;f++)a[f]=e[f].value}function eb(a,c){var d;return a.every(function(e,f){d=f;return!c(e,f,a)})?-1:d}function fb(a){return function(c,d,e){if(void 0!==c)return c=Xa(a,c,e),c=La(c+d,0,a.length-1),a[c]}}function gb(a,c,d){return function(e,f,g){if(void 0!==e)return e=Math.max(Math.floor(Math.log(c/e)/Math.log(a)+(0<g?0:0>g?1:.5))+f,0),void 0!==d&&(e=Math.min(e,d)),c/Math.pow(a,e)}}function hb(a){if(void 0!==a)return 0}function ib(a,c){if(void 0!==
a)return a+c}function jb(a){var c=2*Math.PI/a;return function(a,e){if(void 0!==a)return a=Math.floor((a+e)/c+.5)*c}}function kb(){var a=Pa(5);return function(c,d){if(void 0!==c)return Math.abs(c+d)<=a?0:c+d}}function lb(a,c,d){this.center=a;this.resolution=c;this.rotation=d}var mb="function"===typeof Object.assign?Object.assign:function(a,c){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(a),e=1,f=arguments.length;e<f;++e){var g=arguments[e];
if(void 0!==g&&null!==g)for(var h in g)g.hasOwnProperty(h)&&(d[h]=g[h])}return d};function nb(a){for(var c in a)delete a[c]}function ob(a){var c=[],d;for(d in a)c.push(a[d]);return c}function pb(a){for(var c in a)return!1;return!c}var qb="olm_"+(1E4*Math.random()|0);function rb(a){function c(c){var e=a.listener,f=a.gg||a.target;a.ig&&sb(a);return e.call(f,c)}return a.hg=c}function tb(a,c,d,e){for(var f,g=0,h=a.length;g<h;++g)if(f=a[g],f.listener===c&&f.gg===d)return e&&(f.deleteIndex=g),f}function ub(a,
c){var d=a[qb];return d?d[c]:void 0}function vb(a){var c=a[qb];c||(c=a[qb]={});return c}function wb(a,c){var d=ub(a,c);if(d){for(var e=0,f=d.length;e<f;++e)a.removeEventListener(c,d[e].hg),nb(d[e]);d.length=0;if(d=a[qb])delete d[c],0===Object.keys(d).length&&delete a[qb]}}function C(a,c,d,e,f){var g=vb(a),h=g[c];h||(h=g[c]=[]);(g=tb(h,d,e,!1))?f||(g.ig=!1):(g={gg:e,ig:!!f,listener:d,target:a,type:c},a.addEventListener(c,rb(g)),h.push(g));return g}function xb(a,c,d,e){return C(a,c,d,e,!0)}function yb(a,
c,d,e){(a=ub(a,c))&&(d=tb(a,d,e,!0))&&sb(d)}function sb(a){if(a&&a.target){a.target.removeEventListener(a.type,a.hg);var c=ub(a.target,a.type);if(c){var d="deleteIndex"in a?a.deleteIndex:c.indexOf(a);-1!==d&&c.splice(d,1);0===c.length&&wb(a.target,a.type)}nb(a)}}function zb(a){var c=vb(a),d;for(d in c)wb(a,d)}function Ab(){}Ab.prototype.rb=!1;function Bb(a){a.rb||(a.rb=!0,a.fa())}Ab.prototype.fa=ta;function Cb(a,c){this.type=a;this.target=c||null}Cb.prototype.preventDefault=Cb.prototype.stopPropagation=
function(){this.Vn=!0};function Db(a){a.stopPropagation()}function Eb(a){a.preventDefault()}function Fb(){this.Fa={};this.va={}}y(Fb,Ab);Fb.prototype.addEventListener=function(a,c){var d=this.va[a];d||(d=this.va[a]=[]);-1===d.indexOf(c)&&d.push(c)};Fb.prototype.b=function(a){var c="string"===typeof a?new Cb(a):a;a=c.type;c.target=this;var d=this.va[a],e;if(d){a in this.Fa||(this.Fa[a]=0);for(var f=0,g=d.length;f<g;++f)if(!1===d[f].call(this,c)||c.Vn){e=!1;break}c=this.Fa[a];for(delete this.Fa[a];c--;)this.removeEventListener(a,
ta);return e}};Fb.prototype.fa=function(){zb(this)};function Gb(a,c){return c?c in a.va:0<Object.keys(a.va).length}Fb.prototype.removeEventListener=function(a,c){var d=this.va[a];if(d){var e=d.indexOf(c);a in this.Fa?(d[e]=ta,++this.Fa[a]):(d.splice(e,1),0===d.length&&delete this.va[a])}};function Hb(){Fb.call(this);this.g=0}y(Hb,Fb);function Ib(a){if(Array.isArray(a))for(var c=0,d=a.length;c<d;++c)sb(a[c]);else sb(a)}l=Hb.prototype;l.u=function(){++this.g;this.b("change")};l.K=function(){return this.g};
l.I=function(a,c,d){if(Array.isArray(a)){for(var e=a.length,f=Array(e),g=0;g<e;++g)f[g]=C(this,a[g],c,d);return f}return C(this,a,c,d)};l.L=function(a,c,d){if(Array.isArray(a)){for(var e=a.length,f=Array(e),g=0;g<e;++g)f[g]=xb(this,a[g],c,d);return f}return xb(this,a,c,d)};l.J=function(a,c,d){if(Array.isArray(a))for(var e=0,f=a.length;e<f;++e)yb(this,a[e],c,d);else yb(this,a,c,d)};l.M=Ib;function Jb(a,c,d){Cb.call(this,a);this.key=c;this.oldValue=d}y(Jb,Cb);function Kb(a){Hb.call(this);x(this);this.U=
{};void 0!==a&&this.C(a)}y(Kb,Hb);var Lb={};function Mb(a){return Lb.hasOwnProperty(a)?Lb[a]:Lb[a]="change:"+a}l=Kb.prototype;l.get=function(a){var c;this.U.hasOwnProperty(a)&&(c=this.U[a]);return c};l.O=function(){return Object.keys(this.U)};l.P=function(){return mb({},this.U)};function Nb(a,c,d){var e;e=Mb(c);a.b(new Jb(e,c,d));a.b(new Jb("propertychange",c,d))}l.set=function(a,c,d){d?this.U[a]=c:(d=this.U[a],this.U[a]=c,d!==c&&Nb(this,a,d))};l.C=function(a,c){for(var d in a)this.set(d,a[d],c)};
l.R=function(a,c){if(a in this.U){var d=this.U[a];delete this.U[a];c||Nb(this,a,d)}};function Ob(a,c,d){void 0===d&&(d=[0,0]);d[0]=a[0]+2*c;d[1]=a[1]+2*c;return d}function Pb(a,c,d){void 0===d&&(d=[0,0]);d[0]=a[0]*c+.5|0;d[1]=a[1]*c+.5|0;return d}function Qb(a,c){if(Array.isArray(a))return a;void 0===c?c=[a,a]:(c[0]=a,c[1]=a);return c}function Rb(a,c){a[0]+=c[0];a[1]+=c[1];return a}function Sb(a,c){var d=a[0],e=a[1],f=c[0],g=c[1],h=f[0],f=f[1],k=g[0],g=g[1],m=k-h,n=g-f,d=0===m&&0===n?0:(m*(d-h)+n*
(e-f))/(m*m+n*n||0);0>=d||(1<=d?(h=k,f=g):(h+=d*m,f+=d*n));return[h,f]}function Tb(a,c,d){a=Qa(a+180,360)-180;var e=Math.abs(3600*a);d=d||0;return Math.floor(e/3600)+"\u00b0 "+Ga(Math.floor(e/60%60))+"\u2032 "+Ga(e%60,d)+"\u2033 "+c.charAt(0>a?1:0)}function Ub(a,c,d){return a?c.replace("{x}",a[0].toFixed(d)).replace("{y}",a[1].toFixed(d)):""}function Vb(a,c){for(var d=!0,e=a.length-1;0<=e;--e)if(a[e]!=c[e]){d=!1;break}return d}function Wb(a,c){var d=Math.cos(c),e=Math.sin(c),f=a[1]*d+a[0]*e;a[0]=
a[0]*d-a[1]*e;a[1]=f;return a}function Xb(a,c){var d=a[0]-c[0],e=a[1]-c[1];return d*d+e*e}function Yb(a,c){return Xb(a,Sb(a,c))}function Zb(a,c){return Ub(a,"{x}, {y}",c)}function $b(a){this.length=a.length||a;for(var c=0;c<this.length;c++)this[c]=a[c]||0}$b.prototype.BYTES_PER_ELEMENT=4;$b.prototype.set=function(a,c){c=c||0;for(var d=0;d<a.length&&c+d<this.length;d++)this[c+d]=a[d]};$b.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&($b.BYTES_PER_ELEMENT=4,$b.prototype.BYTES_PER_ELEMENT=
$b.prototype.BYTES_PER_ELEMENT,$b.prototype.set=$b.prototype.set,$b.prototype.toString=$b.prototype.toString,u("Float32Array",$b,void 0));function ac(a){this.length=a.length||a;for(var c=0;c<this.length;c++)this[c]=a[c]||0}ac.prototype.BYTES_PER_ELEMENT=8;ac.prototype.set=function(a,c){c=c||0;for(var d=0;d<a.length&&c+d<this.length;d++)this[c+d]=a[d]};ac.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{ac.BYTES_PER_ELEMENT=8}catch(a){}ac.prototype.BYTES_PER_ELEMENT=
ac.prototype.BYTES_PER_ELEMENT;ac.prototype.set=ac.prototype.set;ac.prototype.toString=ac.prototype.toString;u("Float64Array",ac,void 0)}function bc(a,c,d,e,f){a[0]=c;a[1]=d;a[2]=e;a[3]=f}function cc(){var a=Array(16);dc(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return a}function ec(){var a=Array(16);dc(a,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return a}function dc(a,c,d,e,f,g,h,k,m,n,p,q,r,t,v,w,A){a[0]=c;a[1]=d;a[2]=e;a[3]=f;a[4]=g;a[5]=h;a[6]=k;a[7]=m;a[8]=n;a[9]=p;a[10]=q;a[11]=r;a[12]=t;a[13]=v;a[14]=w;a[15]=
A}function gc(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15]}function hc(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1}function ic(a,c,d){var e=a[0],f=a[1],g=a[2],h=a[3],k=a[4],m=a[5],n=a[6],p=a[7],q=a[8],r=a[9],t=a[10],v=a[11],w=a[12],A=a[13],D=a[14];a=a[15];var z=c[0],B=c[1],J=c[2],K=c[3],M=c[4],
Y=c[5],Ja=c[6],I=c[7],ba=c[8],oa=c[9],Ta=c[10],Aa=c[11],Ka=c[12],fc=c[13],uc=c[14];c=c[15];d[0]=e*z+k*B+q*J+w*K;d[1]=f*z+m*B+r*J+A*K;d[2]=g*z+n*B+t*J+D*K;d[3]=h*z+p*B+v*J+a*K;d[4]=e*M+k*Y+q*Ja+w*I;d[5]=f*M+m*Y+r*Ja+A*I;d[6]=g*M+n*Y+t*Ja+D*I;d[7]=h*M+p*Y+v*Ja+a*I;d[8]=e*ba+k*oa+q*Ta+w*Aa;d[9]=f*ba+m*oa+r*Ta+A*Aa;d[10]=g*ba+n*oa+t*Ta+D*Aa;d[11]=h*ba+p*oa+v*Ta+a*Aa;d[12]=e*Ka+k*fc+q*uc+w*c;d[13]=f*Ka+m*fc+r*uc+A*c;d[14]=g*Ka+n*fc+t*uc+D*c;d[15]=h*Ka+p*fc+v*uc+a*c}function jc(a,c){var d=a[0],e=a[1],f=
a[2],g=a[3],h=a[4],k=a[5],m=a[6],n=a[7],p=a[8],q=a[9],r=a[10],t=a[11],v=a[12],w=a[13],A=a[14],D=a[15],z=d*k-e*h,B=d*m-f*h,J=d*n-g*h,K=e*m-f*k,M=e*n-g*k,Y=f*n-g*m,Ja=p*w-q*v,I=p*A-r*v,ba=p*D-t*v,oa=q*A-r*w,Ta=q*D-t*w,Aa=r*D-t*A,Ka=z*Aa-B*Ta+J*oa+K*ba-M*I+Y*Ja;0!=Ka&&(Ka=1/Ka,c[0]=(k*Aa-m*Ta+n*oa)*Ka,c[1]=(-e*Aa+f*Ta-g*oa)*Ka,c[2]=(w*Y-A*M+D*K)*Ka,c[3]=(-q*Y+r*M-t*K)*Ka,c[4]=(-h*Aa+m*ba-n*I)*Ka,c[5]=(d*Aa-f*ba+g*I)*Ka,c[6]=(-v*Y+A*J-D*B)*Ka,c[7]=(p*Y-r*J+t*B)*Ka,c[8]=(h*Ta-k*ba+n*Ja)*Ka,c[9]=(-d*Ta+
e*ba-g*Ja)*Ka,c[10]=(v*M-w*J+D*z)*Ka,c[11]=(-p*M+q*J-t*z)*Ka,c[12]=(-h*oa+k*I-m*Ja)*Ka,c[13]=(d*oa-e*I+f*Ja)*Ka,c[14]=(-v*K+w*B-A*z)*Ka,c[15]=(p*K-q*B+r*z)*Ka)}function kc(a,c,d){var e=a[1]*c+a[5]*d+0*a[9]+a[13],f=a[2]*c+a[6]*d+0*a[10]+a[14],g=a[3]*c+a[7]*d+0*a[11]+a[15];a[12]=a[0]*c+a[4]*d+0*a[8]+a[12];a[13]=e;a[14]=f;a[15]=g}function lc(a,c,d){dc(a,a[0]*c,a[1]*c,a[2]*c,a[3]*c,a[4]*d,a[5]*d,a[6]*d,a[7]*d,1*a[8],1*a[9],1*a[10],1*a[11],a[12],a[13],a[14],a[15])}function mc(a,c){var d=a[0],e=a[1],f=
a[2],g=a[3],h=a[4],k=a[5],m=a[6],n=a[7],p=Math.cos(c),q=Math.sin(c);a[0]=d*p+h*q;a[1]=e*p+k*q;a[2]=f*p+m*q;a[3]=g*p+n*q;a[4]=d*-q+h*p;a[5]=e*-q+k*p;a[6]=f*-q+m*p;a[7]=g*-q+n*p}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function nc(a){for(var c=oc(),d=0,e=a.length;d<e;++d)pc(c,a[d]);return c}function qc(a,c,d){return d?(d[0]=a[0]-c,d[1]=a[1]-c,d[2]=a[2]+c,d[3]=a[3]+c,d):[a[0]-c,a[1]-c,a[2]+c,a[3]+c]}function rc(a,c){return c?
(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c):a.slice()}function sc(a,c,d){c=c<a[0]?a[0]-c:a[2]<c?c-a[2]:0;a=d<a[1]?a[1]-d:a[3]<d?d-a[3]:0;return c*c+a*a}function tc(a,c){return vc(a,c[0],c[1])}function wc(a,c){return a[0]<=c[0]&&c[2]<=a[2]&&a[1]<=c[1]&&c[3]<=a[3]}function vc(a,c,d){return a[0]<=c&&c<=a[2]&&a[1]<=d&&d<=a[3]}function xc(a,c){var d=a[1],e=a[2],f=a[3],g=c[0],h=c[1],k=0;g<a[0]?k=k|16:g>e&&(k=k|4);h<d?k|=8:h>f&&(k|=2);0===k&&(k=1);return k}function oc(){return[Infinity,Infinity,-Infinity,
-Infinity]}function yc(a,c,d,e,f){return f?(f[0]=a,f[1]=c,f[2]=d,f[3]=e,f):[a,c,d,e]}function zc(a,c){var d=a[0],e=a[1];return yc(d,e,d,e,c)}function Ac(a,c,d,e,f){f=yc(Infinity,Infinity,-Infinity,-Infinity,f);return Bc(f,a,c,d,e)}function Cc(a,c){return a[0]==c[0]&&a[2]==c[2]&&a[1]==c[1]&&a[3]==c[3]}function Dc(a,c){c[0]<a[0]&&(a[0]=c[0]);c[2]>a[2]&&(a[2]=c[2]);c[1]<a[1]&&(a[1]=c[1]);c[3]>a[3]&&(a[3]=c[3]);return a}function pc(a,c){c[0]<a[0]&&(a[0]=c[0]);c[0]>a[2]&&(a[2]=c[0]);c[1]<a[1]&&(a[1]=c[1]);
c[1]>a[3]&&(a[3]=c[1])}function Bc(a,c,d,e,f){for(;d<e;d+=f){var g=a,h=c[d],k=c[d+1];g[0]=Math.min(g[0],h);g[1]=Math.min(g[1],k);g[2]=Math.max(g[2],h);g[3]=Math.max(g[3],k)}return a}function Ec(a,c,d){var e;return(e=c.call(d,Fc(a)))||(e=c.call(d,Gc(a)))||(e=c.call(d,Hc(a)))?e:(e=c.call(d,Ic(a)))?e:!1}function Jc(a){var c=0;Kc(a)||(c=Lc(a)*Mc(a));return c}function Fc(a){return[a[0],a[1]]}function Gc(a){return[a[2],a[1]]}function Nc(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function Oc(a,c,d,e){var f=
c*e[0]/2;e=c*e[1]/2;c=Math.cos(d);var g=Math.sin(d);d=f*c;f*=g;c*=e;var h=e*g,k=a[0],m=a[1];a=k-d+h;e=k-d-h;g=k+d-h;d=k+d+h;var h=m-f-c,k=m-f+c,n=m+f+c,f=m+f-c;return yc(Math.min(a,e,g,d),Math.min(h,k,n,f),Math.max(a,e,g,d),Math.max(h,k,n,f),void 0)}function Mc(a){return a[3]-a[1]}function Pc(a,c,d){d=d?d:oc();Qc(a,c)&&(d[0]=a[0]>c[0]?a[0]:c[0],d[1]=a[1]>c[1]?a[1]:c[1],d[2]=a[2]<c[2]?a[2]:c[2],d[3]=a[3]<c[3]?a[3]:c[3]);return d}function Ic(a){return[a[0],a[3]]}function Hc(a){return[a[2],a[3]]}function Lc(a){return a[2]-
a[0]}function Qc(a,c){return a[0]<=c[2]&&a[2]>=c[0]&&a[1]<=c[3]&&a[3]>=c[1]}function Kc(a){return a[2]<a[0]||a[3]<a[1]}function Rc(a,c){var d=(a[2]-a[0])/2*(c-1),e=(a[3]-a[1])/2*(c-1);a[0]-=d;a[2]+=d;a[1]-=e;a[3]+=e}function Sc(a,c,d){a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];c(a,a,2);var e=[a[0],a[2],a[4],a[6]],f=[a[1],a[3],a[5],a[7]];c=Math.min.apply(null,e);a=Math.min.apply(null,f);e=Math.max.apply(null,e);f=Math.max.apply(null,f);return yc(c,a,e,f,d)}function Tc(){return!0}function Uc(){return!1}
function Vc(a){this.radius=a}Vc.prototype.a=function(a){for(var c=0,d=a.length,e=a[d-1][0],f=a[d-1][1],g=0;g<d;g++)var h=a[g][0],k=a[g][1],c=c+Pa(h-e)*(2+Math.sin(Pa(f))+Math.sin(Pa(k))),e=h,f=k;return c*this.radius*this.radius/2};Vc.prototype.b=function(a,c){var d=Pa(a[1]),e=Pa(c[1]),f=(e-d)/2,g=Pa(c[0]-a[0])/2,d=Math.sin(f)*Math.sin(f)+Math.sin(g)*Math.sin(g)*Math.cos(d)*Math.cos(e);return 2*this.radius*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))};Vc.prototype.offset=function(a,c,d){var e=Pa(a[1]);
c/=this.radius;var f=Math.asin(Math.sin(e)*Math.cos(c)+Math.cos(e)*Math.sin(c)*Math.cos(d));return[180*(Pa(a[0])+Math.atan2(Math.sin(d)*Math.sin(c)*Math.cos(e),Math.cos(c)-Math.sin(e)*Math.sin(f)))/Math.PI,180*f/Math.PI]};var Wc=new Vc(6370997);var Xc={};Xc.degrees=2*Math.PI*Wc.radius/360;Xc.ft=.3048;Xc.m=1;Xc["us-ft"]=1200/3937;function Yc(a){this.kb=a.code;this.g=a.units;this.c=void 0!==a.extent?a.extent:null;this.i=void 0!==a.worldExtent?a.worldExtent:null;this.b=void 0!==a.axisOrientation?a.axisOrientation:
"enu";this.f=void 0!==a.global?a.global:!1;this.a=!(!this.f||!this.c);this.o=void 0!==a.getPointResolution?a.getPointResolution:this.gk;this.j=null;this.l=a.metersPerUnit;var c=Zc,d=a.code,e=$c||aa.proj4;if("function"==typeof e&&void 0===c[d]){var f=e.defs(d);if(void 0!==f){void 0!==f.axis&&void 0===a.axisOrientation&&(this.b=f.axis);void 0===a.metersPerUnit&&(this.l=f.to_meter);void 0===a.units&&(this.g=f.units);for(var g in c)c=e.defs(g),void 0!==c&&(a=ad(g),c===f?bd([a,this]):(c=e(g,d),cd(a,this,
c.forward,c.inverse)))}}}l=Yc.prototype;l.Ij=function(){return this.kb};l.G=function(){return this.c};l.xm=function(){return this.g};l.Xb=function(){return this.l||Xc[this.g]};l.tk=function(){return this.i};l.dl=function(){return this.f};l.Go=function(a){this.f=a;this.a=!(!a||!this.c)};l.ym=function(a){this.c=a;this.a=!(!this.f||!a)};l.Oo=function(a){this.i=a};l.Fo=function(a){this.o=a};l.gk=function(a,c){if("degrees"==this.g)return a;var d=dd(this,ad("EPSG:4326")),e=[c[0]-a/2,c[1],c[0]+a/2,c[1],
c[0],c[1]-a/2,c[0],c[1]+a/2],e=d(e,e,2),d=Wc.b(e.slice(0,2),e.slice(2,4)),e=Wc.b(e.slice(4,6),e.slice(6,8)),e=(d+e)/2,d=this.Xb();void 0!==d&&(e/=d);return e};l.getPointResolution=function(a,c){return this.o(a,c)};var Zc={},ed={},$c=null;function bd(a){fd(a);a.forEach(function(c){a.forEach(function(a){c!==a&&gd(c,a,hd)})})}function id(){var a=jd,c=kd,d=ld;md.forEach(function(e){a.forEach(function(a){gd(e,a,c);gd(a,e,d)})})}function nd(a){Zc[a.kb]=a;gd(a,a,hd)}function fd(a){var c=[];a.forEach(function(a){c.push(nd(a))})}
function od(a){return a?"string"===typeof a?ad(a):a:ad("EPSG:3857")}function gd(a,c,d){a=a.kb;c=c.kb;a in ed||(ed[a]={});ed[a][c]=d}function cd(a,c,d,e){a=ad(a);c=ad(c);gd(a,c,pd(d));gd(c,a,pd(e))}function pd(a){return function(c,d,e){var f=c.length;e=void 0!==e?e:2;d=void 0!==d?d:Array(f);var g,h;for(h=0;h<f;h+=e)for(g=a([c[h],c[h+1]]),d[h]=g[0],d[h+1]=g[1],g=e-1;2<=g;--g)d[h+g]=c[h+g];return d}}function ad(a){var c;if(a instanceof Yc)c=a;else if("string"===typeof a){c=Zc[a];var d=$c||aa.proj4;void 0===
c&&"function"==typeof d&&void 0!==d.defs(a)&&(c=new Yc({code:a}),nd(c))}else c=null;return c}function qd(a,c){if(a===c)return!0;var d=a.g===c.g;return a.kb===c.kb?d:dd(a,c)===hd&&d}function rd(a,c){var d=ad(a),e=ad(c);return dd(d,e)}function dd(a,c){var d=a.kb,e=c.kb,f;d in ed&&e in ed[d]&&(f=ed[d][e]);void 0===f&&(f=sd);return f}function sd(a,c){if(void 0!==c&&a!==c){for(var d=0,e=a.length;d<e;++d)c[d]=a[d];a=c}return a}function hd(a,c){var d;if(void 0!==c){d=0;for(var e=a.length;d<e;++d)c[d]=a[d];
d=c}else d=a.slice();return d}function td(a,c,d){return rd(c,d)(a,void 0,a.length)}function ud(a,c,d){c=rd(c,d);return Sc(a,c)}function vd(){Kb.call(this);this.A=oc();this.B=-1;this.j={};this.s=this.o=0}y(vd,Kb);l=vd.prototype;l.xb=function(a,c){var d=c?c:[NaN,NaN];this.ub(a[0],a[1],d,Infinity);return d};l.lg=function(a){return this.yc(a[0],a[1])};l.yc=Uc;l.G=function(a){this.B!=this.g&&(this.A=this.Ld(this.A),this.B=this.g);var c=this.A;a?(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3]):a=c;return a};l.Ab=
function(a){return this.kd(a*a)};l.hb=function(a,c){this.oc(rd(a,c));return this};function wd(a,c,d,e,f,g){var h=f[0],k=f[1],m=f[4],n=f[5],p=f[12];f=f[13];for(var q=g?g:[],r=0;c<d;c+=e){var t=a[c],v=a[c+1];q[r++]=h*t+m*v+p;q[r++]=k*t+n*v+f}g&&q.length!=r&&(q.length=r);return q}function xd(){vd.call(this);this.f="XY";this.a=2;this.v=null}y(xd,vd);function yd(a){if("XY"==a)return 2;if("XYZ"==a||"XYM"==a)return 3;if("XYZM"==a)return 4}l=xd.prototype;l.yc=Uc;l.Ld=function(a){return Ac(this.v,0,this.v.length,
this.a,a)};l.Fb=function(){return this.v.slice(0,this.a)};l.ga=function(){return this.v};l.Gb=function(){return this.v.slice(this.v.length-this.a)};l.Hb=function(){return this.f};l.kd=function(a){this.s!=this.g&&(nb(this.j),this.o=0,this.s=this.g);if(0>a||0!==this.o&&a<=this.o)return this;var c=a.toString();if(this.j.hasOwnProperty(c))return this.j[c];var d=this.Hc(a);if(d.ga().length<this.v.length)return this.j[c]=d;this.o=a;return this};l.Hc=function(){return this};l.ra=function(){return this.a};
function zd(a,c,d){a.a=yd(c);a.f=c;a.v=d}function Ad(a,c,d,e){if(c)d=yd(c);else{for(c=0;c<e;++c){if(0===d.length){a.f="XY";a.a=2;return}d=d[0]}d=d.length;c=2==d?"XY":3==d?"XYZ":4==d?"XYZM":void 0}a.f=c;a.a=d}l.oc=function(a){this.v&&(a(this.v,this.v,this.a),this.u())};l.rotate=function(a,c){var d=this.ga();if(d){for(var e=d.length,f=this.ra(),g=d?d:[],h=Math.cos(a),k=Math.sin(a),m=c[0],n=c[1],p=0,q=0;q<e;q+=f){var r=d[q]-m,t=d[q+1]-n;g[p++]=m+r*h-t*k;g[p++]=n+r*k+t*h;for(r=q+2;r<q+f;++r)g[p++]=d[r]}d&&
g.length!=p&&(g.length=p);this.u()}};l.Mc=function(a,c){var d=this.ga();if(d){var e=d.length,f=this.ra(),g=d?d:[],h=0,k,m;for(k=0;k<e;k+=f)for(g[h++]=d[k]+a,g[h++]=d[k+1]+c,m=k+2;m<k+f;++m)g[h++]=d[m];d&&g.length!=h&&(g.length=h);this.u()}};function Bd(a,c,d,e){for(var f=0,g=a[d-e],h=a[d-e+1];c<d;c+=e)var k=a[c],m=a[c+1],f=f+(h*k-g*m),g=k,h=m;return f/2}function Cd(a,c,d,e){var f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],f=f+Bd(a,c,k,e);c=k}return f}function Dd(a,c,d,e,f,g,h){var k=a[c],m=a[c+
1],n=a[d]-k,p=a[d+1]-m;if(0!==n||0!==p)if(g=((f-k)*n+(g-m)*p)/(n*n+p*p),1<g)c=d;else if(0<g){for(f=0;f<e;++f)h[f]=Ra(a[c+f],a[d+f],g);h.length=e;return}for(f=0;f<e;++f)h[f]=a[c+f];h.length=e}function Ed(a,c,d,e,f){var g=a[c],h=a[c+1];for(c+=e;c<d;c+=e){var k=a[c],m=a[c+1],g=Oa(g,h,k,m);g>f&&(f=g);g=k;h=m}return f}function Fd(a,c,d,e,f){var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g];f=Ed(a,c,k,e,f);c=k}return f}function Gd(a,c,d,e,f,g,h,k,m,n,p){if(c==d)return n;var q;if(0===f){q=Oa(h,k,a[c],a[c+1]);
if(q<n){for(p=0;p<e;++p)m[p]=a[c+p];m.length=e;return q}return n}for(var r=p?p:[NaN,NaN],t=c+e;t<d;)if(Dd(a,t-e,t,e,h,k,r),q=Oa(h,k,r[0],r[1]),q<n){n=q;for(p=0;p<e;++p)m[p]=r[p];m.length=e;t+=e}else t+=e*Math.max((Math.sqrt(q)-Math.sqrt(n))/f|0,1);if(g&&(Dd(a,d-e,c,e,h,k,r),q=Oa(h,k,r[0],r[1]),q<n)){n=q;for(p=0;p<e;++p)m[p]=r[p];m.length=e}return n}function Hd(a,c,d,e,f,g,h,k,m,n,p){p=p?p:[NaN,NaN];var q,r;q=0;for(r=d.length;q<r;++q){var t=d[q];n=Gd(a,c,t,e,f,g,h,k,m,n,p);c=t}return n}function Id(a,
c){var d=0,e,f;e=0;for(f=c.length;e<f;++e)a[d++]=c[e];return d}function Jd(a,c,d,e){var f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k;for(k=0;k<e;++k)a[c++]=h[k]}return c}function Kd(a,c,d,e,f){f=f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h)c=Jd(a,c,d[h],e),f[g++]=c;f.length=g;return f}function Ld(a,c,d,e,f){f=void 0!==f?f:[];for(var g=0;c<d;c+=e)f[g++]=a.slice(c,c+e);f.length=g;return f}function Md(a,c,d,e,f){f=void 0!==f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h){var m=d[h];f[g++]=Ld(a,c,m,e,
f[g]);c=m}f.length=g;return f}function Nd(a,c,d,e,f,g,h){var k=(d-c)/e;if(3>k){for(;c<d;c+=e)g[h++]=a[c],g[h++]=a[c+1];return h}var m=Array(k);m[0]=1;m[k-1]=1;d=[c,d-e];for(var n=0,p;0<d.length;){var q=d.pop(),r=d.pop(),t=0,v=a[r],w=a[r+1],A=a[q],D=a[q+1];for(p=r+e;p<q;p+=e){var z=Na(a[p],a[p+1],v,w,A,D);z>t&&(n=p,t=z)}t>f&&(m[(n-c)/e]=1,r+e<n&&d.push(r,n),n+e<q&&d.push(n,q))}for(p=0;p<k;++p)m[p]&&(g[h++]=a[c+p*e],g[h++]=a[c+p*e+1]);return h}function Od(a,c,d,e,f,g,h,k){var m,n;m=0;for(n=d.length;m<
n;++m){var p=d[m];a:{var q=a,r=p,t=e,v=f,w=g;if(c!=r){var A=v*Math.round(q[c]/v),D=v*Math.round(q[c+1]/v);c+=t;w[h++]=A;w[h++]=D;var z=void 0,B=void 0;do if(z=v*Math.round(q[c]/v),B=v*Math.round(q[c+1]/v),c+=t,c==r){w[h++]=z;w[h++]=B;break a}while(z==A&&B==D);for(;c<r;){var J,K;J=v*Math.round(q[c]/v);K=v*Math.round(q[c+1]/v);c+=t;if(J!=z||K!=B){var M=z-A,Y=B-D,Ja=J-A,I=K-D;M*I==Y*Ja&&(0>M&&Ja<M||M==Ja||0<M&&Ja>M)&&(0>Y&&I<Y||Y==I||0<Y&&I>Y)||(w[h++]=z,w[h++]=B,A=z,D=B);z=J;B=K}}w[h++]=z;w[h++]=B}}k.push(h);
c=p}return h}function Pd(a,c){xd.call(this);this.i=this.l=-1;this.ma(a,c)}y(Pd,xd);l=Pd.prototype;l.clone=function(){var a=new Pd(null);Qd(a,this.f,this.v.slice());return a};l.ub=function(a,c,d,e){if(e<sc(this.G(),a,c))return e;this.i!=this.g&&(this.l=Math.sqrt(Ed(this.v,0,this.v.length,this.a,0)),this.i=this.g);return Gd(this.v,0,this.v.length,this.a,this.l,!0,a,c,d,e)};l.Zl=function(){return Bd(this.v,0,this.v.length,this.a)};l.Z=function(){return Ld(this.v,0,this.v.length,this.a)};l.Hc=function(a){var c=
[];c.length=Nd(this.v,0,this.v.length,this.a,a,c,0);a=new Pd(null);Qd(a,"XY",c);return a};l.X=function(){return"LinearRing"};l.ma=function(a,c){a?(Ad(this,c,a,1),this.v||(this.v=[]),this.v.length=Jd(this.v,0,a,this.a),this.u()):Qd(this,"XY",null)};function Qd(a,c,d){zd(a,c,d);a.u()}function E(a,c){xd.call(this);this.ma(a,c)}y(E,xd);l=E.prototype;l.clone=function(){var a=new E(null);a.ba(this.f,this.v.slice());return a};l.ub=function(a,c,d,e){var f=this.v;a=Oa(a,c,f[0],f[1]);if(a<e){e=this.a;for(c=
0;c<e;++c)d[c]=f[c];d.length=e;return a}return e};l.Z=function(){return this.v?this.v.slice():[]};l.Ld=function(a){return zc(this.v,a)};l.X=function(){return"Point"};l.Ka=function(a){return vc(a,this.v[0],this.v[1])};l.ma=function(a,c){a?(Ad(this,c,a,0),this.v||(this.v=[]),this.v.length=Id(this.v,a),this.u()):this.ba("XY",null)};l.ba=function(a,c){zd(this,a,c);this.u()};function Rd(a,c,d,e,f){return!Ec(f,function(f){return!Sd(a,c,d,e,f[0],f[1])})}function Sd(a,c,d,e,f,g){for(var h=!1,k=a[d-e],m=a[d-
e+1];c<d;c+=e){var n=a[c],p=a[c+1];m>g!=p>g&&f<(n-k)*(g-m)/(p-m)+k&&(h=!h);k=n;m=p}return h}function Td(a,c,d,e,f,g){if(0===d.length||!Sd(a,c,d[0],e,f,g))return!1;var h;c=1;for(h=d.length;c<h;++c)if(Sd(a,d[c-1],d[c],e,f,g))return!1;return!0}function Ud(a,c,d,e,f,g,h){var k,m,n,p,q,r=f[g+1],t=[],v=d[0];n=a[v-e];q=a[v-e+1];for(k=c;k<v;k+=e){p=a[k];m=a[k+1];if(r<=q&&m<=r||q<=r&&r<=m)n=(r-q)/(m-q)*(p-n)+n,t.push(n);n=p;q=m}v=NaN;q=-Infinity;t.sort(Va);n=t[0];k=1;for(m=t.length;k<m;++k){p=t[k];var w=Math.abs(p-
n);w>q&&(n=(n+p)/2,Td(a,c,d,e,n,r)&&(v=n,q=w));n=p}isNaN(v)&&(v=f[g]);return h?(h.push(v,r),h):[v,r]}function Vd(a,c,d,e,f,g){for(var h=[a[c],a[c+1]],k=[],m;c+e<d;c+=e){k[0]=a[c+e];k[1]=a[c+e+1];if(m=f.call(g,h,k))return m;h[0]=k[0];h[1]=k[1]}return!1}function Wd(a,c,d,e,f){var g=Bc(oc(),a,c,d,e);return Qc(f,g)?wc(f,g)||g[0]>=f[0]&&g[2]<=f[2]||g[1]>=f[1]&&g[3]<=f[3]?!0:Vd(a,c,d,e,function(a,c){var d=!1,e=xc(f,a),g=xc(f,c);if(1===e||1===g)d=!0;else{var q=f[0],r=f[1],t=f[2],v=f[3],w=c[0],A=c[1],D=(A-
a[1])/(w-a[0]);g&2&&!(e&2)&&(d=w-(A-v)/D,d=d>=q&&d<=t);d||!(g&4)||e&4||(d=A-(w-t)*D,d=d>=r&&d<=v);d||!(g&8)||e&8||(d=w-(A-r)/D,d=d>=q&&d<=t);d||!(g&16)||e&16||(d=A-(w-q)*D,d=d>=r&&d<=v)}return d}):!1}function Xd(a,c,d,e,f){var g=d[0];if(!(Wd(a,c,g,e,f)||Sd(a,c,g,e,f[0],f[1])||Sd(a,c,g,e,f[0],f[3])||Sd(a,c,g,e,f[2],f[1])||Sd(a,c,g,e,f[2],f[3])))return!1;if(1===d.length)return!0;c=1;for(g=d.length;c<g;++c)if(Rd(a,d[c-1],d[c],e,f))return!1;return!0}function Yd(a,c,d,e){for(var f=0,g=a[d-e],h=a[d-e+1];c<
d;c+=e)var k=a[c],m=a[c+1],f=f+(k-g)*(m+h),g=k,h=m;return 0<f}function Zd(a,c,d,e){var f=0;e=void 0!==e?e:!1;var g,h;g=0;for(h=c.length;g<h;++g){var k=c[g],f=Yd(a,f,k,d);if(0===g){if(e&&f||!e&&!f)return!1}else if(e&&!f||!e&&f)return!1;f=k}return!0}function $d(a,c,d,e,f){f=void 0!==f?f:!1;var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],m=Yd(a,c,k,e);if(0===g?f&&m||!f&&!m:f&&!m||!f&&m)for(var m=a,n=k,p=e;c<n-p;){var q;for(q=0;q<p;++q){var r=m[c+q];m[c+q]=m[n-p+q];m[n-p+q]=r}c+=p;n-=p}c=k}return c}function ae(a,
c,d,e){var f=0,g,h;g=0;for(h=c.length;g<h;++g)f=$d(a,f,c[g],d,e);return f}function F(a,c){xd.call(this);this.i=[];this.N=-1;this.H=null;this.T=this.D=this.S=-1;this.l=null;this.ma(a,c)}y(F,xd);l=F.prototype;l.pj=function(a){this.v?Za(this.v,a.ga()):this.v=a.ga().slice();this.i.push(this.v.length);this.u()};l.clone=function(){var a=new F(null);a.ba(this.f,this.v.slice(),this.i.slice());return a};l.ub=function(a,c,d,e){if(e<sc(this.G(),a,c))return e;this.D!=this.g&&(this.S=Math.sqrt(Fd(this.v,0,this.i,
this.a,0)),this.D=this.g);return Hd(this.v,0,this.i,this.a,this.S,!0,a,c,d,e)};l.yc=function(a,c){return Td(this.Mb(),0,this.i,this.a,a,c)};l.bm=function(){return Cd(this.Mb(),0,this.i,this.a)};l.Z=function(a){var c;void 0!==a?(c=this.Mb().slice(),$d(c,0,this.i,this.a,a)):c=this.v;return Md(c,0,this.i,this.a)};l.Bb=function(){return this.i};function be(a){if(a.N!=a.g){var c=Nc(a.G());a.H=Ud(a.Mb(),0,a.i,a.a,c,0);a.N=a.g}return a.H}l.Rj=function(){return new E(be(this))};l.Wj=function(){return this.i.length};
l.Ag=function(a){if(0>a||this.i.length<=a)return null;var c=new Pd(null);Qd(c,this.f,this.v.slice(0===a?0:this.i[a-1],this.i[a]));return c};l.Qd=function(){var a=this.f,c=this.v,d=this.i,e=[],f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],m=new Pd(null);Qd(m,a,c.slice(f,k));e.push(m);f=k}return e};l.Mb=function(){if(this.T!=this.g){var a=this.v;Zd(a,this.i,this.a)?this.l=a:(this.l=a.slice(),this.l.length=$d(this.l,0,this.i,this.a));this.T=this.g}return this.l};l.Hc=function(a){var c=[],d=[];c.length=
Od(this.v,0,this.i,this.a,Math.sqrt(a),c,0,d);a=new F(null);a.ba("XY",c,d);return a};l.X=function(){return"Polygon"};l.Ka=function(a){return Xd(this.Mb(),0,this.i,this.a,a)};l.ma=function(a,c){if(a){Ad(this,c,a,2);this.v||(this.v=[]);var d=Kd(this.v,0,a,this.a,this.i);this.v.length=0===d.length?0:d[d.length-1];this.u()}else this.ba("XY",null,this.i)};l.ba=function(a,c,d){zd(this,a,c);this.i=d;this.u()};function ce(a,c,d,e){var f=e?e:32;e=[];var g;for(g=0;g<f;++g)Za(e,a.offset(c,d,2*Math.PI*g/f));
e.push(e[0],e[1]);a=new F(null);a.ba("XY",e,[e.length]);return a}function de(a){var c=a[0],d=a[1],e=a[2];a=a[3];c=[c,d,c,a,e,a,e,d,c,d];d=new F(null);d.ba("XY",c,[c.length]);return d}function ee(a,c,d){var e=c?c:32,f=a.ra();c=a.f;for(var g=new F(null,c),e=f*(e+1),f=Array(e),h=0;h<e;h++)f[h]=0;g.ba(c,f,[f.length]);fe(g,a.od(),a.qf(),d);return g}function fe(a,c,d,e){var f=a.ga(),g=a.f,h=a.ra(),k=a.Bb(),m=f.length/h-1;e=e?e:0;for(var n,p,q=0;q<=m;++q)p=q*h,n=e+2*Qa(q,m)*Math.PI/m,f[p]=c[0]+d*Math.cos(n),
f[p+1]=c[1]+d*Math.sin(n);a.ba(g,f,k)}function ge(a){Kb.call(this);a=a||{};this.f=[0,0];var c={};c.center=void 0!==a.center?a.center:null;this.i=od(a.projection);var d,e,f,g=void 0!==a.minZoom?a.minZoom:0;d=void 0!==a.maxZoom?a.maxZoom:28;var h=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions)d=a.resolutions,e=d[0],f=d[d.length-1],d=fb(d);else{e=od(a.projection);f=e.G();var k=(f?Math.max(Lc(f),Mc(f)):360*Xc.degrees/e.Xb())/256/Math.pow(2,0),m=k/Math.pow(2,28);e=a.maxResolution;void 0!==
e?g=0:e=k/Math.pow(h,g);f=a.minResolution;void 0===f&&(f=void 0!==a.maxZoom?void 0!==a.maxResolution?e/Math.pow(h,d):k/Math.pow(h,d):m);d=g+Math.floor(Math.log(e/f)/Math.log(h));f=e/Math.pow(h,d-g);d=gb(h,e,d-g)}this.a=e;this.o=f;this.c=g;g=void 0!==a.extent?Sa(a.extent):Ua;(void 0!==a.enableRotation?a.enableRotation:1)?(e=a.constrainRotation,e=void 0===e||!0===e?kb():!1===e?ib:ha(e)?jb(e):ib):e=hb;this.j=new lb(g,d,e);void 0!==a.resolution?c.resolution=a.resolution:void 0!==a.zoom&&(c.resolution=
this.constrainResolution(this.a,a.zoom-this.c));c.rotation=void 0!==a.rotation?a.rotation:0;this.C(c)}y(ge,Kb);l=ge.prototype;l.Md=function(a){return this.j.center(a)};l.constrainResolution=function(a,c,d){return this.j.resolution(a,c||0,d||0)};l.constrainRotation=function(a,c){return this.j.rotation(a,c||0)};l.bb=function(){return this.get("center")};l.Gc=function(a){var c=this.bb(),d=this.$(),e=this.Ma();return Oc(c,d,e,a)};l.Jl=function(){return this.i};l.$=function(){return this.get("resolution")};
function he(a,c){return Math.max(Lc(a)/c[0],Mc(a)/c[1])}function ie(a){var c=a.a,d=Math.log(c/a.o)/Math.log(2);return function(a){return c/Math.pow(2,a*d)}}l.Ma=function(){return this.get("rotation")};function je(a){var c=a.a,d=Math.log(c/a.o)/Math.log(2);return function(a){return Math.log(c/a)/Math.log(2)/d}}l.V=function(){var a=this.bb(),c=this.i,d=this.$(),e=this.Ma();return{center:[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d],projection:void 0!==c?c:null,resolution:d,rotation:e}};l.uk=function(){var a,
c=this.$();if(void 0!==c){var d,e=0;do{d=this.constrainResolution(this.a,e);if(d==c){a=e;break}++e}while(d>this.o)}return void 0!==a?this.c+a:a};l.Xe=function(a,c,d){a instanceof xd||(a=de(a));var e=d||{};d=void 0!==e.padding?e.padding:[0,0,0,0];var f=void 0!==e.constrainResolution?e.constrainResolution:!0,g=void 0!==e.nearest?e.nearest:!1,h;void 0!==e.minResolution?h=e.minResolution:void 0!==e.maxZoom?h=this.constrainResolution(this.a,e.maxZoom-this.c,0):h=0;var k=a.ga(),m=this.Ma(),e=Math.cos(-m),
m=Math.sin(-m),n=Infinity,p=Infinity,q=-Infinity,r=-Infinity;a=a.ra();for(var t=0,v=k.length;t<v;t+=a)var w=k[t]*e-k[t+1]*m,A=k[t]*m+k[t+1]*e,n=Math.min(n,w),p=Math.min(p,A),q=Math.max(q,w),r=Math.max(r,A);c=he([n,p,q,r],[c[0]-d[1]-d[3],c[1]-d[0]-d[2]]);c=isNaN(c)?h:Math.max(c,h);f&&(h=this.constrainResolution(c,0,0),!g&&h<c&&(h=this.constrainResolution(h,-1,0)),c=h);this.Sb(c);m=-m;g=(n+q)/2+(d[1]-d[3])/2*c;d=(p+r)/2+(d[0]-d[2])/2*c;this.lb([g*e-d*m,d*e+g*m])};l.vj=function(a,c,d){var e=this.Ma(),
f=Math.cos(-e),e=Math.sin(-e),g=a[0]*f-a[1]*e;a=a[1]*f+a[0]*e;var h=this.$(),g=g+(c[0]/2-d[0])*h;a+=(d[1]-c[1]/2)*h;e=-e;this.lb([g*f-a*e,a*f+g*e])};function ke(a){return!!a.bb()&&void 0!==a.$()}l.rotate=function(a,c){if(void 0!==c){var d,e=this.bb();void 0!==e&&(d=[e[0]-c[0],e[1]-c[1]],Wb(d,a-this.Ma()),Rb(d,c));this.lb(d)}this.ee(a)};l.lb=function(a){this.set("center",a)};function le(a,c){a.f[1]+=c}l.Sb=function(a){this.set("resolution",a)};l.ee=function(a){this.set("rotation",a)};l.Po=function(a){a=
this.constrainResolution(this.a,a-this.c,0);this.Sb(a)};function me(a){return Math.pow(a,3)}function ne(a){return 1-me(1-a)}function oe(a){return 3*a*a-2*a*a*a}function pe(a){return a}function qe(a){return.5>a?oe(2*a):1-oe(2*(a-.5))}function re(a){var c=a.source,d=a.start?a.start:Date.now(),e=c[0],f=c[1],g=void 0!==a.duration?a.duration:1E3,h=a.easing?a.easing:oe;return function(a,c){if(c.time<d)return c.animate=!0,c.viewHints[0]+=1,!0;if(c.time<d+g){var n=1-h((c.time-d)/g),p=e-c.viewState.center[0],
q=f-c.viewState.center[1];c.animate=!0;c.viewState.center[0]+=n*p;c.viewState.center[1]+=n*q;c.viewHints[0]+=1;return!0}return!1}}function se(a){var c=a.rotation?a.rotation:0,d=a.start?a.start:Date.now(),e=void 0!==a.duration?a.duration:1E3,f=a.easing?a.easing:oe,g=a.anchor?a.anchor:null;return function(a,k){if(k.time<d)return k.animate=!0,k.viewHints[0]+=1,!0;if(k.time<d+e){var m=1-f((k.time-d)/e),m=(c-k.viewState.rotation)*m;k.animate=!0;k.viewState.rotation+=m;if(g){var n=k.viewState.center;n[0]-=
g[0];n[1]-=g[1];Wb(n,m);Rb(n,g)}k.viewHints[0]+=1;return!0}return!1}}function te(a){var c=a.resolution,d=a.start?a.start:Date.now(),e=void 0!==a.duration?a.duration:1E3,f=a.easing?a.easing:oe;return function(a,h){if(h.time<d)return h.animate=!0,h.viewHints[0]+=1,!0;if(h.time<d+e){var k=1-f((h.time-d)/e),m=c-h.viewState.resolution;h.animate=!0;h.viewState.resolution+=k*m;h.viewHints[0]+=1;return!0}return!1}}function ue(a,c,d,e){return void 0!==e?(e[0]=a,e[1]=c,e[2]=d,e):[a,c,d]}function ve(a){var c=
a[0],d=Array(c),e=1<<c-1,f,g;for(f=0;f<c;++f)g=48,a[1]&e&&(g+=1),a[2]&e&&(g+=2),d[f]=String.fromCharCode(g),e>>=1;return d.join("")}function we(a,c,d,e){this.ua=a;this.wa=c;this.za=d;this.Ba=e}we.prototype.contains=function(a){return xe(this,a[1],a[2])};function xe(a,c,d){return a.ua<=c&&c<=a.wa&&a.za<=d&&d<=a.Ba}function ye(a,c){return a.ua==c.ua&&a.za==c.za&&a.wa==c.wa&&a.Ba==c.Ba}function ze(a,c){return a.ua<=c.wa&&a.wa>=c.ua&&a.za<=c.Ba&&a.Ba>=c.za}function Ae(a){this.a=a.html;this.b=a.tileRanges?
a.tileRanges:null}Ae.prototype.g=function(){return this.a};function Be(a,c,d){Cb.call(this,a,d);this.element=c}y(Be,Cb);function De(a){Kb.call(this);this.a=a?a:[];Ee(this)}y(De,Kb);l=De.prototype;l.clear=function(){for(;0<this.Zb();)this.pop()};l.jf=function(a){var c,d;c=0;for(d=a.length;c<d;++c)this.push(a[c]);return this};l.forEach=function(a,c){this.a.forEach(a,c)};l.ul=function(){return this.a};l.item=function(a){return this.a[a]};l.Zb=function(){return this.get("length")};l.Zd=function(a,c){this.a.splice(a,
0,c);Ee(this);this.b(new Be("add",c,this))};l.pop=function(){return this.Lf(this.Zb()-1)};l.push=function(a){var c=this.a.length;this.Zd(c,a);return c};l.remove=function(a){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)if(c[d]===a)return this.Lf(d)};l.Lf=function(a){var c=this.a[a];this.a.splice(a,1);Ee(this);this.b(new Be("remove",c,this));return c};l.Co=function(a,c){var d=this.Zb();if(a<d)d=this.a[a],this.a[a]=c,this.b(new Be("remove",d,this)),this.b(new Be("add",c,this));else{for(;d<a;++d)this.Zd(d,
void 0);this.Zd(a,c)}};function Ee(a){a.set("length",a.a.length)}var Fe=Array.prototype.forEach?function(a,c,d){Array.prototype.forEach.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=ga(a)?a.split(""):a,g=0;g<e;g++)g in f&&c.call(d,f[g],g,a)};function Ge(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function He(a){var c=a.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=a[e];return d}return[]}function Ie(a,c,d){return 2>=arguments.length?Array.prototype.slice.call(a,c):Array.prototype.slice.call(a,
c,d)}var Je=/^#(?:[0-9a-f]{3}){1,2}$/i,Ke=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,Le=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;function Me(a){return Array.isArray(a)?a:Ne(a)}function Oe(a){if("string"!==typeof a){var c=a[0];c!=(c|0)&&(c=c+.5|0);var d=a[1];d!=(d|0)&&(d=d+.5|0);var e=a[2];e!=(e|0)&&(e=e+.5|0);a="rgba("+c+","+d+","+e+","+(void 0===a[3]?1:a[3])+")"}return a}var Ne=function(){var a={},c=0;return function(d){var e;
if(a.hasOwnProperty(d))e=a[d];else{if(1024<=c){e=0;for(var f in a)0===(e++&3)&&(delete a[f],--c)}var g,h;Je.exec(d)?(h=3==d.length-1?1:2,e=parseInt(d.substr(1+0*h,h),16),f=parseInt(d.substr(1+1*h,h),16),g=parseInt(d.substr(1+2*h,h),16),1==h&&(e=(e<<4)+e,f=(f<<4)+f,g=(g<<4)+g),e=[e,f,g,1]):(h=Le.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),h=Number(h[4]),e=[e,f,g,h],e=Pe(e,e)):(h=Ke.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),e=[e,f,g,1],e=Pe(e,e)):e=void 0;a[d]=e;++c}return e}}();
function Pe(a,c){var d=c||[];d[0]=La(a[0]+.5|0,0,255);d[1]=La(a[1]+.5|0,0,255);d[2]=La(a[2]+.5|0,0,255);d[3]=La(a[3],0,1);return d}function Qe(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:Oe(a)}var Re;a:{var Se=aa.navigator;if(Se){var Te=Se.userAgent;if(Te){Re=Te;break a}}Re=""}function Ue(a){return-1!=Re.indexOf(a)}function Ve(a,c){for(var d in a)c.call(void 0,a[d],d,a)}var We="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Xe(a,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)a[d]=e[d];for(var g=0;g<We.length;g++)d=We[g],Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}}var Ye=Ue("Opera")||Ue("OPR"),Ze=Ue("Trident")||Ue("MSIE"),$e=Ue("Edge"),af=Ue("Gecko")&&!(-1!=Re.toLowerCase().indexOf("webkit")&&!Ue("Edge"))&&!(Ue("Trident")||Ue("MSIE"))&&!Ue("Edge"),bf=-1!=Re.toLowerCase().indexOf("webkit")&&!Ue("Edge");function cf(){var a=aa.document;return a?a.documentMode:void 0}var df;a:{var ef=
"",ff=function(){var a=Re;if(af)return/rv\:([^\);]+)(\)|;)/.exec(a);if($e)return/Edge\/([\d\.]+)/.exec(a);if(Ze)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(bf)return/WebKit\/(\S+)/.exec(a);if(Ye)return/(?:Version)[ \/]?(\S+)/.exec(a)}();ff&&(ef=ff?ff[1]:"");if(Ze){var gf=cf();if(null!=gf&&gf>parseFloat(ef)){df=String(gf);break a}}df=ef}var hf={};function jf(a){return hf[a]||(hf[a]=0<=Ha(df,a))}var kf=aa.document,lf=kf&&Ze?cf()||("CSS1Compat"==kf.compatMode?parseInt(df,10):5):void 0;var mf=
!Ze||9<=Number(lf);!af&&!Ze||Ze&&9<=Number(lf)||af&&jf("1.9.1");Ze&&jf("9");function nf(a,c){this.x=ca(a)?a:0;this.y=ca(c)?c:0}l=nf.prototype;l.clone=function(){return new nf(this.x,this.y)};l.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};l.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};l.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};l.scale=function(a,c){var d=ha(c)?c:a;this.x*=a;this.y*=d;return this};
function of(a,c){this.width=a;this.height=c}l=of.prototype;l.clone=function(){return new of(this.width,this.height)};l.sj=function(){return this.width*this.height};l.Qa=function(){return!this.sj()};l.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};l.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
l.scale=function(a,c){var d=ha(c)?c:a;this.width*=a;this.height*=d;return this};function pf(a){return a?new qf(rf(a)):ua||(ua=new qf)}function sf(a){var c=document;return ga(a)?c.getElementById(a):a}function tf(a,c){Ve(c,function(c,e){"style"==e?a.style.cssText=c:"class"==e?a.className=c:"for"==e?a.htmlFor=c:uf.hasOwnProperty(e)?a.setAttribute(uf[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,c):a[e]=c})}var uf={cellpadding:"cellPadding",cellspacing:"cellSpacing",
colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function vf(a,c,d){var e=arguments,f=document,g=e[0],h=e[1];if(!mf&&h&&(h.name||h.type)){g=["<",g];h.name&&g.push(' name="',wa(h.name),'"');if(h.type){g.push(' type="',wa(h.type),'"');var k={};Xe(k,h);delete k.type;h=k}g.push(">");g=g.join("")}g=f.createElement(g);h&&(ga(h)?g.className=h:"array"==ea(h)?g.className=
h.join(" "):tf(g,h));2<e.length&&wf(f,g,e);return g}function wf(a,c,d){function e(d){d&&c.appendChild(ga(d)?a.createTextNode(d):d)}for(var f=2;f<d.length;f++){var g=d[f];!fa(g)||ja(g)&&0<g.nodeType?e(g):Fe(xf(g)?He(g):g,e)}}function yf(a){for(var c;c=a.firstChild;)a.removeChild(c)}function zf(a,c,d){a.insertBefore(c,a.childNodes[d]||null)}function Af(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Bf(a,c){var d=c.parentNode;d&&d.replaceChild(a,c)}function Cf(a,c){if(!a||!c)return!1;if(a.contains&&
1==c.nodeType)return a==c||a.contains(c);if("undefined"!=typeof a.compareDocumentPosition)return a==c||!!(a.compareDocumentPosition(c)&16);for(;c&&a!=c;)c=c.parentNode;return c==a}function rf(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function xf(a){if(a&&"number"==typeof a.length){if(ja(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return!1}function qf(a){this.b=a||aa.document||document}qf.prototype.C=tf;qf.prototype.appendChild=function(a,
c){a.appendChild(c)};qf.prototype.contains=Cf;function Df(a,c,d,e){this.top=a;this.right=c;this.bottom=d;this.left=e}l=Df.prototype;l.clone=function(){return new Df(this.top,this.right,this.bottom,this.left)};l.contains=function(a){return this&&a?a instanceof Df?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};l.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=
Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};l.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};l.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};l.scale=function(a,c){var d=ha(c)?c:a;this.left*=a;this.right*=a;this.top*=d;this.bottom*=d;return this};function Ef(a,
c){var d=rf(a);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(a,null))?d[c]||d.getPropertyValue(c)||"":""}function Ff(a){var c;try{c=a.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0}}Ze&&a.ownerDocument.body&&(a=a.ownerDocument,c.left-=a.documentElement.clientLeft+a.body.clientLeft,c.top-=a.documentElement.clientTop+a.body.clientTop);return c}function Gf(a){var c=Hf;if("none"!=(Ef(a,"display")||(a.currentStyle?a.currentStyle.display:
null)||a.style&&a.style.display))return c(a);var d=a.style,e=d.display,f=d.visibility,g=d.position;d.visibility="hidden";d.position="absolute";d.display="inline";a=c(a);d.display=e;d.position=g;d.visibility=f;return a}function Hf(a){var c=a.offsetWidth,d=a.offsetHeight,e=bf&&!c&&!d;return ca(c)&&!e||!a.getBoundingClientRect?new of(c,d):(a=Ff(a),new of(a.right-a.left,a.bottom-a.top))}function If(a,c){a.style.display=c?"":"none"}function Jf(a,c,d,e){if(/^\d+px?$/.test(c))return parseInt(c,10);var f=
a.style[d],g=a.runtimeStyle[d];a.runtimeStyle[d]=a.currentStyle[d];a.style[d]=c;c=a.style[e];a.style[d]=f;a.runtimeStyle[d]=g;return c}function Kf(a,c){var d=a.currentStyle?a.currentStyle[c]:null;return d?Jf(a,d,"left","pixelLeft"):0}function Lf(a,c){if(Ze){var d=Kf(a,c+"Left"),e=Kf(a,c+"Right"),f=Kf(a,c+"Top"),g=Kf(a,c+"Bottom");return new Df(f,e,g,d)}d=Ef(a,c+"Left");e=Ef(a,c+"Right");f=Ef(a,c+"Top");g=Ef(a,c+"Bottom");return new Df(parseFloat(f),parseFloat(e),parseFloat(g),parseFloat(d))}var Mf=
{thin:2,medium:4,thick:6};function Nf(a,c){if("none"==(a.currentStyle?a.currentStyle[c+"Style"]:null))return 0;var d=a.currentStyle?a.currentStyle[c+"Width"]:null;return d in Mf?Mf[d]:Jf(a,d,"left","pixelLeft")}function Of(a,c,d){Cb.call(this,a);this.map=c;this.frameState=void 0!==d?d:null}y(Of,Cb);function Pf(a){Kb.call(this);this.element=a.element?a.element:null;this.a=this.S=null;this.s=[];this.render=a.render?a.render:ta;a.target&&this.c(a.target)}y(Pf,Kb);Pf.prototype.fa=function(){Af(this.element);
Pf.ia.fa.call(this)};Pf.prototype.i=function(){return this.a};Pf.prototype.setMap=function(a){this.a&&Af(this.element);for(var c=0,d=this.s.length;c<d;++c)sb(this.s[c]);this.s.length=0;if(this.a=a)(this.S?this.S:a.A).appendChild(this.element),this.render!==ta&&this.s.push(C(a,"postrender",this.render,this)),a.render()};Pf.prototype.c=function(a){this.S=sf(a)};function Qf(){this.g=0;this.f={};this.a=this.b=null}l=Qf.prototype;l.clear=function(){this.g=0;this.f={};this.a=this.b=null};function Rf(a,
c){return a.f.hasOwnProperty(c)}l.forEach=function(a,c){for(var d=this.b;d;)a.call(c,d.kc,d.$d,this),d=d.zb};l.get=function(a){a=this.f[a];if(a===this.a)return a.kc;a===this.b?(this.b=this.b.zb,this.b.fc=null):(a.zb.fc=a.fc,a.fc.zb=a.zb);a.zb=null;a.fc=this.a;this.a=this.a.zb=a;return a.kc};l.tc=function(){return this.g};l.O=function(){var a=Array(this.g),c=0,d;for(d=this.a;d;d=d.fc)a[c++]=d.$d;return a};l.wc=function(){var a=Array(this.g),c=0,d;for(d=this.a;d;d=d.fc)a[c++]=d.kc;return a};l.pop=function(){var a=
this.b;delete this.f[a.$d];a.zb&&(a.zb.fc=null);this.b=a.zb;this.b||(this.a=null);--this.g;return a.kc};l.replace=function(a,c){this.get(a);this.f[a].kc=c};l.set=function(a,c){var d={$d:a,zb:null,fc:this.a,kc:c};this.a?this.a.zb=d:this.b=d;this.a=d;this.f[a]=d;++this.g};function Sf(a){Qf.call(this);this.c=void 0!==a?a:2048}y(Sf,Qf);function Tf(a){return a.tc()>a.c}function Uf(a,c){for(var d,e;Tf(a)&&!(d=a.b.kc,e=d.ja[0].toString(),e in c&&c[e].contains(d.ja));)Bb(a.pop())}function Vf(a,c){Fb.call(this);
this.ja=a;this.state=c;this.a=null;this.key=""}y(Vf,Fb);function Wf(a){a.b("change")}Vf.prototype.gb=function(){return x(this).toString()};Vf.prototype.f=function(){return this.ja};Vf.prototype.V=function(){return this.state};function Xf(a){Kb.call(this);this.f=ad(a.projection);this.xa=Yf(a.attributions);this.H=a.logo;this.ya=void 0!==a.state?a.state:"ready";this.N=void 0!==a.wrapX?a.wrapX:!1}y(Xf,Kb);function Yf(a){if("string"===typeof a)return[new Ae({html:a})];if(a instanceof Ae)return[a];if(Array.isArray(a)){for(var c=
a.length,d=Array(c),e=0;e<c;e++){var f=a[e];d[e]="string"===typeof f?new Ae({html:f}):f}return d}return null}l=Xf.prototype;l.ie=ta;l.da=function(){return this.xa};l.qa=function(){return this.H};l.sa=function(){return this.f};l.V=function(){return this.ya};l.pa=function(){this.u()};l.la=function(a){this.xa=Yf(a);this.u()};function Zf(a,c){a.ya=c;a.u()}function $f(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.a=a.resolutions;this.maxZoom=this.a.length-1;this.g=void 0!==a.origin?a.origin:null;
this.c=null;void 0!==a.origins&&(this.c=a.origins);var c=a.extent;void 0===c||this.g||this.c||(this.g=Ic(c));this.i=null;void 0!==a.tileSizes&&(this.i=a.tileSizes);this.o=void 0!==a.tileSize?a.tileSize:this.i?null:256;this.s=void 0!==c?c:null;this.b=null;void 0!==a.sizes?this.b=a.sizes.map(function(a){return new we(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):c&&ag(this,c);this.f=[0,0]}var bg=[0,0,0];function cg(a,c,d,e,f){f=a.Da(c,f);for(c=c[0]-1;c>=a.minZoom;){if(d.call(null,
c,dg(a,f,c,e)))return!0;--c}return!1}l=$f.prototype;l.G=function(){return this.s};l.Bg=function(){return this.maxZoom};l.Cg=function(){return this.minZoom};l.Ia=function(a){return this.g?this.g:this.c[a]};l.$=function(a){return this.a[a]};l.Kb=function(){return this.a};function eg(a,c,d,e){return c[0]<a.maxZoom?(e=a.Da(c,e),dg(a,e,c[0]+1,d)):null}function fg(a,c,d,e){gg(a,c[0],c[1],d,!1,bg);var f=bg[1],g=bg[2];gg(a,c[2],c[3],d,!0,bg);a=bg[1];c=bg[2];void 0!==e?(e.ua=f,e.wa=a,e.za=g,e.Ba=c):e=new we(f,
a,g,c);return e}function dg(a,c,d,e){d=a.$(d);return fg(a,c,d,e)}function hg(a,c){var d=a.Ia(c[0]),e=a.$(c[0]),f=Qb(a.Ya(c[0]),a.f);return[d[0]+(c[1]+.5)*f[0]*e,d[1]+(c[2]+.5)*f[1]*e]}l.Da=function(a,c){var d=this.Ia(a[0]),e=this.$(a[0]),f=Qb(this.Ya(a[0]),this.f),g=d[0]+a[1]*f[0]*e,d=d[1]+a[2]*f[1]*e;return yc(g,d,g+f[0]*e,d+f[1]*e,c)};l.Ud=function(a,c,d){return gg(this,a[0],a[1],c,!1,d)};function gg(a,c,d,e,f,g){var h=ig(a,e),k=e/a.$(h),m=a.Ia(h);a=Qb(a.Ya(h),a.f);c=k*Math.floor((c-m[0])/e+(f?
.5:0))/a[0];d=k*Math.floor((d-m[1])/e+(f?0:.5))/a[1];f?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d));return ue(h,c,d,g)}l.md=function(a,c,d){c=this.$(c);return gg(this,a[0],a[1],c,!1,d)};l.Ya=function(a){return this.o?this.o:this.i[a]};function ig(a,c){var d=Xa(a.a,c,0);return La(d,a.minZoom,a.maxZoom)}function ag(a,c){for(var d=a.a.length,e=Array(d),f=a.minZoom;f<d;++f)e[f]=dg(a,c,f);a.b=e}function jg(a){var c=a.j;if(!c){var c=kg(a),d=lg(c,void 0,void 0),c=new $f({extent:c,
origin:Ic(c),resolutions:d,tileSize:void 0});a.j=c}return c}function mg(a){var c={};mb(c,void 0!==a?a:{});void 0===c.extent&&(c.extent=ad("EPSG:3857").G());c.resolutions=lg(c.extent,c.maxZoom,c.tileSize);delete c.maxZoom;return new $f(c)}function lg(a,c,d){c=void 0!==c?c:42;var e=Mc(a);a=Lc(a);d=Qb(void 0!==d?d:256);d=Math.max(a/d[0],e/d[1]);c+=1;e=Array(c);for(a=0;a<c;++a)e[a]=d/Math.pow(2,a);return e}function kg(a){a=ad(a);var c=a.G();c||(a=180*Xc.degrees/a.Xb(),c=yc(-a,-a,a,a));return c}function ng(a){Xf.call(this,
{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.na=void 0!==a.opaque?a.opaque:!1;this.ta=void 0!==a.tilePixelRatio?a.tilePixelRatio:1;this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null;this.a=new Sf(a.cacheSize);this.j=[0,0]}y(ng,Xf);l=ng.prototype;l.th=function(){return Tf(this.a)};l.uh=function(a,c){var d=this.ld(a);d&&Uf(d,c)};function og(a,c,d,e,f){c=a.ld(c);if(!c)return!1;for(var g=!0,h,k,m=e.ua;m<=e.wa;++m)for(var n=e.za;n<=
e.Ba;++n)h=a.Cb(d,m,n),k=!1,Rf(c,h)&&(h=c.get(h),(k=2===h.V())&&(k=!1!==f(h))),k||(g=!1);return g}l.Pd=function(){return 0};l.af=function(){return""};l.Cb=function(a,c,d){return a+"/"+c+"/"+d};l.cf=function(){return this.na};l.Kb=function(){return this.tileGrid.Kb()};l.Ja=function(){return this.tileGrid};l.eb=function(a){return this.tileGrid?this.tileGrid:jg(a)};l.ld=function(a){var c=this.f;return c&&!qd(c,a)?null:this.a};l.Yb=function(){return this.ta};function pg(a,c,d,e){e=a.eb(e);d=a.Yb(d);c=
Qb(e.Ya(c),a.j);return 1==d?c:Pb(c,d,a.j)}function qg(a,c,d){var e=void 0!==d?d:a.f;d=a.eb(e);if(a.N&&e.f){var f=c;c=f[0];a=hg(d,f);e=kg(e);tc(e,a)?c=f:(f=Lc(e),a[0]+=f*Math.ceil((e[0]-a[0])/f),c=d.md(a,c))}f=c[0];e=c[1];a=c[2];if(d.minZoom>f||f>d.maxZoom)d=!1;else{var g=d.G();d=(d=g?dg(d,g,f):d.b?d.b[f]:null)?xe(d,e,a):!0}return d?c:null}l.pa=function(){this.a.clear();this.u()};l.Rf=ta;function rg(a,c){Cb.call(this,a);this.tile=c}y(rg,Cb);function sg(a){a=a?a:{};this.N=document.createElement("UL");
this.A=document.createElement("LI");this.N.appendChild(this.A);If(this.A,!1);this.f=void 0!==a.collapsed?a.collapsed:!0;this.o=void 0!==a.collapsible?a.collapsible:!0;this.o||(this.f=!1);var c=void 0!==a.className?a.className:"ol-attribution",d=void 0!==a.tipLabel?a.tipLabel:"Attributions",e=void 0!==a.collapseLabel?a.collapseLabel:"\u00bb";this.H="string"===typeof e?vf("SPAN",{},e):e;e=void 0!==a.label?a.label:"i";this.D="string"===typeof e?vf("SPAN",{},e):e;d=vf("BUTTON",{type:"button",title:d},
this.o&&!this.f?this.H:this.D);C(d,"click",this.Ml,this);c=vf("DIV",c+" ol-unselectable ol-control"+(this.f&&this.o?" ol-collapsed":"")+(this.o?"":" ol-uncollapsible"),this.N,d);Pf.call(this,{element:c,render:a.render?a.render:tg,target:a.target});this.B=!0;this.l={};this.j={};this.T={}}y(sg,Pf);function tg(a){if(a=a.frameState){var c,d,e,f,g,h,k,m,n,p,q,r=a.layerStatesArray,t=mb({},a.attributions),v={},w=a.viewState.projection;d=0;for(c=r.length;d<c;d++)if(h=r[d].layer.ea())if(p=x(h).toString(),
n=h.da())for(e=0,f=n.length;e<f;e++)if(k=n[e],m=x(k).toString(),!(m in t)){if(g=a.usedTiles[p]){var A=h.eb(w);a:{q=k;var D=w;if(q.b){var z=void 0,B=void 0,J=void 0,K=void 0;for(K in g)if(K in q.b)for(var J=g[K],M,z=0,B=q.b[K].length;z<B;++z){M=q.b[K][z];if(ze(M,J)){q=!0;break a}var Y=dg(A,kg(D),parseInt(K,10)),Ja=Y.wa-Y.ua+1;if(J.ua<Y.ua||J.wa>Y.wa)if(ze(M,new we(Qa(J.ua,Ja),Qa(J.wa,Ja),J.za,J.Ba))||J.wa-J.ua+1>Ja&&ze(M,Y)){q=!0;break a}}q=!1}else q=!0}}else q=!1;q?(m in v&&delete v[m],t[m]=k):v[m]=
k}c=[t,v];d=c[0];c=c[1];for(var I in this.l)I in d?(this.j[I]||(If(this.l[I],!0),this.j[I]=!0),delete d[I]):I in c?(this.j[I]&&(If(this.l[I],!1),delete this.j[I]),delete c[I]):(Af(this.l[I]),delete this.l[I],delete this.j[I]);for(I in d)e=document.createElement("LI"),e.innerHTML=d[I].a,this.N.appendChild(e),this.l[I]=e,this.j[I]=!0;for(I in c)e=document.createElement("LI"),e.innerHTML=c[I].a,If(e,!1),this.N.appendChild(e),this.l[I]=e;I=!pb(this.j)||!pb(a.logos);this.B!=I&&(If(this.element,I),this.B=
I);I&&pb(this.j)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var ba;a=a.logos;I=this.T;for(ba in I)ba in a||(Af(I[ba]),delete I[ba]);for(var oa in a)oa in I||(ba=new Image,ba.src=oa,d=a[oa],""===d?d=ba:(d=vf("A",{href:d}),d.appendChild(ba)),this.A.appendChild(d),I[oa]=d);If(this.A,!pb(a))}else this.B&&(If(this.element,!1),this.B=!1)}l=sg.prototype;l.Ml=function(a){a.preventDefault();ug(this)};function ug(a){a.element.classList.toggle("ol-collapsed");a.f?
Bf(a.H,a.D):Bf(a.D,a.H);a.f=!a.f}l.Ll=function(){return this.o};l.Ol=function(a){this.o!==a&&(this.o=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.f&&ug(this))};l.Nl=function(a){this.o&&this.f!==a&&ug(this)};l.Kl=function(){return this.f};function vg(a){a=a?a:{};var c=void 0!==a.className?a.className:"ol-rotate",d=void 0!==a.label?a.label:"\u21e7";this.f=null;"string"===typeof d?this.f=vf("SPAN","ol-compass",d):(this.f=d,this.f.classList.add(this.f,"ol-compass"));d=vf("BUTTON",{"class":c+
"-reset",type:"button",title:a.tipLabel?a.tipLabel:"Reset rotation"},this.f);C(d,"click",vg.prototype.B,this);c=vf("DIV",c+" ol-unselectable ol-control",d);d=a.render?a.render:wg;this.o=a.resetNorth?a.resetNorth:void 0;Pf.call(this,{element:c,render:d,target:a.target});this.l=void 0!==a.duration?a.duration:250;this.j=void 0!==a.autoHide?a.autoHide:!0;this.A=void 0;this.j&&this.element.classList.add("ol-hidden")}y(vg,Pf);vg.prototype.B=function(a){a.preventDefault();if(void 0!==this.o)this.o();else{a=
this.a;var c=a.aa();if(c){var d=c.Ma();void 0!==d&&(0<this.l&&(d%=2*Math.PI,d<-Math.PI&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI),a.Va(se({rotation:d,duration:this.l,easing:ne}))),c.ee(0))}}};function wg(a){if(a=a.frameState){a=a.viewState.rotation;if(a!=this.A){var c="rotate("+a+"rad)";if(this.j){var d=this.element.classList.contains("ol-hidden");d||0!==a?d&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.f.style.msTransform=c;this.f.style.webkitTransform=
c;this.f.style.transform=c}this.A=a}}function xg(a){a=a?a:{};var c=void 0!==a.className?a.className:"ol-zoom",d=void 0!==a.delta?a.delta:1,e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2212",f=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",g=vf("BUTTON",{"class":c+"-in",type:"button",title:void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in"},void 0!==a.zoomInLabel?a.zoomInLabel:"+");C(g,"click",qa(xg.prototype.j,d),this);e=vf("BUTTON",{"class":c+"-out",type:"button",title:f},e);C(e,"click",
qa(xg.prototype.j,-d),this);c=vf("DIV",c+" ol-unselectable ol-control",g,e);Pf.call(this,{element:c,target:a.target});this.f=void 0!==a.duration?a.duration:250}y(xg,Pf);xg.prototype.j=function(a,c){c.preventDefault();var d=this.a,e=d.aa();if(e){var f=e.$();f&&(0<this.f&&d.Va(te({resolution:f,duration:this.f,easing:ne})),d=e.constrainResolution(f,a),e.Sb(d))}};function yg(a){a=a?a:{};var c=new De;(void 0!==a.zoom?a.zoom:1)&&c.push(new xg(a.zoomOptions));(void 0!==a.rotate?a.rotate:1)&&c.push(new vg(a.rotateOptions));
(void 0!==a.attribution?a.attribution:1)&&c.push(new sg(a.attributionOptions));return c}var zg=bf?"webkitfullscreenchange":af?"mozfullscreenchange":Ze?"MSFullscreenChange":"fullscreenchange";function Ag(){var a=pf().b,c=a.body;return!!(c.webkitRequestFullscreen||c.mozRequestFullScreen&&a.mozFullScreenEnabled||c.msRequestFullscreen&&a.msFullscreenEnabled||c.requestFullscreen&&a.fullscreenEnabled)}function Bg(a){a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():
a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullscreen&&a.requestFullscreen()}function Cg(){var a=pf().b;return!!(a.webkitIsFullScreen||a.mozFullScreen||a.msFullscreenElement||a.fullscreenElement)}function Dg(a){a=a?a:{};this.f=void 0!==a.className?a.className:"ol-full-screen";var c=void 0!==a.label?a.label:"\u2922";this.j="string"===typeof c?document.createTextNode(c):c;c=void 0!==a.labelActive?a.labelActive:"\u00d7";this.o="string"===typeof c?document.createTextNode(c):c;c=a.tipLabel?
a.tipLabel:"Toggle full-screen";c=vf("BUTTON",{"class":this.f+"-"+Cg(),type:"button",title:c},this.j);C(c,"click",this.N,this);var d=this.f+" ol-unselectable ol-control "+(Ag()?"":"ol-unsupported"),c=vf("DIV",d,c);Pf.call(this,{element:c,target:a.target});this.B=void 0!==a.keys?a.keys:!1;this.l=a.source}y(Dg,Pf);Dg.prototype.N=function(a){a.preventDefault();Ag()&&(a=this.a)&&(Cg()?(a=pf().b,a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?
a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()):(a=this.l?sf(this.l):a.vc(),this.B?a.mozRequestFullScreenWithKeys?a.mozRequestFullScreenWithKeys():a.webkitRequestFullscreen?a.webkitRequestFullscreen():Bg(a):Bg(a)))};Dg.prototype.A=function(){var a=this.element.firstElementChild,c=this.a;Cg()?(a.className=this.f+"-true",Bf(this.o,this.j)):(a.className=this.f+"-false",Bf(this.j,this.o));c&&c.Rc()};Dg.prototype.setMap=function(a){Dg.ia.setMap.call(this,a);a&&this.s.push(C(aa.document,zg,this.A,
this))};function Eg(a){a=a?a:{};var c=document.createElement("DIV");c.className=void 0!==a.className?a.className:"ol-mouse-position";Pf.call(this,{element:c,render:a.render?a.render:Fg,target:a.target});C(this,Mb("projection"),this.Pl,this);a.coordinateFormat&&this.Xh(a.coordinateFormat);a.projection&&this.ah(ad(a.projection));this.A=void 0!==a.undefinedHTML?a.undefinedHTML:"";this.l=c.innerHTML;this.o=this.j=this.f=null}y(Eg,Pf);function Fg(a){a=a.frameState;a?this.f!=a.viewState.projection&&(this.f=
a.viewState.projection,this.j=null):this.f=null;Gg(this,this.o)}l=Eg.prototype;l.Pl=function(){this.j=null};l.ug=function(){return this.get("coordinateFormat")};l.$g=function(){return this.get("projection")};l.Lk=function(a){this.o=this.a.Od(a);Gg(this,this.o)};l.Mk=function(){Gg(this,null);this.o=null};l.setMap=function(a){Eg.ia.setMap.call(this,a);a&&(a=a.a,this.s.push(C(a,"mousemove",this.Lk,this),C(a,"mouseout",this.Mk,this)))};l.Xh=function(a){this.set("coordinateFormat",a)};l.ah=function(a){this.set("projection",
a)};function Gg(a,c){var d=a.A;if(c&&a.f){if(!a.j){var e=a.$g();a.j=e?dd(a.f,e):sd}if(e=a.a.Oa(c))a.j(e,e),d=(d=a.ug())?d(e):e.toString()}a.l&&d==a.l||(a.element.innerHTML=d,a.l=d)}function Hg(a){var c=arguments,d=c.length;return function(){for(var a=0;a<d;a++)if(!c[a].apply(this,arguments))return!1;return!0}}function Ig(a,c){var d=a;c&&(d=pa(a,c));!ia(aa.setImmediate)||aa.Window&&aa.Window.prototype&&!Ue("Edge")&&aa.Window.prototype.setImmediate==aa.setImmediate?(Jg||(Jg=Kg()),Jg(d)):aa.setImmediate(d)}
var Jg;function Kg(){var a=aa.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Ue("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var c=a.contentWindow,a=c.document;a.open();a.write("");a.close();var d="callImmediate"+Math.random(),e="file:"==c.location.protocol?"*":c.location.protocol+"//"+c.location.host,a=pa(function(a){if(("*"==e||a.origin==e)&&
a.data==d)this.port1.onmessage()},this);c.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){c.postMessage(d,e)}}});if("undefined"!==typeof a&&!Ue("Trident")&&!Ue("MSIE")){var c=new a,d={},e=d;c.port1.onmessage=function(){if(ca(d.next)){d=d.next;var a=d.kg;d.kg=null;a()}};return function(a){e.next={kg:a};e=e.next;c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var c=document.createElement("SCRIPT");
c.onreadystatechange=function(){c.onreadystatechange=null;c.parentNode.removeChild(c);c=null;a();a=null};document.documentElement.appendChild(c)}:function(a){aa.setTimeout(a,0)}}function Lg(a,c,d){Cb.call(this,a);this.b=c;a=d?d:{};this.buttons=Mg(a);this.pressure=Ng(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in
a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;c.preventDefault&&(this.preventDefault=function(){c.preventDefault()})}y(Lg,Cb);function Mg(a){if(a.buttons||
Og)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function Ng(a,c){var d=0;a.pressure?d=a.pressure:d=c?.5:0;return d}var Og=!1;try{Og=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){}function Pg(a,c){var d=document.createElement("CANVAS");a&&(d.width=a);c&&(d.height=c);return d.getContext("2d")}var Qg=function(){var a;return function(){if(void 0===a){var c=document.createElement("P"),d,e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",
msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(c);for(var f in e)f in c.style&&(c.style[f]="translate(1px,1px)",d=aa.getComputedStyle(c).getPropertyValue(e[f]));document.body.removeChild(c);a=d&&"none"!==d}return a}}(),Rg=function(){var a;return function(){if(void 0===a){var c=document.createElement("P"),d,e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};
document.body.appendChild(c);for(var f in e)f in c.style&&(c.style[f]="translate3d(1px,1px,1px)",d=aa.getComputedStyle(c).getPropertyValue(e[f]));document.body.removeChild(c);a=d&&"none"!==d}return a}}();function Sg(a,c){var d=a.style;d.WebkitTransform=c;d.MozTransform=c;d.b=c;d.msTransform=c;d.transform=c;Ze&&jf("9.0")&&(a.style.transformOrigin="0 0")}function Tg(a,c){var d;if(Rg()){var e=Array(16);for(d=0;16>d;++d)e[d]=c[d].toFixed(6);Sg(a,"matrix3d("+e.join(",")+")")}else if(Qg()){var e=[c[0],
c[1],c[4],c[5],c[12],c[13]],f=Array(6);for(d=0;6>d;++d)f[d]=e[d].toFixed(6);Sg(a,"matrix("+f.join(",")+")")}else a.style.left=Math.round(c[12])+"px",a.style.top=Math.round(c[13])+"px"}var Ug=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Vg(a,c){var d,e,f=Ug.length;for(e=0;e<f;++e)try{if(d=a.getContext(Ug[e],c))return d}catch(g){}return null}var Wg,Xg="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Yg=-1!==Xg.indexOf("firefox"),Zg=-1!==Xg.indexOf("safari")&&-1===
Xg.indexOf("chrom"),$g=-1!==Xg.indexOf("macintosh"),ah=aa.devicePixelRatio||1,bh=!1,ch=function(){if(!("HTMLCanvasElement"in aa))return!1;try{var a=Pg();return a?(void 0!==a.setLineDash&&(bh=!0),!0):!1}catch(c){return!1}}(),dh="DeviceOrientationEvent"in aa,eh="geolocation"in aa.navigator,fh="ontouchstart"in aa,gh="PointerEvent"in aa,hh=!!aa.navigator.msPointerEnabled,ih=!1,jh,kh=[];if("WebGLRenderingContext"in aa)try{var lh=Vg(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});lh&&
(ih=!0,jh=lh.getParameter(lh.MAX_TEXTURE_SIZE),kh=lh.getSupportedExtensions())}catch(a){}Wg=ih;sa=kh;ra=jh;function mh(a,c){this.b=a;this.c=c}function nh(a){mh.call(this,a,{mousedown:this.fl,mousemove:this.gl,mouseup:this.jl,mouseover:this.il,mouseout:this.hl});this.a=a.g;this.g=[]}y(nh,mh);function oh(a,c){for(var d=a.g,e=c.clientX,f=c.clientY,g=0,h=d.length,k;g<h&&(k=d[g]);g++){var m=Math.abs(f-k[1]);if(25>=Math.abs(e-k[0])&&25>=m)return!0}return!1}function ph(a){var c=qh(a,a),d=c.preventDefault;
c.preventDefault=function(){a.preventDefault();d()};c.pointerId=1;c.isPrimary=!0;c.pointerType="mouse";return c}l=nh.prototype;l.fl=function(a){if(!oh(this,a)){if((1).toString()in this.a){var c=ph(a);rh(this.b,sh,c,a);delete this.a[(1).toString()]}c=ph(a);this.a[(1).toString()]=a;rh(this.b,th,c,a)}};l.gl=function(a){if(!oh(this,a)){var c=ph(a);rh(this.b,uh,c,a)}};l.jl=function(a){if(!oh(this,a)){var c=this.a[(1).toString()];c&&c.button===a.button&&(c=ph(a),rh(this.b,vh,c,a),delete this.a[(1).toString()])}};
l.il=function(a){if(!oh(this,a)){var c=ph(a);wh(this.b,c,a)}};l.hl=function(a){if(!oh(this,a)){var c=ph(a);xh(this.b,c,a)}};function yh(a){mh.call(this,a,{MSPointerDown:this.ol,MSPointerMove:this.pl,MSPointerUp:this.sl,MSPointerOut:this.ql,MSPointerOver:this.rl,MSPointerCancel:this.nl,MSGotPointerCapture:this.ll,MSLostPointerCapture:this.ml});this.a=a.g;this.g=["","unavailable","touch","pen","mouse"]}y(yh,mh);function zh(a,c){var d=c;ha(c.pointerType)&&(d=qh(c,c),d.pointerType=a.g[c.pointerType]);
return d}l=yh.prototype;l.ol=function(a){this.a[a.pointerId.toString()]=a;var c=zh(this,a);rh(this.b,th,c,a)};l.pl=function(a){var c=zh(this,a);rh(this.b,uh,c,a)};l.sl=function(a){var c=zh(this,a);rh(this.b,vh,c,a);delete this.a[a.pointerId.toString()]};l.ql=function(a){var c=zh(this,a);xh(this.b,c,a)};l.rl=function(a){var c=zh(this,a);wh(this.b,c,a)};l.nl=function(a){var c=zh(this,a);rh(this.b,sh,c,a);delete this.a[a.pointerId.toString()]};l.ml=function(a){this.b.b(new Lg("lostpointercapture",a,
a))};l.ll=function(a){this.b.b(new Lg("gotpointercapture",a,a))};function Ah(a){mh.call(this,a,{pointerdown:this.Nn,pointermove:this.On,pointerup:this.Rn,pointerout:this.Pn,pointerover:this.Qn,pointercancel:this.Mn,gotpointercapture:this.vk,lostpointercapture:this.el})}y(Ah,mh);l=Ah.prototype;l.Nn=function(a){Bh(this.b,a)};l.On=function(a){Bh(this.b,a)};l.Rn=function(a){Bh(this.b,a)};l.Pn=function(a){Bh(this.b,a)};l.Qn=function(a){Bh(this.b,a)};l.Mn=function(a){Bh(this.b,a)};l.el=function(a){Bh(this.b,
a)};l.vk=function(a){Bh(this.b,a)};function Ch(a,c){mh.call(this,a,{touchstart:this.Uo,touchmove:this.To,touchend:this.So,touchcancel:this.Ro});this.a=a.g;this.j=c;this.g=void 0;this.i=0;this.f=void 0}y(Ch,mh);l=Ch.prototype;l.Vh=function(){this.i=0;this.f=void 0};function Dh(a,c,d){c=qh(c,d);c.pointerId=d.identifier+2;c.bubbles=!0;c.cancelable=!0;c.detail=a.i;c.button=0;c.buttons=1;c.width=d.webkitRadiusX||d.radiusX||0;c.height=d.webkitRadiusY||d.radiusY||0;c.pressure=d.webkitForce||d.force||.5;
c.isPrimary=a.g===d.identifier;c.pointerType="touch";c.clientX=d.clientX;c.clientY=d.clientY;c.screenX=d.screenX;c.screenY=d.screenY;return c}function Eh(a,c,d){function e(){c.preventDefault()}var f=Array.prototype.slice.call(c.changedTouches),g=f.length,h,k;for(h=0;h<g;++h)k=Dh(a,c,f[h]),k.preventDefault=e,d.call(a,c,k)}l.Uo=function(a){var c=a.touches,d=Object.keys(this.a),e=d.length;if(e>=c.length){var f=[],g,h,k;for(g=0;g<e;++g){h=d[g];k=this.a[h];var m;if(!(m=1==h))a:{m=c.length;for(var n=void 0,
p=0;p<m;p++)if(n=c[p],n.identifier===h-2){m=!0;break a}m=!1}m||f.push(k.out)}for(g=0;g<f.length;++g)this.Oe(a,f[g])}c=a.changedTouches[0];d=Object.keys(this.a).length;if(0===d||1===d&&(1).toString()in this.a)this.g=c.identifier,void 0!==this.f&&aa.clearTimeout(this.f);Fh(this,a);this.i++;Eh(this,a,this.In)};l.In=function(a,c){this.a[c.pointerId]={target:c.target,out:c,Eh:c.target};var d=this.b;c.bubbles=!0;rh(d,Gh,c,a);d=this.b;c.bubbles=!1;rh(d,Hh,c,a);rh(this.b,th,c,a)};l.To=function(a){a.preventDefault();
Eh(this,a,this.kl)};l.kl=function(a,c){var d=this.a[c.pointerId];if(d){var e=d.out,f=d.Eh;rh(this.b,uh,c,a);e&&f!==c.target&&(e.relatedTarget=c.target,c.relatedTarget=f,e.target=f,c.target?(xh(this.b,e,a),wh(this.b,c,a)):(c.target=f,c.relatedTarget=null,this.Oe(a,c)));d.out=c;d.Eh=c.target}};l.So=function(a){Fh(this,a);Eh(this,a,this.Vo)};l.Vo=function(a,c){rh(this.b,vh,c,a);this.b.out(c,a);var d=this.b;c.bubbles=!1;rh(d,Ih,c,a);delete this.a[c.pointerId];c.isPrimary&&(this.g=void 0,this.f=aa.setTimeout(this.Vh.bind(this),
200))};l.Ro=function(a){Eh(this,a,this.Oe)};l.Oe=function(a,c){rh(this.b,sh,c,a);this.b.out(c,a);var d=this.b;c.bubbles=!1;rh(d,Ih,c,a);delete this.a[c.pointerId];c.isPrimary&&(this.g=void 0,this.f=aa.setTimeout(this.Vh.bind(this),200))};function Fh(a,c){var d=a.j.g,e=c.changedTouches[0];if(a.g===e.identifier){var f=[e.clientX,e.clientY];d.push(f);aa.setTimeout(function(){$a(d,f)},2500)}}function Jh(a){Fb.call(this);this.i=a;this.g={};this.c={};this.a=[];gh?Kh(this,new Ah(this)):hh?Kh(this,new yh(this)):
(a=new nh(this),Kh(this,a),fh&&Kh(this,new Ch(this,a)));a=this.a.length;for(var c,d=0;d<a;d++)c=this.a[d],Lh(this,Object.keys(c.c))}y(Jh,Fb);function Kh(a,c){var d=Object.keys(c.c);d&&(d.forEach(function(a){var d=c.c[a];d&&(this.c[a]=d.bind(c))},a),a.a.push(c))}Jh.prototype.f=function(a){var c=this.c[a.type];c&&c(a)};function Lh(a,c){c.forEach(function(a){C(this.i,a,this.f,this)},a)}function Mh(a,c){c.forEach(function(a){yb(this.i,a,this.f,this)},a)}function qh(a,c){for(var d={},e,f=0,g=Nh.length;f<
g;f++)e=Nh[f][0],d[e]=a[e]||c[e]||Nh[f][1];return d}Jh.prototype.out=function(a,c){a.bubbles=!0;rh(this,Oh,a,c)};function xh(a,c,d){a.out(c,d);var e=c.relatedTarget;e&&Cf(c.target,e)||(c.bubbles=!1,rh(a,Ih,c,d))}function wh(a,c,d){c.bubbles=!0;rh(a,Gh,c,d);var e=c.relatedTarget;e&&Cf(c.target,e)||(c.bubbles=!1,rh(a,Hh,c,d))}function rh(a,c,d,e){a.b(new Lg(c,e,d))}function Bh(a,c){a.b(new Lg(c.type,c,c))}Jh.prototype.fa=function(){for(var a=this.a.length,c,d=0;d<a;d++)c=this.a[d],Mh(this,Object.keys(c.c));
Jh.ia.fa.call(this)};var uh="pointermove",th="pointerdown",vh="pointerup",Gh="pointerover",Oh="pointerout",Hh="pointerenter",Ih="pointerleave",sh="pointercancel",Nh=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",
0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Ph(a,c,d,e,f){Of.call(this,a,c,f);this.originalEvent=d;this.pixel=c.Od(d);this.coordinate=c.Oa(this.pixel);this.dragging=void 0!==e?e:!1}y(Ph,Of);Ph.prototype.preventDefault=function(){Ph.ia.preventDefault.call(this);this.originalEvent.preventDefault()};Ph.prototype.stopPropagation=function(){Ph.ia.stopPropagation.call(this);this.originalEvent.stopPropagation()};function Qh(a,c,d,e,f){Ph.call(this,a,c,d.b,
e,f);this.b=d}y(Qh,Ph);function Rh(a){Fb.call(this);this.f=a;this.j=0;this.o=!1;this.c=[];this.g=null;a=this.f.a;this.U=0;this.A={};this.i=new Jh(a);this.a=null;this.l=C(this.i,th,this.Ok,this);this.s=C(this.i,uh,this.qo,this)}y(Rh,Fb);function Sh(a,c){var d;d=new Qh(Th,a.f,c);a.b(d);0!==a.j?(aa.clearTimeout(a.j),a.j=0,d=new Qh(Uh,a.f,c),a.b(d)):a.j=aa.setTimeout(function(){this.j=0;var a=new Qh(Vh,this.f,c);this.b(a)}.bind(a),250)}function Wh(a,c){c.type==Xh||c.type==Yh?delete a.A[c.pointerId]:c.type==
Zh&&(a.A[c.pointerId]=!0);a.U=Object.keys(a.A).length}l=Rh.prototype;l.Jg=function(a){Wh(this,a);var c=new Qh(Xh,this.f,a);this.b(c);!this.o&&0===a.button&&Sh(this,this.g);0===this.U&&(this.c.forEach(sb),this.c.length=0,this.o=!1,this.g=null,Bb(this.a),this.a=null)};l.Ok=function(a){Wh(this,a);var c=new Qh(Zh,this.f,a);this.b(c);this.g=a;0===this.c.length&&(this.a=new Jh(document),this.c.push(C(this.a,$h,this.Gl,this),C(this.a,Xh,this.Jg,this),C(this.i,Yh,this.Jg,this)))};l.Gl=function(a){if(a.clientX!=
this.g.clientX||a.clientY!=this.g.clientY){this.o=!0;var c=new Qh(ai,this.f,a,this.o);this.b(c)}a.preventDefault()};l.qo=function(a){this.b(new Qh(a.type,this.f,a,!(!this.g||a.clientX==this.g.clientX&&a.clientY==this.g.clientY)))};l.fa=function(){this.s&&(sb(this.s),this.s=null);this.l&&(sb(this.l),this.l=null);this.c.forEach(sb);this.c.length=0;this.a&&(Bb(this.a),this.a=null);this.i&&(Bb(this.i),this.i=null);Rh.ia.fa.call(this)};var Vh="singleclick",Th="click",Uh="dblclick",ai="pointerdrag",$h=
"pointermove",Zh="pointerdown",Xh="pointerup",Yh="pointercancel",bi={np:Vh,bp:Th,cp:Uh,gp:ai,jp:$h,fp:Zh,mp:Xh,lp:"pointerover",kp:"pointerout",hp:"pointerenter",ip:"pointerleave",ep:Yh};function ci(a){Kb.call(this);var c=mb({},a);c.opacity=void 0!==a.opacity?a.opacity:1;c.visible=void 0!==a.visible?a.visible:!0;c.zIndex=void 0!==a.zIndex?a.zIndex:0;c.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;c.minResolution=void 0!==a.minResolution?a.minResolution:0;this.C(c)}y(ci,Kb);function di(a){var c=
a.Nb(),d=a.df(),e=a.yb(),f=a.G(),g=a.Ob(),h=a.Ib(),k=a.Jb();return{layer:a,opacity:La(c,0,1),D:d,visible:e,Kc:!0,extent:f,zIndex:g,maxResolution:h,minResolution:Math.max(k,0)}}l=ci.prototype;l.G=function(){return this.get("extent")};l.Ib=function(){return this.get("maxResolution")};l.Jb=function(){return this.get("minResolution")};l.Nb=function(){return this.get("opacity")};l.yb=function(){return this.get("visible")};l.Ob=function(){return this.get("zIndex")};l.ac=function(a){this.set("extent",a)};
l.ic=function(a){this.set("maxResolution",a)};l.jc=function(a){this.set("minResolution",a)};l.bc=function(a){this.set("opacity",a)};l.cc=function(a){this.set("visible",a)};l.dc=function(a){this.set("zIndex",a)};function ei(){}function fi(a,c,d,e,f,g){Cb.call(this,a,c);this.vectorContext=d;this.frameState=e;this.context=f;this.glContext=g}y(fi,Cb);function gi(a){var c=mb({},a);delete c.source;ci.call(this,c);this.l=this.o=this.j=null;a.map&&this.setMap(a.map);C(this,Mb("source"),this.Uk,this);this.Cc(a.source?
a.source:null)}y(gi,ci);function hi(a,c){return a.visible&&c>=a.minResolution&&c<a.maxResolution}l=gi.prototype;l.bf=function(a){a=a?a:[];a.push(di(this));return a};l.ea=function(){return this.get("source")||null};l.df=function(){var a=this.ea();return a?a.V():"undefined"};l.wm=function(){this.u()};l.Uk=function(){this.l&&(sb(this.l),this.l=null);var a=this.ea();a&&(this.l=C(a,"change",this.wm,this));this.u()};l.setMap=function(a){this.j&&(sb(this.j),this.j=null);a||this.u();this.o&&(sb(this.o),this.o=
null);a&&(this.j=C(a,"precompose",function(a){var d=di(this);d.Kc=!1;d.zIndex=Infinity;a.frameState.layerStatesArray.push(d);a.frameState.layerStates[x(this)]=d},this),this.o=C(this,"change",a.render,a),this.u())};l.Cc=function(a){this.set("source",a)};function ii(a,c,d,e,f){Fb.call(this);this.l=f;this.extent=a;this.f=d;this.resolution=c;this.state=e}y(ii,Fb);function ji(a){a.b("change")}ii.prototype.da=function(){return this.l};ii.prototype.G=function(){return this.extent};ii.prototype.$=function(){return this.resolution};
ii.prototype.V=function(){return this.state};function ki(a,c,d,e,f,g,h,k){hc(a);0===c&&0===d||kc(a,c,d);1==e&&1==f||lc(a,e,f);0!==g&&mc(a,g);0===h&&0===k||kc(a,h,k);return a}function li(a,c){return a[0]==c[0]&&a[1]==c[1]&&a[4]==c[4]&&a[5]==c[5]&&a[12]==c[12]&&a[13]==c[13]}function mi(a,c,d){var e=a[1],f=a[5],g=a[13],h=c[0];c=c[1];d[0]=a[0]*h+a[4]*c+a[12];d[1]=e*h+f*c+g;return d}function ni(a){Hb.call(this);this.a=a}y(ni,Hb);l=ni.prototype;l.ib=ta;l.zc=function(a,c,d,e){a=a.slice();mi(c.pixelToCoordinateMatrix,
a,a);if(this.ib(a,c,Tc,this))return d.call(e,this.a)};l.he=Uc;l.Wc=function(a,c,d){return function(e,f){return og(a,c,e,f,function(a){d[e]||(d[e]={});d[e][a.ja.toString()]=a})}};l.Am=function(a){2===a.target.V()&&oi(this)};function pi(a,c){var d=c.V();2!=d&&3!=d&&C(c,"change",a.Am,a);0==d&&(c.load(),d=c.V());return 2==d}function oi(a){var c=a.a;c.yb()&&"ready"==c.df()&&a.u()}function qi(a,c){c.th()&&a.postRenderFunctions.push(qa(function(a,c,f){c=x(a).toString();a.uh(f.viewState.projection,f.usedTiles[c])},
c))}function ri(a,c){if(c){var d,e,f;e=0;for(f=c.length;e<f;++e)d=c[e],a[x(d).toString()]=d}}function si(a,c){var d=c.H;void 0!==d&&("string"===typeof d?a.logos[d]="":ja(d)&&(a.logos[d.src]=d.href))}function ti(a,c,d,e){c=x(c).toString();d=d.toString();c in a?d in a[c]?(a=a[c][d],e.ua<a.ua&&(a.ua=e.ua),e.wa>a.wa&&(a.wa=e.wa),e.za<a.za&&(a.za=e.za),e.Ba>a.Ba&&(a.Ba=e.Ba)):a[c][d]=e:(a[c]={},a[c][d]=e)}function ui(a,c,d){return[c*(Math.round(a[0]/c)+d[0]%2/2),c*(Math.round(a[1]/c)+d[1]%2/2)]}function vi(a,
c,d,e,f,g,h,k,m,n){var p=x(c).toString();p in a.wantedTiles||(a.wantedTiles[p]={});var q=a.wantedTiles[p];a=a.tileQueue;var r=d.minZoom,t,v,w,A,D,z;for(z=h;z>=r;--z)for(v=dg(d,g,z,v),w=d.$(z),A=v.ua;A<=v.wa;++A)for(D=v.za;D<=v.Ba;++D)h-z<=k?(t=c.Lb(z,A,D,e,f),0==t.V()&&(q[t.ja.toString()]=!0,t.gb()in a.g||a.f([t,p,hg(d,t.ja),w])),void 0!==m&&m.call(n,t)):c.Rf(z,A,D,f)}function wi(a){this.A=a.opacity;this.B=a.rotateWithView;this.s=a.rotation;this.j=a.scale;this.N=a.snapToPixel}l=wi.prototype;l.le=
function(){return this.A};l.Sd=function(){return this.B};l.me=function(){return this.s};l.ne=function(){return this.j};l.Td=function(){return this.N};l.oe=function(a){this.A=a};l.pe=function(a){this.s=a};l.qe=function(a){this.j=a};function xi(a){a=a||{};this.c=void 0!==a.anchor?a.anchor:[.5,.5];this.f=null;this.a=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left";this.o=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction";this.l=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction";var c=void 0!==a.crossOrigin?
a.crossOrigin:null,d=void 0!==a.img?a.img:null,e=void 0!==a.imgSize?a.imgSize:null,f=a.src;void 0!==f&&0!==f.length||!d||(f=d.src||x(d).toString());var g=void 0!==a.src?0:2,h=void 0!==a.color?Me(a.color):null,k=yi.Wb(),m=k.get(f,c,h);m||(m=new zi(d,f,e,c,g,h),k.set(f,c,h,m));this.b=m;this.H=void 0!==a.offset?a.offset:[0,0];this.g=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left";this.i=null;this.U=void 0!==a.size?a.size:null;wi.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?
a.rotation:0,scale:void 0!==a.scale?a.scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1})}y(xi,wi);l=xi.prototype;l.Vb=function(){if(this.f)return this.f;var a=this.c,c=this.Db();if("fraction"==this.o||"fraction"==this.l){if(!c)return null;a=this.c.slice();"fraction"==this.o&&(a[0]*=c[0]);"fraction"==this.l&&(a[1]*=c[1])}if("top-left"!=this.a){if(!c)return null;a===this.c&&(a=this.c.slice());if("top-right"==this.a||"bottom-right"==
this.a)a[0]=-a[0]+c[0];if("bottom-left"==this.a||"bottom-right"==this.a)a[1]=-a[1]+c[1]}return this.f=a};l.ec=function(){var a=this.b;return a.c?a.c:a.a};l.hd=function(){return this.b.g};l.qd=function(){return this.b.f};l.ke=function(){var a=this.b;if(!a.o)if(a.s){var c=a.g[0],d=a.g[1],e=Pg(c,d);e.fillRect(0,0,c,d);a.o=e.canvas}else a.o=a.a;return a.o};l.Ia=function(){if(this.i)return this.i;var a=this.H;if("top-left"!=this.g){var c=this.Db(),d=this.b.g;if(!c||!d)return null;a=a.slice();if("top-right"==
this.g||"bottom-right"==this.g)a[0]=d[0]-c[0]-a[0];if("bottom-left"==this.g||"bottom-right"==this.g)a[1]=d[1]-c[1]-a[1]}return this.i=a};l.cn=function(){return this.b.l};l.Db=function(){return this.U?this.U:this.b.g};l.hf=function(a,c){return C(this.b,"change",a,c)};l.load=function(){this.b.load()};l.Qf=function(a,c){yb(this.b,"change",a,c)};function zi(a,c,d,e,f,g){Fb.call(this);this.o=null;this.a=a?a:new Image;null!==e&&(this.a.crossOrigin=e);this.c=g?document.createElement("CANVAS"):null;this.j=
g;this.i=null;this.f=f;this.g=d;this.l=c;this.s=!1;2==this.f&&Ai(this)}y(zi,Fb);function Ai(a){var c=Pg(1,1);try{c.drawImage(a.a,0,0),c.getImageData(0,0,1,1)}catch(d){a.s=!0}}zi.prototype.A=function(){this.f=3;this.i.forEach(sb);this.i=null;this.b("change")};zi.prototype.U=function(){this.f=2;this.g&&(this.a.width=this.g[0],this.a.height=this.g[1]);this.g=[this.a.width,this.a.height];this.i.forEach(sb);this.i=null;Ai(this);if(!this.s&&null!==this.j){this.c.width=this.a.width;this.c.height=this.a.height;
var a=this.c.getContext("2d");a.drawImage(this.a,0,0);for(var c=a.getImageData(0,0,this.a.width,this.a.height),d=c.data,e=this.j[0]/255,f=this.j[1]/255,g=this.j[2]/255,h=0,k=d.length;h<k;h+=4)d[h]*=e,d[h+1]*=f,d[h+2]*=g;a.putImageData(c,0,0)}this.b("change")};zi.prototype.load=function(){if(0==this.f){this.f=1;this.i=[xb(this.a,"error",this.A,this),xb(this.a,"load",this.U,this)];try{this.a.src=this.l}catch(a){this.A()}}};function yi(){this.b={};this.a=0}da(yi);yi.prototype.clear=function(){this.b=
{};this.a=0};yi.prototype.get=function(a,c,d){a=c+":"+a+":"+(d?Oe(d):"null");return a in this.b?this.b[a]:null};yi.prototype.set=function(a,c,d,e){this.b[c+":"+a+":"+(d?Oe(d):"null")]=e;++this.a};function Bi(a,c){this.i=c;this.g={};this.s={}}y(Bi,Ab);function Ci(a){var c=a.viewState,d=a.coordinateToPixelMatrix;ki(d,a.size[0]/2,a.size[1]/2,1/c.resolution,-1/c.resolution,-c.rotation,-c.center[0],-c.center[1]);jc(d,a.pixelToCoordinateMatrix)}l=Bi.prototype;l.fa=function(){for(var a in this.g)Bb(this.g[a])};
function Di(){var a=yi.Wb();if(32<a.a){var c=0,d,e;for(d in a.b)e=a.b[d],0!==(c++&3)||Gb(e)||(delete a.b[d],--a.a)}}l.sf=function(a,c,d,e,f,g){function h(a,f){var g=x(a).toString(),h=c.layerStates[x(f)].Kc;if(!(g in c.skippedFeatureUids)||h)return d.call(e,a,h?f:null)}var k,m=c.viewState,n=m.resolution,p=m.projection,m=a;if(p.a){var p=p.G(),q=Lc(p),r=a[0];if(r<p[0]||r>p[2])m=[r+q*Math.ceil((p[0]-r)/q),a[1]]}p=c.layerStatesArray;for(q=p.length-1;0<=q;--q){var t=p[q],r=t.layer;if(hi(t,n)&&f.call(g,
r)&&(t=Ei(this,r),r.ea()&&(k=t.ib(r.ea().N?m:a,c,h,e)),k))return k}};l.kh=function(a,c,d,e,f,g){var h,k=c.viewState.resolution,m=c.layerStatesArray,n;for(n=m.length-1;0<=n;--n){h=m[n];var p=h.layer;if(hi(h,k)&&f.call(g,p)&&(h=Ei(this,p).zc(a,c,d,e)))return h}};l.lh=function(a,c,d,e){return void 0!==this.sf(a,c,Tc,this,d,e)};function Ei(a,c){var d=x(c).toString();if(d in a.g)return a.g[d];var e=a.Re(c);a.g[d]=e;a.s[d]=C(e,"change",a.Fk,a);return e}l.Fk=function(){this.i.render()};l.xe=ta;l.wo=function(a,
c){for(var d in this.g)if(!(c&&d in c.layerStates)){var e=d,f=this.g[e];delete this.g[e];sb(this.s[e]);delete this.s[e];Bb(f)}};function Fi(a,c){for(var d in a.g)if(!(d in c.layerStates)){c.postRenderFunctions.push(a.wo.bind(a));break}}function db(a,c){return a.zIndex-c.zIndex}function Gi(a,c){this.l=a;this.j=c;this.b=[];this.a=[];this.g={}}Gi.prototype.clear=function(){this.b.length=0;this.a.length=0;nb(this.g)};function Hi(a){var c=a.b,d=a.a,e=c[0];1==c.length?(c.length=0,d.length=0):(c[0]=c.pop(),
d[0]=d.pop(),Ii(a,0));c=a.j(e);delete a.g[c];return e}Gi.prototype.f=function(a){var c=this.l(a);return Infinity!=c?(this.b.push(a),this.a.push(c),this.g[this.j(a)]=!0,Ji(this,0,this.b.length-1),!0):!1};Gi.prototype.tc=function(){return this.b.length};Gi.prototype.Qa=function(){return 0===this.b.length};function Ii(a,c){for(var d=a.b,e=a.a,f=d.length,g=d[c],h=e[c],k=c;c<f>>1;){var m=2*c+1,n=2*c+2,m=n<f&&e[n]<e[m]?n:m;d[c]=d[m];e[c]=e[m];c=m}d[c]=g;e[c]=h;Ji(a,k,c)}function Ji(a,c,d){var e=a.b;a=a.a;
for(var f=e[d],g=a[d];d>c;){var h=d-1>>1;if(a[h]>g)e[d]=e[h],a[d]=a[h],d=h;else break}e[d]=f;a[d]=g}function Ki(a){var c=a.l,d=a.b,e=a.a,f=0,g=d.length,h,k,m;for(k=0;k<g;++k)h=d[k],m=c(h),Infinity==m?delete a.g[a.j(h)]:(e[f]=m,d[f++]=h);d.length=f;e.length=f;for(c=(a.b.length>>1)-1;0<=c;c--)Ii(a,c)}function Li(a,c){Gi.call(this,function(c){return a.apply(null,c)},function(a){return a[0].gb()});this.s=c;this.i=0;this.c={}}y(Li,Gi);Li.prototype.f=function(a){var c=Li.ia.f.call(this,a);c&&C(a[0],"change",
this.o,this);return c};Li.prototype.o=function(a){a=a.target;var c=a.V();if(2===c||3===c||4===c||5===c)yb(a,"change",this.o,this),a=a.gb(),a in this.c&&(delete this.c[a],--this.i),this.s()};function Mi(a,c,d){for(var e=0,f,g;a.i<c&&e<d&&0<a.tc();)f=Hi(a)[0],g=f.gb(),0!==f.V()||g in a.c||(a.c[g]=!0,++a.i,++e,f.load())}function Ni(a,c,d){this.f=a;this.g=c;this.i=d;this.b=[];this.a=this.c=0}function Oi(a,c){var d=a.f,e=a.a,f=a.g-e,g=Math.log(a.g/a.a)/a.f;return re({source:c,duration:g,easing:function(a){return e*
(Math.exp(d*a*g)-1)/f}})}function Pi(a){Kb.call(this);this.A=null;this.i(!0);this.handleEvent=a.handleEvent}y(Pi,Kb);Pi.prototype.f=function(){return this.get("active")};Pi.prototype.j=function(){return this.A};Pi.prototype.i=function(a){this.set("active",a)};Pi.prototype.setMap=function(a){this.A=a};function Qi(a,c,d,e,f){if(void 0!==d){var g=c.Ma(),h=c.bb();void 0!==g&&h&&f&&0<f&&(a.Va(se({rotation:g,duration:f,easing:ne})),e&&a.Va(re({source:h,duration:f,easing:ne})));c.rotate(d,e)}}function Ri(a,
c,d,e,f){var g=c.$();d=c.constrainResolution(g,d,0);Si(a,c,d,e,f)}function Si(a,c,d,e,f){if(d){var g=c.$(),h=c.bb();void 0!==g&&h&&d!==g&&f&&0<f&&(a.Va(te({resolution:g,duration:f,easing:ne})),e&&a.Va(re({source:h,duration:f,easing:ne})));if(e){var k;a=c.bb();f=c.$();void 0!==a&&void 0!==f&&(k=[e[0]-d*(e[0]-a[0])/f,e[1]-d*(e[1]-a[1])/f]);c.lb(k)}c.Sb(d)}}function Ti(a){a=a?a:{};this.a=a.delta?a.delta:1;Pi.call(this,{handleEvent:Ui});this.c=void 0!==a.duration?a.duration:250}y(Ti,Pi);function Ui(a){var c=
!1,d=a.originalEvent;if(a.type==Uh){var c=a.map,e=a.coordinate,d=d.shiftKey?-this.a:this.a,f=c.aa();Ri(c,f,d,e,this.c);a.preventDefault();c=!0}return!c}function Vi(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Wi(a){a=a.originalEvent;return 0==a.button&&!(bf&&$g&&a.ctrlKey)}function Xi(a){return"pointermove"==a.type}function Yi(a){return a.type==Vh}function Zi(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function $i(a){a=a.originalEvent;
return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function aj(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function bj(a){return"mouse"==a.b.pointerType}function cj(a){a=a?a:{};Pi.call(this,{handleEvent:a.handleEvent?a.handleEvent:dj});this.Uc=a.handleDownEvent?a.handleDownEvent:Uc;this.He=a.handleDragEvent?a.handleDragEvent:ta;this.Ie=a.handleMoveEvent?a.handleMoveEvent:ta;this.Je=a.handleUpEvent?a.handleUpEvent:Uc;this.N=!1;this.xa={};this.o=[]}y(cj,Pi);
function ej(a){for(var c=a.length,d=0,e=0,f=0;f<c;f++)d+=a[f].clientX,e+=a[f].clientY;return[d/c,e/c]}function dj(a){if(!(a instanceof Qh))return!0;var c=!1,d=a.type;if(d===Zh||d===ai||d===Xh)d=a.b,a.type==Xh?delete this.xa[d.pointerId]:a.type==Zh?this.xa[d.pointerId]=d:d.pointerId in this.xa&&(this.xa[d.pointerId]=d),this.o=ob(this.xa);this.N&&(a.type==ai?this.He(a):a.type==Xh&&(this.N=this.Je(a)));a.type==Zh?(this.N=a=this.Uc(a),c=this.Dc(a)):a.type==$h&&this.Ie(a);return!c}cj.prototype.Dc=function(a){return a};
function fj(a){cj.call(this,{handleDownEvent:gj,handleDragEvent:hj,handleUpEvent:ij});a=a?a:{};this.a=a.kinetic;this.c=this.l=null;this.B=a.condition?a.condition:Zi;this.s=!1}y(fj,cj);function hj(a){var c=ej(this.o);this.a&&this.a.b.push(c[0],c[1],Date.now());if(this.c){var d=this.c[0]-c[0],e=c[1]-this.c[1];a=a.map;var f=a.aa(),g=f.V(),e=d=[d,e],h=g.resolution;e[0]*=h;e[1]*=h;Wb(d,g.rotation);Rb(d,g.center);d=f.Md(d);a.render();f.lb(d)}this.c=c}function ij(a){a=a.map;var c=a.aa();if(0===this.o.length){var d;
if(d=!this.s&&this.a)if(d=this.a,6>d.b.length)d=!1;else{var e=Date.now()-d.i,f=d.b.length-3;if(d.b[f+2]<e)d=!1;else{for(var g=f-3;0<g&&d.b[g+2]>e;)g-=3;var e=d.b[f+2]-d.b[g+2],h=d.b[f]-d.b[g],f=d.b[f+1]-d.b[g+1];d.c=Math.atan2(f,h);d.a=Math.sqrt(h*h+f*f)/e;d=d.a>d.g}}d&&(d=this.a,d=(d.g-d.a)/d.f,f=this.a.c,g=c.bb(),this.l=Oi(this.a,g),a.Va(this.l),g=a.Ga(g),d=a.Oa([g[0]-d*Math.cos(f),g[1]-d*Math.sin(f)]),d=c.Md(d),c.lb(d));le(c,-1);a.render();return!1}this.c=null;return!0}function gj(a){if(0<this.o.length&&
this.B(a)){var c=a.map,d=c.aa();this.c=null;this.N||le(d,1);c.render();this.l&&$a(c.D,this.l)&&(d.lb(a.frameState.viewState.center),this.l=null);this.a&&(a=this.a,a.b.length=0,a.c=0,a.a=0);this.s=1<this.o.length;return!0}return!1}fj.prototype.Dc=Uc;function jj(a){a=a?a:{};cj.call(this,{handleDownEvent:kj,handleDragEvent:lj,handleUpEvent:mj});this.c=a.condition?a.condition:Vi;this.a=void 0;this.l=void 0!==a.duration?a.duration:250}y(jj,cj);function lj(a){if(bj(a)){var c=a.map,d=c.ab();a=a.pixel;d=
Math.atan2(d[1]/2-a[1],a[0]-d[0]/2);if(void 0!==this.a){a=d-this.a;var e=c.aa(),f=e.Ma();c.render();Qi(c,e,f-a)}this.a=d}}function mj(a){if(!bj(a))return!0;a=a.map;var c=a.aa();le(c,-1);var d=c.Ma(),e=this.l,d=c.constrainRotation(d,0);Qi(a,c,d,void 0,e);return!1}function kj(a){return bj(a)&&Wi(a)&&this.c(a)?(a=a.map,le(a.aa(),1),a.render(),this.a=void 0,!0):!1}jj.prototype.Dc=Uc;function nj(a){this.f=null;this.a=document.createElement("div");this.a.style.position="absolute";this.a.className="ol-box "+
a;this.g=this.c=this.b=null}y(nj,Ab);nj.prototype.fa=function(){this.setMap(null)};function oj(a){var c=a.c,d=a.g;a=a.a.style;a.left=Math.min(c[0],d[0])+"px";a.top=Math.min(c[1],d[1])+"px";a.width=Math.abs(d[0]-c[0])+"px";a.height=Math.abs(d[1]-c[1])+"px"}nj.prototype.setMap=function(a){if(this.b){this.b.B.removeChild(this.a);var c=this.a.style;c.left=c.top=c.width=c.height="inherit"}(this.b=a)&&this.b.B.appendChild(this.a)};function pj(a){var c=a.c,d=a.g,c=[c,[c[0],d[1]],d,[d[0],c[1]]].map(a.b.Oa,
a.b);c[4]=c[0].slice();a.f?a.f.ma([c]):a.f=new F([c])}nj.prototype.W=function(){return this.f};function qj(a,c,d){Cb.call(this,a);this.coordinate=c;this.mapBrowserEvent=d}y(qj,Cb);function rj(a){cj.call(this,{handleDownEvent:sj,handleDragEvent:tj,handleUpEvent:uj});a=a?a:{};this.a=new nj(a.className||"ol-dragbox");this.c=null;this.H=a.condition?a.condition:Tc;this.B=a.boxEndCondition?a.boxEndCondition:vj}y(rj,cj);function vj(a,c,d){a=d[0]-c[0];c=d[1]-c[1];return 64<=a*a+c*c}function tj(a){if(bj(a)){var c=
this.a,d=a.pixel;c.c=this.c;c.g=d;pj(c);oj(c);this.b(new qj("boxdrag",a.coordinate,a))}}rj.prototype.W=function(){return this.a.W()};rj.prototype.s=ta;function uj(a){if(!bj(a))return!0;this.a.setMap(null);this.B(a,this.c,a.pixel)&&(this.s(a),this.b(new qj("boxend",a.coordinate,a)));return!1}function sj(a){if(bj(a)&&Wi(a)&&this.H(a)){this.c=a.pixel;this.a.setMap(a.map);var c=this.a,d=this.c;c.c=this.c;c.g=d;pj(c);oj(c);this.b(new qj("boxstart",a.coordinate,a));return!0}return!1}function wj(a){a=a?
a:{};var c=a.condition?a.condition:$i;this.l=void 0!==a.duration?a.duration:200;this.D=void 0!==a.out?a.out:!1;rj.call(this,{condition:c,className:a.className||"ol-dragzoom"})}y(wj,rj);wj.prototype.s=function(){var a=this.A,c=a.aa(),d=a.ab(),e=this.W().G();if(this.D){var f=c.Gc(d),e=[a.Ga(Fc(e)),a.Ga(Hc(e))],g=yc(Infinity,Infinity,-Infinity,-Infinity,void 0),h,k;h=0;for(k=e.length;h<k;++h)pc(g,e[h]);Rc(f,1/he(g,d));e=f}d=c.constrainResolution(he(e,d));f=c.$();g=c.bb();a.Va(te({resolution:f,duration:this.l,
easing:ne}));a.Va(re({source:g,duration:this.l,easing:ne}));c.lb(Nc(e));c.Sb(d)};function xj(a){Pi.call(this,{handleEvent:yj});a=a||{};this.a=function(a){return Zi.call(this,a)&&aj.call(this,a)};this.c=void 0!==a.condition?a.condition:this.a;this.o=void 0!==a.duration?a.duration:100;this.l=void 0!==a.pixelDelta?a.pixelDelta:128}y(xj,Pi);function yj(a){var c=!1;if("keydown"==a.type){var d=a.originalEvent.keyCode;if(this.c(a)&&(40==d||37==d||39==d||38==d)){var e=a.map,c=e.aa(),f=c.$()*this.l,g=0,h=
0;40==d?h=-f:37==d?g=-f:39==d?g=f:h=f;d=[g,h];Wb(d,c.Ma());f=this.o;if(g=c.bb())f&&0<f&&e.Va(re({source:g,duration:f,easing:pe})),e=c.Md([g[0]+d[0],g[1]+d[1]]),c.lb(e);a.preventDefault();c=!0}}return!c}function zj(a){Pi.call(this,{handleEvent:Aj});a=a?a:{};this.c=a.condition?a.condition:aj;this.a=a.delta?a.delta:1;this.o=void 0!==a.duration?a.duration:100}y(zj,Pi);function Aj(a){var c=!1;if("keydown"==a.type||"keypress"==a.type){var d=a.originalEvent.charCode;if(this.c(a)&&(43==d||45==d)){c=a.map;
d=43==d?this.a:-this.a;c.render();var e=c.aa();Ri(c,e,d,void 0,this.o);a.preventDefault();c=!0}}return!c}function Bj(a){Pi.call(this,{handleEvent:Cj});a=a||{};this.c=0;this.N=void 0!==a.duration?a.duration:250;this.s=void 0!==a.useAnchor?a.useAnchor:!0;this.a=null;this.l=this.o=void 0}y(Bj,Pi);function Cj(a){var c=!1;if("wheel"==a.type||"mousewheel"==a.type){var c=a.map,d=a.originalEvent;this.s&&(this.a=a.coordinate);var e;"wheel"==a.type?(e=d.deltaY,Yg&&d.deltaMode===aa.WheelEvent.DOM_DELTA_PIXEL&&
(e/=ah),d.deltaMode===aa.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"==a.type&&(e=-d.wheelDeltaY,Zg&&(e/=3));this.c+=e;void 0===this.o&&(this.o=Date.now());e=Math.max(80-(Date.now()-this.o),0);aa.clearTimeout(this.l);this.l=aa.setTimeout(this.B.bind(this,c),e);a.preventDefault();c=!0}return!c}Bj.prototype.B=function(a){var c=La(this.c,-1,1),d=a.aa();a.render();Ri(a,d,-c,this.a,this.N);this.c=0;this.a=null;this.l=this.o=void 0};Bj.prototype.H=function(a){this.s=a;a||(this.a=null)};function Dj(a){cj.call(this,
{handleDownEvent:Ej,handleDragEvent:Fj,handleUpEvent:Gj});a=a||{};this.c=null;this.l=void 0;this.a=!1;this.s=0;this.H=void 0!==a.threshold?a.threshold:.3;this.B=void 0!==a.duration?a.duration:250}y(Dj,cj);function Fj(a){var c=0,d=this.o[0],e=this.o[1],d=Math.atan2(e.clientY-d.clientY,e.clientX-d.clientX);void 0!==this.l&&(c=d-this.l,this.s+=c,!this.a&&Math.abs(this.s)>this.H&&(this.a=!0));this.l=d;a=a.map;d=a.a.getBoundingClientRect();e=ej(this.o);e[0]-=d.left;e[1]-=d.top;this.c=a.Oa(e);this.a&&(d=
a.aa(),e=d.Ma(),a.render(),Qi(a,d,e+c,this.c))}function Gj(a){if(2>this.o.length){a=a.map;var c=a.aa();le(c,-1);if(this.a){var d=c.Ma(),e=this.c,f=this.B,d=c.constrainRotation(d,0);Qi(a,c,d,e,f)}return!1}return!0}function Ej(a){return 2<=this.o.length?(a=a.map,this.c=null,this.l=void 0,this.a=!1,this.s=0,this.N||le(a.aa(),1),a.render(),!0):!1}Dj.prototype.Dc=Uc;function Hj(a){cj.call(this,{handleDownEvent:Ij,handleDragEvent:Jj,handleUpEvent:Kj});a=a?a:{};this.c=null;this.s=void 0!==a.duration?a.duration:
400;this.a=void 0;this.l=1}y(Hj,cj);function Jj(a){var c=1,d=this.o[0],e=this.o[1],f=d.clientX-e.clientX,d=d.clientY-e.clientY,f=Math.sqrt(f*f+d*d);void 0!==this.a&&(c=this.a/f);this.a=f;1!=c&&(this.l=c);a=a.map;var f=a.aa(),d=f.$(),e=a.a.getBoundingClientRect(),g=ej(this.o);g[0]-=e.left;g[1]-=e.top;this.c=a.Oa(g);a.render();Si(a,f,d*c,this.c)}function Kj(a){if(2>this.o.length){a=a.map;var c=a.aa();le(c,-1);var d=c.$(),e=this.c,f=this.s,d=c.constrainResolution(d,0,this.l-1);Si(a,c,d,e,f);return!1}return!0}
function Ij(a){return 2<=this.o.length?(a=a.map,this.c=null,this.a=void 0,this.l=1,this.N||le(a.aa(),1),a.render(),!0):!1}Hj.prototype.Dc=Uc;function Lj(a){a=a?a:{};var c=new De,d=new Ni(-.005,.05,100);(void 0!==a.altShiftDragRotate?a.altShiftDragRotate:1)&&c.push(new jj);(void 0!==a.doubleClickZoom?a.doubleClickZoom:1)&&c.push(new Ti({delta:a.zoomDelta,duration:a.zoomDuration}));(void 0!==a.dragPan?a.dragPan:1)&&c.push(new fj({kinetic:d}));(void 0!==a.pinchRotate?a.pinchRotate:1)&&c.push(new Dj);
(void 0!==a.pinchZoom?a.pinchZoom:1)&&c.push(new Hj({duration:a.zoomDuration}));if(void 0!==a.keyboard?a.keyboard:1)c.push(new xj),c.push(new zj({delta:a.zoomDelta,duration:a.zoomDuration}));(void 0!==a.mouseWheelZoom?a.mouseWheelZoom:1)&&c.push(new Bj({duration:a.zoomDuration}));(void 0!==a.shiftDragZoom?a.shiftDragZoom:1)&&c.push(new wj({duration:a.zoomDuration}));return c}function Mj(a){var c=a||{};a=mb({},c);delete a.layers;c=c.layers;ci.call(this,a);this.f=[];this.a={};C(this,Mb("layers"),this.Hk,
this);c?Array.isArray(c)&&(c=new De(c.slice())):c=new De;this.hh(c)}y(Mj,ci);l=Mj.prototype;l.Wd=function(){this.yb()&&this.u()};l.Hk=function(){this.f.forEach(sb);this.f.length=0;var a=this.Nc();this.f.push(C(a,"add",this.Gk,this),C(a,"remove",this.Ik,this));for(var c in this.a)this.a[c].forEach(sb);nb(this.a);var a=a.a,d,e;c=0;for(d=a.length;c<d;c++)e=a[c],this.a[x(e).toString()]=[C(e,"propertychange",this.Wd,this),C(e,"change",this.Wd,this)];this.u()};l.Gk=function(a){a=a.element;var c=x(a).toString();
this.a[c]=[C(a,"propertychange",this.Wd,this),C(a,"change",this.Wd,this)];this.u()};l.Ik=function(a){a=x(a.element).toString();this.a[a].forEach(sb);delete this.a[a];this.u()};l.Nc=function(){return this.get("layers")};l.hh=function(a){this.set("layers",a)};l.bf=function(a){var c=void 0!==a?a:[],d=c.length;this.Nc().forEach(function(a){a.bf(c)});a=di(this);var e,f;for(e=c.length;d<e;d++)f=c[d],f.opacity*=a.opacity,f.visible=f.visible&&a.visible,f.maxResolution=Math.min(f.maxResolution,a.maxResolution),
f.minResolution=Math.max(f.minResolution,a.minResolution),void 0!==a.extent&&(f.extent=void 0!==f.extent?Pc(f.extent,a.extent):a.extent);return c};l.df=function(){return"ready"};function Nj(a){Yc.call(this,{code:a,units:"m",extent:Oj,global:!0,worldExtent:Pj})}y(Nj,Yc);Nj.prototype.getPointResolution=function(a,c){return a/Ma(c[1]/6378137)};var Qj=6378137*Math.PI,Oj=[-Qj,-Qj,Qj,Qj],Pj=[-180,-85,180,85],jd="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Nj(a)});
function kd(a,c,d){var e=a.length;d=1<d?d:2;void 0===c&&(2<d?c=a.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=6378137*Math.PI*a[f]/180,c[f+1]=6378137*Math.log(Math.tan(Math.PI*(a[f+1]+90)/360));return c}function ld(a,c,d){var e=a.length;d=1<d?d:2;void 0===c&&(2<d?c=a.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=180*a[f]/(6378137*Math.PI),c[f+1]=360*Math.atan(Math.exp(a[f+1]/6378137))/Math.PI-90;return c}var Rj=new Vc(6378137);function Sj(a,c){Yc.call(this,{code:a,units:"degrees",extent:Tj,axisOrientation:c,
global:!0,metersPerUnit:Uj,worldExtent:Tj})}y(Sj,Yc);Sj.prototype.getPointResolution=function(a){return a};var Tj=[-180,-90,180,90],Uj=Math.PI*Rj.radius/180,md=[new Sj("CRS:84"),new Sj("EPSG:4326","neu"),new Sj("urn:ogc:def:crs:EPSG::4326","neu"),new Sj("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Sj("urn:ogc:def:crs:OGC:1.3:CRS84"),new Sj("urn:ogc:def:crs:OGC:2:84"),new Sj("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Sj("urn:x-ogc:def:crs:EPSG:4326","neu")];function Vj(){bd(jd);bd(md);
id()}function Wj(a){gi.call(this,a?a:{})}y(Wj,gi);function Xj(a){a=a?a:{};var c=mb({},a);delete c.preload;delete c.useInterimTilesOnError;gi.call(this,c);this.c(void 0!==a.preload?a.preload:0);this.i(void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0)}y(Xj,gi);Xj.prototype.a=function(){return this.get("preload")};Xj.prototype.c=function(a){this.set("preload",a)};Xj.prototype.f=function(){return this.get("useInterimTilesOnError")};Xj.prototype.i=function(a){this.set("useInterimTilesOnError",
a)};var Yj=[0,0,0,1],Zj=[],ak=[0,0,0,1];function bk(a,c,d,e){0!==c&&(a.translate(d,e),a.rotate(c),a.translate(-d,-e))}function ck(a){a=a||{};this.b=void 0!==a.color?a.color:null;this.a=void 0}ck.prototype.g=function(){return this.b};ck.prototype.f=function(a){this.b=a;this.a=void 0};function dk(a){void 0===a.a&&(a.a=a.b instanceof CanvasPattern||a.b instanceof CanvasGradient?x(a.b).toString():"f"+(a.b?Oe(a.b):"-"));return a.a}function ek(){this.a=-1}function fk(){this.a=-1;this.a=64;this.b=Array(4);
this.c=Array(this.a);this.f=this.g=0;this.b[0]=1732584193;this.b[1]=4023233417;this.b[2]=2562383102;this.b[3]=271733878;this.f=this.g=0}y(fk,ek);function gk(a,c,d){d||(d=0);var e=Array(16);if(ga(c))for(var f=0;16>f;++f)e[f]=c.charCodeAt(d++)|c.charCodeAt(d++)<<8|c.charCodeAt(d++)<<16|c.charCodeAt(d++)<<24;else for(f=0;16>f;++f)e[f]=c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24;c=a.b[0];d=a.b[1];var f=a.b[2],g=a.b[3],h=0,h=c+(g^d&(f^g))+e[0]+3614090360&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^
f))+e[1]+3905402710&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[2]+606105819&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[3]+3250441966&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[4]+4118548399&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[5]+1200080426&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[6]+2821735955&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[7]+4249261313&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+
(g^d&(f^g))+e[8]+1770035416&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[9]+2336552879&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[10]+4294925233&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[11]+2304563134&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[12]+1804603682&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[13]+4254626195&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[14]+2792965006&4294967295;f=g+(h<<17&4294967295|
h>>>15);h=d+(c^f&(g^c))+e[15]+1236535329&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(f^g&(d^f))+e[1]+4129170786&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[6]+3225465664&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[11]+643717713&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[0]+3921069994&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[5]+3593408605&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[10]+38016083&4294967295;g=c+(h<<9&4294967295|
h>>>23);h=f+(c^d&(g^c))+e[15]+3634488961&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[4]+3889429448&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[9]+568446438&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[14]+3275163606&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[3]+4107603335&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[8]+1163531501&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[13]+2850285829&4294967295;c=d+(h<<5&4294967295|
h>>>27);h=g+(d^f&(c^d))+e[2]+4243563512&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[7]+1735328473&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[12]+2368359562&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(d^f^g)+e[5]+4294588738&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[8]+2272392833&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[11]+1839030562&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[14]+4259657740&4294967295;d=f+(h<<23&4294967295|h>>>9);
h=c+(d^f^g)+e[1]+2763975236&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[4]+1272893353&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[7]+4139469664&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[10]+3200236656&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[13]+681279174&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[0]+3936430074&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[3]+3572445317&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[6]+76029189&
4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[9]+3654602809&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[12]+3873151461&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[15]+530742520&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[2]+3299628645&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(f^(d|~g))+e[0]+4096336452&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[7]+1126891415&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[14]+2878612391&4294967295;
f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[5]+4237533241&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[12]+1700485571&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[3]+2399980690&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[10]+4293915773&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[1]+2240044497&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[8]+1873313359&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[15]+4264355552&4294967295;
g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[6]+2734768916&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[13]+1309151649&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[4]+4149444226&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[11]+3174756917&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[2]+718787259&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[9]+3951481745&4294967295;a.b[0]=a.b[0]+c&4294967295;a.b[1]=a.b[1]+(f+(h<<21&4294967295|h>>>11))&
4294967295;a.b[2]=a.b[2]+f&4294967295;a.b[3]=a.b[3]+g&4294967295}function hk(a,c){var d;ca(d)||(d=c.length);for(var e=d-a.a,f=a.c,g=a.g,h=0;h<d;){if(0==g)for(;h<=e;)gk(a,c,h),h+=a.a;if(ga(c))for(;h<d;){if(f[g++]=c.charCodeAt(h++),g==a.a){gk(a,f);g=0;break}}else for(;h<d;)if(f[g++]=c[h++],g==a.a){gk(a,f);g=0;break}}a.g=g;a.f+=d}function ik(a){a=a||{};this.b=void 0!==a.color?a.color:null;this.f=a.lineCap;this.g=void 0!==a.lineDash?a.lineDash:null;this.c=a.lineJoin;this.i=a.miterLimit;this.a=a.width;
this.j=void 0}l=ik.prototype;l.jn=function(){return this.b};l.Tj=function(){return this.f};l.kn=function(){return this.g};l.Uj=function(){return this.c};l.Zj=function(){return this.i};l.ln=function(){return this.a};l.mn=function(a){this.b=a;this.j=void 0};l.Ho=function(a){this.f=a;this.j=void 0};l.nn=function(a){this.g=a;this.j=void 0};l.Io=function(a){this.c=a;this.j=void 0};l.Jo=function(a){this.i=a;this.j=void 0};l.No=function(a){this.a=a;this.j=void 0};function jk(a){if(void 0===a.j){var c="s"+
(a.b?Oe(a.b):"-")+","+(void 0!==a.f?a.f.toString():"-")+","+(a.g?a.g.toString():"-")+","+(void 0!==a.c?a.c:"-")+","+(void 0!==a.i?a.i.toString():"-")+","+(void 0!==a.a?a.a.toString():"-"),d=new fk;hk(d,c);c=Array((56>d.g?d.a:2*d.a)-d.g);c[0]=128;for(var e=1;e<c.length-8;++e)c[e]=0;for(var f=8*d.f,e=c.length-8;e<c.length;++e)c[e]=f&255,f/=256;hk(d,c);c=Array(16);for(e=f=0;4>e;++e)for(var g=0;32>g;g+=8)c[f++]=d.b[e]>>>g&255;if(8192>=c.length)d=String.fromCharCode.apply(null,c);else for(d="",e=0;e<c.length;e+=
8192)f=Ie(c,e,e+8192),d+=String.fromCharCode.apply(null,f);a.j=d}return a.j}function kk(a){a=a||{};this.i=this.b=this.c=null;this.f=void 0!==a.fill?a.fill:null;this.a=void 0!==a.stroke?a.stroke:null;this.g=a.radius;this.U=[0,0];this.l=this.H=this.o=null;var c=a.atlasManager,d,e=null,f,g=0;this.a&&(f=Oe(this.a.b),g=this.a.a,void 0===g&&(g=1),e=this.a.g,bh||(e=null));var h=2*(this.g+g)+1;f={strokeStyle:f,yd:g,size:h,lineDash:e};if(void 0===c)this.b=document.createElement("CANVAS"),this.b.height=h,this.b.width=
h,d=h=this.b.width,c=this.b.getContext("2d"),this.Ah(f,c,0,0),this.f?this.i=this.b:(c=this.i=document.createElement("CANVAS"),c.height=f.size,c.width=f.size,c=c.getContext("2d"),this.zh(f,c,0,0));else{h=Math.round(h);(e=!this.f)&&(d=this.zh.bind(this,f));var g=this.a?jk(this.a):"-",k=this.f?dk(this.f):"-";this.c&&g==this.c[1]&&k==this.c[2]&&this.g==this.c[3]||(this.c=["c"+g+k+(void 0!==this.g?this.g.toString():"-"),g,k,this.g]);f=c.add(this.c[0],h,h,this.Ah.bind(this,f),d);this.b=f.image;this.U=[f.offsetX,
f.offsetY];d=f.image.width;this.i=e?f.Lg:this.b}this.o=[h/2,h/2];this.H=[h,h];this.l=[d,d];wi.call(this,{opacity:1,rotateWithView:!1,rotation:0,scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0})}y(kk,wi);l=kk.prototype;l.Vb=function(){return this.o};l.$m=function(){return this.f};l.ke=function(){return this.i};l.ec=function(){return this.b};l.qd=function(){return 2};l.hd=function(){return this.l};l.Ia=function(){return this.U};l.an=function(){return this.g};l.Db=function(){return this.H};
l.bn=function(){return this.a};l.hf=ta;l.load=ta;l.Qf=ta;l.Ah=function(a,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(a.size/2,a.size/2,this.g,0,2*Math.PI,!0);this.f&&(c.fillStyle=Qe(this.f.b),c.fill());this.a&&(c.strokeStyle=a.strokeStyle,c.lineWidth=a.yd,a.lineDash&&c.setLineDash(a.lineDash),c.stroke());c.closePath()};l.zh=function(a,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(a.size/2,a.size/2,this.g,0,2*Math.PI,!0);c.fillStyle=Oe(Yj);c.fill();
this.a&&(c.strokeStyle=a.strokeStyle,c.lineWidth=a.yd,a.lineDash&&c.setLineDash(a.lineDash),c.stroke());c.closePath()};function lk(a){a=a||{};this.i=null;this.g=mk;void 0!==a.geometry&&this.Dh(a.geometry);this.c=void 0!==a.fill?a.fill:null;this.a=void 0!==a.image?a.image:null;this.f=void 0!==a.stroke?a.stroke:null;this.j=void 0!==a.text?a.text:null;this.b=a.zIndex}l=lk.prototype;l.W=function(){return this.i};l.Oj=function(){return this.g};l.pn=function(){return this.c};l.qn=function(){return this.a};
l.rn=function(){return this.f};l.Ha=function(){return this.j};l.sn=function(){return this.b};l.Dh=function(a){ia(a)?this.g=a:"string"===typeof a?this.g=function(c){return c.get(a)}:a?void 0!==a&&(this.g=function(){return a}):this.g=mk;this.i=a};l.tn=function(a){this.b=a};function nk(a){if(!ia(a)){var c;c=Array.isArray(a)?a:[a];a=function(){return c}}return a}var ok=null;function pk(){if(!ok){var a=new ck({color:"rgba(255,255,255,0.4)"}),c=new ik({color:"#3399CC",width:1.25});ok=[new lk({image:new kk({fill:a,
stroke:c,radius:5}),fill:a,stroke:c})]}return ok}function qk(){var a={},c=[255,255,255,1],d=[0,153,255,1];a.Polygon=[new lk({fill:new ck({color:[255,255,255,.5]})})];a.MultiPolygon=a.Polygon;a.LineString=[new lk({stroke:new ik({color:c,width:5})}),new lk({stroke:new ik({color:d,width:3})})];a.MultiLineString=a.LineString;a.Circle=a.Polygon.concat(a.LineString);a.Point=[new lk({image:new kk({radius:6,fill:new ck({color:d}),stroke:new ik({color:c,width:1.5})}),zIndex:Infinity})];a.MultiPoint=a.Point;
a.GeometryCollection=a.Polygon.concat(a.LineString,a.Point);return a}function mk(a){return a.W()}function G(a){a=a?a:{};var c=mb({},a);delete c.style;delete c.renderBuffer;delete c.updateWhileAnimating;delete c.updateWhileInteracting;gi.call(this,c);this.a=void 0!==a.renderBuffer?a.renderBuffer:100;this.B=null;this.f=void 0;this.c(a.style);this.s=void 0!==a.updateWhileAnimating?a.updateWhileAnimating:!1;this.A=void 0!==a.updateWhileInteracting?a.updateWhileInteracting:!1}y(G,gi);function rk(a){return a.get("renderOrder")}
G.prototype.N=function(){return this.B};G.prototype.H=function(){return this.f};G.prototype.c=function(a){this.B=void 0!==a?a:pk;this.f=null===a?void 0:nk(this.B);this.u()};function H(a){a=a?a:{};var c=mb({},a);delete c.preload;delete c.useInterimTilesOnError;G.call(this,c);this.T(a.preload?a.preload:0);this.Y(a.useInterimTilesOnError?a.useInterimTilesOnError:!0)}y(H,G);H.prototype.i=function(){return this.get("preload")};H.prototype.S=function(){return this.get("useInterimTilesOnError")};H.prototype.T=
function(a){this.set("preload",a)};H.prototype.Y=function(a){this.set("useInterimTilesOnError",a)};function sk(a,c,d,e,f){this.f=a;this.B=c;this.c=d;this.H=e;this.Uc=f;this.i=this.b=this.a=this.ya=this.xa=this.Y=null;this.rb=this.na=this.A=this.S=this.va=this.D=0;this.oa=!1;this.j=this.ta=0;this.Ua=!1;this.Fa=0;this.g="";this.l=this.N=this.lc=this.sb=0;this.T=this.s=this.o=null;this.U=[];this.mc=cc()}y(sk,ei);function tk(a,c,d){if(a.i){c=wd(c,0,d,2,a.H,a.U);d=a.f;var e=a.mc,f=d.globalAlpha;1!=a.A&&
(d.globalAlpha=f*a.A);var g=a.ta;a.oa&&(g+=a.Uc);var h,k;h=0;for(k=c.length;h<k;h+=2){var m=c[h]-a.D,n=c[h+1]-a.va;a.Ua&&(m=Math.round(m),n=Math.round(n));if(0!==g||1!=a.j){var p=m+a.D,q=n+a.va;ki(e,p,q,a.j,a.j,g,-p,-q);d.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}d.drawImage(a.i,a.na,a.rb,a.Fa,a.S,m,n,a.Fa,a.S)}0===g&&1==a.j||d.setTransform(1,0,0,1,0,0);1!=a.A&&(d.globalAlpha=f)}}function uk(a,c,d,e){var f=0;if(a.T&&""!==a.g){a.o&&vk(a,a.o);a.s&&wk(a,a.s);var g=a.T,h=a.f,k=a.ya;k?(k.font!=g.font&&
(k.font=h.font=g.font),k.textAlign!=g.textAlign&&(k.textAlign=h.textAlign=g.textAlign),k.textBaseline!=g.textBaseline&&(k.textBaseline=h.textBaseline=g.textBaseline)):(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline,a.ya={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});c=wd(c,f,d,e,a.H,a.U);for(g=a.f;f<d;f+=e){h=c[f]+a.sb;k=c[f+1]+a.lc;if(0!==a.N||1!=a.l){var m=ki(a.mc,h,k,a.l,a.l,a.N,-h,-k);g.setTransform(m[0],m[1],m[4],m[5],m[12],m[13])}a.s&&g.strokeText(a.g,
h,k);a.o&&g.fillText(a.g,h,k)}0===a.N&&1==a.l||g.setTransform(1,0,0,1,0,0)}}function xk(a,c,d,e,f,g){var h=a.f;a=wd(c,d,e,f,a.H,a.U);h.moveTo(a[0],a[1]);c=a.length;g&&(c-=2);for(d=2;d<c;d+=2)h.lineTo(a[d],a[d+1]);g&&h.closePath();return e}function yk(a,c,d,e,f){var g,h;g=0;for(h=e.length;g<h;++g)d=xk(a,c,d,e[g],f,!0);return d}l=sk.prototype;l.Nd=function(a){if(Qc(this.c,a.G())){if(this.a||this.b){this.a&&vk(this,this.a);this.b&&wk(this,this.b);var c;c=this.H;var d=this.U,e=a.ga();c=e?wd(e,0,e.length,
a.ra(),c,d):null;d=c[2]-c[0];e=c[3]-c[1];d=Math.sqrt(d*d+e*e);e=this.f;e.beginPath();e.arc(c[0],c[1],d,0,2*Math.PI);this.a&&e.fill();this.b&&e.stroke()}""!==this.g&&uk(this,a.od(),2,2)}};l.pd=function(a){this.Qb(a.c,a.f);this.Rb(a.a);this.Tb(a.Ha())};l.pc=function(a){switch(a.X()){case "Point":this.rc(a);break;case "LineString":this.dd(a);break;case "Polygon":this.We(a);break;case "MultiPoint":this.qc(a);break;case "MultiLineString":this.Ue(a);break;case "MultiPolygon":this.Ve(a);break;case "GeometryCollection":this.Te(a);
break;case "Circle":this.Nd(a)}};l.Se=function(a,c){var d=(0,c.g)(a);d&&Qc(this.c,d.G())&&(this.pd(c),this.pc(d))};l.Te=function(a){a=a.c;var c,d;c=0;for(d=a.length;c<d;++c)this.pc(a[c])};l.rc=function(a){var c=a.ga();a=a.ra();this.i&&tk(this,c,c.length);""!==this.g&&uk(this,c,c.length,a)};l.qc=function(a){var c=a.ga();a=a.ra();this.i&&tk(this,c,c.length);""!==this.g&&uk(this,c,c.length,a)};l.dd=function(a){if(Qc(this.c,a.G())){if(this.b){wk(this,this.b);var c=this.f,d=a.ga();c.beginPath();xk(this,
d,0,d.length,a.ra(),!1);c.stroke()}""!==this.g&&(a=zk(a),uk(this,a,2,2))}};l.Ue=function(a){var c=a.G();if(Qc(this.c,c)){if(this.b){wk(this,this.b);var c=this.f,d=a.ga(),e=0,f=a.Bb(),g=a.ra();c.beginPath();var h,k;h=0;for(k=f.length;h<k;++h)e=xk(this,d,e,f[h],g,!1);c.stroke()}""!==this.g&&(a=Ak(a),uk(this,a,a.length,2))}};l.We=function(a){if(Qc(this.c,a.G())){if(this.b||this.a){this.a&&vk(this,this.a);this.b&&wk(this,this.b);var c=this.f;c.beginPath();yk(this,a.Mb(),0,a.Bb(),a.ra());this.a&&c.fill();
this.b&&c.stroke()}""!==this.g&&(a=be(a),uk(this,a,2,2))}};l.Ve=function(a){if(Qc(this.c,a.G())){if(this.b||this.a){this.a&&vk(this,this.a);this.b&&wk(this,this.b);var c=this.f,d=Bk(a),e=0,f=a.i,g=a.ra(),h,k;h=0;for(k=f.length;h<k;++h){var m=f[h];c.beginPath();e=yk(this,d,e,m,g);this.a&&c.fill();this.b&&c.stroke()}}""!==this.g&&(a=Ck(a),uk(this,a,a.length,2))}};function vk(a,c){var d=a.f,e=a.Y;e?e.fillStyle!=c.fillStyle&&(e.fillStyle=d.fillStyle=c.fillStyle):(d.fillStyle=c.fillStyle,a.Y={fillStyle:c.fillStyle})}
function wk(a,c){var d=a.f,e=a.xa;e?(e.lineCap!=c.lineCap&&(e.lineCap=d.lineCap=c.lineCap),bh&&!bb(e.lineDash,c.lineDash)&&d.setLineDash(e.lineDash=c.lineDash),e.lineJoin!=c.lineJoin&&(e.lineJoin=d.lineJoin=c.lineJoin),e.lineWidth!=c.lineWidth&&(e.lineWidth=d.lineWidth=c.lineWidth),e.miterLimit!=c.miterLimit&&(e.miterLimit=d.miterLimit=c.miterLimit),e.strokeStyle!=c.strokeStyle&&(e.strokeStyle=d.strokeStyle=c.strokeStyle)):(d.lineCap=c.lineCap,bh&&d.setLineDash(c.lineDash),d.lineJoin=c.lineJoin,d.lineWidth=
c.lineWidth,d.miterLimit=c.miterLimit,d.strokeStyle=c.strokeStyle,a.xa={lineCap:c.lineCap,lineDash:c.lineDash,lineJoin:c.lineJoin,lineWidth:c.lineWidth,miterLimit:c.miterLimit,strokeStyle:c.strokeStyle})}l.Qb=function(a,c){if(a){var d=a.b;this.a={fillStyle:Qe(d?d:Yj)}}else this.a=null;if(c){var d=c.b,e=c.f,f=c.g,g=c.c,h=c.a,k=c.i;this.b={lineCap:void 0!==e?e:"round",lineDash:f?f:Zj,lineJoin:void 0!==g?g:"round",lineWidth:this.B*(void 0!==h?h:1),miterLimit:void 0!==k?k:10,strokeStyle:Oe(d?d:ak)}}else this.b=
null};l.Rb=function(a){if(a){var c=a.Vb(),d=a.ec(1),e=a.Ia(),f=a.Db();this.D=c[0];this.va=c[1];this.S=f[1];this.i=d;this.A=a.A;this.na=e[0];this.rb=e[1];this.oa=a.B;this.ta=a.s;this.j=a.j;this.Ua=a.N;this.Fa=f[0]}else this.i=null};l.Tb=function(a){if(a){var c=a.b;c?(c=c.b,this.o={fillStyle:Qe(c?c:Yj)}):this.o=null;var d=a.j;if(d){var c=d.b,e=d.f,f=d.g,g=d.c,h=d.a,d=d.i;this.s={lineCap:void 0!==e?e:"round",lineDash:f?f:Zj,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==d?
d:10,strokeStyle:Oe(c?c:ak)}}else this.s=null;var c=a.g,e=a.f,f=a.c,g=a.i,h=a.a,d=a.Ha(),k=a.o;a=a.l;this.T={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==a?a:"middle"};this.g=void 0!==d?d:"";this.sb=void 0!==e?this.B*e:0;this.lc=void 0!==f?this.B*f:0;this.N=void 0!==g?g:0;this.l=this.B*(void 0!==h?h:1)}else this.g=""};function Dk(a){ni.call(this,a);this.D=cc()}y(Dk,ni);Dk.prototype.c=function(a,c,d){Ek(this,"precompose",d,a,void 0);var e=this.f?this.f.a():
null;if(e){var f=c.extent,g=void 0!==f;if(g){var h=a.pixelRatio,k=a.size[0]*h,m=a.size[1]*h,n=a.viewState.rotation,p=Ic(f),q=Hc(f),r=Gc(f),f=Fc(f);mi(a.coordinateToPixelMatrix,p,p);mi(a.coordinateToPixelMatrix,q,q);mi(a.coordinateToPixelMatrix,r,r);mi(a.coordinateToPixelMatrix,f,f);d.save();bk(d,-n,k/2,m/2);d.beginPath();d.moveTo(p[0]*h,p[1]*h);d.lineTo(q[0]*h,q[1]*h);d.lineTo(r[0]*h,r[1]*h);d.lineTo(f[0]*h,f[1]*h);d.clip();bk(d,n,k/2,m/2)}h=this.l;k=d.globalAlpha;d.globalAlpha=c.opacity;d.drawImage(e,
0,0,+e.width,+e.height,Math.round(h[12]),Math.round(h[13]),Math.round(e.width*h[0]),Math.round(e.height*h[5]));d.globalAlpha=k;g&&d.restore()}Fk(this,d,a)};function Ek(a,c,d,e,f){var g=a.a;if(Gb(g,c)){var h=e.size[0]*e.pixelRatio,k=e.size[1]*e.pixelRatio,m=e.viewState.rotation;bk(d,-m,h/2,k/2);a=void 0!==f?f:Gk(a,e,0);a=new sk(d,e.pixelRatio,e.extent,a,e.viewState.rotation);g.b(new fi(c,g,a,e,d,null));bk(d,m,h/2,k/2)}}function Fk(a,c,d,e){Ek(a,"postcompose",c,d,e)}function Gk(a,c,d){var e=c.viewState,
f=c.pixelRatio;return ki(a.D,f*c.size[0]/2,f*c.size[1]/2,f/e.resolution,-f/e.resolution,-e.rotation,-e.center[0]+d,-e.center[1])}var Hk=["Polygon","LineString","Image","Text"];function Ik(a,c,d){this.rb=a;this.T=c;this.f=null;this.c=0;this.resolution=d;this.S=this.va=null;this.a=[];this.coordinates=[];this.xa=cc();this.b=[];this.Y=[];this.ya=cc();this.na=cc()}y(Ik,ei);function Jk(a,c,d,e,f,g){var h=a.coordinates.length,k=a.Ye(),m=[c[d],c[d+1]],n=[NaN,NaN],p=!0,q,r,t;for(q=d+f;q<e;q+=f)n[0]=c[q],n[1]=
c[q+1],t=xc(k,n),t!==r?(p&&(a.coordinates[h++]=m[0],a.coordinates[h++]=m[1]),a.coordinates[h++]=n[0],a.coordinates[h++]=n[1],p=!1):1===t?(a.coordinates[h++]=n[0],a.coordinates[h++]=n[1],p=!1):p=!0,m[0]=n[0],m[1]=n[1],r=t;q===d+f&&(a.coordinates[h++]=m[0],a.coordinates[h++]=m[1]);g&&(a.coordinates[h++]=c[d],a.coordinates[h++]=c[d+1]);return h}function Kk(a,c){a.va=[0,c,0];a.a.push(a.va);a.S=[0,c,0];a.b.push(a.S)}function Lk(a,c,d,e,f,g,h,k,m){var n;li(e,a.xa)?n=a.Y:(n=wd(a.coordinates,0,a.coordinates.length,
2,e,a.Y),gc(a.xa,e));e=!pb(g);var p=0,q=h.length,r=0,t,v=a.ya;a=a.na;for(var w,A,D,z;p<q;){var B=h[p],J,K,M,Y;switch(B[0]){case 0:r=B[1];e&&g[x(r).toString()]||!r.W()?p=B[2]:void 0===m||Qc(m,r.W().G())?++p:p=B[2];break;case 1:c.beginPath();++p;break;case 2:r=B[1];t=n[r];B=n[r+1];D=n[r+2]-t;r=n[r+3]-B;c.arc(t,B,Math.sqrt(D*D+r*r),0,2*Math.PI,!0);++p;break;case 3:c.closePath();++p;break;case 4:r=B[1];t=B[2];J=B[3];M=B[4]*d;var Ja=B[5]*d,I=B[6];K=B[7];var ba=B[8],oa=B[9];D=B[11];z=B[12];var Ta=B[13],
Aa=B[14];for(B[10]&&(D+=f);r<t;r+=2){B=n[r]-M;Y=n[r+1]-Ja;Ta&&(B=Math.round(B),Y=Math.round(Y));if(1!=z||0!==D){var Ka=B+M,fc=Y+Ja;ki(v,Ka,fc,z,z,D,-Ka,-fc);c.transform(v[0],v[1],v[4],v[5],v[12],v[13])}Ka=c.globalAlpha;1!=K&&(c.globalAlpha=Ka*K);var fc=Aa+ba>J.width?J.width-ba:Aa,uc=I+oa>J.height?J.height-oa:I;c.drawImage(J,ba,oa,fc,uc,B,Y,fc*d,uc*d);1!=K&&(c.globalAlpha=Ka);if(1!=z||0!==D)jc(v,a),c.transform(a[0],a[1],a[4],a[5],a[12],a[13])}++p;break;case 5:r=B[1];t=B[2];M=B[3];Ja=B[4]*d;I=B[5]*
d;D=B[6];z=B[7]*d;J=B[8];for(K=B[9];r<t;r+=2){B=n[r]+Ja;Y=n[r+1]+I;if(1!=z||0!==D)ki(v,B,Y,z,z,D,-B,-Y),c.transform(v[0],v[1],v[4],v[5],v[12],v[13]);ba=M.split("\n");oa=ba.length;1<oa?(Ta=Math.round(1.5*c.measureText("M").width),Y-=(oa-1)/2*Ta):Ta=0;for(Aa=0;Aa<oa;Aa++)Ka=ba[Aa],K&&c.strokeText(Ka,B,Y),J&&c.fillText(Ka,B,Y),Y+=Ta;if(1!=z||0!==D)jc(v,a),c.transform(a[0],a[1],a[4],a[5],a[12],a[13])}++p;break;case 6:if(void 0!==k&&(r=B[1],r=k(r)))return r;++p;break;case 7:c.fill();++p;break;case 8:r=
B[1];t=B[2];B=n[r];Y=n[r+1];D=B+.5|0;z=Y+.5|0;if(D!==w||z!==A)c.moveTo(B,Y),w=D,A=z;for(r+=2;r<t;r+=2)if(B=n[r],Y=n[r+1],D=B+.5|0,z=Y+.5|0,D!==w||z!==A)c.lineTo(B,Y),w=D,A=z;++p;break;case 9:c.fillStyle=B[1];++p;break;case 10:w=void 0!==B[7]?B[7]:!0;A=B[2];c.strokeStyle=B[1];c.lineWidth=w?A*d:A;c.lineCap=B[3];c.lineJoin=B[4];c.miterLimit=B[5];bh&&c.setLineDash(B[6]);A=w=NaN;++p;break;case 11:c.font=B[1];c.textAlign=B[2];c.textBaseline=B[3];++p;break;case 12:c.stroke();++p;break;default:++p}}}function Mk(a){var c=
a.b;c.reverse();var d,e=c.length,f,g,h=-1;for(d=0;d<e;++d)if(f=c[d],g=f[0],6==g)h=d;else if(0==g){f[2]=d;f=a.b;for(g=d;h<g;){var k=f[h];f[h]=f[g];f[g]=k;++h;--g}h=-1}}function Nk(a,c){a.va[2]=a.a.length;a.va=null;a.S[2]=a.b.length;a.S=null;var d=[6,c];a.a.push(d);a.b.push(d)}Ik.prototype.ge=ta;Ik.prototype.Ye=function(){return this.T};function Ok(a,c,d){Ik.call(this,a,c,d);this.o=this.Fa=null;this.D=this.H=this.N=this.B=this.U=this.A=this.s=this.l=this.j=this.i=this.g=void 0}y(Ok,Ik);Ok.prototype.rc=
function(a,c){if(this.o){Kk(this,c);var d=a.ga(),e=this.coordinates.length,d=Jk(this,d,0,d.length,a.ra(),!1);this.a.push([4,e,d,this.o,this.g,this.i,this.j,this.l,this.s,this.A,this.U,this.B,this.N,this.H,this.D]);this.b.push([4,e,d,this.Fa,this.g,this.i,this.j,this.l,this.s,this.A,this.U,this.B,this.N,this.H,this.D]);Nk(this,c)}};Ok.prototype.qc=function(a,c){if(this.o){Kk(this,c);var d=a.ga(),e=this.coordinates.length,d=Jk(this,d,0,d.length,a.ra(),!1);this.a.push([4,e,d,this.o,this.g,this.i,this.j,
this.l,this.s,this.A,this.U,this.B,this.N,this.H,this.D]);this.b.push([4,e,d,this.Fa,this.g,this.i,this.j,this.l,this.s,this.A,this.U,this.B,this.N,this.H,this.D]);Nk(this,c)}};Ok.prototype.ge=function(){Mk(this);this.i=this.g=void 0;this.o=this.Fa=null;this.D=this.H=this.B=this.U=this.A=this.s=this.l=this.N=this.j=void 0};Ok.prototype.Rb=function(a){var c=a.Vb(),d=a.Db(),e=a.ke(1),f=a.ec(1),g=a.Ia();this.g=c[0];this.i=c[1];this.Fa=e;this.o=f;this.j=d[1];this.l=a.A;this.s=g[0];this.A=g[1];this.U=
a.B;this.B=a.s;this.N=a.j;this.H=a.N;this.D=d[0]};function Pk(a,c,d){Ik.call(this,a,c,d);this.g={bd:void 0,Xc:void 0,Yc:null,Zc:void 0,$c:void 0,ad:void 0,gf:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}y(Pk,Ik);function Qk(a,c,d,e,f){var g=a.coordinates.length;c=Jk(a,c,d,e,f,!1);g=[8,g,c];a.a.push(g);a.b.push(g);return e}l=Pk.prototype;l.Ye=function(){this.f||(this.f=rc(this.T),0<this.c&&qc(this.f,this.resolution*(this.c+1)/2,this.f));return this.f};
function Rk(a){var c=a.g,d=c.strokeStyle,e=c.lineCap,f=c.lineDash,g=c.lineJoin,h=c.lineWidth,k=c.miterLimit;c.bd==d&&c.Xc==e&&bb(c.Yc,f)&&c.Zc==g&&c.$c==h&&c.ad==k||(c.gf!=a.coordinates.length&&(a.a.push([12]),c.gf=a.coordinates.length),a.a.push([10,d,h,e,g,k,f],[1]),c.bd=d,c.Xc=e,c.Yc=f,c.Zc=g,c.$c=h,c.ad=k)}l.dd=function(a,c){var d=this.g,e=d.lineWidth;void 0!==d.strokeStyle&&void 0!==e&&(Rk(this),Kk(this,c),this.b.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash],
[1]),d=a.ga(),Qk(this,d,0,d.length,a.ra()),this.b.push([12]),Nk(this,c))};l.Ue=function(a,c){var d=this.g,e=d.lineWidth;if(void 0!==d.strokeStyle&&void 0!==e){Rk(this);Kk(this,c);this.b.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash],[1]);var d=a.Bb(),e=a.ga(),f=a.ra(),g=0,h,k;h=0;for(k=d.length;h<k;++h)g=Qk(this,e,g,d[h],f);this.b.push([12]);Nk(this,c)}};l.ge=function(){this.g.gf!=this.coordinates.length&&this.a.push([12]);Mk(this);this.g=null};l.Qb=function(a,c){var d=
c.b;this.g.strokeStyle=Oe(d?d:ak);d=c.f;this.g.lineCap=void 0!==d?d:"round";d=c.g;this.g.lineDash=d?d:Zj;d=c.c;this.g.lineJoin=void 0!==d?d:"round";d=c.a;this.g.lineWidth=void 0!==d?d:1;d=c.i;this.g.miterLimit=void 0!==d?d:10;this.g.lineWidth>this.c&&(this.c=this.g.lineWidth,this.f=null)};function Sk(a,c,d){Ik.call(this,a,c,d);this.g={ng:void 0,bd:void 0,Xc:void 0,Yc:null,Zc:void 0,$c:void 0,ad:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,
miterLimit:void 0}}y(Sk,Ik);function Tk(a,c,d,e,f){var g=a.g,h=[1];a.a.push(h);a.b.push(h);var k,h=0;for(k=e.length;h<k;++h){var m=e[h],n=a.coordinates.length;d=Jk(a,c,d,m,f,!0);d=[8,n,d];n=[3];a.a.push(d,n);a.b.push(d,n);d=m}c=[7];a.b.push(c);void 0!==g.fillStyle&&a.a.push(c);void 0!==g.strokeStyle&&(g=[12],a.a.push(g),a.b.push(g));return d}l=Sk.prototype;l.Nd=function(a,c){var d=this.g,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){Uk(this);Kk(this,c);this.b.push([9,Oe(Yj)]);void 0!==d.strokeStyle&&
this.b.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash]);var f=a.ga(),e=this.coordinates.length;Jk(this,f,0,f.length,a.ra(),!1);f=[1];e=[2,e];this.a.push(f,e);this.b.push(f,e);e=[7];this.b.push(e);void 0!==d.fillStyle&&this.a.push(e);void 0!==d.strokeStyle&&(d=[12],this.a.push(d),this.b.push(d));Nk(this,c)}};l.We=function(a,c){var d=this.g,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e)Uk(this),Kk(this,c),this.b.push([9,Oe(Yj)]),void 0!==d.strokeStyle&&this.b.push([10,
d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash]),d=a.Bb(),e=a.Mb(),Tk(this,e,0,d,a.ra()),Nk(this,c)};l.Ve=function(a,c){var d=this.g,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){Uk(this);Kk(this,c);this.b.push([9,Oe(Yj)]);void 0!==d.strokeStyle&&this.b.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash]);var d=a.i,e=Bk(a),f=a.ra(),g=0,h,k;h=0;for(k=d.length;h<k;++h)g=Tk(this,e,g,d[h],f);Nk(this,c)}};l.ge=function(){Mk(this);this.g=null;
var a=this.rb;if(0!==a){var c=this.coordinates,d,e;d=0;for(e=c.length;d<e;++d)c[d]=a*Math.round(c[d]/a)}};l.Ye=function(){this.f||(this.f=rc(this.T),0<this.c&&qc(this.f,this.resolution*(this.c+1)/2,this.f));return this.f};l.Qb=function(a,c){var d=this.g;if(a){var e=a.b;d.fillStyle=Qe(e?e:Yj)}else d.fillStyle=void 0;c?(e=c.b,d.strokeStyle=Oe(e?e:ak),e=c.f,d.lineCap=void 0!==e?e:"round",e=c.g,d.lineDash=e?e.slice():Zj,e=c.c,d.lineJoin=void 0!==e?e:"round",e=c.a,d.lineWidth=void 0!==e?e:1,e=c.i,d.miterLimit=
void 0!==e?e:10,d.lineWidth>this.c&&(this.c=d.lineWidth,this.f=null)):(d.strokeStyle=void 0,d.lineCap=void 0,d.lineDash=null,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0)};function Uk(a){var c=a.g,d=c.fillStyle,e=c.strokeStyle,f=c.lineCap,g=c.lineDash,h=c.lineJoin,k=c.lineWidth,m=c.miterLimit;void 0!==d&&c.ng!=d&&(a.a.push([9,d]),c.ng=c.fillStyle);void 0===e||c.bd==e&&c.Xc==f&&c.Yc==g&&c.Zc==h&&c.$c==k&&c.ad==m||(a.a.push([10,e,k,f,h,m,g]),c.bd=e,c.Xc=f,c.Yc=g,c.Zc=h,c.$c=k,c.ad=m)}function Vk(a,
c,d){Ik.call(this,a,c,d);this.H=this.N=this.B=null;this.o="";this.U=this.A=this.s=this.l=0;this.j=this.i=this.g=null}y(Vk,Ik);function Wk(a,c,d,e,f){if(""!==a.o&&a.j&&(a.g||a.i)){if(a.g){var g=a.g,h=a.B;if(!h||h.fillStyle!=g.fillStyle){var k=[9,g.fillStyle];a.a.push(k);a.b.push(k);h?h.fillStyle=g.fillStyle:a.B={fillStyle:g.fillStyle}}}a.i&&(g=a.i,h=a.N,h&&h.lineCap==g.lineCap&&h.lineDash==g.lineDash&&h.lineJoin==g.lineJoin&&h.lineWidth==g.lineWidth&&h.miterLimit==g.miterLimit&&h.strokeStyle==g.strokeStyle||
(k=[10,g.strokeStyle,g.lineWidth,g.lineCap,g.lineJoin,g.miterLimit,g.lineDash,!1],a.a.push(k),a.b.push(k),h?(h.lineCap=g.lineCap,h.lineDash=g.lineDash,h.lineJoin=g.lineJoin,h.lineWidth=g.lineWidth,h.miterLimit=g.miterLimit,h.strokeStyle=g.strokeStyle):a.N={lineCap:g.lineCap,lineDash:g.lineDash,lineJoin:g.lineJoin,lineWidth:g.lineWidth,miterLimit:g.miterLimit,strokeStyle:g.strokeStyle}));g=a.j;h=a.H;h&&h.font==g.font&&h.textAlign==g.textAlign&&h.textBaseline==g.textBaseline||(k=[11,g.font,g.textAlign,
g.textBaseline],a.a.push(k),a.b.push(k),h?(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline):a.H={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});Kk(a,f);g=a.coordinates.length;c=Jk(a,c,0,d,e,!1);c=[5,g,c,a.o,a.l,a.s,a.A,a.U,!!a.g,!!a.i];a.a.push(c);a.b.push(c);Nk(a,f)}}Vk.prototype.Tb=function(a){if(a){var c=a.b;c?(c=c.b,c=Qe(c?c:Yj),this.g?this.g.fillStyle=c:this.g={fillStyle:c}):this.g=null;var d=a.j;if(d){var c=d.b,e=d.f,f=d.g,g=d.c,h=d.a,d=d.i,e=void 0!==e?
e:"round",f=f?f.slice():Zj,g=void 0!==g?g:"round",h=void 0!==h?h:1,d=void 0!==d?d:10,c=Oe(c?c:ak);if(this.i){var k=this.i;k.lineCap=e;k.lineDash=f;k.lineJoin=g;k.lineWidth=h;k.miterLimit=d;k.strokeStyle=c}else this.i={lineCap:e,lineDash:f,lineJoin:g,lineWidth:h,miterLimit:d,strokeStyle:c}}else this.i=null;var m=a.g,c=a.f,e=a.c,f=a.i,h=a.a,d=a.Ha(),g=a.o,k=a.l;a=void 0!==m?m:"10px sans-serif";g=void 0!==g?g:"center";k=void 0!==k?k:"middle";this.j?(m=this.j,m.font=a,m.textAlign=g,m.textBaseline=k):
this.j={font:a,textAlign:g,textBaseline:k};this.o=void 0!==d?d:"";this.l=void 0!==c?c:0;this.s=void 0!==e?e:0;this.A=void 0!==f?f:0;this.U=void 0!==h?h:1}else this.o=""};function Xk(a,c,d,e){this.s=a;this.c=c;this.l=d;this.i=e;this.g={};this.j=Pg(1,1);this.o=cc()}function Yk(a){for(var c in a.g){var d=a.g[c],e;for(e in d)d[e].ge()}}Xk.prototype.f=function(a,c,d,e,f){var g=this.o;ki(g,.5,.5,1/c,-1/c,-d,-a[0],-a[1]);var h=this.j;h.clearRect(0,0,1,1);var k;void 0!==this.i&&(k=oc(),pc(k,a),qc(k,c*this.i,
k));return Zk(this,h,g,d,e,function(a){if(0<h.getImageData(0,0,1,1).data[3]){if(a=f(a))return a;h.clearRect(0,0,1,1)}},k)};Xk.prototype.b=function(a,c){var d=void 0!==a?a.toString():"0",e=this.g[d];void 0===e&&(e={},this.g[d]=e);d=e[c];void 0===d&&(d=new $k[c](this.s,this.c,this.l),e[c]=d);return d};Xk.prototype.Qa=function(){return pb(this.g)};Xk.prototype.a=function(a,c,d,e,f,g){var h=Object.keys(this.g).map(Number);h.sort(Va);if(!1!==g){var k=this.c;g=k[0];var m=k[1],n=k[2],k=k[3];g=[g,m,g,k,n,
k,n,m];wd(g,0,8,2,d,g);a.save();a.beginPath();a.moveTo(g[0],g[1]);a.lineTo(g[2],g[3]);a.lineTo(g[4],g[5]);a.lineTo(g[6],g[7]);a.closePath();a.clip()}var p,q;g=0;for(m=h.length;g<m;++g)for(p=this.g[h[g].toString()],n=0,k=Hk.length;n<k;++n)q=p[Hk[n]],void 0!==q&&Lk(q,a,c,d,e,f,q.a,void 0);a.restore()};function Zk(a,c,d,e,f,g,h){var k=Object.keys(a.g).map(Number);k.sort(function(a,c){return c-a});var m,n,p,q,r;m=0;for(n=k.length;m<n;++m)for(q=a.g[k[m].toString()],p=Hk.length-1;0<=p;--p)if(r=q[Hk[p]],
void 0!==r&&(r=Lk(r,c,1,d,e,f,r.b,g,h)))return r}var $k={Image:Ok,LineString:Pk,Polygon:Sk,Text:Vk};function al(a,c,d,e){this.g=a;this.b=c;this.c=d;this.f=e}l=al.prototype;l.get=function(a){return this.f[a]};l.Bb=function(){return this.c};l.G=function(){this.a||(this.a="Point"===this.g?zc(this.b):Ac(this.b,0,this.b.length,2));return this.a};l.Mb=function(){return this.b};l.ga=al.prototype.Mb;l.W=function(){return this};l.zm=function(){return this.f};l.kd=al.prototype.W;l.ra=function(){return 2};l.$b=
ta;l.X=function(){return this.g};function bl(a,c){return x(a)-x(c)}function cl(a,c){var d=.5*a/c;return d*d}function dl(a,c,d,e,f,g){var h=!1,k,m;if(k=d.a)m=k.qd(),2==m||3==m?k.Qf(f,g):(0==m&&k.load(),k.hf(f,g),h=!0);if(f=(0,d.g)(c))e=f.kd(e),(0,el[e.X()])(a,e,d,c);return h}var el={Point:function(a,c,d,e){var f=d.a;if(f){if(2!=f.qd())return;var g=a.b(d.b,"Image");g.Rb(f);g.rc(c,e)}if(f=d.Ha())a=a.b(d.b,"Text"),a.Tb(f),Wk(a,c.ga(),2,2,e)},LineString:function(a,c,d,e){var f=d.f;if(f){var g=a.b(d.b,
"LineString");g.Qb(null,f);g.dd(c,e)}if(f=d.Ha())a=a.b(d.b,"Text"),a.Tb(f),Wk(a,zk(c),2,2,e)},Polygon:function(a,c,d,e){var f=d.c,g=d.f;if(f||g){var h=a.b(d.b,"Polygon");h.Qb(f,g);h.We(c,e)}if(f=d.Ha())a=a.b(d.b,"Text"),a.Tb(f),Wk(a,be(c),2,2,e)},MultiPoint:function(a,c,d,e){var f=d.a;if(f){if(2!=f.qd())return;var g=a.b(d.b,"Image");g.Rb(f);g.qc(c,e)}if(f=d.Ha())a=a.b(d.b,"Text"),a.Tb(f),d=c.ga(),Wk(a,d,d.length,c.ra(),e)},MultiLineString:function(a,c,d,e){var f=d.f;if(f){var g=a.b(d.b,"LineString");
g.Qb(null,f);g.Ue(c,e)}if(f=d.Ha())a=a.b(d.b,"Text"),a.Tb(f),c=Ak(c),Wk(a,c,c.length,2,e)},MultiPolygon:function(a,c,d,e){var f=d.c,g=d.f;if(g||f){var h=a.b(d.b,"Polygon");h.Qb(f,g);h.Ve(c,e)}if(f=d.Ha())a=a.b(d.b,"Text"),a.Tb(f),c=Ck(c),Wk(a,c,c.length,2,e)},GeometryCollection:function(a,c,d,e){c=c.c;var f,g;f=0;for(g=c.length;f<g;++f)(0,el[c[f].X()])(a,c[f],d,e)},Circle:function(a,c,d,e){var f=d.c,g=d.f;if(f||g){var h=a.b(d.b,"Polygon");h.Qb(f,g);h.Nd(c,e)}if(f=d.Ha())a=a.b(d.b,"Text"),a.Tb(f),
Wk(a,c.od(),2,2,e)}};function fl(a,c,d,e,f,g){this.c=void 0!==g?g:null;ii.call(this,a,c,d,void 0!==g?0:2,e);this.g=f}y(fl,ii);fl.prototype.i=function(a){this.state=a?3:2;ji(this)};fl.prototype.load=function(){0==this.state&&(this.state=1,ji(this),this.c(this.i.bind(this)))};fl.prototype.a=function(){return this.g};var gl=!((Ue("Chrome")||Ue("CriOS"))&&!Ue("Opera")&&!Ue("OPR")&&!Ue("Edge"))||Ue("iPhone")&&!Ue("iPod")&&!Ue("iPad")||Ue("iPad")||Ue("iPod");function hl(a,c,d,e){var f=td(d,c,a);d=c.getPointResolution(e,
d);c=c.Xb();void 0!==c&&(d*=c);c=a.Xb();void 0!==c&&(d/=c);a=a.getPointResolution(d,f)/d;isFinite(a)&&0<a&&(d/=a);return d}function il(a,c,d,e){a=d-a;c=e-c;var f=Math.sqrt(a*a+c*c);return[Math.round(d+a/f),Math.round(e+c/f)]}function jl(a,c,d,e,f,g,h,k,m,n,p){var q=Pg(Math.round(d*a),Math.round(d*c));if(0===m.length)return q.canvas;q.scale(d,d);var r=oc();m.forEach(function(a){Dc(r,a.extent)});var t=Pg(Math.round(d*Lc(r)/e),Math.round(d*Mc(r)/e)),v=d/e;m.forEach(function(a){t.drawImage(a.image,n,
n,a.image.width-2*n,a.image.height-2*n,(a.extent[0]-r[0])*v,-(a.extent[3]-r[3])*v,Lc(a.extent)*v,Mc(a.extent)*v)});var w=Ic(h);k.f.forEach(function(a){var c=a.source,f=a.target,h=c[1][0],k=c[1][1],m=c[2][0],n=c[2][1];a=(f[0][0]-w[0])/g;var p=-(f[0][1]-w[1])/g,v=(f[1][0]-w[0])/g,I=-(f[1][1]-w[1])/g,ba=(f[2][0]-w[0])/g,oa=-(f[2][1]-w[1])/g,f=c[0][0],c=c[0][1],h=h-f,k=k-c,m=m-f,n=n-c;a:{h=[[h,k,0,0,v-a],[m,n,0,0,ba-a],[0,0,h,k,I-p],[0,0,m,n,oa-p]];k=h.length;for(m=0;m<k;m++){for(var n=m,Ta=Math.abs(h[m][m]),
Aa=m+1;Aa<k;Aa++){var Ka=Math.abs(h[Aa][m]);Ka>Ta&&(Ta=Ka,n=Aa)}if(0===Ta){h=null;break a}Ta=h[n];h[n]=h[m];h[m]=Ta;for(n=m+1;n<k;n++)for(Ta=-h[n][m]/h[m][m],Aa=m;Aa<k+1;Aa++)h[n][Aa]=m==Aa?0:h[n][Aa]+Ta*h[m][Aa]}m=Array(k);for(n=k-1;0<=n;n--)for(m[n]=h[n][k]/h[n][n],Ta=n-1;0<=Ta;Ta--)h[Ta][k]-=h[Ta][n]*m[n];h=m}h&&(q.save(),q.beginPath(),gl?(m=(a+v+ba)/3,n=(p+I+oa)/3,k=il(m,n,a,p),v=il(m,n,v,I),ba=il(m,n,ba,oa),q.moveTo(k[0],k[1]),q.lineTo(v[0],v[1]),q.lineTo(ba[0],ba[1])):(q.moveTo(a,p),q.lineTo(v,
I),q.lineTo(ba,oa)),q.closePath(),q.clip(),q.transform(h[0],h[2],h[1],h[3],a,p),q.translate(r[0]-f,r[3]-c),q.scale(e/d,-e/d),q.drawImage(t.canvas,0,0),q.restore())});p&&(q.save(),q.strokeStyle="black",q.lineWidth=1,k.f.forEach(function(a){var c=a.target;a=(c[0][0]-w[0])/g;var d=-(c[0][1]-w[1])/g,e=(c[1][0]-w[0])/g,f=-(c[1][1]-w[1])/g,h=(c[2][0]-w[0])/g,c=-(c[2][1]-w[1])/g;q.beginPath();q.moveTo(a,d);q.lineTo(e,f);q.lineTo(h,c);q.closePath();q.stroke()}),q.restore());return q.canvas}function kl(a,
c,d,e,f){this.g=a;this.c=c;var g={},h=rd(this.c,this.g);this.a=function(a){var c=a[0]+"/"+a[1];g[c]||(g[c]=h(a));return g[c]};this.i=e;this.s=f*f;this.f=[];this.o=!1;this.l=this.g.a&&!!e&&!!this.g.G()&&Lc(e)==Lc(this.g.G());this.b=this.g.G()?Lc(this.g.G()):null;this.j=this.c.G()?Lc(this.c.G()):null;a=Ic(d);c=Hc(d);e=Gc(d);d=Fc(d);f=this.a(a);var k=this.a(c),m=this.a(e),n=this.a(d);ll(this,a,c,e,d,f,k,m,n,10);if(this.o){var p=Infinity;this.f.forEach(function(a){p=Math.min(p,a.source[0][0],a.source[1][0],
a.source[2][0])});this.f.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-p>this.b/2){var c=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];c[0][0]-p>this.b/2&&(c[0][0]-=this.b);c[1][0]-p>this.b/2&&(c[1][0]-=this.b);c[2][0]-p>this.b/2&&(c[2][0]-=this.b);Math.max(c[0][0],c[1][0],c[2][0])-Math.min(c[0][0],c[1][0],c[2][0])<this.b/2&&(a.source=c)}},this)}g={}}function ll(a,c,d,e,f,g,h,k,m,n){var p=nc([g,h,k,m]),q=a.b?Lc(p)/
a.b:null,r=a.g.a&&.5<q&&1>q,t=!1;if(0<n){if(a.c.f&&a.j)var v=nc([c,d,e,f]),t=t|.25<Lc(v)/a.j;!r&&a.g.f&&q&&(t|=.25<q)}if(t||!a.i||Qc(p,a.i)){if(!(t||isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(m[0])&&isFinite(m[1])))if(0<n)t=!0;else return;if(0<n&&(t||(q=a.a([(c[0]+e[0])/2,(c[1]+e[1])/2]),p=r?(Qa(g[0],a.b)+Qa(k[0],a.b))/2-Qa(q[0],a.b):(g[0]+k[0])/2-q[0],q=(g[1]+k[1])/2-q[1],t=p*p+q*q>a.s),t)){Math.abs(c[0]-e[0])<=Math.abs(c[1]-e[1])?(r=
[(d[0]+e[0])/2,(d[1]+e[1])/2],p=a.a(r),q=[(f[0]+c[0])/2,(f[1]+c[1])/2],t=a.a(q),ll(a,c,d,r,q,g,h,p,t,n-1),ll(a,q,r,e,f,t,p,k,m,n-1)):(r=[(c[0]+d[0])/2,(c[1]+d[1])/2],p=a.a(r),q=[(e[0]+f[0])/2,(e[1]+f[1])/2],t=a.a(q),ll(a,c,r,q,f,g,p,t,m,n-1),ll(a,r,d,e,q,p,h,k,t,n-1));return}if(r){if(!a.l)return;a.o=!0}a.f.push({source:[g,k,m],target:[c,e,f]});a.f.push({source:[g,h,k],target:[c,d,e]})}}function ml(a){var c=oc();a.f.forEach(function(a){a=a.source;pc(c,a[0]);pc(c,a[1]);pc(c,a[2])});return c}function nl(a,
c,d,e,f,g){this.A=c;this.s=a.G();var h=c.G(),k=h?Pc(d,h):d,h=hl(a,c,Nc(k),e);this.j=new kl(a,c,k,this.s,.5*h);this.c=e;this.g=d;a=ml(this.j);this.o=(this.pb=g(a,h,f))?this.pb.f:1;this.xd=this.i=null;f=2;g=[];this.pb&&(f=0,g=this.pb.da());ii.call(this,d,e,this.o,f,g)}y(nl,ii);nl.prototype.fa=function(){1==this.state&&(sb(this.xd),this.xd=null);nl.ia.fa.call(this)};nl.prototype.a=function(){return this.i};nl.prototype.wd=function(){var a=this.pb.V();2==a&&(this.i=jl(Lc(this.g)/this.c,Mc(this.g)/this.c,
this.o,this.pb.$(),0,this.c,this.g,this.j,[{extent:this.pb.G(),image:this.pb.a()}],0));this.state=a;ji(this)};nl.prototype.load=function(){if(0==this.state){this.state=1;ji(this);var a=this.pb.V();2==a||3==a?this.wd():(this.xd=C(this.pb,"change",function(){var a=this.pb.V();if(2==a||3==a)sb(this.xd),this.xd=null,this.wd()},this),this.pb.load())}};function pl(a){Xf.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state});this.A=void 0!==a.resolutions?
a.resolutions:null;this.a=null;this.na=0}y(pl,Xf);pl.prototype.Kb=function(){return this.A};function ql(a,c){if(a.A){var d=Xa(a.A,c,0);c=a.A[d]}return c}pl.prototype.B=function(a,c,d,e){var f=this.f;if(f&&e&&!qd(f,e)){if(this.a){if(this.na==this.g&&qd(this.a.A,e)&&this.a.$()==c&&this.a.f==d&&Cc(this.a.G(),a))return this.a;Bb(this.a);this.a=null}this.a=new nl(f,e,a,c,d,function(a,c,d){return this.gd(a,c,d,f)}.bind(this));this.na=this.g;return this.a}f&&(e=f);return this.gd(a,c,d,e)};pl.prototype.o=
function(a){a=a.target;switch(a.V()){case 1:this.b(new rl(sl,a));break;case 2:this.b(new rl(tl,a));break;case 3:this.b(new rl(ul,a))}};function vl(a,c){a.a().src=c}function rl(a,c){Cb.call(this,a);this.image=c}y(rl,Cb);var sl="imageloadstart",tl="imageloadend",ul="imageloaderror";function wl(a){pl.call(this,{attributions:a.attributions,logo:a.logo,projection:a.projection,resolutions:a.resolutions,state:a.state});this.Y=a.canvasFunction;this.S=null;this.T=0;this.oa=void 0!==a.ratio?a.ratio:1.5}y(wl,
pl);wl.prototype.gd=function(a,c,d,e){c=ql(this,c);var f=this.S;if(f&&this.T==this.g&&f.$()==c&&f.f==d&&wc(f.G(),a))return f;a=a.slice();Rc(a,this.oa);(e=this.Y(a,c,d,[Lc(a)/c*d,Mc(a)/c*d],e))&&(f=new fl(a,c,d,this.da(),e));this.S=f;this.T=this.g;return f};function xl(a){Kb.call(this);this.i=void 0;this.a="geometry";this.c=null;this.j=void 0;this.f=null;C(this,Mb(this.a),this.Vd,this);void 0!==a&&(a instanceof vd||!a?this.Ra(a):this.C(a))}y(xl,Kb);l=xl.prototype;l.clone=function(){var a=new xl(this.P());
a.Bc(this.a);var c=this.W();c&&a.Ra(c.clone());(c=this.c)&&a.lf(c);return a};l.W=function(){return this.get(this.a)};l.Wa=function(){return this.i};l.Pj=function(){return this.a};l.xl=function(){return this.c};l.$b=function(){return this.j};l.yl=function(){this.u()};l.Vd=function(){this.f&&(sb(this.f),this.f=null);var a=this.W();a&&(this.f=C(a,"change",this.yl,this));this.u()};l.Ra=function(a){this.set(this.a,a)};l.lf=function(a){this.j=(this.c=a)?yl(a):void 0;this.u()};l.hc=function(a){this.i=a;
this.u()};l.Bc=function(a){yb(this,Mb(this.a),this.Vd,this);this.a=a;C(this,Mb(this.a),this.Vd,this);this.Vd()};function yl(a){if(!ia(a)){var c;c=Array.isArray(a)?a:[a];a=function(){return c}}return a}function zl(a,c,d,e,f){Vf.call(this,a,c);this.l=Pg();this.j=e;this.i=null;this.c={cd:!1,Nf:null,Uh:-1,vd:null};this.A=f;this.o=d}y(zl,Vf);l=zl.prototype;l.fa=function(){zl.ia.fa.call(this)};l.Il=function(){return this.j};l.gb=function(){return this.o};l.load=function(){0==this.state&&(this.state=1,Wf(this),
this.A(this,this.o),this.s(null,NaN,null))};l.Zh=function(a){this.i=a;this.state=2;Wf(this)};l.pf=function(a){this.g=a};l.ci=function(a){this.s=a};var Al=document.implementation.createDocument("","",null);function Bl(a,c){return Al.createElementNS(a,c)}function Cl(a,c){return Dl(a,c,[]).join("")}function Dl(a,c,d){if(4==a.nodeType||3==a.nodeType)c?d.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Dl(a,c,d);return d}function El(a){return a instanceof
Document}function Fl(a){return a instanceof Node}function Gl(a){return(new DOMParser).parseFromString(a,"application/xml")}function Hl(a,c){return function(d,e){var f=a.call(c,d,e);void 0!==f&&Za(e[e.length-1],f)}}function Il(a,c){return function(d,e){var f=a.call(void 0!==c?c:this,d,e);void 0!==f&&e[e.length-1].push(f)}}function Jl(a,c){return function(d,e){var f=a.call(void 0!==c?c:this,d,e);void 0!==f&&(e[e.length-1]=f)}}function Kl(a){return function(c,d){var e=a.call(this,c,d);if(void 0!==e){var f=
d[d.length-1],g=c.localName,h;g in f?h=f[g]:h=f[g]=[];h.push(e)}}}function L(a,c){return function(d,e){var f=a.call(this,d,e);void 0!==f&&(e[e.length-1][void 0!==c?c:d.localName]=f)}}function N(a,c){return function(d,e,f){a.call(void 0!==c?c:this,d,e,f);f[f.length-1].node.appendChild(d)}}function Ll(a){var c,d;return function(e,f,g){if(void 0===c){c={};var h={};h[e.localName]=a;c[e.namespaceURI]=h;d=Ml(e.localName)}Nl(c,d,f,g)}}function Ml(a,c){return function(d,e,f){d=e[e.length-1].node;e=a;void 0===
e&&(e=f);f=c;void 0===c&&(f=d.namespaceURI);return Bl(f,e)}}var Ol=Ml();function Pl(a,c){for(var d=c.length,e=Array(d),f=0;f<d;++f)e[f]=a[c[f]];return e}function O(a,c,d){d=void 0!==d?d:{};var e,f;e=0;for(f=a.length;e<f;++e)d[a[e]]=c;return d}function Ql(a,c,d,e){for(c=c.firstElementChild;c;c=c.nextElementSibling){var f=a[c.namespaceURI];void 0!==f&&(f=f[c.localName],void 0!==f&&f.call(e,c,d))}}function P(a,c,d,e,f){e.push(a);Ql(c,d,e,f);return e.pop()}function Nl(a,c,d,e,f,g){for(var h=(void 0!==
f?f:d).length,k,m,n=0;n<h;++n)k=d[n],void 0!==k&&(m=c.call(g,k,e,void 0!==f?f[n]:void 0),void 0!==m&&a[m.namespaceURI][m.localName].call(g,m,k,e))}function Rl(a,c,d,e,f,g,h){f.push(a);Nl(c,d,e,f,g,h);f.pop()}function Sl(a,c,d,e){return function(f,g,h){var k=new XMLHttpRequest;k.open("GET",ia(a)?a(f,g,h):a,!0);"arraybuffer"==c.X()&&(k.responseType="arraybuffer");k.onload=function(){if(200<=k.status&&300>k.status){var a=c.X(),f;"json"==a||"text"==a?f=k.responseText:"xml"==a?(f=k.responseXML)||(f=Gl(k.responseText)):
"arraybuffer"==a&&(f=k.response);f&&d.call(this,c.Ea(f,{featureProjection:h}),c.Sa(f))}else e.call(this)}.bind(this);k.send()}}function Tl(a,c){return Sl(a,c,function(a,c){this.pf(c);this.Zh(a)},function(){this.state=3;Wf(this)})}function Ul(a,c){return Sl(a,c,function(a){this.Fc(a)},ta)}function Vl(){return[[-Infinity,-Infinity,Infinity,Infinity]]}var Wl,Xl,Yl,Zl;(function(){var a={ha:{}};(function(){function c(a,d){if(!(this instanceof c))return new c(a,d);this.Ne=Math.max(4,a||9);this.ag=Math.max(2,
Math.ceil(.4*this.Ne));d&&this.dj(d);this.clear()}function d(a,c){a.bbox=e(a,0,a.children.length,c)}function e(a,c,d,e){for(var g=[Infinity,Infinity,-Infinity,-Infinity],h;c<d;c++)h=a.children[c],f(g,a.La?e(h):h.bbox);return g}function f(a,c){a[0]=Math.min(a[0],c[0]);a[1]=Math.min(a[1],c[1]);a[2]=Math.max(a[2],c[2]);a[3]=Math.max(a[3],c[3])}function g(a,c){return a.bbox[0]-c.bbox[0]}function h(a,c){return a.bbox[1]-c.bbox[1]}function k(a){return(a[2]-a[0])*(a[3]-a[1])}function m(a){return a[2]-a[0]+
(a[3]-a[1])}function n(a,c){return a[0]<=c[0]&&a[1]<=c[1]&&c[2]<=a[2]&&c[3]<=a[3]}function p(a,c){return c[0]<=a[2]&&c[1]<=a[3]&&c[2]>=a[0]&&c[3]>=a[1]}function q(a,c,d,e,f){for(var g=[c,d],h;g.length;)d=g.pop(),c=g.pop(),d-c<=e||(h=c+Math.ceil((d-c)/e/2)*e,r(a,c,d,h,f),g.push(c,h,h,d))}function r(a,c,d,e,f){for(var g,h,k,m,n;d>c;){600<d-c&&(g=d-c+1,h=e-c+1,k=Math.log(g),m=.5*Math.exp(2*k/3),n=.5*Math.sqrt(k*m*(g-m)/g)*(0>h-g/2?-1:1),k=Math.max(c,Math.floor(e-h*m/g+n)),h=Math.min(d,Math.floor(e+(g-
h)*m/g+n)),r(a,k,h,e,f));g=a[e];h=c;m=d;t(a,c,e);for(0<f(a[d],g)&&t(a,c,d);h<m;){t(a,h,m);h++;for(m--;0>f(a[h],g);)h++;for(;0<f(a[m],g);)m--}0===f(a[c],g)?t(a,c,m):(m++,t(a,m,d));m<=e&&(c=m+1);e<=m&&(d=m-1)}}function t(a,c,d){var e=a[c];a[c]=a[d];a[d]=e}c.prototype={all:function(){return this.Wf(this.data,[])},search:function(a){var c=this.data,d=[],e=this.jb;if(!p(a,c.bbox))return d;for(var f=[],g,h,k,m;c;){g=0;for(h=c.children.length;g<h;g++)k=c.children[g],m=c.La?e(k):k.bbox,p(a,m)&&(c.La?d.push(k):
n(a,m)?this.Wf(k,d):f.push(k));c=f.pop()}return d},load:function(a){if(!a||!a.length)return this;if(a.length<this.ag){for(var c=0,d=a.length;c<d;c++)this.Aa(a[c]);return this}a=this.Yf(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.cg(this.data,a):(this.data.height<a.height&&(c=this.data,this.data=a,a=c),this.$f(a,this.data.height-a.height-1,!0)):this.data=a;return this},Aa:function(a){a&&this.$f(a,this.data.height-1);return this},clear:function(){this.data={children:[],
height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],La:!0};return this},remove:function(a){if(!a)return this;for(var c=this.data,d=this.jb(a),e=[],f=[],g,h,k,m;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),m=!0);if(c.La&&(k=c.children.indexOf(a),-1!==k)){c.children.splice(k,1);e.push(c);this.bj(e);break}m||c.La||!n(c.bbox,d)?h?(g++,c=h.children[g],m=!1):c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},jb:function(a){return a},Pe:function(a,c){return a[0]-c[0]},Qe:function(a,
c){return a[1]-c[1]},toJSON:function(){return this.data},Wf:function(a,c){for(var d=[];a;)a.La?c.push.apply(c,a.children):d.push.apply(d,a.children),a=d.pop();return c},Yf:function(a,c,e,f){var g=e-c+1,h=this.Ne,k;if(g<=h)return k={children:a.slice(c,e+1),height:1,bbox:null,La:!0},d(k,this.jb),k;f||(f=Math.ceil(Math.log(g)/Math.log(h)),h=Math.ceil(g/Math.pow(h,f-1)));k={children:[],height:f,bbox:null,La:!1};var g=Math.ceil(g/h),h=g*Math.ceil(Math.sqrt(h)),m,n,p;for(q(a,c,e,h,this.Pe);c<=e;c+=h)for(n=
Math.min(c+h-1,e),q(a,c,n,g,this.Qe),m=c;m<=n;m+=g)p=Math.min(m+g-1,n),k.children.push(this.Yf(a,m,p,f-1));d(k,this.jb);return k},aj:function(a,c,d,e){for(var f,g,h,m,n,p,q,r;;){e.push(c);if(c.La||e.length-1===d)break;q=r=Infinity;f=0;for(g=c.children.length;f<g;f++)h=c.children[f],n=k(h.bbox),p=h.bbox,p=(Math.max(p[2],a[2])-Math.min(p[0],a[0]))*(Math.max(p[3],a[3])-Math.min(p[1],a[1]))-n,p<r?(r=p,q=n<q?n:q,m=h):p===r&&n<q&&(q=n,m=h);c=m}return c},$f:function(a,c,d){var e=this.jb;d=d?a.bbox:e(a);
var e=[],g=this.aj(d,this.data,c,e);g.children.push(a);for(f(g.bbox,d);0<=c;)if(e[c].children.length>this.Ne)this.jj(e,c),c--;else break;this.Yi(d,e,c)},jj:function(a,c){var e=a[c],f=e.children.length,g=this.ag;this.Zi(e,g,f);f=this.$i(e,g,f);f={children:e.children.splice(f,e.children.length-f),height:e.height,bbox:null,La:!1};e.La&&(f.La=!0);d(e,this.jb);d(f,this.jb);c?a[c-1].children.push(f):this.cg(e,f)},cg:function(a,c){this.data={children:[a,c],height:a.height+1,bbox:null,La:!1};d(this.data,
this.jb)},$i:function(a,c,d){var f,g,h,m,n,p,q;n=p=Infinity;for(f=c;f<=d-c;f++)g=e(a,0,f,this.jb),h=e(a,f,d,this.jb),m=Math.max(0,Math.min(g[2],h[2])-Math.max(g[0],h[0]))*Math.max(0,Math.min(g[3],h[3])-Math.max(g[1],h[1])),g=k(g)+k(h),m<n?(n=m,q=f,p=g<p?g:p):m===n&&g<p&&(p=g,q=f);return q},Zi:function(a,c,d){var e=a.La?this.Pe:g,f=a.La?this.Qe:h,k=this.Xf(a,c,d,e);c=this.Xf(a,c,d,f);k<c&&a.children.sort(e)},Xf:function(a,c,d,g){a.children.sort(g);g=this.jb;var h=e(a,0,c,g),k=e(a,d-c,d,g),n=m(h)+m(k),
p,q;for(p=c;p<d-c;p++)q=a.children[p],f(h,a.La?g(q):q.bbox),n+=m(h);for(p=d-c-1;p>=c;p--)q=a.children[p],f(k,a.La?g(q):q.bbox),n+=m(k);return n},Yi:function(a,c,d){for(;0<=d;d--)f(c[d].bbox,a)},bj:function(a){for(var c=a.length-1,e;0<=c;c--)0===a[c].children.length?0<c?(e=a[c-1].children,e.splice(e.indexOf(a[c]),1)):this.clear():d(a[c],this.jb)},dj:function(a){var c=["return a"," - b",";"];this.Pe=new Function("a","b",c.join(a[0]));this.Qe=new Function("a","b",c.join(a[1]));this.jb=new Function("a",
"return [a"+a.join(", a")+"];")}};"undefined"!==typeof a?a.ha=c:"undefined"!==typeof self?self.b=c:window.b=c})();Wl=a.ha})();function $l(a){this.a=Wl(a);this.b={}}l=$l.prototype;l.Aa=function(a,c){var d=[a[0],a[1],a[2],a[3],c];this.a.Aa(d);this.b[x(c)]=d};l.load=function(a,c){for(var d=Array(c.length),e=0,f=c.length;e<f;e++){var g=a[e],h=c[e],g=[g[0],g[1],g[2],g[3],h];d[e]=g;this.b[x(h)]=g}this.a.load(d)};l.remove=function(a){a=x(a);var c=this.b[a];delete this.b[a];return null!==this.a.remove(c)};
function am(a,c,d){var e=x(d);Cc(a.b[e].slice(0,4),c)||(a.remove(d),a.Aa(c,d))}function bm(a){return a.a.all().map(function(a){return a[4]})}function cm(a,c){return a.a.search(c).map(function(a){return a[4]})}l.forEach=function(a,c){return dm(bm(this),a,c)};function em(a,c,d,e){return dm(cm(a,c),d,e)}function dm(a,c,d){for(var e,f=0,g=a.length;f<g&&!(e=c.call(d,a[f]));f++);return e}l.Qa=function(){return pb(this.b)};l.clear=function(){this.a.clear();this.b={}};l.G=function(){return this.a.data.bbox};
function Q(a){a=a||{};Xf.call(this,{attributions:a.attributions,logo:a.logo,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.D=ta;this.na=a.format;this.S=a.url;void 0!==a.loader?this.D=a.loader:void 0!==this.S&&(this.D=Ul(this.S,this.na));this.sb=void 0!==a.strategy?a.strategy:Vl;var c=void 0!==a.useSpatialIndex?a.useSpatialIndex:!0;this.a=c?new $l:null;this.T=new $l;this.i={};this.j={};this.o={};this.l={};this.c=null;var d,e;a.features instanceof De?(d=a.features,e=d.a):Array.isArray(a.features)&&
(e=a.features);c||void 0!==d||(d=new De(e));void 0!==e&&fm(this,e);void 0!==d&&gm(this,d)}y(Q,Xf);l=Q.prototype;l.tb=function(a){var c=x(a).toString();if(hm(this,c,a)){im(this,c,a);var d=a.W();d?(c=d.G(),this.a&&this.a.Aa(c,a)):this.i[c]=a;this.b(new jm("addfeature",a))}this.u()};function im(a,c,d){a.l[c]=[C(d,"change",a.yh,a),C(d,"propertychange",a.yh,a)]}function hm(a,c,d){var e=!0,f=d.Wa();void 0!==f?f.toString()in a.j?e=!1:a.j[f.toString()]=d:a.o[c]=d;return e}l.Fc=function(a){fm(this,a);this.u()};
function fm(a,c){var d,e,f,g,h=[],k=[],m=[];e=0;for(f=c.length;e<f;e++)g=c[e],d=x(g).toString(),hm(a,d,g)&&k.push(g);e=0;for(f=k.length;e<f;e++){g=k[e];d=x(g).toString();im(a,d,g);var n=g.W();n?(d=n.G(),h.push(d),m.push(g)):a.i[d]=g}a.a&&a.a.load(h,m);e=0;for(f=k.length;e<f;e++)a.b(new jm("addfeature",k[e]))}function gm(a,c){var d=!1;C(a,"addfeature",function(a){d||(d=!0,c.push(a.feature),d=!1)});C(a,"removefeature",function(a){d||(d=!0,c.remove(a.feature),d=!1)});C(c,"add",function(a){d||(a=a.element,
d=!0,this.tb(a),d=!1)},a);C(c,"remove",function(a){d||(a=a.element,d=!0,this.mb(a),d=!1)},a);a.c=c}l.clear=function(a){if(a){for(var c in this.l)this.l[c].forEach(sb);this.c||(this.l={},this.j={},this.o={})}else if(this.a){this.a.forEach(this.Mf,this);for(var d in this.i)this.Mf(this.i[d])}this.c&&this.c.clear();this.a&&this.a.clear();this.T.clear();this.i={};this.b(new jm("clear"));this.u()};l.pg=function(a,c){if(this.a)return this.a.forEach(a,c);if(this.c)return this.c.forEach(a,c)};function km(a,
c,d){a.wb([c[0],c[1],c[0],c[1]],function(a){if(a.W().lg(c))return d.call(void 0,a)})}l.wb=function(a,c,d){if(this.a)return em(this.a,a,c,d);if(this.c)return this.c.forEach(c,d)};l.qg=function(a,c,d){return this.wb(a,function(e){if(e.W().Ka(a)&&(e=c.call(d,e)))return e})};l.xg=function(){return this.c};l.je=function(){var a;this.c?a=this.c.a:this.a&&(a=bm(this.a),pb(this.i)||Za(a,ob(this.i)));return a};l.wg=function(a){var c=[];km(this,a,function(a){c.push(a)});return c};l.Ze=function(a){return cm(this.a,
a)};l.sg=function(a){var c=a[0],d=a[1],e=null,f=[NaN,NaN],g=Infinity,h=[-Infinity,-Infinity,Infinity,Infinity];em(this.a,h,function(a){var m=a.W(),n=g;g=m.ub(c,d,f,g);g<n&&(e=a,a=Math.sqrt(g),h[0]=c-a,h[1]=d-a,h[2]=c+a,h[3]=d+a)});return e};l.G=function(){return this.a.G()};l.vg=function(a){a=this.j[a.toString()];return void 0!==a?a:null};l.wh=function(){return this.na};l.xh=function(){return this.S};l.yh=function(a){a=a.target;var c=x(a).toString(),d=a.W();d?(d=d.G(),c in this.i?(delete this.i[c],
this.a&&this.a.Aa(d,a)):this.a&&am(this.a,d,a)):c in this.i||(this.a&&this.a.remove(a),this.i[c]=a);d=a.Wa();void 0!==d?(d=d.toString(),c in this.o?(delete this.o[c],this.j[d]=a):this.j[d]!==a&&(lm(this,a),this.j[d]=a)):c in this.o||(lm(this,a),this.o[c]=a);this.u();this.b(new jm("changefeature",a))};l.Qa=function(){return this.a.Qa()&&pb(this.i)};l.Jc=function(a,c,d){var e=this.T;a=this.sb(a,c);var f,g;f=0;for(g=a.length;f<g;++f){var h=a[f];em(e,h,function(a){return wc(a.extent,h)})||(this.D.call(this,
h,c,d),e.Aa(h,{extent:h.slice()}))}};l.mb=function(a){var c=x(a).toString();c in this.i?delete this.i[c]:this.a&&this.a.remove(a);this.Mf(a);this.u()};l.Mf=function(a){var c=x(a).toString();this.l[c].forEach(sb);delete this.l[c];var d=a.Wa();void 0!==d?delete this.j[d.toString()]:delete this.o[c];this.b(new jm("removefeature",a))};function lm(a,c){for(var d in a.j)if(a.j[d]===c){delete a.j[d];break}}function jm(a,c){Cb.call(this,a);this.feature=c}y(jm,Cb);function mm(a){this.c=a.source;this.ta=cc();
this.i=Pg();this.j=[0,0];this.s=null;wl.call(this,{attributions:a.attributions,canvasFunction:this.uj.bind(this),logo:a.logo,projection:a.projection,ratio:a.ratio,resolutions:a.resolutions,state:this.c.V()});this.D=null;this.l=void 0;this.qh(a.style);C(this.c,"change",this.Lm,this)}y(mm,wl);l=mm.prototype;l.uj=function(a,c,d,e,f){var g=new Xk(.5*c/d,a,c);this.c.Jc(a,c,f);var h=!1;this.c.wb(a,function(a){var e;if(!(e=h)){var f;(e=a.$b())?f=e.call(a,c):this.l&&(f=this.l(a,c));if(f){var p,q=!1;Array.isArray(f)||
(f=[f]);e=0;for(p=f.length;e<p;++e)q=dl(g,a,f[e],cl(c,d),this.Km,this)||q;e=q}else e=!1}h=e},this);Yk(g);if(h)return null;this.j[0]!=e[0]||this.j[1]!=e[1]?(this.i.canvas.width=e[0],this.i.canvas.height=e[1],this.j[0]=e[0],this.j[1]=e[1]):this.i.clearRect(0,0,e[0],e[1]);a=nm(this,Nc(a),c,d,e);g.a(this.i,d,a,0,{});this.s=g;return this.i.canvas};l.ie=function(a,c,d,e,f){if(this.s){var g={};return this.s.f(a,c,0,e,function(a){var c=x(a).toString();if(!(c in g))return g[c]=!0,f(a)})}};l.Hm=function(){return this.c};
l.Im=function(){return this.D};l.Jm=function(){return this.l};function nm(a,c,d,e,f){return ki(a.ta,f[0]/2,f[1]/2,e/d,-e/d,0,-c[0],-c[1])}l.Km=function(){this.u()};l.Lm=function(){Zf(this,this.c.V())};l.qh=function(a){this.D=void 0!==a?a:pk;this.l=a?nk(this.D):void 0;this.u()};function om(a){Dk.call(this,a);this.f=null;this.l=cc();this.j=this.i=null}y(om,Dk);om.prototype.ib=function(a,c,d,e){var f=this.a;return f.ea().ie(a,c.viewState.resolution,c.viewState.rotation,c.skippedFeatureUids,function(a){return d.call(e,
a,f)})};om.prototype.zc=function(a,c,d,e){if(this.f&&this.f.a())if(this.a.ea()instanceof mm){if(a=a.slice(),mi(c.pixelToCoordinateMatrix,a,a),this.ib(a,c,Tc,this))return d.call(e,this.a)}else if(this.i||(this.i=cc(),jc(this.l,this.i)),c=[0,0],mi(this.i,a,c),this.j||(this.j=Pg(1,1)),this.j.clearRect(0,0,1,1),this.j.drawImage(this.f?this.f.a():null,c[0],c[1],1,1,0,0,1,1),0<this.j.getImageData(0,0,1,1).data[3])return d.call(e,this.a)};om.prototype.o=function(a,c){var d=a.pixelRatio,e=a.viewState,f=e.center,
g=e.resolution,h=this.a.ea(),k=a.viewHints,m=a.extent;void 0!==c.extent&&(m=Pc(m,c.extent));k[0]||k[1]||Kc(m)||(e=h.B(m,g,d,e.projection))&&pi(this,e)&&(this.f=e);if(this.f){var e=this.f,k=e.G(),m=e.$(),n=e.f,g=d*m/(g*n);ki(this.l,d*a.size[0]/2,d*a.size[1]/2,g,g,0,n*(k[0]-f[0])/m,n*(f[1]-k[3])/m);this.i=null;ri(a.attributions,e.da());si(a,h)}return!!this.f};function pm(a){Dk.call(this,a);this.i=Pg();this.j=null;this.A=oc();this.s=cc()}y(pm,Dk);pm.prototype.c=function(a,c,d){var e=a.pixelRatio,f=a.viewState,
g=f.center,h=f.projection,k=f.rotation,m=a.size,n=Math.round(e*m[0]/2),p=Math.round(e*m[1]/2),q=e/f.resolution,r=this.a,t=r.ea(),v=t.Pd(h),f=Gk(this,a,0);Ek(this,"precompose",d,a,f);var m=d,r=Gb(r,"render"),w,A,D,z;if(k||r){m=this.i;w=m.canvas;D=t.Yb(e)/e;var B=d.canvas.width*D;A=d.canvas.height*D;z=Math.round(Math.sqrt(B*B+A*A));w.width!=z?w.width=w.height=z:m.clearRect(0,0,z,z);w=(z-B)/2/D;A=(z-A)/2/D;q*=D;n=Math.round(D*(n+w));p=Math.round(D*(p+A))}B=m.globalAlpha;m.globalAlpha=c.opacity;var J=
t.eb(h),K=this.j,M;c=t.cf(h)&&1==c.opacity;c||(K.reverse(),M=[]);for(var Y=0,Ja=K.length;Y<Ja;++Y){var I=K[Y],ba=I.ja,oa=J.Da(ba,this.A),Ta=ba[0],Aa=Fc(J.Da(J.md(g,Ta))),ba=Math.round(Lc(oa)*q),Ka=Math.round(Mc(oa)*q),fc=Math.round((oa[0]-Aa[0])*q/ba)*ba+n+Math.round((Aa[0]-g[0])*q),oa=Math.round((Aa[1]-oa[3])*q/Ka)*Ka+p+Math.round((g[1]-Aa[1])*q);if(!c){Aa=[fc,oa,fc+ba,oa+Ka];m.save();for(var uc=0,Os=M.length;uc<Os;++uc){var Ce=M[uc];Qc(Aa,Ce)&&(m.beginPath(),m.moveTo(Aa[0],Aa[1]),m.lineTo(Aa[0],
Aa[3]),m.lineTo(Aa[2],Aa[3]),m.lineTo(Aa[2],Aa[1]),m.moveTo(Ce[0],Ce[1]),m.lineTo(Ce[2],Ce[1]),m.lineTo(Ce[2],Ce[3]),m.lineTo(Ce[0],Ce[3]),m.closePath(),m.clip())}M.push(Aa)}Ta=pg(t,Ta,e,h);m.drawImage(I.fb(),v,v,Ta[0],Ta[1],fc,oa,ba,Ka);c||m.restore()}r&&(e=w-n/D+n,h=A-p/D+p,g=ki(this.s,z/2-e,z/2-h,q,-q,-k,-g[0]+e/q,-g[1]-h/q),Ek(this,"render",m,a,g));(k||r)&&d.drawImage(m.canvas,-Math.round(w),-Math.round(A),z/D,z/D);m.globalAlpha=B;Fk(this,d,a,f)};pm.prototype.o=function(a,c){function d(a){a=a.V();
return 2==a||4==a||3==a&&!t}var e=a.pixelRatio,f=a.viewState,g=f.projection,h=this.a,k=h.ea(),m=k.eb(g),n=ig(m,f.resolution),p=m.$(n),q=f.center;p==f.resolution?(q=ui(q,p,a.size),f=Oc(q,p,f.rotation,a.size)):f=a.extent;void 0!==c.extent&&(f=Pc(f,c.extent));if(Kc(f))return!1;p=fg(m,f,p);q={};q[n]={};var r=this.Wc(k,g,q),t=h.f(),v=oc(),w=new we(0,0,0,0),A,D,z,B;for(z=p.ua;z<=p.wa;++z)for(B=p.za;B<=p.Ba;++B)A=k.Lb(n,z,B,e,g),!d(A)&&A.a&&(A=A.a),d(A)?q[n][A.ja.toString()]=A:(D=cg(m,A.ja,r,w,v),D||(A=
eg(m,A.ja,w,v))&&r(n+1,A));r=Object.keys(q).map(Number);r.sort(Va);var v=[],J,w=0;for(z=r.length;w<z;++w)for(J in A=r[w],B=q[A],B)A=B[J],2==A.V()&&v.push(A);this.j=v;ti(a.usedTiles,k,n,p);vi(a,k,m,e,g,f,n,h.a());qi(a,k);si(a,k);return!0};pm.prototype.zc=function(a,c,d,e){var f=this.i.canvas,g=c.size;f.width=g[0];f.height=g[1];this.c(c,di(this.a),this.i);if(0<this.i.getImageData(a[0],a[1],1,1).data[3])return d.call(e,this.a)};function qm(a){Dk.call(this,a);this.i=!1;this.N=-1;this.B=NaN;this.A=oc();
this.j=this.U=null;this.s=Pg()}y(qm,Dk);qm.prototype.c=function(a,c,d){var e=a.extent,f=a.pixelRatio,g=c.Kc?a.skippedFeatureUids:{},h=a.viewState,k=h.projection,h=h.rotation,m=k.G(),n=this.a.ea(),p=Gk(this,a,0);Ek(this,"precompose",d,a,p);var q=this.j;if(q&&!q.Qa()){var r;Gb(this.a,"render")?(this.s.canvas.width=d.canvas.width,this.s.canvas.height=d.canvas.height,r=this.s):r=d;var t=r.globalAlpha;r.globalAlpha=c.opacity;c=a.size[0]*f;var v=a.size[1]*f;bk(r,-h,c/2,v/2);q.a(r,f,p,h,g);if(n.N&&k.a&&
!wc(m,e)){for(var k=e[0],n=Lc(m),w=0;k<m[0];)--w,p=n*w,p=Gk(this,a,p),q.a(r,f,p,h,g),k+=n;w=0;for(k=e[2];k>m[2];)++w,p=n*w,p=Gk(this,a,p),q.a(r,f,p,h,g),k-=n;p=Gk(this,a,0)}bk(r,h,c/2,v/2);r!=d&&(Ek(this,"render",r,a,p),d.drawImage(r.canvas,0,0));r.globalAlpha=t}Fk(this,d,a,p)};qm.prototype.ib=function(a,c,d,e){if(this.j){var f=this.a,g={};return this.j.f(a,c.viewState.resolution,c.viewState.rotation,{},function(a){var c=x(a).toString();if(!(c in g))return g[c]=!0,d.call(e,a,f)})}};qm.prototype.H=
function(){oi(this)};qm.prototype.o=function(a){function c(a){var c,e=a.$b();e?c=e.call(a,n):(e=d.f)&&(c=e(a,n));if(c){if(c){e=!1;if(Array.isArray(c))for(var f=0,g=c.length;f<g;++f)e=dl(r,a,c[f],cl(n,p),this.H,this)||e;else e=dl(r,a,c,cl(n,p),this.H,this)||e;a=e}else a=!1;this.i=this.i||a}}var d=this.a,e=d.ea();ri(a.attributions,e.da());si(a,e);var f=a.viewHints[0],g=a.viewHints[1],h=d.s,k=d.A;if(!this.i&&!h&&f||!k&&g)return!0;var m=a.extent,k=a.viewState,f=k.projection,n=k.resolution,p=a.pixelRatio,
g=d.g,q=d.a,h=rk(d);void 0===h&&(h=bl);m=qc(m,q*n);q=k.projection.G();e.N&&k.projection.a&&!wc(q,a.extent)&&(a=Math.max(Lc(m)/2,Lc(q)),m[0]=q[0]-a,m[2]=q[2]+a);if(!this.i&&this.B==n&&this.N==g&&this.U==h&&wc(this.A,m))return!0;this.j=null;this.i=!1;var r=new Xk(.5*n/p,m,n,d.a);e.Jc(m,n,f);if(h){var t=[];e.wb(m,function(a){t.push(a)},this);t.sort(h);t.forEach(c,this)}else e.wb(m,c,this);Yk(r);this.B=n;this.N=g;this.U=h;this.A=m;this.j=r;return!0};function rm(a,c){var d=/\{z\}/g,e=/\{x\}/g,f=/\{y\}/g,
g=/\{-y\}/g;return function(h){if(h)return a.replace(d,h[0].toString()).replace(e,h[1].toString()).replace(f,function(){return(-h[2]-1).toString()}).replace(g,function(){var a=c.b?c.b[h[0]]:null;return(a.Ba-a.za+1+h[2]).toString()})}}function sm(a,c){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=rm(a[f],c);return tm(e)}function tm(a){return 1===a.length?a[0]:function(c,d,e){if(c)return a[Qa((c[1]<<c[0])+c[2],a.length)](c,d,e)}}function um(){}function vm(a){var c=[],d=/\{(\d)-(\d)\}/.exec(a)||/\{([a-z])-([a-z])\}/.exec(a);
if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)c.push(a.replace(d[0],String.fromCharCode(f)))}else c.push(a);return c}function wm(a){ng.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.sc?this.sc.bind(this):um;this.urls=null;a.urls?this.Ta(a.urls):a.url&&
this.Pa(a.url);a.tileUrlFunction&&this.Na(a.tileUrlFunction)}y(wm,ng);l=wm.prototype;l.Xa=function(){return this.tileLoadFunction};l.Za=function(){return this.tileUrlFunction};l.$a=function(){return this.urls};l.vh=function(a){a=a.target;switch(a.V()){case 1:this.b(new rg("tileloadstart",a));break;case 2:this.b(new rg("tileloadend",a));break;case 3:this.b(new rg("tileloaderror",a))}};l.cb=function(a){this.a.clear();this.tileLoadFunction=a;this.u()};l.Na=function(a){this.a.clear();this.tileUrlFunction=
a;this.u()};l.Pa=function(a){a=this.urls=vm(a);this.Na(this.sc?this.sc.bind(this):sm(a,this.tileGrid))};l.Ta=function(a){this.urls=a;this.Na(this.sc?this.sc.bind(this):sm(a,this.tileGrid))};l.Rf=function(a,c,d){a=this.Cb(a,c,d);Rf(this.a,a)&&this.a.get(a)};function xm(a){wm.call(this,{attributions:a.attributions,cacheSize:void 0!==a.cacheSize?a.cacheSize:128,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:
ym,tileUrlFunction:a.tileUrlFunction,tilePixelRatio:a.tilePixelRatio,url:a.url,urls:a.urls,wrapX:void 0===a.wrapX?!0:a.wrapX});this.c=a.format?a.format:null;this.tileClass=a.tileClass?a.tileClass:zl}y(xm,wm);xm.prototype.Lb=function(a,c,d,e,f){var g=this.Cb(a,c,d);if(Rf(this.a,g))return this.a.get(g);a=[a,c,d];e=(c=qg(this,a,f))?this.tileUrlFunction(c,e,f):void 0;e=new this.tileClass(a,void 0!==e?0:4,void 0!==e?e:"",this.c,this.tileLoadFunction);C(e,"change",this.vh,this);this.a.set(g,e);return e};
function ym(a,c){a.ci(Tl(c,a.j))}function zm(a){Dk.call(this,a);this.s=Pg();this.i=!1;this.A=[];this.U=oc();this.N=[NaN,NaN];this.j=cc()}y(zm,Dk);zm.prototype.c=function(a,c,d){var e=a.pixelRatio,f=c.Kc?a.skippedFeatureUids:{},g=a.viewState,h=g.center,k=g.projection,m=g.resolution,g=g.rotation,n=a.size,p=e/m,q=this.a,r=q.ea(),t=r.Yb(e),v=Gk(this,a,0);Ek(this,"precompose",d,a,v);Gb(q,"render")?(this.s.canvas.width=d.canvas.width,this.s.canvas.height=d.canvas.height,q=this.s):q=d;var w=q.globalAlpha;
q.globalAlpha=c.opacity;c=this.A;var A=r.tileGrid,D,z,B,J,K,M,Y,Ja,I,ba,oa,Ta,Aa;B=0;for(J=c.length;B<J;++B)if(ba=c[B],K=ba.c,Ja=A.Da(ba.ja,this.U),D=ba.ja[0],Ta=Qb(A.Ya(D),this.N),I="tile-pixels"==ba.g.g,M=A.$(D),oa=M/t,z=M/m,M=Math.round(e*n[0]/2),Y=Math.round(e*n[1]/2),Aa=Ta[0]*e*z,z*=Ta[1]*e,Ta=Ta[0]*e,Aa<Ta/4||Aa>4*Ta)I?(Ja=Ic(Ja),oa=ki(this.j,M,Y,p*oa,p*oa,g,(Ja[0]-h[0])/oa,(h[1]-Ja[1])/oa)):oa=v,K.vd.a(q,e,oa,g,f);else{D=pg(r,D,e,k);I?oa=ki(this.j,0,0,p*oa,p*oa,g,-D[0]/2,-D[1]/2):(oa=Nc(Ja),
oa=ki(this.j,0,0,p,-p,-g,-oa[0],-oa[1]));ba=ba.l;if(K.resolution!==m||K.rotation!==g)K.resolution=m,K.rotation=g,ba.canvas.width=Aa+.5,ba.canvas.height=z+.5,ba.translate(Aa/2,z/2),ba.rotate(-g),K.vd.a(ba,e,oa,g,f,!1);K=ki(this.j,0,0,p,-p,0,-h[0],-h[1]);K=wd(Ic(Ja),0,1,2,K);q.drawImage(ba.canvas,Math.round(K[0]+M),Math.round(K[1])+Y)}q!=d&&(Ek(this,"render",q,a,v),d.drawImage(q.canvas,0,0));q.globalAlpha=w;Fk(this,d,a,v)};function Am(a,c,d,e,f){function g(a){var c,e=a.$b();e?c=e.call(a,A):(e=d.f)&&
(c=e(a,A));if(c){Array.isArray(c)||(c=[c]);var e=z,f=D;if(c){var g=!1;if(Array.isArray(c))for(var h=0,k=c.length;h<k;++h)g=dl(f,a,c[h],e,this.B,this)||g;else g=dl(f,a,c,e,this.B,this)||g;a=g}else a=!1;this.i=this.i||a;m.cd=m.cd||a}}var h=d.g,k=rk(d)||null,m=c.c;if(m.cd||m.Uh!=h||m.Nf!=k){m.vd=null;m.cd=!1;var n=d.ea(),p=n.tileGrid,q=c.ja,r=c.g,t="tile-pixels"==r.g,v,w;t?(v=pg(n,q[0],e,c.g),v=[0,0,v[0],v[1]]):(v=p.Da(q),qd(f,r)||(w=!0,c.pf(f)));var A=p.$(q[0]),n=t?n.Yb(e):A;m.cd=!1;var D=new Xk(0,
v,n,d.a),z=cl(n,e);c=c.i;k&&k!==m.Nf&&c.sort(k);n=0;for(p=c.length;n<p;++n)e=c[n],w&&e.W().hb(r,f),g.call(a,e);Yk(D);m.Uh=h;m.Nf=k;m.vd=D;m.resolution=NaN}}zm.prototype.ib=function(a,c,d,e){var f=c.pixelRatio,g=c.viewState.resolution;c=c.viewState.rotation;var h=this.a,k={},m=this.A,n=h.ea(),p=n.tileGrid,q,r,t,v,w,A;t=0;for(v=m.length;t<v;++t)A=m[t],r=A.ja,w=n.tileGrid.Da(r,this.U),tc(w,a)&&("tile-pixels"===A.g.g?(w=Ic(w),g=n.Yb(f),r=p.$(r[0])/g,r=[(a[0]-w[0])/r,(w[1]-a[1])/r]):r=a,A=A.c.vd,q=q||
A.f(r,g,c,{},function(a){var c=x(a).toString();if(!(c in k))return k[c]=!0,d.call(e,a,h)}));return q};zm.prototype.B=function(){oi(this)};zm.prototype.o=function(a,c){var d=this.a,e=d.ea();ri(a.attributions,e.da());si(a,e);var f=a.viewHints[0],g=a.viewHints[1],h=d.s,k=d.A;if(!this.i&&!h&&f||!k&&g)return!0;h=a.extent;c.extent&&(h=Pc(h,c.extent));if(Kc(h))return!1;for(var g=a.viewState,f=g.projection,k=g.resolution,g=a.pixelRatio,m=e.tileGrid,n=m.Kb(),p=n.length-1;0<p&&n[p]<k;)--p;n=dg(m,h,p);ti(a.usedTiles,
e,p,n);vi(a,e,m,g,f,h,p,d.i());qi(a,e);h={};h[p]={};var q=this.Wc(e,f,h),r=d.S(),t=this.U,v=new we(0,0,0,0),w,A,D;for(A=n.ua;A<=n.wa;++A)for(D=n.za;D<=n.Ba;++D)k=e.Lb(p,A,D,g,f),w=k.V(),2==w||4==w||3==w&&!r?h[p][k.ja.toString()]=k:(w=cg(m,k.ja,q,v,t),w||(k=eg(m,k.ja,v,t))&&q(p+1,k));this.i=!1;e=Object.keys(h).map(Number);e.sort(Va);for(var m=[],z,p=0,n=e.length;p<n;++p)for(z in k=e[p],q=h[k],q)k=q[z],2==k.V()&&(m.push(k),Am(this,k,d,g,f));this.A=m;return!0};function Bm(a,c){Bi.call(this,0,c);this.f=
Pg();Pg();this.b=this.f.canvas;this.b.style.width="100%";this.b.style.height="100%";this.b.className="ol-unselectable";zf(a,this.b,0);this.a=!0;this.c=cc()}y(Bm,Bi);Bm.prototype.Re=function(a){return a instanceof Wj?new om(a):a instanceof Xj?new pm(a):a instanceof H?new zm(a):a instanceof G?new qm(a):null};function Cm(a,c,d){var e=a.i,f=a.f;if(Gb(e,c)){var g=d.extent,h=d.pixelRatio,k=d.viewState.rotation,m=d.pixelRatio,n=d.viewState,p=n.resolution;a=ki(a.c,a.b.width/2,a.b.height/2,m/p,-m/p,-n.rotation,
-n.center[0],-n.center[1]);g=new sk(f,h,g,a,k);e.b(new fi(c,e,g,d,f,null))}}Bm.prototype.X=function(){return"canvas"};Bm.prototype.xe=function(a){if(a){var c=this.f,d=a.pixelRatio,e=Math.round(a.size[0]*d),d=Math.round(a.size[1]*d);this.b.width!=e||this.b.height!=d?(this.b.width=e,this.b.height=d):c.clearRect(0,0,e,d);var f=a.viewState.rotation;Ci(a);Cm(this,"precompose",a);var g=a.layerStatesArray;cb(g);bk(c,f,e/2,d/2);var h=a.viewState.resolution,k,m,n,p;k=0;for(m=g.length;k<m;++k)p=g[k],n=p.layer,
n=Ei(this,n),hi(p,h)&&"ready"==p.D&&n.o(a,p)&&n.c(a,p,c);bk(c,-f,e/2,d/2);Cm(this,"postcompose",a);this.a||(If(this.b,!0),this.a=!0);Fi(this,a);a.postRenderFunctions.push(Di)}else this.a&&(If(this.b,!1),this.a=!1)};function Dm(a,c){ni.call(this,a);this.target=c}y(Dm,ni);Dm.prototype.Kd=ta;Dm.prototype.mh=ta;function Em(a){var c=document.createElement("DIV");c.style.position="absolute";Dm.call(this,a,c);this.f=null;this.c=ec()}y(Em,Dm);Em.prototype.ib=function(a,c,d,e){var f=this.a;return f.ea().ie(a,
c.viewState.resolution,c.viewState.rotation,c.skippedFeatureUids,function(a){return d.call(e,a,f)})};Em.prototype.Kd=function(){yf(this.target);this.f=null};Em.prototype.tf=function(a,c){var d=a.viewState,e=d.center,f=d.resolution,g=d.rotation,h=this.f,k=this.a.ea(),m=a.viewHints,n=a.extent;void 0!==c.extent&&(n=Pc(n,c.extent));m[0]||m[1]||Kc(n)||(d=k.B(n,f,a.pixelRatio,d.projection))&&pi(this,d)&&(h=d);h&&(m=h.G(),n=h.$(),d=cc(),ki(d,a.size[0]/2,a.size[1]/2,n/f,n/f,g,(m[0]-e[0])/n,(e[1]-m[3])/n),
h!=this.f&&(e=h.a(this),e.style.maxWidth="none",e.style.position="absolute",yf(this.target),this.target.appendChild(e),this.f=h),li(d,this.c)||(Tg(this.target,d),gc(this.c,d)),ri(a.attributions,h.da()),si(a,k));return!0};function Fm(a){var c=document.createElement("DIV");c.style.position="absolute";Dm.call(this,a,c);this.c=!0;this.j=1;this.i=0;this.f={}}y(Fm,Dm);Fm.prototype.Kd=function(){yf(this.target);this.i=0};Fm.prototype.tf=function(a,c){if(!c.visible)return this.c&&(If(this.target,!1),this.c=
!1),!0;var d=a.pixelRatio,e=a.viewState,f=e.projection,g=this.a,h=g.ea(),k=h.eb(f),m=h.Pd(f),n=ig(k,e.resolution),p=k.$(n),q=e.center,r;p==e.resolution?(q=ui(q,p,a.size),r=Oc(q,p,e.rotation,a.size)):r=a.extent;void 0!==c.extent&&(r=Pc(r,c.extent));var p=fg(k,r,p),t={};t[n]={};var v=this.Wc(h,f,t),w=g.f(),A=oc(),D=new we(0,0,0,0),z,B,J,K;for(J=p.ua;J<=p.wa;++J)for(K=p.za;K<=p.Ba;++K)z=h.Lb(n,J,K,d,f),B=z.V(),B=2==B||4==B||3==B&&!w,!B&&z.a&&(z=z.a),B=z.V(),2==B?t[n][z.ja.toString()]=z:4==B||3==B&&!w||
(B=cg(k,z.ja,v,D,A),B||(z=eg(k,z.ja,D,A))&&v(n+1,z));var M;if(this.i!=h.g){for(M in this.f)w=this.f[+M],Af(w.target);this.f={};this.i=h.g}A=Object.keys(t).map(Number);A.sort(Va);var v={},Y;J=0;for(K=A.length;J<K;++J){M=A[J];M in this.f?w=this.f[M]:(w=k.md(q,M),w=new Gm(k,w),v[M]=!0,this.f[M]=w);M=t[M];for(Y in M){z=w;B=M[Y];var Ja=m,I=B.ja,ba=I[0],oa=I[1],Ta=I[2],I=I.toString();if(!(I in z.a)){var ba=Qb(z.c.Ya(ba),z.o),Aa=B.fb(z),Ka=Aa.style;Ka.maxWidth="none";var fc=void 0,uc=void 0;0<Ja?(fc=document.createElement("DIV"),
uc=fc.style,uc.overflow="hidden",uc.width=ba[0]+"px",uc.height=ba[1]+"px",Ka.position="absolute",Ka.left=-Ja+"px",Ka.top=-Ja+"px",Ka.width=ba[0]+2*Ja+"px",Ka.height=ba[1]+2*Ja+"px",fc.appendChild(Aa)):(Ka.width=ba[0]+"px",Ka.height=ba[1]+"px",fc=Aa,uc=Ka);uc.position="absolute";uc.left=(oa-z.g[1])*ba[0]+"px";uc.top=(z.g[2]-Ta)*ba[1]+"px";z.b||(z.b=document.createDocumentFragment());z.b.appendChild(fc);z.a[I]=B}}w.b&&(w.target.appendChild(w.b),w.b=null)}m=Object.keys(this.f).map(Number);m.sort(Va);
J=cc();Y=0;for(A=m.length;Y<A;++Y)if(M=m[Y],w=this.f[M],M in t)if(z=w.$(),K=w.Ia(),ki(J,a.size[0]/2,a.size[1]/2,z/e.resolution,z/e.resolution,e.rotation,(K[0]-q[0])/z,(q[1]-K[1])/z),w.setTransform(J),M in v){for(--M;0<=M;--M)if(M in this.f){K=this.f[M].target;K.parentNode&&K.parentNode.insertBefore(w.target,K.nextSibling);break}0>M&&zf(this.target,w.target,0)}else{if(!a.viewHints[0]&&!a.viewHints[1]){B=dg(w.c,r,w.g[0],D);M=[];z=K=void 0;for(z in w.a)K=w.a[z],B.contains(K.ja)||M.push(K);Ja=B=void 0;
B=0;for(Ja=M.length;B<Ja;++B)K=M[B],z=K.ja.toString(),Af(K.fb(w)),delete w.a[z]}}else Af(w.target),delete this.f[M];c.opacity!=this.j&&(this.j=this.target.style.opacity=c.opacity);c.visible&&!this.c&&(If(this.target,!0),this.c=!0);ti(a.usedTiles,h,n,p);vi(a,h,k,d,f,r,n,g.a());qi(a,h);si(a,h);return!0};function Gm(a,c){this.target=document.createElement("DIV");this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";this.c=a;this.g=c;this.i=Ic(a.Da(c));this.j=
a.$(c[0]);this.a={};this.b=null;this.f=ec();this.o=[0,0]}Gm.prototype.Ia=function(){return this.i};Gm.prototype.$=function(){return this.j};Gm.prototype.setTransform=function(a){li(a,this.f)||(Tg(this.target,a),gc(this.f,a))};function Hm(a){this.i=Pg();var c=this.i.canvas;c.style.maxWidth="none";c.style.position="absolute";Dm.call(this,a,c);this.f=!1;this.j=-1;this.s=NaN;this.o=oc();this.c=this.l=null;this.U=cc();this.A=cc()}y(Hm,Dm);l=Hm.prototype;l.Kd=function(){var a=this.i.canvas;a.width=a.width;
this.j=0};l.mh=function(a,c){var d=a.viewState,e=d.center,f=d.rotation,g=d.resolution,d=a.pixelRatio,h=a.size[0],k=a.size[1],m=h*d,n=k*d,e=ki(this.U,d*h/2,d*k/2,d/g,-d/g,-f,-e[0],-e[1]),g=this.i;g.canvas.width=m;g.canvas.height=n;h=ki(this.A,0,0,1/d,1/d,0,-(m-h)/2*d,-(n-k)/2*d);Tg(g.canvas,h);Im(this,"precompose",a,e);(h=this.c)&&!h.Qa()&&(g.globalAlpha=c.opacity,h.a(g,d,e,f,c.Kc?a.skippedFeatureUids:{}),Im(this,"render",a,e));Im(this,"postcompose",a,e)};function Im(a,c,d,e){var f=a.i;a=a.a;Gb(a,
c)&&(e=new sk(f,d.pixelRatio,d.extent,e,d.viewState.rotation),a.b(new fi(c,a,e,d,f,null)))}l.ib=function(a,c,d,e){if(this.c){var f=this.a,g={};return this.c.f(a,c.viewState.resolution,c.viewState.rotation,{},function(a){var c=x(a).toString();if(!(c in g))return g[c]=!0,d.call(e,a,f)})}};l.nh=function(){oi(this)};l.tf=function(a){function c(a){var c,e=a.$b();e?c=e.call(a,m):(e=d.f)&&(c=e(a,m));if(c){if(c){e=!1;if(Array.isArray(c))for(var f=0,g=c.length;f<g;++f)e=dl(p,a,c[f],cl(m,n),this.nh,this)||
e;else e=dl(p,a,c,cl(m,n),this.nh,this)||e;a=e}else a=!1;this.f=this.f||a}}var d=this.a,e=d.ea();ri(a.attributions,e.da());si(a,e);var f=a.viewHints[0],g=a.viewHints[1],h=d.s,k=d.A;if(!this.f&&!h&&f||!k&&g)return!0;var g=a.extent,h=a.viewState,f=h.projection,m=h.resolution,n=a.pixelRatio;a=d.g;k=d.a;h=rk(d);void 0===h&&(h=bl);g=qc(g,k*m);if(!this.f&&this.s==m&&this.j==a&&this.l==h&&wc(this.o,g))return!0;this.c=null;this.f=!1;var p=new Xk(.5*m/n,g,m,d.a);e.Jc(g,m,f);if(h){var q=[];e.wb(g,function(a){q.push(a)},
this);q.sort(h);q.forEach(c,this)}else e.wb(g,c,this);Yk(p);this.s=m;this.j=a;this.l=h;this.o=g;this.c=p;return!0};function Jm(a,c){Bi.call(this,0,c);this.f=Pg();var d=this.f.canvas;d.style.position="absolute";d.style.width="100%";d.style.height="100%";d.className="ol-unselectable";zf(a,d,0);this.c=cc();this.b=document.createElement("DIV");this.b.className="ol-unselectable";d=this.b.style;d.position="absolute";d.width="100%";d.height="100%";C(this.b,"touchstart",Eb);zf(a,this.b,0);this.a=!0}y(Jm,
Bi);Jm.prototype.fa=function(){Af(this.b);Jm.ia.fa.call(this)};Jm.prototype.Re=function(a){if(a instanceof Wj)a=new Em(a);else if(a instanceof Xj)a=new Fm(a);else if(a instanceof G)a=new Hm(a);else return null;return a};function Km(a,c,d){var e=a.i;if(Gb(e,c)){var f=d.extent,g=d.pixelRatio,h=d.viewState,k=h.rotation,m=a.f,n=m.canvas;ki(a.c,n.width/2,n.height/2,g/h.resolution,-g/h.resolution,-h.rotation,-h.center[0],-h.center[1]);a=new sk(m,g,f,a.c,k);e.b(new fi(c,e,a,d,m,null))}}Jm.prototype.X=function(){return"dom"};
Jm.prototype.xe=function(a){if(a){var c=this.i;if(Gb(c,"precompose")||Gb(c,"postcompose")){var c=this.f.canvas,d=a.pixelRatio;c.width=a.size[0]*d;c.height=a.size[1]*d}Km(this,"precompose",a);c=a.layerStatesArray;cb(c);var d=a.viewState.resolution,e,f,g,h;e=0;for(f=c.length;e<f;++e)h=c[e],g=h.layer,g=Ei(this,g),zf(this.b,g.target,e),hi(h,d)&&"ready"==h.D?g.tf(a,h)&&g.mh(a,h):g.Kd();var c=a.layerStates,k;for(k in this.g)k in c||(g=this.g[k],Af(g.target));this.a||(If(this.b,!0),this.a=!0);Ci(a);Fi(this,
a);a.postRenderFunctions.push(Di);Km(this,"postcompose",a)}else this.a&&(If(this.b,!1),this.a=!1)};function Lm(a){this.b=a}function Mm(a){this.b=a}y(Mm,Lm);Mm.prototype.X=function(){return 35632};function Nm(a){this.b=a}y(Nm,Lm);Nm.prototype.X=function(){return 35633};function Om(){this.b="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}
y(Om,Mm);da(Om);function Pm(){this.b="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}"}y(Pm,Nm);da(Pm);function Qm(a,c){this.o=a.getUniformLocation(c,"j");this.l=a.getUniformLocation(c,"i");this.i=a.getUniformLocation(c,"k");this.j=a.getUniformLocation(c,
"h");this.b=a.getAttribLocation(c,"e");this.a=a.getAttribLocation(c,"f");this.f=a.getAttribLocation(c,"c");this.g=a.getAttribLocation(c,"g");this.c=a.getAttribLocation(c,"d")}function Rm(a){this.b=void 0!==a?a:[]}function Sm(a,c){this.j=a;this.b=c;this.a={};this.c={};this.f={};this.l=this.s=this.i=this.o=null;(this.g=Wa(sa,"OES_element_index_uint"))&&c.getExtension("OES_element_index_uint");C(this.j,"webglcontextlost",this.Cn,this);C(this.j,"webglcontextrestored",this.Dn,this)}y(Sm,Ab);function Tm(a,
c,d){var e=a.b,f=d.b,g=String(x(d));if(g in a.a)e.bindBuffer(c,a.a[g].buffer);else{var h=e.createBuffer();e.bindBuffer(c,h);var k;34962==c?k=new Float32Array(f):34963==c&&(k=a.g?new Uint32Array(f):new Uint16Array(f));e.bufferData(c,k,35044);a.a[g]={Eb:d,buffer:h}}}function Um(a,c){var d=a.b,e=String(x(c)),f=a.a[e];d.isContextLost()||d.deleteBuffer(f.buffer);delete a.a[e]}l=Sm.prototype;l.fa=function(){zb(this.j);var a=this.b;if(!a.isContextLost()){for(var c in this.a)a.deleteBuffer(this.a[c].buffer);
for(c in this.f)a.deleteProgram(this.f[c]);for(c in this.c)a.deleteShader(this.c[c]);a.deleteFramebuffer(this.i);a.deleteRenderbuffer(this.l);a.deleteTexture(this.s)}};l.Bn=function(){return this.b};function Vm(a){if(!a.i){var c=a.b,d=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,d);var e=Wm(c,1,1),f=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,f);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,1,1);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,
e,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,f);c.bindTexture(c.TEXTURE_2D,null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null);a.i=d;a.s=e;a.l=f}return a.i}function Xm(a,c){var d=String(x(c));if(d in a.c)return a.c[d];var e=a.b,f=e.createShader(c.X());e.shaderSource(f,c.b);e.compileShader(f);return a.c[d]=f}function Ym(a,c,d){var e=x(c)+"/"+x(d);if(e in a.f)return a.f[e];var f=a.b,g=f.createProgram();f.attachShader(g,Xm(a,c));f.attachShader(g,
Xm(a,d));f.linkProgram(g);return a.f[e]=g}l.Cn=function(){nb(this.a);nb(this.c);nb(this.f);this.l=this.s=this.i=this.o=null};l.Dn=function(){};l.re=function(a){if(a==this.o)return!1;this.b.useProgram(a);this.o=a;return!0};function Zm(a,c,d){var e=a.createTexture();a.bindTexture(a.TEXTURE_2D,e);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);void 0!==c&&a.texParameteri(3553,10242,c);void 0!==d&&a.texParameteri(3553,10243,d);return e}
function Wm(a,c,d){var e=Zm(a,void 0,void 0);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c,d,0,a.RGBA,a.UNSIGNED_BYTE,null);return e}function $m(a,c){var d=Zm(a,33071,33071);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c);return d}function an(a,c){this.N=this.B=void 0;this.l=Nc(c);this.U=[];this.i=[];this.D=void 0;this.c=[];this.f=[];this.S=this.va=void 0;this.a=[];this.H=this.o=null;this.Fa=void 0;this.ta=ec();this.Ua=ec();this.Y=this.T=void 0;this.sb=ec();this.na=this.ya=this.xa=void 0;this.oa=
[];this.j=[];this.b=[];this.A=null;this.g=[];this.s=[];this.rb=void 0}y(an,ei);function bn(a,c){var d=a.A,e=a.o,f=a.oa,g=a.j,h=c.b;return function(){if(!h.isContextLost()){var a,m;a=0;for(m=f.length;a<m;++a)h.deleteTexture(f[a]);a=0;for(m=g.length;a<m;++a)h.deleteTexture(g[a])}Um(c,d);Um(c,e)}}function cn(a,c,d,e){var f=a.B,g=a.N,h=a.D,k=a.va,m=a.S,n=a.Fa,p=a.T,q=a.Y,r=a.xa?1:0,t=a.ya,v=a.na,w=a.rb,A=Math.cos(t),t=Math.sin(t),D=a.a.length,z=a.b.length,B,J,K,M,Y,Ja;for(B=0;B<d;B+=e)Y=c[B]-a.l[0],Ja=
c[B+1]-a.l[1],J=z/8,K=-v*f,M=-v*(h-g),a.b[z++]=Y,a.b[z++]=Ja,a.b[z++]=K*A-M*t,a.b[z++]=K*t+M*A,a.b[z++]=p/m,a.b[z++]=(q+h)/k,a.b[z++]=n,a.b[z++]=r,K=v*(w-f),M=-v*(h-g),a.b[z++]=Y,a.b[z++]=Ja,a.b[z++]=K*A-M*t,a.b[z++]=K*t+M*A,a.b[z++]=(p+w)/m,a.b[z++]=(q+h)/k,a.b[z++]=n,a.b[z++]=r,K=v*(w-f),M=v*g,a.b[z++]=Y,a.b[z++]=Ja,a.b[z++]=K*A-M*t,a.b[z++]=K*t+M*A,a.b[z++]=(p+w)/m,a.b[z++]=q/k,a.b[z++]=n,a.b[z++]=r,K=-v*f,M=v*g,a.b[z++]=Y,a.b[z++]=Ja,a.b[z++]=K*A-M*t,a.b[z++]=K*t+M*A,a.b[z++]=p/m,a.b[z++]=q/k,
a.b[z++]=n,a.b[z++]=r,a.a[D++]=J,a.a[D++]=J+1,a.a[D++]=J+2,a.a[D++]=J,a.a[D++]=J+2,a.a[D++]=J+3}an.prototype.qc=function(a,c){this.g.push(this.a.length);this.s.push(c);var d=a.ga();cn(this,d,d.length,a.ra())};an.prototype.rc=function(a,c){this.g.push(this.a.length);this.s.push(c);var d=a.ga();cn(this,d,d.length,a.ra())};function dn(a,c){var d=c.b;a.U.push(a.a.length);a.i.push(a.a.length);a.A=new Rm(a.b);Tm(c,34962,a.A);a.o=new Rm(a.a);Tm(c,34963,a.o);var e={};en(a.oa,a.c,e,d);en(a.j,a.f,e,d);a.B=
void 0;a.N=void 0;a.D=void 0;a.c=null;a.f=null;a.va=void 0;a.S=void 0;a.a=null;a.Fa=void 0;a.T=void 0;a.Y=void 0;a.xa=void 0;a.ya=void 0;a.na=void 0;a.b=null;a.rb=void 0}function en(a,c,d,e){var f,g,h,k=c.length;for(h=0;h<k;++h)f=c[h],g=x(f).toString(),g in d?f=d[g]:(f=$m(e,f),d[g]=f),a[h]=f}function fn(a,c,d,e,f,g,h,k,m,n,p){var q=c.b;Tm(c,34962,a.A);Tm(c,34963,a.o);var r=Om.Wb(),t=Pm.Wb(),t=Ym(c,r,t);a.H?r=a.H:(r=new Qm(q,t),a.H=r);c.re(t);q.enableVertexAttribArray(r.f);q.vertexAttribPointer(r.f,
2,5126,!1,32,0);q.enableVertexAttribArray(r.b);q.vertexAttribPointer(r.b,2,5126,!1,32,8);q.enableVertexAttribArray(r.c);q.vertexAttribPointer(r.c,2,5126,!1,32,16);q.enableVertexAttribArray(r.a);q.vertexAttribPointer(r.a,1,5126,!1,32,24);q.enableVertexAttribArray(r.g);q.vertexAttribPointer(r.g,1,5126,!1,32,28);t=a.sb;ki(t,0,0,2/(e*g[0]),2/(e*g[1]),-f,-(d[0]-a.l[0]),-(d[1]-a.l[1]));d=a.Ua;e=2/g[0];g=2/g[1];hc(d);d[0]=e;d[5]=g;d[10]=1;d[15]=1;g=a.ta;hc(g);0!==f&&mc(g,-f);q.uniformMatrix4fv(r.j,!1,t);
q.uniformMatrix4fv(r.l,!1,d);q.uniformMatrix4fv(r.o,!1,g);q.uniform1f(r.i,h);var v;if(void 0===m)gn(a,q,c,k,a.oa,a.U);else{if(n)a:{f=c.g?5125:5123;c=c.g?4:2;g=a.g.length-1;for(h=a.j.length-1;0<=h;--h)for(q.bindTexture(3553,a.j[h]),n=0<h?a.i[h-1]:0,t=a.i[h];0<=g&&a.g[g]>=n;){v=a.g[g];d=a.s[g];e=x(d).toString();if(void 0===k[e]&&d.W()&&(void 0===p||Qc(p,d.W().G()))&&(q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT),q.drawElements(4,t-v,f,v*c),t=m(d))){a=t;break a}t=v;g--}a=void 0}else q.clear(q.COLOR_BUFFER_BIT|
q.DEPTH_BUFFER_BIT),gn(a,q,c,k,a.j,a.i),a=(a=m(null))?a:void 0;v=a}q.disableVertexAttribArray(r.f);q.disableVertexAttribArray(r.b);q.disableVertexAttribArray(r.c);q.disableVertexAttribArray(r.a);q.disableVertexAttribArray(r.g);return v}function gn(a,c,d,e,f,g){var h=d.g?5125:5123;d=d.g?4:2;if(pb(e)){var k;a=0;e=f.length;for(k=0;a<e;++a){c.bindTexture(3553,f[a]);var m=g[a];c.drawElements(4,m-k,h,k*d);k=m}}else{k=0;var n,m=0;for(n=f.length;m<n;++m){c.bindTexture(3553,f[m]);for(var p=0<m?g[m-1]:0,q=
g[m],r=p;k<a.g.length&&a.g[k]<=q;){var t=x(a.s[k]).toString();void 0!==e[t]?(r!==p&&c.drawElements(4,p-r,h,r*d),p=r=k===a.g.length-1?q:a.g[k+1]):p=k===a.g.length-1?q:a.g[k+1];k++}r!==p&&c.drawElements(4,p-r,h,r*d)}}}an.prototype.Rb=function(a){var c=a.Vb(),d=a.ec(1),e=a.hd(),f=a.ke(1),g=a.A,h=a.Ia(),k=a.B,m=a.s,n=a.Db();a=a.j;var p;0===this.c.length?this.c.push(d):(p=this.c[this.c.length-1],x(p)!=x(d)&&(this.U.push(this.a.length),this.c.push(d)));0===this.f.length?this.f.push(f):(p=this.f[this.f.length-
1],x(p)!=x(f)&&(this.i.push(this.a.length),this.f.push(f)));this.B=c[0];this.N=c[1];this.D=n[1];this.va=e[1];this.S=e[0];this.Fa=g;this.T=h[0];this.Y=h[1];this.ya=m;this.xa=k;this.na=a;this.rb=n[0]};function hn(a,c,d){this.i=c;this.j=a;this.c=d;this.g={}}function jn(a,c){var d=[],e;for(e in a.g)d.push(bn(a.g[e],c));return function(){for(var a=d.length,c,e=0;e<a;e++)c=d[e].apply(this,arguments);return c}}function kn(a,c){for(var d in a.g)dn(a.g[d],c)}hn.prototype.b=function(a,c){var d=this.g[c];void 0===
d&&(d=new ln[c](this.j,this.i),this.g[c]=d);return d};hn.prototype.Qa=function(){return pb(this.g)};hn.prototype.a=function(a,c,d,e,f,g,h,k){var m,n;g=0;for(m=Hk.length;g<m;++g)n=this.g[Hk[g]],void 0!==n&&fn(n,a,c,d,e,f,h,k,void 0,!1)};function mn(a,c,d,e,f,g,h,k,m,n){var p=nn,q,r;for(q=Hk.length-1;0<=q;--q)if(r=a.g[Hk[q]],void 0!==r&&(r=fn(r,c,d,e,f,p,g,h,k,m,n)))return r}hn.prototype.f=function(a,c,d,e,f,g,h,k,m,n){var p=c.b;p.bindFramebuffer(p.FRAMEBUFFER,Vm(c));var q;void 0!==this.c&&(q=qc(zc(a),
e*this.c));return mn(this,c,a,e,f,k,m,function(a){var c=new Uint8Array(4);p.readPixels(0,0,1,1,p.RGBA,p.UNSIGNED_BYTE,c);if(0<c[3]&&(a=n(a)))return a},!0,q)};function on(a,c,d,e,f,g,h){var k=d.b;k.bindFramebuffer(k.FRAMEBUFFER,Vm(d));return void 0!==mn(a,d,c,e,f,g,h,function(){var a=new Uint8Array(4);k.readPixels(0,0,1,1,k.RGBA,k.UNSIGNED_BYTE,a);return 0<a[3]},!1)}var ln={Image:an},nn=[1,1];function pn(a,c,d,e,f,g){this.b=a;this.f=c;this.g=g;this.j=f;this.i=e;this.c=d;this.a=null}y(pn,ei);l=pn.prototype;
l.pd=function(a){this.Rb(a.a)};l.pc=function(a){switch(a.X()){case "Point":this.rc(a,null);break;case "MultiPoint":this.qc(a,null);break;case "GeometryCollection":this.Te(a,null)}};l.Se=function(a,c){var d=(0,c.g)(a);d&&Qc(this.g,d.G())&&(this.pd(c),this.pc(d))};l.Te=function(a){a=a.c;var c,d;c=0;for(d=a.length;c<d;++c)this.pc(a[c])};l.rc=function(a,c){var d=this.b,e=(new hn(1,this.g)).b(0,"Image");e.Rb(this.a);e.rc(a,c);dn(e,d);fn(e,this.b,this.f,this.c,this.i,this.j,1,{},void 0,!1);bn(e,d)()};l.qc=
function(a,c){var d=this.b,e=(new hn(1,this.g)).b(0,"Image");e.Rb(this.a);e.qc(a,c);dn(e,d);fn(e,this.b,this.f,this.c,this.i,this.j,1,{},void 0,!1);bn(e,d)()};l.Rb=function(a){this.a=a};function qn(){this.b="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"}y(qn,Mm);da(qn);function rn(){this.b="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"}
y(rn,Nm);da(rn);function sn(a,c){this.g=a.getUniformLocation(c,"f");this.f=a.getUniformLocation(c,"e");this.i=a.getUniformLocation(c,"d");this.c=a.getUniformLocation(c,"g");this.b=a.getAttribLocation(c,"b");this.a=a.getAttribLocation(c,"c")}function tn(a,c){ni.call(this,c);this.f=a;this.S=new Rm([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.i=this.qb=null;this.j=void 0;this.s=cc();this.U=ec();this.A=null}y(tn,ni);function un(a,c,d){var e=a.f.f;if(void 0===a.j||a.j!=d){c.postRenderFunctions.push(qa(function(a,
c,d){a.isContextLost()||(a.deleteFramebuffer(c),a.deleteTexture(d))},e,a.i,a.qb));c=Wm(e,d,d);var f=e.createFramebuffer();e.bindFramebuffer(36160,f);e.framebufferTexture2D(36160,36064,3553,c,0);a.qb=c;a.i=f;a.j=d}else e.bindFramebuffer(36160,a.i)}tn.prototype.oh=function(a,c,d){vn(this,"precompose",d,a);Tm(d,34962,this.S);var e=d.b,f=qn.Wb(),g=rn.Wb(),f=Ym(d,f,g);this.A?g=this.A:this.A=g=new sn(e,f);d.re(f)&&(e.enableVertexAttribArray(g.b),e.vertexAttribPointer(g.b,2,5126,!1,16,0),e.enableVertexAttribArray(g.a),
e.vertexAttribPointer(g.a,2,5126,!1,16,8),e.uniform1i(g.c,0));e.uniformMatrix4fv(g.i,!1,this.s);e.uniformMatrix4fv(g.f,!1,this.U);e.uniform1f(g.g,c.opacity);e.bindTexture(3553,this.qb);e.drawArrays(5,0,4);vn(this,"postcompose",d,a)};function vn(a,c,d,e){a=a.a;if(Gb(a,c)){var f=e.viewState;a.b(new fi(c,a,new pn(d,f.center,f.resolution,f.rotation,e.size,e.extent),e,null,d))}}tn.prototype.uf=function(){this.i=this.qb=null;this.j=void 0};function wn(a,c){tn.call(this,a,c);this.l=this.o=this.c=null}y(wn,
tn);function xn(a,c){var d=c.a();return $m(a.f.f,d)}wn.prototype.ib=function(a,c,d,e){var f=this.a;return f.ea().ie(a,c.viewState.resolution,c.viewState.rotation,c.skippedFeatureUids,function(a){return d.call(e,a,f)})};wn.prototype.vf=function(a,c){var d=this.f.f,e=a.pixelRatio,f=a.viewState,g=f.center,h=f.resolution,k=f.rotation,m=this.c,n=this.qb,p=this.a.ea(),q=a.viewHints,r=a.extent;void 0!==c.extent&&(r=Pc(r,c.extent));q[0]||q[1]||Kc(r)||(f=p.B(r,h,e,f.projection))&&pi(this,f)&&(m=f,n=xn(this,
f),this.qb&&a.postRenderFunctions.push(qa(function(a,c){a.isContextLost()||a.deleteTexture(c)},d,this.qb)));m&&(d=this.f.c.j,yn(this,d.width,d.height,e,g,h,k,m.G()),this.l=null,e=this.s,hc(e),lc(e,1,-1),kc(e,0,-1),this.c=m,this.qb=n,ri(a.attributions,m.da()),si(a,p));return!0};function yn(a,c,d,e,f,g,h,k){c*=g;d*=g;a=a.U;hc(a);lc(a,2*e/c,2*e/d);mc(a,-h);kc(a,k[0]-f[0],k[1]-f[1]);lc(a,(k[2]-k[0])/2,(k[3]-k[1])/2);kc(a,1,1)}wn.prototype.he=function(a,c){return void 0!==this.ib(a,c,Tc,this)};wn.prototype.zc=
function(a,c,d,e){if(this.c&&this.c.a())if(this.a.ea()instanceof mm){if(a=a.slice(),mi(c.pixelToCoordinateMatrix,a,a),this.ib(a,c,Tc,this))return d.call(e,this.a)}else{var f=[this.c.a().width,this.c.a().height];if(!this.l){var g=c.size;c=cc();hc(c);kc(c,-1,-1);lc(c,2/g[0],2/g[1]);kc(c,0,g[1]);lc(c,1,-1);g=cc();jc(this.U,g);var h=cc();hc(h);kc(h,0,f[1]);lc(h,1,-1);lc(h,f[0]/2,f[1]/2);kc(h,1,1);var k=cc();ic(h,g,k);ic(k,c,k);this.l=k}c=[0,0];mi(this.l,a,c);if(!(0>c[0]||c[0]>f[0]||0>c[1]||c[1]>f[1])&&
(this.o||(this.o=Pg(1,1)),this.o.clearRect(0,0,1,1),this.o.drawImage(this.c.a(),c[0],c[1],1,1,0,0,1,1),0<this.o.getImageData(0,0,1,1).data[3]))return d.call(e,this.a)}};function zn(){this.b="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"}y(zn,Mm);da(zn);function An(){this.b="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"}y(An,Nm);da(An);function Bn(a,c){this.g=a.getUniformLocation(c,
"e");this.f=a.getUniformLocation(c,"d");this.b=a.getAttribLocation(c,"b");this.a=a.getAttribLocation(c,"c")}function Cn(a,c){tn.call(this,a,c);this.H=zn.Wb();this.T=An.Wb();this.c=null;this.N=new Rm([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.B=this.o=null;this.l=-1;this.D=[0,0]}y(Cn,tn);l=Cn.prototype;l.fa=function(){Um(this.f.c,this.N);Cn.ia.fa.call(this)};l.Wc=function(a,c,d){var e=this.f;return function(f,g){return og(a,c,f,g,function(a){var c=Rf(e.a,a.gb());c&&(d[f]||(d[f]={}),d[f][a.ja.toString()]=
a);return c})}};l.uf=function(){Cn.ia.uf.call(this);this.c=null};l.vf=function(a,c,d){var e=this.f,f=d.b,g=a.viewState,h=g.projection,k=this.a,m=k.ea(),n=m.eb(h),p=ig(n,g.resolution),q=n.$(p),r=pg(m,p,a.pixelRatio,h),t=r[0]/Qb(n.Ya(p),this.D)[0],v=q/t,w=m.Pd(h),A=g.center,D;q==g.resolution?(A=ui(A,q,a.size),D=Oc(A,q,g.rotation,a.size)):D=a.extent;q=fg(n,D,q);if(this.o&&ye(this.o,q)&&this.l==m.g)v=this.B;else{var z=[q.wa-q.ua+1,q.Ba-q.za+1],B=Math.pow(2,Math.ceil(Math.log(Math.max(z[0]*r[0],z[1]*r[1]))/
Math.LN2)),z=v*B,J=n.Ia(p),K=J[0]+q.ua*r[0]*v,v=J[1]+q.za*r[1]*v,v=[K,v,K+z,v+z];un(this,a,B);f.viewport(0,0,B,B);f.clearColor(0,0,0,0);f.clear(16384);f.disable(3042);B=Ym(d,this.H,this.T);d.re(B);this.c||(this.c=new Bn(f,B));Tm(d,34962,this.N);f.enableVertexAttribArray(this.c.b);f.vertexAttribPointer(this.c.b,2,5126,!1,16,0);f.enableVertexAttribArray(this.c.a);f.vertexAttribPointer(this.c.a,2,5126,!1,16,8);f.uniform1i(this.c.g,0);d={};d[p]={};var M=this.Wc(m,h,d),Y=k.f(),B=!0,K=oc(),Ja=new we(0,
0,0,0),I,ba,oa;for(ba=q.ua;ba<=q.wa;++ba)for(oa=q.za;oa<=q.Ba;++oa){J=m.Lb(p,ba,oa,t,h);if(void 0!==c.extent&&(I=n.Da(J.ja,K),!Qc(I,c.extent)))continue;I=J.V();I=2==I||4==I||3==I&&!Y;!I&&J.a&&(J=J.a);I=J.V();if(2==I){if(Rf(e.a,J.gb())){d[p][J.ja.toString()]=J;continue}}else if(4==I||3==I&&!Y)continue;B=!1;I=cg(n,J.ja,M,Ja,K);I||(J=eg(n,J.ja,Ja,K))&&M(p+1,J)}c=Object.keys(d).map(Number);c.sort(Va);for(var M=new Float32Array(4),Ta,Aa,Ka,Y=0,Ja=c.length;Y<Ja;++Y)for(Ta in Aa=d[c[Y]],Aa)J=Aa[Ta],I=n.Da(J.ja,
K),ba=2*(I[2]-I[0])/z,oa=2*(I[3]-I[1])/z,Ka=2*(I[0]-v[0])/z-1,I=2*(I[1]-v[1])/z-1,bc(M,ba,oa,Ka,I),f.uniform4fv(this.c.f,M),Dn(e,J,r,w*t),f.drawArrays(5,0,4);B?(this.o=q,this.B=v,this.l=m.g):(this.B=this.o=null,this.l=-1,a.animate=!0)}ti(a.usedTiles,m,p,q);var fc=e.o;vi(a,m,n,t,h,D,p,k.a(),function(a){var c;(c=2!=a.V()||Rf(e.a,a.gb()))||(c=a.gb()in fc.g);c||fc.f([a,hg(n,a.ja),n.$(a.ja[0]),r,w*t])},this);qi(a,m);si(a,m);f=this.s;hc(f);kc(f,(A[0]-v[0])/(v[2]-v[0]),(A[1]-v[1])/(v[3]-v[1]));0!==g.rotation&&
mc(f,g.rotation);lc(f,a.size[0]*g.resolution/(v[2]-v[0]),a.size[1]*g.resolution/(v[3]-v[1]));kc(f,-.5,-.5);return!0};l.zc=function(a,c,d,e){if(this.i){var f=[0,0];mi(this.s,[a[0]/c.size[0],(c.size[1]-a[1])/c.size[1]],f);a=[f[0]*this.j,f[1]*this.j];c=this.f.c.b;c.bindFramebuffer(c.FRAMEBUFFER,this.i);f=new Uint8Array(4);c.readPixels(a[0],a[1],1,1,c.RGBA,c.UNSIGNED_BYTE,f);if(0<f[3])return d.call(e,this.a)}};function En(a,c){tn.call(this,a,c);this.l=!1;this.D=-1;this.H=NaN;this.B=oc();this.o=this.c=
this.N=null}y(En,tn);l=En.prototype;l.oh=function(a,c,d){this.o=c;var e=a.viewState,f=this.c;f&&!f.Qa()&&f.a(d,e.center,e.resolution,e.rotation,a.size,a.pixelRatio,c.opacity,c.Kc?a.skippedFeatureUids:{})};l.fa=function(){var a=this.c;a&&(jn(a,this.f.c)(),this.c=null);En.ia.fa.call(this)};l.ib=function(a,c,d,e){if(this.c&&this.o){var f=c.viewState,g=this.a,h={};return this.c.f(a,this.f.c,f.center,f.resolution,f.rotation,c.size,c.pixelRatio,this.o.opacity,{},function(a){var c=x(a).toString();if(!(c in
h))return h[c]=!0,d.call(e,a,g)})}};l.he=function(a,c){if(this.c&&this.o){var d=c.viewState;return on(this.c,a,this.f.c,d.resolution,d.rotation,this.o.opacity,c.skippedFeatureUids)}return!1};l.zc=function(a,c,d,e){a=a.slice();mi(c.pixelToCoordinateMatrix,a,a);if(this.he(a,c))return d.call(e,this.a)};l.ph=function(){oi(this)};l.vf=function(a,c,d){function e(a){var c,d=a.$b();d?c=d.call(a,n):(d=f.f)&&(c=d(a,n));if(c){if(c){d=!1;if(Array.isArray(c))for(var e=0,g=c.length;e<g;++e)d=dl(r,a,c[e],cl(n,p),
this.ph,this)||d;else d=dl(r,a,c,cl(n,p),this.ph,this)||d;a=d}else a=!1;this.l=this.l||a}}var f=this.a;c=f.ea();ri(a.attributions,c.da());si(a,c);var g=a.viewHints[0],h=a.viewHints[1],k=f.s,m=f.A;if(!this.l&&!k&&g||!m&&h)return!0;var h=a.extent,k=a.viewState,g=k.projection,n=k.resolution,p=a.pixelRatio,k=f.g,q=f.a,m=rk(f);void 0===m&&(m=bl);h=qc(h,q*n);if(!this.l&&this.H==n&&this.D==k&&this.N==m&&wc(this.B,h))return!0;this.c&&a.postRenderFunctions.push(jn(this.c,d));this.l=!1;var r=new hn(.5*n/p,
h,f.a);c.Jc(h,n,g);if(m){var t=[];c.wb(h,function(a){t.push(a)},this);t.sort(m);t.forEach(e,this)}else c.wb(h,e,this);kn(r,d);this.H=n;this.D=k;this.N=m;this.B=h;this.c=r;return!0};function Fn(a,c){Bi.call(this,0,c);this.b=document.createElement("CANVAS");this.b.style.width="100%";this.b.style.height="100%";this.b.className="ol-unselectable";zf(a,this.b,0);this.U=this.B=0;this.N=Pg();this.l=!0;this.f=Vg(this.b,{antialias:!0,depth:!1,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});
this.c=new Sm(this.b,this.f);C(this.b,"webglcontextlost",this.Bm,this);C(this.b,"webglcontextrestored",this.Cm,this);this.a=new Qf;this.A=null;this.o=new Gi(function(a){var c=a[1];a=a[2];var f=c[0]-this.A[0],c=c[1]-this.A[1];return 65536*Math.log(a)+Math.sqrt(f*f+c*c)/a}.bind(this),function(a){return a[0].gb()});this.H=function(){if(!this.o.Qa()){Ki(this.o);var a=Hi(this.o);Dn(this,a[0],a[3],a[4])}return!1}.bind(this);this.j=0;Gn(this)}y(Fn,Bi);function Dn(a,c,d,e){var f=a.f,g=c.gb();if(Rf(a.a,g))a=
a.a.get(g),f.bindTexture(3553,a.qb),9729!=a.Pg&&(f.texParameteri(3553,10240,9729),a.Pg=9729),9729!=a.Rg&&(f.texParameteri(3553,10240,9729),a.Rg=9729);else{var h=f.createTexture();f.bindTexture(3553,h);if(0<e){var k=a.N.canvas,m=a.N;a.B!==d[0]||a.U!==d[1]?(k.width=d[0],k.height=d[1],a.B=d[0],a.U=d[1]):m.clearRect(0,0,d[0],d[1]);m.drawImage(c.fb(),e,e,d[0],d[1],0,0,d[0],d[1]);f.texImage2D(3553,0,6408,6408,5121,k)}else f.texImage2D(3553,0,6408,6408,5121,c.fb());f.texParameteri(3553,10240,9729);f.texParameteri(3553,
10241,9729);f.texParameteri(3553,10242,33071);f.texParameteri(3553,10243,33071);a.a.set(g,{qb:h,Pg:9729,Rg:9729})}}l=Fn.prototype;l.Re=function(a){return a instanceof Wj?new wn(this,a):a instanceof Xj?new Cn(this,a):a instanceof G?new En(this,a):null};function Hn(a,c,d){var e=a.i;if(Gb(e,c)){a=a.c;var f=d.viewState;e.b(new fi(c,e,new pn(a,f.center,f.resolution,f.rotation,d.size,d.extent),d,null,a))}}l.fa=function(){var a=this.f;a.isContextLost()||this.a.forEach(function(c){c&&a.deleteTexture(c.qb)});
Bb(this.c);Fn.ia.fa.call(this)};l.wj=function(a,c){for(var d=this.f,e;1024<this.a.tc()-this.j;){if(e=this.a.b.kc)d.deleteTexture(e.qb);else if(+this.a.b.$d==c.index)break;else--this.j;this.a.pop()}};l.X=function(){return"webgl"};l.Bm=function(a){a.preventDefault();this.a.clear();this.j=0;a=this.g;for(var c in a)a[c].uf()};l.Cm=function(){Gn(this);this.i.render()};function Gn(a){a=a.f;a.activeTexture(33984);a.blendFuncSeparate(770,771,1,771);a.disable(2884);a.disable(2929);a.disable(3089);a.disable(2960)}
l.xe=function(a){var c=this.c,d=this.f;if(d.isContextLost())return!1;if(!a)return this.l&&(If(this.b,!1),this.l=!1),!1;this.A=a.focus;this.a.set((-a.index).toString(),null);++this.j;Hn(this,"precompose",a);var e=[],f=a.layerStatesArray;cb(f);var g=a.viewState.resolution,h,k,m,n;h=0;for(k=f.length;h<k;++h)n=f[h],hi(n,g)&&"ready"==n.D&&(m=Ei(this,n.layer),m.vf(a,n,c)&&e.push(n));f=a.size[0]*a.pixelRatio;g=a.size[1]*a.pixelRatio;if(this.b.width!=f||this.b.height!=g)this.b.width=f,this.b.height=g;d.bindFramebuffer(36160,
null);d.clearColor(0,0,0,0);d.clear(16384);d.enable(3042);d.viewport(0,0,this.b.width,this.b.height);h=0;for(k=e.length;h<k;++h)n=e[h],m=Ei(this,n.layer),m.oh(a,n,c);this.l||(If(this.b,!0),this.l=!0);Ci(a);1024<this.a.tc()-this.j&&a.postRenderFunctions.push(this.wj.bind(this));this.o.Qa()||(a.postRenderFunctions.push(this.H),a.animate=!0);Hn(this,"postcompose",a);Fi(this,a);a.postRenderFunctions.push(Di)};l.sf=function(a,c,d,e,f,g){var h;if(this.f.isContextLost())return!1;var k=c.viewState,m=c.layerStatesArray,
n;for(n=m.length-1;0<=n;--n){h=m[n];var p=h.layer;if(hi(h,k.resolution)&&f.call(g,p)&&(h=Ei(this,p).ib(a,c,d,e)))return h}};l.lh=function(a,c,d,e){var f=!1;if(this.f.isContextLost())return!1;var g=c.viewState,h=c.layerStatesArray,k;for(k=h.length-1;0<=k;--k){var m=h[k],n=m.layer;if(hi(m,g.resolution)&&d.call(e,n)&&(f=Ei(this,n).he(a,c)))return!0}return f};l.kh=function(a,c,d,e,f){if(this.f.isContextLost())return!1;var g=c.viewState,h,k=c.layerStatesArray,m;for(m=k.length-1;0<=m;--m){h=k[m];var n=
h.layer;if(hi(h,g.resolution)&&f.call(e,n)&&(h=Ei(this,n).zc(a,c,d,e)))return h}};var In=["canvas","webgl","dom"];function R(a){Kb.call(this);var c=Jn(a);this.mc=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1;this.Uc=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1;this.Ie=void 0!==a.pixelRatio?a.pixelRatio:ah;this.He=c.logos;this.xa=function(){this.i=void 0;this.xo.call(this,Date.now())}.bind(this);this.sb=cc();this.Je=cc();this.lc=0;this.f=null;this.Ua=oc();this.H=
this.S=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(fh?" ol-touch":"");this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction="none";this.a.style.touchAction="none";this.B=document.createElement("DIV");this.B.className="ol-overlaycontainer";this.a.appendChild(this.B);this.A=document.createElement("DIV");this.A.className="ol-overlaycontainer-stopevent";a=["click","dblclick","mousedown",
"touchstart","mspointerdown",Zh,"mousewheel","wheel"];for(var d=0,e=a.length;d<e;++d)C(this.A,a[d],Db);this.a.appendChild(this.A);this.na=new Rh(this);for(var f in bi)C(this.na,bi[f],this.Ig,this);this.ya=c.keyboardEventTarget;this.s=null;C(this.a,"wheel",this.Ic,this);C(this.a,"mousewheel",this.Ic,this);this.o=c.controls;this.j=c.interactions;this.l=c.overlays;this.wf={};this.N=new c.zo(this.a,this);this.T=null;this.D=[];this.ta=[];this.oa=new Li(this.qk.bind(this),this.Wk.bind(this));this.Y={};
C(this,Mb("layergroup"),this.Ck,this);C(this,Mb("view"),this.Xk,this);C(this,Mb("size"),this.Tk,this);C(this,Mb("target"),this.Vk,this);this.C(c.values);this.o.forEach(function(a){a.setMap(this)},this);C(this.o,"add",function(a){a.element.setMap(this)},this);C(this.o,"remove",function(a){a.element.setMap(null)},this);this.j.forEach(function(a){a.setMap(this)},this);C(this.j,"add",function(a){a.element.setMap(this)},this);C(this.j,"remove",function(a){a.element.setMap(null)},this);this.l.forEach(this.fg,
this);C(this.l,"add",function(a){this.fg(a.element)},this);C(this.l,"remove",function(a){var c=a.element.Wa();void 0!==c&&delete this.wf[c.toString()];a.element.setMap(null)},this)}y(R,Kb);l=R.prototype;l.lj=function(a){this.o.push(a)};l.mj=function(a){this.j.push(a)};l.dg=function(a){this.uc().Nc().push(a)};l.eg=function(a){this.l.push(a)};l.fg=function(a){var c=a.Wa();void 0!==c&&(this.wf[c.toString()]=a);a.setMap(this)};l.Va=function(a){this.render();Array.prototype.push.apply(this.D,arguments)};
l.fa=function(){Bb(this.na);Bb(this.N);yb(this.a,"wheel",this.Ic,this);yb(this.a,"mousewheel",this.Ic,this);void 0!==this.c&&(aa.removeEventListener("resize",this.c,!1),this.c=void 0);this.i&&(aa.cancelAnimationFrame(this.i),this.i=void 0);this.Yg(null);R.ia.fa.call(this)};l.fd=function(a,c,d,e,f){if(this.f)return a=this.Oa(a),this.N.sf(a,this.f,c,void 0!==d?d:null,void 0!==e?e:Tc,void 0!==f?f:null)};l.Hl=function(a,c,d,e,f){if(this.f)return this.N.kh(a,this.f,c,void 0!==d?d:null,void 0!==e?e:Tc,
void 0!==f?f:null)};l.Zk=function(a,c,d){if(!this.f)return!1;a=this.Oa(a);return this.N.lh(a,this.f,void 0!==c?c:Tc,void 0!==d?d:null)};l.Lj=function(a){return this.Oa(this.Od(a))};l.Od=function(a){var c=this.a.getBoundingClientRect();a=a.changedTouches?a.changedTouches[0]:a;return[a.clientX-c.left,a.clientY-c.top]};l.mf=function(){return this.get("target")};l.vc=function(){var a=this.mf();return void 0!==a?sf(a):null};l.Oa=function(a){var c=this.f;return c?(a=a.slice(),mi(c.pixelToCoordinateMatrix,
a,a)):null};l.Jj=function(){return this.o};l.ck=function(){return this.l};l.bk=function(a){a=this.wf[a.toString()];return void 0!==a?a:null};l.Qj=function(){return this.j};l.uc=function(){return this.get("layergroup")};l.Xg=function(){return this.uc().Nc()};l.Ga=function(a){var c=this.f;return c?(a=a.slice(0,2),mi(c.coordinateToPixelMatrix,a,a)):null};l.ab=function(){return this.get("size")};l.aa=function(){return this.get("view")};l.sk=function(){return this.a};l.qk=function(a,c,d,e){var f=this.f;
if(!(f&&c in f.wantedTiles&&f.wantedTiles[c][a.ja.toString()]))return Infinity;a=d[0]-f.focus[0];d=d[1]-f.focus[1];return 65536*Math.log(e)+Math.sqrt(a*a+d*d)/e};l.Ic=function(a,c){var d=new Ph(c||a.type,this,a);this.Ig(d)};l.Ig=function(a){if(this.f){this.T=a.coordinate;a.frameState=this.f;var c=this.j.a,d;if(!1!==this.b(a))for(d=c.length-1;0<=d;d--){var e=c[d];if(e.f()&&!e.handleEvent(a))break}}};l.Rk=function(){var a=this.f,c=this.oa;if(!c.Qa()){var d=16,e=d;if(a){var f=a.viewHints;f[0]&&(d=this.mc?
8:0,e=2);f[1]&&(d=this.Uc?8:0,e=2)}c.i<d&&(Ki(c),Mi(c,d,e))}c=this.ta;d=0;for(e=c.length;d<e;++d)c[d](this,a);c.length=0};l.Tk=function(){this.render()};l.Vk=function(){var a;this.mf()&&(a=this.vc());if(this.s){for(var c=0,d=this.s.length;c<d;++c)sb(this.s[c]);this.s=null}a?(a.appendChild(this.a),a=this.ya?this.ya:a,this.s=[C(a,"keydown",this.Ic,this),C(a,"keypress",this.Ic,this)],this.c||(this.c=this.Rc.bind(this),aa.addEventListener("resize",this.c,!1))):(Af(this.a),void 0!==this.c&&(aa.removeEventListener("resize",
this.c,!1),this.c=void 0));this.Rc()};l.Wk=function(){this.render()};l.Yk=function(){this.render()};l.Xk=function(){this.S&&(sb(this.S),this.S=null);var a=this.aa();a&&(this.S=C(a,"propertychange",this.Yk,this));this.render()};l.Dk=function(){this.render()};l.Ek=function(){this.render()};l.Ck=function(){this.H&&(this.H.forEach(sb),this.H=null);var a=this.uc();a&&(this.H=[C(a,"propertychange",this.Ek,this),C(a,"change",this.Dk,this)]);this.render()};l.yo=function(){this.i&&aa.cancelAnimationFrame(this.i);
this.xa()};l.render=function(){void 0===this.i&&(this.i=aa.requestAnimationFrame(this.xa))};l.ro=function(a){return this.o.remove(a)};l.so=function(a){return this.j.remove(a)};l.uo=function(a){return this.uc().Nc().remove(a)};l.vo=function(a){return this.l.remove(a)};l.xo=function(a){var c,d,e,f=this.ab(),g=this.aa(),h=null;if(void 0!==f&&0<f[0]&&0<f[1]&&g&&ke(g)){var h=g.f.slice(),k=this.uc().bf(),m={};c=0;for(d=k.length;c<d;++c)m[x(k[c].layer)]=k[c];e=g.V();h={animate:!1,attributions:{},coordinateToPixelMatrix:this.sb,
extent:null,focus:this.T?this.T:e.center,index:this.lc++,layerStates:m,layerStatesArray:k,logos:mb({},this.He),pixelRatio:this.Ie,pixelToCoordinateMatrix:this.Je,postRenderFunctions:[],size:f,skippedFeatureUids:this.Y,tileQueue:this.oa,time:a,usedTiles:{},viewState:e,viewHints:h,wantedTiles:{}}}if(h){a=this.D;c=f=0;for(d=a.length;c<d;++c)g=a[c],g(this,h)&&(a[f++]=g);a.length=f;h.extent=Oc(e.center,e.resolution,e.rotation,h.size)}this.f=h;this.N.xe(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.ta,
h.postRenderFunctions),0!==this.D.length||h.viewHints[0]||h.viewHints[1]||Cc(h.extent,this.Ua)||(this.b(new Of("moveend",this,h)),rc(h.extent,this.Ua)));this.b(new Of("postrender",this,h));Ig(this.Rk,this)};l.bi=function(a){this.set("layergroup",a)};l.Pf=function(a){this.set("size",a)};l.Yg=function(a){this.set("target",a)};l.Mo=function(a){this.set("view",a)};l.ki=function(a){a=x(a).toString();this.Y[a]=!0;this.render()};l.Rc=function(){var a=this.vc();if(a){var c=rf(a),d=Ze&&a.currentStyle,e;if(e=
d)pf(c),e=!0;if(e&&"auto"!=d.width&&"auto"!=d.height&&!d.boxSizing)c=Jf(a,d.width,"width","pixelWidth"),a=Jf(a,d.height,"height","pixelHeight"),a=new of(c,a);else{d=new of(a.offsetWidth,a.offsetHeight);c=Lf(a,"padding");if(!Ze||9<=Number(lf))e=Ef(a,"borderLeftWidth"),f=Ef(a,"borderRightWidth"),g=Ef(a,"borderTopWidth"),a=Ef(a,"borderBottomWidth"),a=new Df(parseFloat(g),parseFloat(f),parseFloat(a),parseFloat(e));else{e=Nf(a,"borderLeft");var f=Nf(a,"borderRight"),g=Nf(a,"borderTop"),a=Nf(a,"borderBottom"),
a=new Df(g,f,a,e)}a=new of(d.width-a.left-c.left-c.right-a.right,d.height-a.top-c.top-c.bottom-a.bottom)}this.Pf([a.width,a.height])}else this.Pf(void 0)};l.mi=function(a){a=x(a).toString();delete this.Y[a];this.render()};function Jn(a){var c=null;void 0!==a.keyboardEventTarget&&(c="string"===typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var d={},e={};if(void 0===a.logo||"boolean"===typeof a.logo&&a.logo)e["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"http://openlayers.org/";else{var f=a.logo;"string"===typeof f?e[f]="":ja(f)&&(e[f.src]=f.href)}f=a.layers instanceof Mj?a.layers:new Mj({layers:a.layers});d.layergroup=f;d.target=a.target;d.view=void 0!==a.view?a.view:new ge;var f=Bi,g;void 0!==a.renderer?Array.isArray(a.renderer)?g=a.renderer:"string"===typeof a.renderer&&(g=[a.renderer]):g=In;var h,k;h=0;for(k=g.length;h<k;++h){var m=g[h];if("canvas"==m){if(ch){f=Bm;break}}else if("dom"==m){f=Jm;break}else if("webgl"==m&&Wg){f=Fn;break}}var n;
void 0!==a.controls?n=Array.isArray(a.controls)?new De(a.controls.slice()):a.controls:n=yg();var p;void 0!==a.interactions?p=Array.isArray(a.interactions)?new De(a.interactions.slice()):a.interactions:p=Lj();a=void 0!==a.overlays?Array.isArray(a.overlays)?new De(a.overlays.slice()):a.overlays:new De;return{controls:n,interactions:p,keyboardEventTarget:c,logos:e,overlays:a,zo:f,values:d}}Vj();function Kn(a){Kb.call(this);this.l=a.id;this.o=void 0!==a.insertFirst?a.insertFirst:!0;this.s=void 0!==a.stopEvent?
a.stopEvent:!0;this.f=document.createElement("DIV");this.f.className="ol-overlay-container";this.f.style.position="absolute";this.autoPan=void 0!==a.autoPan?a.autoPan:!1;this.i=void 0!==a.autoPanAnimation?a.autoPanAnimation:{};this.j=void 0!==a.autoPanMargin?a.autoPanMargin:20;this.a={Jd:"",ae:"",ye:"",ze:"",visible:!0};this.c=null;C(this,Mb("element"),this.yk,this);C(this,Mb("map"),this.Jk,this);C(this,Mb("offset"),this.Nk,this);C(this,Mb("position"),this.Pk,this);C(this,Mb("positioning"),this.Qk,
this);void 0!==a.element&&this.Yh(a.element);this.di(void 0!==a.offset?a.offset:[0,0]);this.gi(void 0!==a.positioning?a.positioning:"top-left");void 0!==a.position&&this.nf(a.position)}y(Kn,Kb);l=Kn.prototype;l.ce=function(){return this.get("element")};l.Wa=function(){return this.l};l.de=function(){return this.get("map")};l.Dg=function(){return this.get("offset")};l.Zg=function(){return this.get("position")};l.Eg=function(){return this.get("positioning")};l.yk=function(){yf(this.f);var a=this.ce();
a&&this.f.appendChild(a)};l.Jk=function(){this.c&&(Af(this.f),sb(this.c),this.c=null);var a=this.de();a&&(this.c=C(a,"postrender",this.render,this),Ln(this),a=this.s?a.A:a.B,this.o?zf(a,this.f,0):a.appendChild(this.f))};l.render=function(){Ln(this)};l.Nk=function(){Ln(this)};l.Pk=function(){Ln(this);if(void 0!==this.get("position")&&this.autoPan){var a=this.de();if(void 0!==a&&a.vc()){var c=Mn(a.vc(),a.ab()),d=this.ce(),e=d.offsetWidth,f=d.currentStyle||aa.getComputedStyle(d),e=e+(parseInt(f.marginLeft,
10)+parseInt(f.marginRight,10)),f=d.offsetHeight,g=d.currentStyle||aa.getComputedStyle(d),f=f+(parseInt(g.marginTop,10)+parseInt(g.marginBottom,10)),h=Mn(d,[e,f]),d=this.j;wc(c,h)||(e=h[0]-c[0],f=c[2]-h[2],g=h[1]-c[1],h=c[3]-h[3],c=[0,0],0>e?c[0]=e-d:0>f&&(c[0]=Math.abs(f)+d),0>g?c[1]=g-d:0>h&&(c[1]=Math.abs(h)+d),0===c[0]&&0===c[1])||(d=a.aa().bb(),e=a.Ga(d),c=[e[0]+c[0],e[1]+c[1]],this.i&&(this.i.source=d,a.Va(re(this.i))),a.aa().lb(a.Oa(c)))}}};l.Qk=function(){Ln(this)};l.Yh=function(a){this.set("element",
a)};l.setMap=function(a){this.set("map",a)};l.di=function(a){this.set("offset",a)};l.nf=function(a){this.set("position",a)};function Mn(a,c){var d=rf(a),e=new nf(0,0),f;f=d?rf(d):document;var g;(g=!Ze||9<=Number(lf))||(pf(f),g=!0);a!=(g?f.documentElement:f.body)&&(f=Ff(a),g=pf(d).b,d=g.scrollingElement?g.scrollingElement:bf?g.body||g.documentElement:g.documentElement,g=g.parentWindow||g.defaultView,d=Ze&&jf("10")&&g.pageYOffset!=d.scrollTop?new nf(d.scrollLeft,d.scrollTop):new nf(g.pageXOffset||d.scrollLeft,
g.pageYOffset||d.scrollTop),e.x=f.left+d.x,e.y=f.top+d.y);return[e.x,e.y,e.x+c[0],e.y+c[1]]}l.gi=function(a){this.set("positioning",a)};function Nn(a,c){a.a.visible!==c&&(If(a.f,c),a.a.visible=c)}function Ln(a){var c=a.de(),d=a.Zg();if(void 0!==c&&c.f&&void 0!==d){var d=c.Ga(d),e=c.ab(),c=a.f.style,f=a.Dg(),g=a.Eg(),h=f[0],f=f[1];if("bottom-right"==g||"center-right"==g||"top-right"==g)""!==a.a.ae&&(a.a.ae=c.left=""),h=Math.round(e[0]-d[0]-h)+"px",a.a.ye!=h&&(a.a.ye=c.right=h);else{""!==a.a.ye&&(a.a.ye=
c.right="");if("bottom-center"==g||"center-center"==g||"top-center"==g)h-=Gf(a.f).width/2;h=Math.round(d[0]+h)+"px";a.a.ae!=h&&(a.a.ae=c.left=h)}if("bottom-left"==g||"bottom-center"==g||"bottom-right"==g)""!==a.a.ze&&(a.a.ze=c.top=""),d=Math.round(e[1]-d[1]-f)+"px",a.a.Jd!=d&&(a.a.Jd=c.bottom=d);else{""!==a.a.Jd&&(a.a.Jd=c.bottom="");if("center-left"==g||"center-center"==g||"center-right"==g)f-=Gf(a.f).height/2;d=Math.round(d[1]+f)+"px";a.a.ze!=d&&(a.a.ze=c.top=d)}Nn(a,!0)}else Nn(a,!1)}function On(a){a=
a?a:{};this.j=void 0!==a.collapsed?a.collapsed:!0;this.o=void 0!==a.collapsible?a.collapsible:!0;this.o||(this.j=!1);var c=void 0!==a.className?a.className:"ol-overviewmap",d=void 0!==a.tipLabel?a.tipLabel:"Overview map",e=void 0!==a.collapseLabel?a.collapseLabel:"\u00ab";this.A="string"===typeof e?vf("SPAN",{},e):e;e=void 0!==a.label?a.label:"\u00bb";this.B="string"===typeof e?vf("SPAN",{},e):e;d=vf("BUTTON",{type:"button",title:d},this.o&&!this.j?this.A:this.B);C(d,"click",this.Sl,this);e=document.createElement("DIV");
e.className="ol-overviewmap-map";var f=this.f=new R({controls:new De,interactions:new De,target:e,view:a.view});a.layers&&a.layers.forEach(function(a){f.dg(a)},this);var g=document.createElement("DIV");g.className="ol-overviewmap-box";g.style.boxSizing="border-box";this.l=new Kn({position:[0,0],positioning:"bottom-left",element:g});this.f.eg(this.l);c=vf("DIV",c+" ol-unselectable ol-control"+(this.j&&this.o?" ol-collapsed":"")+(this.o?"":" ol-uncollapsible"),e,d);Pf.call(this,{element:c,render:a.render?
a.render:Pn,target:a.target})}y(On,Pf);l=On.prototype;l.setMap=function(a){var c=this.a;a!==c&&(c&&(c=c.aa())&&yb(c,Mb("rotation"),this.Xd,this),On.ia.setMap.call(this,a),a&&(this.s.push(C(a,"propertychange",this.Kk,this)),0===this.f.Xg().Zb()&&this.f.bi(a.uc()),a=a.aa()))&&(C(a,Mb("rotation"),this.Xd,this),ke(a)&&(this.f.Rc(),Qn(this)))};l.Kk=function(a){"view"===a.key&&((a=a.oldValue)&&yb(a,Mb("rotation"),this.Xd,this),a=this.a.aa(),C(a,Mb("rotation"),this.Xd,this))};l.Xd=function(){this.f.aa().ee(this.a.aa().Ma())};
function Pn(){var a=this.a,c=this.f;if(a.f&&c.f){var d=a.ab(),a=a.aa().Gc(d),e=c.ab(),d=c.aa().Gc(e),f=c.Ga(Ic(a)),g=c.Ga(Gc(a)),c=Math.abs(f[0]-g[0]),f=Math.abs(f[1]-g[1]),g=e[0],e=e[1];c<.1*g||f<.1*e||c>.75*g||f>.75*e?Qn(this):wc(d,a)||(a=this.f,d=this.a.aa(),a.aa().lb(d.bb()))}Rn(this)}function Qn(a){var c=a.a;a=a.f;var d=c.ab(),c=c.aa().Gc(d),d=a.ab();a=a.aa();Rc(c,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2)));a.Xe(c,d)}function Rn(a){var c=a.a,d=a.f;if(c.f&&d.f){var e=c.ab(),f=c.aa(),g=d.aa();
d.ab();var d=f.Ma(),c=a.l,h=a.l.ce(),f=f.Gc(e),e=g.$(),g=Fc(f),f=Hc(f),k;if(a=a.a.aa().bb())k=[g[0]-a[0],g[1]-a[1]],Wb(k,d),Rb(k,a);c.nf(k);h&&(h.style.width=Math.abs((g[0]-f[0])/e)+"px",h.style.height=Math.abs((f[1]-g[1])/e)+"px")}}l.Sl=function(a){a.preventDefault();Sn(this)};function Sn(a){a.element.classList.toggle("ol-collapsed");a.j?Bf(a.A,a.B):Bf(a.B,a.A);a.j=!a.j;var c=a.f;a.j||c.f||(c.Rc(),Qn(a),xb(c,"postrender",function(){Rn(this)},a))}l.Rl=function(){return this.o};l.Ul=function(a){this.o!==
a&&(this.o=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.j&&Sn(this))};l.Tl=function(a){this.o&&this.j!==a&&Sn(this)};l.Ql=function(){return this.j};l.dk=function(){return this.f};function Tn(a){a=a?a:{};var c=void 0!==a.className?a.className:"ol-scale-line";this.o=document.createElement("DIV");this.o.className=c+"-inner";this.f=document.createElement("DIV");this.f.className=c+" ol-unselectable";this.f.appendChild(this.o);this.A=null;this.l=void 0!==a.minWidth?a.minWidth:64;this.j=
!1;this.H=void 0;this.B="";Pf.call(this,{element:this.f,render:a.render?a.render:Un,target:a.target});C(this,Mb("units"),this.T,this);this.D(a.units||"metric")}y(Tn,Pf);var Vn=[1,2,5];Tn.prototype.N=function(){return this.get("units")};function Un(a){(a=a.frameState)?this.A=a.viewState:this.A=null;Wn(this)}Tn.prototype.T=function(){Wn(this)};Tn.prototype.D=function(a){this.set("units",a)};function Wn(a){var c=a.A;if(c){var d=c.projection,e=d.Xb(),c=d.getPointResolution(c.resolution,c.center)*e,e=
a.l*c,d="",f=a.N();"degrees"==f?(d=Xc.degrees,c/=d,e<d/60?(d="\u2033",c*=3600):e<d?(d="\u2032",c*=60):d="\u00b0"):"imperial"==f?.9144>e?(d="in",c/=.0254):1609.344>e?(d="ft",c/=.3048):(d="mi",c/=1609.344):"nautical"==f?(c/=1852,d="nm"):"metric"==f?1>e?(d="mm",c*=1E3):1E3>e?d="m":(d="km",c/=1E3):"us"==f&&(.9144>e?(d="in",c*=39.37):1609.344>e?(d="ft",c/=.30480061):(d="mi",c/=1609.3472));for(var f=3*Math.floor(Math.log(a.l*c)/Math.log(10)),g;;){g=Vn[(f%3+3)%3]*Math.pow(10,Math.floor(f/3));e=Math.round(g/
c);if(isNaN(e)){If(a.f,!1);a.j=!1;return}if(e>=a.l)break;++f}c=g+" "+d;a.B!=c&&(a.o.innerHTML=c,a.B=c);a.H!=e&&(a.o.style.width=e+"px",a.H=e);a.j||(If(a.f,!0),a.j=!0)}else a.j&&(If(a.f,!1),a.j=!1)}function Xn(a){a=a?a:{};this.f=void 0;this.j=Yn;this.A=[];this.N=this.l=0;this.T=null;this.xa=!1;this.Y=void 0!==a.duration?a.duration:200;var c=void 0!==a.className?a.className:"ol-zoomslider",d=vf("BUTTON",{type:"button","class":c+"-thumb ol-unselectable"}),c=vf("DIV",[c,"ol-unselectable","ol-control"],
d);this.o=new Jh(c);C(this.o,th,this.xk,this);C(this.o,uh,this.Gg,this);C(this.o,vh,this.Hg,this);C(c,"click",this.wk,this);C(d,"click",Db);Pf.call(this,{element:c,render:a.render?a.render:Zn})}y(Xn,Pf);Xn.prototype.fa=function(){Bb(this.o);Xn.ia.fa.call(this)};var Yn=0;l=Xn.prototype;l.setMap=function(a){Xn.ia.setMap.call(this,a);a&&a.render()};function Zn(a){if(a.frameState){if(!this.xa){var c=this.element,d=Gf(c),e=c.firstElementChild,c=Lf(e,"margin"),f=new of(e.offsetWidth,e.offsetHeight),e=f.width+
c.right+c.left,c=f.height+c.top+c.bottom;this.T=[e,c];d.width>d.height?(this.j=1,this.N=d.width-e):(this.j=Yn,this.l=d.height-c);this.xa=!0}a=a.frameState.viewState.resolution;a!==this.f&&(this.f=a,$n(this,a))}}l.wk=function(a){var c=this.a,d=c.aa(),e=d.$();c.Va(te({resolution:e,duration:this.Y,easing:ne}));a=ao(this,La(1===this.j?(a.offsetX-this.T[0]/2)/this.N:(a.offsetY-this.T[1]/2)/this.l,0,1));d.Sb(d.constrainResolution(a))};l.xk=function(a){if(!this.B&&a.b.target===this.element.firstElementChild&&
(le(this.a.aa(),1),this.H=a.clientX,this.D=a.clientY,this.B=!0,0===this.A.length)){a=this.Gg;var c=this.Hg;this.A.push(C(document,"mousemove",a,this),C(document,"touchmove",a,this),C(document,uh,a,this),C(document,"mouseup",c,this),C(document,"touchend",c,this),C(document,vh,c,this))}};l.Gg=function(a){if(this.B){var c=this.element.firstElementChild;this.f=ao(this,La(1===this.j?(a.clientX-this.H+parseInt(c.style.left,10))/this.N:(a.clientY-this.D+parseInt(c.style.top,10))/this.l,0,1));this.a.aa().Sb(this.f);
$n(this,this.f);this.H=a.clientX;this.D=a.clientY}};l.Hg=function(){if(this.B){var a=this.a,c=a.aa();le(c,-1);a.Va(te({resolution:this.f,duration:this.Y,easing:ne}));a=c.constrainResolution(this.f);c.Sb(a);this.B=!1;this.D=this.H=void 0;this.A.forEach(sb);this.A.length=0}};function $n(a,c){var d;d=1-je(a.a.aa())(c);var e=a.element.firstElementChild;1==a.j?e.style.left=a.N*d+"px":e.style.top=a.l*d+"px"}function ao(a,c){return ie(a.a.aa())(1-c)}function bo(a){a=a?a:{};this.f=a.extent?a.extent:null;
var c=void 0!==a.className?a.className:"ol-zoom-extent",d=vf("BUTTON",{type:"button",title:void 0!==a.tipLabel?a.tipLabel:"Fit to extent"},void 0!==a.label?a.label:"E");C(d,"click",this.j,this);c=vf("DIV",c+" ol-unselectable ol-control",d);Pf.call(this,{element:c,target:a.target})}y(bo,Pf);bo.prototype.j=function(a){a.preventDefault();var c=this.a;a=c.aa();var d=this.f?this.f:a.i.G(),c=c.ab();a.Xe(d,c)};function co(a){Kb.call(this);a=a?a:{};this.a=null;C(this,Mb("tracking"),this.wl,this);this.kf(void 0!==
a.tracking?a.tracking:!1)}y(co,Kb);l=co.prototype;l.fa=function(){this.kf(!1);co.ia.fa.call(this)};l.Gn=function(a){if(null!==a.alpha){var c=Pa(a.alpha);this.set("alpha",c);"boolean"===typeof a.absolute&&a.absolute?this.set("heading",c):ha(a.webkitCompassHeading)&&-1!=a.webkitCompassAccuracy&&this.set("heading",Pa(a.webkitCompassHeading))}null!==a.beta&&this.set("beta",Pa(a.beta));null!==a.gamma&&this.set("gamma",Pa(a.gamma));this.u()};l.Ej=function(){return this.get("alpha")};l.Hj=function(){return this.get("beta")};
l.Nj=function(){return this.get("gamma")};l.vl=function(){return this.get("heading")};l.Tg=function(){return this.get("tracking")};l.wl=function(){if(dh){var a=this.Tg();a&&!this.a?this.a=C(aa,"deviceorientation",this.Gn,this):a||null===this.a||(sb(this.a),this.a=null)}};l.kf=function(a){this.set("tracking",a)};function eo(){this.defaultDataProjection=null}function fo(a,c,d){var e;d&&(e={dataProjection:d.dataProjection?d.dataProjection:a.Sa(c),featureProjection:d.featureProjection});return go(a,e)}
function go(a,c){var d;c&&(d={featureProjection:c.featureProjection,dataProjection:c.dataProjection?c.dataProjection:a.defaultDataProjection,rightHanded:c.rightHanded},c.decimals&&(d.decimals=c.decimals));return d}function ho(a,c,d){var e=d?ad(d.featureProjection):null,f=d?ad(d.dataProjection):null,g;e&&f&&!qd(e,f)?a instanceof vd?g=(c?a.clone():a).hb(c?e:f,c?f:e):g=ud(c?a.slice():a,c?e:f,c?f:e):g=a;if(c&&d&&d.decimals){var h=Math.pow(10,d.decimals);a=function(a){for(var c=0,d=a.length;c<d;++c)a[c]=
Math.round(a[c]*h)/h;return a};Array.isArray(g)?a(g):g.oc(a)}return g}function io(){this.defaultDataProjection=null}y(io,eo);function jo(a){return ja(a)?a:"string"===typeof a?(a=JSON.parse(a))?a:null:null}l=io.prototype;l.X=function(){return"json"};l.Pb=function(a,c){return this.Oc(jo(a),fo(this,a,c))};l.Ea=function(a,c){return this.Df(jo(a),fo(this,a,c))};l.Pc=function(a,c){return this.Kh(jo(a),fo(this,a,c))};l.Sa=function(a){return this.Rh(jo(a))};l.Ad=function(a,c){return JSON.stringify(this.Sc(a,
c))};l.Ub=function(a,c){return JSON.stringify(this.Ce(a,c))};l.Tc=function(a,c){return JSON.stringify(this.Ee(a,c))};function ko(a,c,d,e,f,g){var h=NaN,k=NaN,m=(d-c)/e;if(0!==m)if(1==m)h=a[c],k=a[c+1];else if(2==m)h=(1-f)*a[c]+f*a[c+e],k=(1-f)*a[c+1]+f*a[c+e+1];else{var k=a[c],m=a[c+1],n=0,h=[0],p;for(p=c+e;p<d;p+=e){var q=a[p],r=a[p+1],n=n+Math.sqrt((q-k)*(q-k)+(r-m)*(r-m));h.push(n);k=q;m=r}d=f*n;m=0;n=h.length;for(p=!1;m<n;)f=m+(n-m>>1),k=+Va(h[f],d),0>k?m=f+1:(n=f,p=!k);f=p?m:~m;0>f?(d=(d-h[-f-
2])/(h[-f-1]-h[-f-2]),c+=(-f-2)*e,h=Ra(a[c],a[c+e],d),k=Ra(a[c+1],a[c+e+1],d)):(h=a[c+f*e],k=a[c+f*e+1])}return g?(g[0]=h,g[1]=k,g):[h,k]}function lo(a,c,d,e,f,g){if(d==c)return null;if(f<a[c+e-1])return g?(d=a.slice(c,c+e),d[e-1]=f,d):null;if(a[d-1]<f)return g?(d=a.slice(d-e,d),d[e-1]=f,d):null;if(f==a[c+e-1])return a.slice(c,c+e);c/=e;for(d/=e;c<d;)g=c+d>>1,f<a[(g+1)*e-1]?d=g:c=g+1;d=a[c*e-1];if(f==d)return a.slice((c-1)*e,(c-1)*e+e);g=(f-d)/(a[(c+1)*e-1]-d);d=[];var h;for(h=0;h<e-1;++h)d.push(Ra(a[(c-
1)*e+h],a[c*e+h],g));d.push(f);return d}function mo(a,c,d,e,f,g){var h=0;if(g)return lo(a,h,c[c.length-1],d,e,f);if(e<a[d-1])return f?(a=a.slice(0,d),a[d-1]=e,a):null;if(a[a.length-1]<e)return f?(a=a.slice(a.length-d),a[d-1]=e,a):null;f=0;for(g=c.length;f<g;++f){var k=c[f];if(h!=k){if(e<a[h+d-1])break;if(e<=a[k-1])return lo(a,h,k,d,e,!1);h=k}}return null}function S(a,c){xd.call(this);this.i=null;this.N=this.H=this.l=-1;this.ma(a,c)}y(S,xd);l=S.prototype;l.nj=function(a){this.v?Za(this.v,a):this.v=
a.slice();this.u()};l.clone=function(){var a=new S(null);a.ba(this.f,this.v.slice());return a};l.ub=function(a,c,d,e){if(e<sc(this.G(),a,c))return e;this.N!=this.g&&(this.H=Math.sqrt(Ed(this.v,0,this.v.length,this.a,0)),this.N=this.g);return Gd(this.v,0,this.v.length,this.a,this.H,!1,a,c,d,e)};l.Bj=function(a,c){return Vd(this.v,0,this.v.length,this.a,a,c)};l.Xl=function(a,c){return"XYM"!=this.f&&"XYZM"!=this.f?null:lo(this.v,0,this.v.length,this.a,a,void 0!==c?c:!1)};l.Z=function(){return Ld(this.v,
0,this.v.length,this.a)};l.tg=function(a,c){return ko(this.v,0,this.v.length,this.a,a,c)};l.Yl=function(){var a=this.v,c=this.a,d=a[0],e=a[1],f=0,g;for(g=0+c;g<this.v.length;g+=c)var h=a[g],k=a[g+1],f=f+Math.sqrt((h-d)*(h-d)+(k-e)*(k-e)),d=h,e=k;return f};function zk(a){a.l!=a.g&&(a.i=a.tg(.5,a.i),a.l=a.g);return a.i}l.Hc=function(a){var c=[];c.length=Nd(this.v,0,this.v.length,this.a,a,c,0);a=new S(null);a.ba("XY",c);return a};l.X=function(){return"LineString"};l.Ka=function(a){return Wd(this.v,0,
this.v.length,this.a,a)};l.ma=function(a,c){a?(Ad(this,c,a,1),this.v||(this.v=[]),this.v.length=Jd(this.v,0,a,this.a),this.u()):this.ba("XY",null)};l.ba=function(a,c){zd(this,a,c);this.u()};function T(a,c){xd.call(this);this.i=[];this.l=this.N=-1;this.ma(a,c)}y(T,xd);l=T.prototype;l.oj=function(a){this.v?Za(this.v,a.ga().slice()):this.v=a.ga().slice();this.i.push(this.v.length);this.u()};l.clone=function(){var a=new T(null);a.ba(this.f,this.v.slice(),this.i.slice());return a};l.ub=function(a,c,d,
e){if(e<sc(this.G(),a,c))return e;this.l!=this.g&&(this.N=Math.sqrt(Fd(this.v,0,this.i,this.a,0)),this.l=this.g);return Hd(this.v,0,this.i,this.a,this.N,!1,a,c,d,e)};l.$l=function(a,c,d){return"XYM"!=this.f&&"XYZM"!=this.f||0===this.v.length?null:mo(this.v,this.i,this.a,a,void 0!==c?c:!1,void 0!==d?d:!1)};l.Z=function(){return Md(this.v,0,this.i,this.a)};l.Bb=function(){return this.i};l.Vj=function(a){if(0>a||this.i.length<=a)return null;var c=new S(null);c.ba(this.f,this.v.slice(0===a?0:this.i[a-
1],this.i[a]));return c};l.jd=function(){var a=this.v,c=this.i,d=this.f,e=[],f=0,g,h;g=0;for(h=c.length;g<h;++g){var k=c[g],m=new S(null);m.ba(d,a.slice(f,k));e.push(m);f=k}return e};function Ak(a){var c=[],d=a.v,e=0,f=a.i;a=a.a;var g,h;g=0;for(h=f.length;g<h;++g){var k=f[g],e=ko(d,e,k,a,.5);Za(c,e);e=k}return c}l.Hc=function(a){var c=[],d=[],e=this.v,f=this.i,g=this.a,h=0,k=0,m,n;m=0;for(n=f.length;m<n;++m){var p=f[m],k=Nd(e,h,p,g,a,c,k);d.push(k);h=p}c.length=k;a=new T(null);a.ba("XY",c,d);return a};
l.X=function(){return"MultiLineString"};l.Ka=function(a){a:{var c=this.v,d=this.i,e=this.a,f=0,g,h;g=0;for(h=d.length;g<h;++g){if(Wd(c,f,d[g],e,a)){a=!0;break a}f=d[g]}a=!1}return a};l.ma=function(a,c){if(a){Ad(this,c,a,2);this.v||(this.v=[]);var d=Kd(this.v,0,a,this.a,this.i);this.v.length=0===d.length?0:d[d.length-1];this.u()}else this.ba("XY",null,this.i)};l.ba=function(a,c,d){zd(this,a,c);this.i=d;this.u()};function no(a,c){var d=a.f,e=[],f=[],g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];0===g&&
(d=k.f);Za(e,k.ga());f.push(e.length)}a.ba(d,e,f)}function oo(a,c){xd.call(this);this.ma(a,c)}y(oo,xd);l=oo.prototype;l.qj=function(a){this.v?Za(this.v,a.ga()):this.v=a.ga().slice();this.u()};l.clone=function(){var a=new oo(null);a.ba(this.f,this.v.slice());return a};l.ub=function(a,c,d,e){if(e<sc(this.G(),a,c))return e;var f=this.v,g=this.a,h,k,m;h=0;for(k=f.length;h<k;h+=g)if(m=Oa(a,c,f[h],f[h+1]),m<e){e=m;for(m=0;m<g;++m)d[m]=f[h+m];d.length=g}return e};l.Z=function(){return Ld(this.v,0,this.v.length,
this.a)};l.fk=function(a){var c=this.v?this.v.length/this.a:0;if(0>a||c<=a)return null;c=new E(null);c.ba(this.f,this.v.slice(a*this.a,(a+1)*this.a));return c};l.fe=function(){var a=this.v,c=this.f,d=this.a,e=[],f,g;f=0;for(g=a.length;f<g;f+=d){var h=new E(null);h.ba(c,a.slice(f,f+d));e.push(h)}return e};l.X=function(){return"MultiPoint"};l.Ka=function(a){var c=this.v,d=this.a,e,f,g,h;e=0;for(f=c.length;e<f;e+=d)if(g=c[e],h=c[e+1],vc(a,g,h))return!0;return!1};l.ma=function(a,c){a?(Ad(this,c,a,1),
this.v||(this.v=[]),this.v.length=Jd(this.v,0,a,this.a),this.u()):this.ba("XY",null)};l.ba=function(a,c){zd(this,a,c);this.u()};function po(a,c){xd.call(this);this.i=[];this.N=-1;this.H=null;this.T=this.D=this.S=-1;this.l=null;this.ma(a,c)}y(po,xd);l=po.prototype;l.rj=function(a){if(this.v){var c=this.v.length;Za(this.v,a.ga());a=a.Bb().slice();var d,e;d=0;for(e=a.length;d<e;++d)a[d]+=c}else this.v=a.ga().slice(),a=a.Bb().slice(),this.i.push();this.i.push(a);this.u()};l.clone=function(){for(var a=
new po(null),c=this.i.length,d=Array(c),e=0;e<c;++e)d[e]=this.i[e].slice();qo(a,this.f,this.v.slice(),d);return a};l.ub=function(a,c,d,e){if(e<sc(this.G(),a,c))return e;if(this.D!=this.g){var f=this.i,g=0,h=0,k,m;k=0;for(m=f.length;k<m;++k)var n=f[k],h=Fd(this.v,g,n,this.a,h),g=n[n.length-1];this.S=Math.sqrt(h);this.D=this.g}f=Bk(this);g=this.i;h=this.a;k=this.S;m=0;var n=[NaN,NaN],p,q;p=0;for(q=g.length;p<q;++p){var r=g[p];e=Hd(f,m,r,h,k,!0,a,c,d,e,n);m=r[r.length-1]}return e};l.yc=function(a,c){var d;
a:{d=Bk(this);var e=this.i,f=0;if(0!==e.length){var g,h;g=0;for(h=e.length;g<h;++g){var k=e[g];if(Td(d,f,k,this.a,a,c)){d=!0;break a}f=k[k.length-1]}}d=!1}return d};l.am=function(){var a=Bk(this),c=this.i,d=0,e=0,f,g;f=0;for(g=c.length;f<g;++f)var h=c[f],e=e+Cd(a,d,h,this.a),d=h[h.length-1];return e};l.Z=function(a){var c;void 0!==a?(c=Bk(this).slice(),ae(c,this.i,this.a,a)):c=this.v;a=c;c=this.i;var d=this.a,e=0,f=[],g=0,h,k;h=0;for(k=c.length;h<k;++h){var m=c[h];f[g++]=Md(a,e,m,d,f[g]);e=m[m.length-
1]}f.length=g;return f};function Ck(a){if(a.N!=a.g){var c=a.v,d=a.i,e=a.a,f=0,g=[],h,k,m=oc();h=0;for(k=d.length;h<k;++h){var n=d[h],m=Ac(c,f,n[0],e);g.push((m[0]+m[2])/2,(m[1]+m[3])/2);f=n[n.length-1]}c=Bk(a);d=a.i;e=a.a;f=0;h=[];k=0;for(m=d.length;k<m;++k)n=d[k],h=Ud(c,f,n,e,g,2*k,h),f=n[n.length-1];a.H=h;a.N=a.g}return a.H}l.Sj=function(){var a=new oo(null);a.ba("XY",Ck(this).slice());return a};function Bk(a){if(a.T!=a.g){var c=a.v,d;a:{d=a.i;var e,f;e=0;for(f=d.length;e<f;++e)if(!Zd(c,d[e],a.a,
void 0)){d=!1;break a}d=!0}d?a.l=c:(a.l=c.slice(),a.l.length=ae(a.l,a.i,a.a));a.T=a.g}return a.l}l.Hc=function(a){var c=[],d=[],e=this.v,f=this.i,g=this.a;a=Math.sqrt(a);var h=0,k=0,m,n;m=0;for(n=f.length;m<n;++m){var p=f[m],q=[],k=Od(e,h,p,g,a,c,k,q);d.push(q);h=p[p.length-1]}c.length=k;e=new po(null);qo(e,"XY",c,d);return e};l.hk=function(a){if(0>a||this.i.length<=a)return null;var c;0===a?c=0:(c=this.i[a-1],c=c[c.length-1]);a=this.i[a].slice();var d=a[a.length-1];if(0!==c){var e,f;e=0;for(f=a.length;e<
f;++e)a[e]-=c}e=new F(null);e.ba(this.f,this.v.slice(c,d),a);return e};l.Rd=function(){var a=this.f,c=this.v,d=this.i,e=[],f=0,g,h,k,m;g=0;for(h=d.length;g<h;++g){var n=d[g].slice(),p=n[n.length-1];if(0!==f)for(k=0,m=n.length;k<m;++k)n[k]-=f;k=new F(null);k.ba(a,c.slice(f,p),n);e.push(k);f=p}return e};l.X=function(){return"MultiPolygon"};l.Ka=function(a){a:{var c=Bk(this),d=this.i,e=this.a,f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g];if(Xd(c,f,k,e,a)){a=!0;break a}f=k[k.length-1]}a=!1}return a};
l.ma=function(a,c){if(a){Ad(this,c,a,3);this.v||(this.v=[]);var d=this.v,e=this.a,f=this.i,g=0,f=f?f:[],h=0,k,m;k=0;for(m=a.length;k<m;++k)g=Kd(d,g,a[k],e,f[h]),f[h++]=g,g=g[g.length-1];f.length=h;0===f.length?this.v.length=0:(d=f[f.length-1],this.v.length=0===d.length?0:d[d.length-1]);this.u()}else qo(this,"XY",null,this.i)};function qo(a,c,d,e){zd(a,c,d);a.i=e;a.u()}function ro(a,c){var d=a.f,e=[],f=[],g,h,k;g=0;for(h=c.length;g<h;++g){var m=c[g];0===g&&(d=m.f);var n=e.length;k=m.Bb();var p,q;p=
0;for(q=k.length;p<q;++p)k[p]+=n;Za(e,m.ga());f.push(k)}qo(a,d,e,f)}function so(a){a=a?a:{};this.defaultDataProjection=null;this.b=a.geometryName}y(so,io);function to(a,c){if(!a)return null;var d;if(ha(a.x)&&ha(a.y))d="Point";else if(a.points)d="MultiPoint";else if(a.paths)d=1===a.paths.length?"LineString":"MultiLineString";else if(a.rings){var e=a.rings,f=uo(a),g=[];d=[];var h,k;h=0;for(k=e.length;h<k;++h){var m=Ya(e[h]);Yd(m,0,m.length,f.length)?g.push([e[h]]):d.push(e[h])}for(;d.length;){e=d.shift();
f=!1;for(h=g.length-1;0<=h;h--)if(wc((new Pd(g[h][0])).G(),(new Pd(e)).G())){g[h].push(e);f=!0;break}f||g.push([e.reverse()])}a=mb({},a);1===g.length?(d="Polygon",a.rings=g[0]):(d="MultiPolygon",a.rings=g)}return ho((0,vo[d])(a),!1,c)}function uo(a){var c="XY";!0===a.hasZ&&!0===a.hasM?c="XYZM":!0===a.hasZ?c="XYZ":!0===a.hasM&&(c="XYM");return c}function wo(a){a=a.f;return{hasZ:"XYZ"===a||"XYZM"===a,hasM:"XYM"===a||"XYZM"===a}}var vo={Point:function(a){return void 0!==a.m&&void 0!==a.z?new E([a.x,
a.y,a.z,a.m],"XYZM"):void 0!==a.z?new E([a.x,a.y,a.z],"XYZ"):void 0!==a.m?new E([a.x,a.y,a.m],"XYM"):new E([a.x,a.y])},LineString:function(a){return new S(a.paths[0],uo(a))},Polygon:function(a){return new F(a.rings,uo(a))},MultiPoint:function(a){return new oo(a.points,uo(a))},MultiLineString:function(a){return new T(a.paths,uo(a))},MultiPolygon:function(a){return new po(a.rings,uo(a))}},xo={Point:function(a){var c=a.Z();a=a.f;if("XYZ"===a)return{x:c[0],y:c[1],z:c[2]};if("XYM"===a)return{x:c[0],y:c[1],
m:c[2]};if("XYZM"===a)return{x:c[0],y:c[1],z:c[2],m:c[3]};if("XY"===a)return{x:c[0],y:c[1]}},LineString:function(a){var c=wo(a);return{hasZ:c.hasZ,hasM:c.hasM,paths:[a.Z()]}},Polygon:function(a){var c=wo(a);return{hasZ:c.hasZ,hasM:c.hasM,rings:a.Z(!1)}},MultiPoint:function(a){var c=wo(a);return{hasZ:c.hasZ,hasM:c.hasM,points:a.Z()}},MultiLineString:function(a){var c=wo(a);return{hasZ:c.hasZ,hasM:c.hasM,paths:a.Z()}},MultiPolygon:function(a){var c=wo(a);a=a.Z(!1);for(var d=[],e=0;e<a.length;e++)for(var f=
a[e].length-1;0<=f;f--)d.push(a[e][f]);return{hasZ:c.hasZ,hasM:c.hasM,rings:d}}};l=so.prototype;l.Oc=function(a,c){var d=to(a.geometry,c),e=new xl;this.b&&e.Bc(this.b);e.Ra(d);c&&c.ff&&a.attributes[c.ff]&&e.hc(a.attributes[c.ff]);a.attributes&&e.C(a.attributes);return e};l.Df=function(a,c){var d=c?c:{};if(a.features){var e=[],f=a.features,g,h;d.ff=a.objectIdFieldName;g=0;for(h=f.length;g<h;++g)e.push(this.Oc(f[g],d));return e}return[this.Oc(a,d)]};l.Kh=function(a,c){return to(a,c)};l.Rh=function(a){return a.spatialReference&&
a.spatialReference.wkid?ad("EPSG:"+a.spatialReference.wkid):null};function yo(a,c){return(0,xo[a.X()])(ho(a,!0,c),c)}l.Ee=function(a,c){return yo(a,go(this,c))};l.Sc=function(a,c){c=go(this,c);var d={},e=a.W();e&&(d.geometry=yo(e,c));e=a.P();delete e[a.a];d.attributes=pb(e)?{}:e;c&&c.featureProjection&&(d.spatialReference={wkid:ad(c.featureProjection).kb.split(":").pop()});return d};l.Ce=function(a,c){c=go(this,c);var d=[],e,f;e=0;for(f=a.length;e<f;++e)d.push(this.Sc(a[e],c));return{features:d}};
function zo(a){vd.call(this);this.c=a?a:null;Ao(this)}y(zo,vd);function Bo(a){var c=[],d,e;d=0;for(e=a.length;d<e;++d)c.push(a[d].clone());return c}function Co(a){var c,d;if(a.c)for(c=0,d=a.c.length;c<d;++c)yb(a.c[c],"change",a.u,a)}function Ao(a){var c,d;if(a.c)for(c=0,d=a.c.length;c<d;++c)C(a.c[c],"change",a.u,a)}l=zo.prototype;l.clone=function(){var a=new zo(null);a.$h(this.c);return a};l.ub=function(a,c,d,e){if(e<sc(this.G(),a,c))return e;var f=this.c,g,h;g=0;for(h=f.length;g<h;++g)e=f[g].ub(a,
c,d,e);return e};l.yc=function(a,c){var d=this.c,e,f;e=0;for(f=d.length;e<f;++e)if(d[e].yc(a,c))return!0;return!1};l.Ld=function(a){yc(Infinity,Infinity,-Infinity,-Infinity,a);for(var c=this.c,d=0,e=c.length;d<e;++d)Dc(a,c[d].G());return a};l.yg=function(){return Bo(this.c)};l.kd=function(a){this.s!=this.g&&(nb(this.j),this.o=0,this.s=this.g);if(0>a||0!==this.o&&a<this.o)return this;var c=a.toString();if(this.j.hasOwnProperty(c))return this.j[c];var d=[],e=this.c,f=!1,g,h;g=0;for(h=e.length;g<h;++g){var k=
e[g],m=k.kd(a);d.push(m);m!==k&&(f=!0)}if(f)return a=new zo(null),Co(a),a.c=d,Ao(a),a.u(),this.j[c]=a;this.o=a;return this};l.X=function(){return"GeometryCollection"};l.Ka=function(a){var c=this.c,d,e;d=0;for(e=c.length;d<e;++d)if(c[d].Ka(a))return!0;return!1};l.Qa=function(){return 0===this.c.length};l.rotate=function(a,c){for(var d=this.c,e=0,f=d.length;e<f;++e)d[e].rotate(a,c);this.u()};l.$h=function(a){a=Bo(a);Co(this);this.c=a;Ao(this);this.u()};l.oc=function(a){var c=this.c,d,e;d=0;for(e=c.length;d<
e;++d)c[d].oc(a);this.u()};l.Mc=function(a,c){var d=this.c,e,f;e=0;for(f=d.length;e<f;++e)d[e].Mc(a,c);this.u()};l.fa=function(){Co(this);zo.ia.fa.call(this)};function Do(a){a=a?a:{};this.defaultDataProjection=null;this.defaultDataProjection=ad(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326");this.b=a.geometryName}y(Do,io);function Eo(a,c){return a?ho((0,Fo[a.type])(a),!1,c):null}function Go(a,c){return(0,Ho[a.X()])(ho(a,!0,c),c)}var Fo={Point:function(a){return new E(a.coordinates)},
LineString:function(a){return new S(a.coordinates)},Polygon:function(a){return new F(a.coordinates)},MultiPoint:function(a){return new oo(a.coordinates)},MultiLineString:function(a){return new T(a.coordinates)},MultiPolygon:function(a){return new po(a.coordinates)},GeometryCollection:function(a,c){var d=a.geometries.map(function(a){return Eo(a,c)});return new zo(d)}},Ho={Point:function(a){return{type:"Point",coordinates:a.Z()}},LineString:function(a){return{type:"LineString",coordinates:a.Z()}},Polygon:function(a,
c){var d;c&&(d=c.rightHanded);return{type:"Polygon",coordinates:a.Z(d)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.Z()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.Z()}},MultiPolygon:function(a,c){var d;c&&(d=c.rightHanded);return{type:"MultiPolygon",coordinates:a.Z(d)}},GeometryCollection:function(a,c){return{type:"GeometryCollection",geometries:a.c.map(function(a){var e=mb({},c);delete e.featureProjection;return Go(a,e)})}},Circle:function(){return{type:"GeometryCollection",
geometries:[]}}};l=Do.prototype;l.Oc=function(a,c){var d=Eo(a.geometry,c),e=new xl;this.b&&e.Bc(this.b);e.Ra(d);void 0!==a.id&&e.hc(a.id);a.properties&&e.C(a.properties);return e};l.Df=function(a,c){if("Feature"==a.type)return[this.Oc(a,c)];if("FeatureCollection"==a.type){var d=[],e=a.features,f,g;f=0;for(g=e.length;f<g;++f)d.push(this.Oc(e[f],c));return d}return[]};l.Kh=function(a,c){return Eo(a,c)};l.Rh=function(a){return(a=a.crs)?"name"==a.type?ad(a.properties.name):"EPSG"==a.type?ad("EPSG:"+a.properties.code):
null:this.defaultDataProjection};l.Sc=function(a,c){c=go(this,c);var d={type:"Feature"},e=a.Wa();void 0!==e&&(d.id=e);(e=a.W())?d.geometry=Go(e,c):d.geometry=null;e=a.P();delete e[a.a];pb(e)?d.properties=null:d.properties=e;return d};l.Ce=function(a,c){c=go(this,c);var d=[],e,f;e=0;for(f=a.length;e<f;++e)d.push(this.Sc(a[e],c));return{type:"FeatureCollection",features:d}};l.Ee=function(a,c){return Go(a,go(this,c))};function Io(){this.f=new XMLSerializer;this.defaultDataProjection=null}y(Io,eo);l=
Io.prototype;l.X=function(){return"xml"};l.Pb=function(a,c){if(El(a))return Jo(this,a,c);if(Fl(a))return this.Ih(a,c);if("string"===typeof a){var d=Gl(a);return Jo(this,d,c)}return null};function Jo(a,c,d){a=Ko(a,c,d);return 0<a.length?a[0]:null}l.Ea=function(a,c){if(El(a))return Ko(this,a,c);if(Fl(a))return this.gc(a,c);if("string"===typeof a){var d=Gl(a);return Ko(this,d,c)}return[]};function Ko(a,c,d){var e=[];for(c=c.firstChild;c;c=c.nextSibling)1==c.nodeType&&Za(e,a.gc(c,d));return e}l.Pc=function(a,
c){if(El(a))return this.A(a,c);if(Fl(a)){var d=this.te(a,[fo(this,a,c?c:{})]);return d?d:null}return"string"===typeof a?(d=Gl(a),this.A(d,c)):null};l.Sa=function(a){return El(a)?this.Jf(a):Fl(a)?this.we(a):"string"===typeof a?(a=Gl(a),this.Jf(a)):null};l.Jf=function(){return this.defaultDataProjection};l.we=function(){return this.defaultDataProjection};l.Ad=function(a,c){var d=this.B(a,c);return this.f.serializeToString(d)};l.Ub=function(a,c){var d=this.a(a,c);return this.f.serializeToString(d)};
l.Tc=function(a,c){var d=this.s(a,c);return this.f.serializeToString(d)};function Lo(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.srsName=a.srsName;this.schemaLocation="";this.b={};this.b["http://www.opengis.net/gml"]={featureMember:Jl(Lo.prototype.sd),featureMembers:Jl(Lo.prototype.sd)};Io.call(this)}y(Lo,Io);var Mo=/^[\s\xa0]*$/;l=Lo.prototype;l.sd=function(a,c){var d=a.localName,e;if("FeatureCollection"==d)"http://www.opengis.net/wfs"===a.namespaceURI?e=P([],this.b,
a,c,this):e=P(null,this.b,a,c,this);else if("featureMembers"==d||"featureMember"==d){var f=c[0],g=f.featureType;e=f.featureNS;var h,k;if(!g&&a.childNodes){g=[];e={};h=0;for(k=a.childNodes.length;h<k;++h){var m=a.childNodes[h];if(1===m.nodeType){var n=m.nodeName.split(":").pop();if(-1===g.indexOf(n)){var p="",q=0,m=m.namespaceURI,r;for(r in e){if(e[r]===m){p=r;break}++q}p||(p="p"+q,e[p]=m);g.push(p+":"+n)}}}f.featureType=g;f.featureNS=e}"string"===typeof e&&(h=e,e={},e.p0=h);r={};var g=Array.isArray(g)?
g:[g],t;for(t in e){f={};h=0;for(k=g.length;h<k;++h)(-1===g[h].indexOf(":")?"p0":g[h].split(":")[0])===t&&(f[g[h].split(":").pop()]="featureMembers"==d?Il(this.Cf,this):Jl(this.Cf,this));r[e[t]]=f}e=P([],r,a,c)}e||(e=[]);return e};l.te=function(a,c){var d=c[0];d.srsName=a.firstElementChild.getAttribute("srsName");var e=P(null,this.Vf,a,c,this);if(e)return ho(e,!1,d)};l.Cf=function(a,c){var d,e;(e=a.getAttribute("fid"))||(e=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var f={},g;for(d=
a.firstElementChild;d;d=d.nextElementSibling){var h=d.localName;if(0===d.childNodes.length||1===d.childNodes.length&&(3===d.firstChild.nodeType||4===d.firstChild.nodeType)){var k=Cl(d,!1);Mo.test(k)&&(k=void 0);f[h]=k}else"boundedBy"!==h&&(g=h),f[h]=this.te(d,c)}d=new xl(f);g&&d.Bc(g);e&&d.hc(e);return d};l.Qh=function(a,c){var d=this.se(a,c);if(d){var e=new E(null);e.ba("XYZ",d);return e}};l.Oh=function(a,c){var d=P([],this.Li,a,c,this);if(d)return new oo(d)};l.Nh=function(a,c){var d=P([],this.Ki,
a,c,this);if(d){var e=new T(null);no(e,d);return e}};l.Ph=function(a,c){var d=P([],this.Mi,a,c,this);if(d){var e=new po(null);ro(e,d);return e}};l.Fh=function(a,c){Ql(this.Pi,a,c,this)};l.Ng=function(a,c){Ql(this.Ii,a,c,this)};l.Gh=function(a,c){Ql(this.Qi,a,c,this)};l.ue=function(a,c){var d=this.se(a,c);if(d){var e=new S(null);e.ba("XYZ",d);return e}};l.ao=function(a,c){var d=P(null,this.Cd,a,c,this);if(d)return d};l.Mh=function(a,c){var d=this.se(a,c);if(d){var e=new Pd(null);Qd(e,"XYZ",d);return e}};
l.ve=function(a,c){var d=P([null],this.Ge,a,c,this);if(d&&d[0]){var e=new F(null),f=d[0],g=[f.length],h,k;h=1;for(k=d.length;h<k;++h)Za(f,d[h]),g.push(f.length);e.ba("XYZ",f,g);return e}};l.se=function(a,c){return P(null,this.Cd,a,c,this)};l.Li={"http://www.opengis.net/gml":{pointMember:Il(Lo.prototype.Fh),pointMembers:Il(Lo.prototype.Fh)}};l.Ki={"http://www.opengis.net/gml":{lineStringMember:Il(Lo.prototype.Ng),lineStringMembers:Il(Lo.prototype.Ng)}};l.Mi={"http://www.opengis.net/gml":{polygonMember:Il(Lo.prototype.Gh),
polygonMembers:Il(Lo.prototype.Gh)}};l.Pi={"http://www.opengis.net/gml":{Point:Il(Lo.prototype.se)}};l.Ii={"http://www.opengis.net/gml":{LineString:Il(Lo.prototype.ue)}};l.Qi={"http://www.opengis.net/gml":{Polygon:Il(Lo.prototype.ve)}};l.Dd={"http://www.opengis.net/gml":{LinearRing:Jl(Lo.prototype.ao)}};l.gc=function(a,c){var d={featureType:this.featureType,featureNS:this.featureNS};c&&mb(d,fo(this,a,c));return this.sd(a,[d])};l.we=function(a){return ad(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))};
function No(a){a=Cl(a,!1);return Oo(a)}function Oo(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function Po(a){a=Cl(a,!1);if(a=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/.exec(a)){var c=Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),parseInt(a[6],10))/1E3;if("Z"!=a[7]){var d="-"==a[8]?-1:1,c=c+60*d*parseInt(a[9],10);void 0!==a[10]&&(c+=3600*d*parseInt(a[10],10))}return c}}
function Qo(a){a=Cl(a,!1);return Ro(a)}function Ro(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function So(a){a=Cl(a,!1);return To(a)}function To(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function U(a){return Cl(a,!1).trim()}function Uo(a,c){Vo(a,c?"1":"0")}function Wo(a,c){a.appendChild(Al.createTextNode(c.toPrecision()))}function Xo(a,c){a.appendChild(Al.createTextNode(c.toString()))}function Vo(a,c){a.appendChild(Al.createTextNode(c))}function Yo(a){a=
a?a:{};Lo.call(this,a);this.b["http://www.opengis.net/gml"].featureMember=Il(Lo.prototype.sd);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}y(Yo,Lo);l=Yo.prototype;l.Jh=function(a,c){var d=Cl(a,!1).replace(/^\s*|\s*$/g,""),e=c[0].srsName,f=a.parentNode.getAttribute("srsDimension"),g="enu";e&&(e=ad(e))&&(g=e.b);d=d.split(/[\s,]+/);e=2;a.getAttribute("srsDimension")?e=To(a.getAttribute("srsDimension")):a.getAttribute("dimension")?
e=To(a.getAttribute("dimension")):f&&(e=To(f));for(var h,k,m=[],n=0,p=d.length;n<p;n+=e)f=parseFloat(d[n]),h=parseFloat(d[n+1]),k=3===e?parseFloat(d[n+2]):0,"en"===g.substr(0,2)?m.push(f,h,k):m.push(h,f,k);return m};l.Yn=function(a,c){var d=P([null],this.Ei,a,c,this);return yc(d[1][0],d[1][1],d[1][3],d[1][4])};l.al=function(a,c){var d=P(void 0,this.Dd,a,c,this);d&&c[c.length-1].push(d)};l.Hn=function(a,c){var d=P(void 0,this.Dd,a,c,this);d&&(c[c.length-1][0]=d)};l.Cd={"http://www.opengis.net/gml":{coordinates:Jl(Yo.prototype.Jh)}};
l.Ge={"http://www.opengis.net/gml":{innerBoundaryIs:Yo.prototype.al,outerBoundaryIs:Yo.prototype.Hn}};l.Ei={"http://www.opengis.net/gml":{coordinates:Il(Yo.prototype.Jh)}};l.Vf={"http://www.opengis.net/gml":{Point:Jl(Lo.prototype.Qh),MultiPoint:Jl(Lo.prototype.Oh),LineString:Jl(Lo.prototype.ue),MultiLineString:Jl(Lo.prototype.Nh),LinearRing:Jl(Lo.prototype.Mh),Polygon:Jl(Lo.prototype.ve),MultiPolygon:Jl(Lo.prototype.Ph),Box:Jl(Yo.prototype.Yn)}};function Zo(a){a=a?a:{};Lo.call(this,a);this.l=void 0!==
a.surface?a.surface:!1;this.i=void 0!==a.curve?a.curve:!1;this.j=void 0!==a.multiCurve?a.multiCurve:!0;this.o=void 0!==a.multiSurface?a.multiSurface:!0;this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}y(Zo,Lo);l=Zo.prototype;l.fo=function(a,c){var d=P([],this.Ji,a,c,this);if(d){var e=new T(null);no(e,d);return e}};l.ho=function(a,c){var d=P([],this.Ni,a,c,this);if(d){var e=new po(null);ro(e,
d);return e}};l.og=function(a,c){Ql(this.Fi,a,c,this)};l.li=function(a,c){Ql(this.Ui,a,c,this)};l.ko=function(a,c){return P([null],this.Oi,a,c,this)};l.mo=function(a,c){return P([null],this.Ti,a,c,this)};l.lo=function(a,c){return P([null],this.Ge,a,c,this)};l.eo=function(a,c){return P([null],this.Cd,a,c,this)};l.cl=function(a,c){var d=P(void 0,this.Dd,a,c,this);d&&c[c.length-1].push(d)};l.xj=function(a,c){var d=P(void 0,this.Dd,a,c,this);d&&(c[c.length-1][0]=d)};l.Sh=function(a,c){var d=P([null],
this.Vi,a,c,this);if(d&&d[0]){var e=new F(null),f=d[0],g=[f.length],h,k;h=1;for(k=d.length;h<k;++h)Za(f,d[h]),g.push(f.length);e.ba("XYZ",f,g);return e}};l.Hh=function(a,c){var d=P([null],this.Gi,a,c,this);if(d){var e=new S(null);e.ba("XYZ",d);return e}};l.$n=function(a,c){var d=P([null],this.Hi,a,c,this);return yc(d[1][0],d[1][1],d[2][0],d[2][1])};l.bo=function(a,c){for(var d=Cl(a,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,f=[],g;g=e.exec(d);)f.push(parseFloat(g[1])),d=d.substr(g[0].length);
if(""===d){d=c[0].srsName;e="enu";d&&(e=ad(d).b);if("neu"===e)for(d=0,e=f.length;d<e;d+=3)g=f[d],f[d]=f[d+1],f[d+1]=g;d=f.length;2==d&&f.push(0);return 0===d?void 0:f}};l.Gf=function(a,c){var d=Cl(a,!1).replace(/^\s*|\s*$/g,""),e=c[0].srsName,f=a.parentNode.getAttribute("srsDimension"),g="enu";e&&(g=ad(e).b);d=d.split(/\s+/);e=2;a.getAttribute("srsDimension")?e=To(a.getAttribute("srsDimension")):a.getAttribute("dimension")?e=To(a.getAttribute("dimension")):f&&(e=To(f));for(var h,k,m=[],n=0,p=d.length;n<
p;n+=e)f=parseFloat(d[n]),h=parseFloat(d[n+1]),k=3===e?parseFloat(d[n+2]):0,"en"===g.substr(0,2)?m.push(f,h,k):m.push(h,f,k);return m};l.Cd={"http://www.opengis.net/gml":{pos:Jl(Zo.prototype.bo),posList:Jl(Zo.prototype.Gf)}};l.Ge={"http://www.opengis.net/gml":{interior:Zo.prototype.cl,exterior:Zo.prototype.xj}};l.Vf={"http://www.opengis.net/gml":{Point:Jl(Lo.prototype.Qh),MultiPoint:Jl(Lo.prototype.Oh),LineString:Jl(Lo.prototype.ue),MultiLineString:Jl(Lo.prototype.Nh),LinearRing:Jl(Lo.prototype.Mh),
Polygon:Jl(Lo.prototype.ve),MultiPolygon:Jl(Lo.prototype.Ph),Surface:Jl(Zo.prototype.Sh),MultiSurface:Jl(Zo.prototype.ho),Curve:Jl(Zo.prototype.Hh),MultiCurve:Jl(Zo.prototype.fo),Envelope:Jl(Zo.prototype.$n)}};l.Ji={"http://www.opengis.net/gml":{curveMember:Il(Zo.prototype.og),curveMembers:Il(Zo.prototype.og)}};l.Ni={"http://www.opengis.net/gml":{surfaceMember:Il(Zo.prototype.li),surfaceMembers:Il(Zo.prototype.li)}};l.Fi={"http://www.opengis.net/gml":{LineString:Il(Lo.prototype.ue),Curve:Il(Zo.prototype.Hh)}};
l.Ui={"http://www.opengis.net/gml":{Polygon:Il(Lo.prototype.ve),Surface:Il(Zo.prototype.Sh)}};l.Vi={"http://www.opengis.net/gml":{patches:Jl(Zo.prototype.ko)}};l.Gi={"http://www.opengis.net/gml":{segments:Jl(Zo.prototype.mo)}};l.Hi={"http://www.opengis.net/gml":{lowerCorner:Il(Zo.prototype.Gf),upperCorner:Il(Zo.prototype.Gf)}};l.Oi={"http://www.opengis.net/gml":{PolygonPatch:Jl(Zo.prototype.lo)}};l.Ti={"http://www.opengis.net/gml":{LineStringSegment:Jl(Zo.prototype.eo)}};function $o(a,c,d){d=d[d.length-
1].srsName;c=c.Z();for(var e=c.length,f=Array(e),g,h=0;h<e;++h){g=c[h];var k=h,m="enu";d&&(m=ad(d).b);f[k]="en"===m.substr(0,2)?g[0]+" "+g[1]:g[1]+" "+g[0]}Vo(a,f.join(" "))}l.Ai=function(a,c,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);e=Bl(a.namespaceURI,"pos");a.appendChild(e);d=d[d.length-1].srsName;a="enu";d&&(a=ad(d).b);c=c.Z();Vo(e,"en"===a.substr(0,2)?c[0]+" "+c[1]:c[1]+" "+c[0])};var ap={"http://www.opengis.net/gml":{lowerCorner:N(Vo),upperCorner:N(Vo)}};l=Zo.prototype;l.Yo=
function(a,c,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);Rl({node:a},ap,Ol,[c[0]+" "+c[1],c[2]+" "+c[3]],d,["lowerCorner","upperCorner"],this)};l.xi=function(a,c,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);e=Bl(a.namespaceURI,"posList");a.appendChild(e);$o(e,c,d)};l.Si=function(a,c){var d=c[c.length-1],e=d.node,f=d.exteriorWritten;void 0===f&&(d.exteriorWritten=!0);return Bl(e.namespaceURI,void 0!==f?"interior":"exterior")};l.Fe=function(a,c,d){var e=d[d.length-
1].srsName;"PolygonPatch"!==a.nodeName&&e&&a.setAttribute("srsName",e);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(c=c.Qd(),Rl({node:a,srsName:e},bp,this.Si,c,d,void 0,this)):"Surface"===a.nodeName&&(e=Bl(a.namespaceURI,"patches"),a.appendChild(e),a=Bl(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.Fe(a,c,d))};l.Ae=function(a,c,d){var e=d[d.length-1].srsName;"LineStringSegment"!==a.nodeName&&e&&a.setAttribute("srsName",e);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?
(e=Bl(a.namespaceURI,"posList"),a.appendChild(e),$o(e,c,d)):"Curve"===a.nodeName&&(e=Bl(a.namespaceURI,"segments"),a.appendChild(e),a=Bl(e.namespaceURI,"LineStringSegment"),e.appendChild(a),this.Ae(a,c,d))};l.zi=function(a,c,d){var e=d[d.length-1],f=e.srsName,e=e.surface;f&&a.setAttribute("srsName",f);c=c.Rd();Rl({node:a,srsName:f,surface:e},cp,this.c,c,d,void 0,this)};l.Zo=function(a,c,d){var e=d[d.length-1].srsName;e&&a.setAttribute("srsName",e);c=c.fe();Rl({node:a,srsName:e},dp,Ml("pointMember"),
c,d,void 0,this)};l.yi=function(a,c,d){var e=d[d.length-1],f=e.srsName,e=e.curve;f&&a.setAttribute("srsName",f);c=c.jd();Rl({node:a,srsName:f,curve:e},ep,this.c,c,d,void 0,this)};l.Bi=function(a,c,d){var e=Bl(a.namespaceURI,"LinearRing");a.appendChild(e);this.xi(e,c,d)};l.Ci=function(a,c,d){var e=this.g(c,d);e&&(a.appendChild(e),this.Fe(e,c,d))};l.$o=function(a,c,d){var e=Bl(a.namespaceURI,"Point");a.appendChild(e);this.Ai(e,c,d)};l.wi=function(a,c,d){var e=this.g(c,d);e&&(a.appendChild(e),this.Ae(e,
c,d))};l.De=function(a,c,d){var e=d[d.length-1],f=mb({},e);f.node=a;var g;Array.isArray(c)?e.dataProjection?g=ud(c,e.featureProjection,e.dataProjection):g=c:g=ho(c,!0,e);Rl(f,fp,this.g,[g],d,void 0,this)};l.si=function(a,c,d){var e=c.Wa();e&&a.setAttribute("fid",e);var e=d[d.length-1],f=e.featureNS,g=c.a;e.Ac||(e.Ac={},e.Ac[f]={});var h=c.P();c=[];var k=[],m;for(m in h){var n=h[m];null!==n&&(c.push(m),k.push(n),m==g||n instanceof vd?m in e.Ac[f]||(e.Ac[f][m]=N(this.De,this)):m in e.Ac[f]||(e.Ac[f][m]=
N(Vo)))}m=mb({},e);m.node=a;Rl(m,e.Ac,Ml(void 0,f),k,d,c)};var cp={"http://www.opengis.net/gml":{surfaceMember:N(Zo.prototype.Ci),polygonMember:N(Zo.prototype.Ci)}},dp={"http://www.opengis.net/gml":{pointMember:N(Zo.prototype.$o)}},ep={"http://www.opengis.net/gml":{lineStringMember:N(Zo.prototype.wi),curveMember:N(Zo.prototype.wi)}},bp={"http://www.opengis.net/gml":{exterior:N(Zo.prototype.Bi),interior:N(Zo.prototype.Bi)}},fp={"http://www.opengis.net/gml":{Curve:N(Zo.prototype.Ae),MultiCurve:N(Zo.prototype.yi),
Point:N(Zo.prototype.Ai),MultiPoint:N(Zo.prototype.Zo),LineString:N(Zo.prototype.Ae),MultiLineString:N(Zo.prototype.yi),LinearRing:N(Zo.prototype.xi),Polygon:N(Zo.prototype.Fe),MultiPolygon:N(Zo.prototype.zi),Surface:N(Zo.prototype.Fe),MultiSurface:N(Zo.prototype.zi),Envelope:N(Zo.prototype.Yo)}},gp={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};Zo.prototype.c=function(a,c){return Bl("http://www.opengis.net/gml",gp[c[c.length-
1].node.nodeName])};Zo.prototype.g=function(a,c){var d=c[c.length-1],e=d.multiSurface,f=d.surface,g=d.curve,d=d.multiCurve,h;Array.isArray(a)?h="Envelope":(h=a.X(),"MultiPolygon"===h&&!0===e?h="MultiSurface":"Polygon"===h&&!0===f?h="Surface":"LineString"===h&&!0===g?h="Curve":"MultiLineString"===h&&!0===d&&(h="MultiCurve"));return Bl("http://www.opengis.net/gml",h)};Zo.prototype.s=function(a,c){c=go(this,c);var d=Bl("http://www.opengis.net/gml","geom"),e={node:d,srsName:this.srsName,curve:this.i,
surface:this.l,multiSurface:this.o,multiCurve:this.j};c&&mb(e,c);this.De(d,a,[e]);return d};Zo.prototype.a=function(a,c){c=go(this,c);var d=Bl("http://www.opengis.net/gml","featureMembers");d.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var e={srsName:this.srsName,curve:this.i,surface:this.l,multiSurface:this.o,multiCurve:this.j,featureNS:this.featureNS,featureType:this.featureType};c&&mb(e,c);var e=[e],f=e[e.length-1],g=f.featureType,h=f.featureNS,
k={};k[h]={};k[h][g]=N(this.si,this);f=mb({},f);f.node=d;Rl(f,k,Ml(g,h),a,e);return d};function hp(a){a=a?a:{};Io.call(this);this.defaultDataProjection=ad("EPSG:4326");this.b=a.readExtensions}y(hp,Io);var ip=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function jp(a,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele):a.push(0);"time"in d?(a.push(d.time),delete d.time):a.push(0);return a}function kp(a,
c){var d=c[c.length-1],e=a.getAttribute("href");null!==e&&(d.link=e);Ql(lp,a,c)}function mp(a,c){c[c.length-1].extensionsNode_=a}function np(a,c){var d=c[0],e=P({flatCoordinates:[]},op,a,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=new S(null);g.ba("XYZM",f);ho(g,!1,d);d=new xl(g);d.C(e);return d}}function pp(a,c){var d=c[0],e=P({flatCoordinates:[],ends:[]},qp,a,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=e.ends;delete e.ends;var h=new T(null);h.ba("XYZM",f,
g);ho(h,!1,d);d=new xl(h);d.C(e);return d}}function rp(a,c){var d=c[0],e=P({},sp,a,c);if(e){var f=jp([],a,e),f=new E(f,"XYZM");ho(f,!1,d);d=new xl(f);d.C(e);return d}}var tp={rte:np,trk:pp,wpt:rp},up=O(ip,{rte:Il(np),trk:Il(pp),wpt:Il(rp)}),lp=O(ip,{text:L(U,"linkText"),type:L(U,"linkType")}),op=O(ip,{name:L(U),cmt:L(U),desc:L(U),src:L(U),link:kp,number:L(So),extensions:mp,type:L(U),rtept:function(a,c){var d=P({},vp,a,c);d&&jp(c[c.length-1].flatCoordinates,a,d)}}),vp=O(ip,{ele:L(Qo),time:L(Po)}),
qp=O(ip,{name:L(U),cmt:L(U),desc:L(U),src:L(U),link:kp,number:L(So),type:L(U),extensions:mp,trkseg:function(a,c){var d=c[c.length-1];Ql(wp,a,c);d.ends.push(d.flatCoordinates.length)}}),wp=O(ip,{trkpt:function(a,c){var d=P({},xp,a,c);d&&jp(c[c.length-1].flatCoordinates,a,d)}}),xp=O(ip,{ele:L(Qo),time:L(Po)}),sp=O(ip,{ele:L(Qo),time:L(Po),magvar:L(Qo),geoidheight:L(Qo),name:L(U),cmt:L(U),desc:L(U),src:L(U),link:kp,sym:L(U),type:L(U),fix:L(U),sat:L(So),hdop:L(Qo),vdop:L(Qo),pdop:L(Qo),ageofdgpsdata:L(Qo),
dgpsid:L(So),extensions:mp});function yp(a,c){c||(c=[]);for(var d=0,e=c.length;d<e;++d){var f=c[d];if(a.b){var g=f.get("extensionsNode_")||null;a.b(f,g)}f.set("extensionsNode_",void 0)}}hp.prototype.Ih=function(a,c){if(!Wa(ip,a.namespaceURI))return null;var d=tp[a.localName];if(!d)return null;d=d(a,[fo(this,a,c)]);if(!d)return null;yp(this,[d]);return d};hp.prototype.gc=function(a,c){if(!Wa(ip,a.namespaceURI))return[];if("gpx"==a.localName){var d=P([],up,a,[fo(this,a,c)]);if(d)return yp(this,d),d}return[]};
function zp(a,c,d){a.setAttribute("href",c);c=d[d.length-1].properties;Rl({node:a},Ap,Ol,[c.linkText,c.linkType],d,Bp)}function Cp(a,c,d){var e=d[d.length-1],f=e.node.namespaceURI,g=e.properties;a.setAttributeNS(null,"lat",c[1]);a.setAttributeNS(null,"lon",c[0]);switch(e.geometryLayout){case "XYZM":0!==c[3]&&(g.time=c[3]);case "XYZ":0!==c[2]&&(g.ele=c[2]);break;case "XYM":0!==c[2]&&(g.time=c[2])}c=Dp[f];e=Pl(g,c);Rl({node:a,properties:g},Ep,Ol,e,d,c)}var Bp=["text","type"],Ap=O(ip,{text:N(Vo),type:N(Vo)}),
Fp=O(ip,"name cmt desc src link number type rtept".split(" ")),Gp=O(ip,{name:N(Vo),cmt:N(Vo),desc:N(Vo),src:N(Vo),link:N(zp),number:N(Xo),type:N(Vo),rtept:Ll(N(Cp))}),Hp=O(ip,"name cmt desc src link number type trkseg".split(" ")),Kp=O(ip,{name:N(Vo),cmt:N(Vo),desc:N(Vo),src:N(Vo),link:N(zp),number:N(Xo),type:N(Vo),trkseg:Ll(N(function(a,c,d){Rl({node:a,geometryLayout:c.f,properties:{}},Ip,Jp,c.Z(),d)}))}),Jp=Ml("trkpt"),Ip=O(ip,{trkpt:N(Cp)}),Dp=O(ip,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),
Ep=O(ip,{ele:N(Wo),time:N(function(a,c){var d=new Date(1E3*c),d=d.getUTCFullYear()+"-"+Ga(d.getUTCMonth()+1)+"-"+Ga(d.getUTCDate())+"T"+Ga(d.getUTCHours())+":"+Ga(d.getUTCMinutes())+":"+Ga(d.getUTCSeconds())+"Z";a.appendChild(Al.createTextNode(d))}),magvar:N(Wo),geoidheight:N(Wo),name:N(Vo),cmt:N(Vo),desc:N(Vo),src:N(Vo),link:N(zp),sym:N(Vo),type:N(Vo),fix:N(Vo),sat:N(Xo),hdop:N(Wo),vdop:N(Wo),pdop:N(Wo),ageofdgpsdata:N(Wo),dgpsid:N(Xo)}),Lp={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Mp(a,
c){var d=a.W();if(d&&(d=Lp[d.X()]))return Bl(c[c.length-1].node.namespaceURI,d)}var Np=O(ip,{rte:N(function(a,c,d){var e=d[0],f=c.P();a={node:a,properties:f};if(c=c.W())c=ho(c,!0,e),a.geometryLayout=c.f,f.rtept=c.Z();e=Fp[d[d.length-1].node.namespaceURI];f=Pl(f,e);Rl(a,Gp,Ol,f,d,e)}),trk:N(function(a,c,d){var e=d[0],f=c.P();a={node:a,properties:f};if(c=c.W())c=ho(c,!0,e),f.trkseg=c.jd();e=Hp[d[d.length-1].node.namespaceURI];f=Pl(f,e);Rl(a,Kp,Ol,f,d,e)}),wpt:N(function(a,c,d){var e=d[0],f=d[d.length-
1];f.properties=c.P();if(c=c.W())c=ho(c,!0,e),f.geometryLayout=c.f,Cp(a,c.Z(),d)})});hp.prototype.a=function(a,c){c=go(this,c);var d=Bl("http://www.topografix.com/GPX/1/1","gpx");Rl({node:d},Np,Mp,a,[c]);return d};function Op(){this.defaultDataProjection=null}y(Op,eo);function Pp(a){return"string"===typeof a?a:""}l=Op.prototype;l.X=function(){return"text"};l.Pb=function(a,c){return this.rd(Pp(a),go(this,c))};l.Ea=function(a,c){return this.Ef(Pp(a),go(this,c))};l.Pc=function(a,c){return this.td(Pp(a),
go(this,c))};l.Sa=function(a){Pp(a);return this.defaultDataProjection};l.Ad=function(a,c){return this.Be(a,go(this,c))};l.Ub=function(a,c){return this.ti(a,go(this,c))};l.Tc=function(a,c){return this.Bd(a,go(this,c))};function Qp(a){a=a?a:{};this.defaultDataProjection=null;this.defaultDataProjection=ad("EPSG:4326");this.b=a.altitudeMode?a.altitudeMode:"none"}y(Qp,Op);var Rp=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Sp=/^H.([A-Z]{3}).*?:(.*)/,Tp=/^HFDTE(\d{2})(\d{2})(\d{2})/,
Up=/\r\n|\r|\n/;Qp.prototype.rd=function(a,c){var d=this.b,e=a.split(Up),f={},g=[],h=2E3,k=0,m=1,n,p;n=0;for(p=e.length;n<p;++n){var q=e[n],r;if("B"==q.charAt(0)){if(r=Rp.exec(q)){var q=parseInt(r[1],10),t=parseInt(r[2],10),v=parseInt(r[3],10),w=parseInt(r[4],10)+parseInt(r[5],10)/6E4;"S"==r[6]&&(w=-w);var A=parseInt(r[7],10)+parseInt(r[8],10)/6E4;"W"==r[9]&&(A=-A);g.push(A,w);"none"!=d&&g.push("gps"==d?parseInt(r[11],10):"barometric"==d?parseInt(r[12],10):0);g.push(Date.UTC(h,k,m,q,t,v)/1E3)}}else if("H"==
q.charAt(0))if(r=Tp.exec(q))m=parseInt(r[1],10),k=parseInt(r[2],10)-1,h=2E3+parseInt(r[3],10);else if(r=Sp.exec(q))f[r[1]]=r[2].trim(),Tp.exec(q)}if(0===g.length)return null;e=new S(null);e.ba("none"==d?"XYM":"XYZM",g);d=new xl(ho(e,!1,c));d.C(f);return d};Qp.prototype.Ef=function(a,c){var d=this.rd(a,c);return d?[d]:[]};function Vp(a,c){this.a={};this.b=[];this.g=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+
1])}else if(a){var f;if(a instanceof Vp)f=a.O(),e=a.wc();else{var d=[],g=0;for(f in a)d[g++]=f;f=d;d=[];g=0;for(e in a)d[g++]=a[e];e=d}for(d=0;d<f.length;d++)this.set(f[d],e[d])}}l=Vp.prototype;l.tc=function(){return this.g};l.wc=function(){Wp(this);for(var a=[],c=0;c<this.b.length;c++)a.push(this.a[this.b[c]]);return a};l.O=function(){Wp(this);return this.b.concat()};l.Qa=function(){return 0==this.g};l.clear=function(){this.a={};this.g=this.b.length=0};l.remove=function(a){return Xp(this.a,a)?(delete this.a[a],
this.g--,this.b.length>2*this.g&&Wp(this),!0):!1};function Wp(a){if(a.g!=a.b.length){for(var c=0,d=0;c<a.b.length;){var e=a.b[c];Xp(a.a,e)&&(a.b[d++]=e);c++}a.b.length=d}if(a.g!=a.b.length){for(var f={},d=c=0;c<a.b.length;)e=a.b[c],Xp(f,e)||(a.b[d++]=e,f[e]=1),c++;a.b.length=d}}l.get=function(a,c){return Xp(this.a,a)?this.a[a]:c};l.set=function(a,c){Xp(this.a,a)||(this.g++,this.b.push(a));this.a[a]=c};l.forEach=function(a,c){for(var d=this.O(),e=0;e<d.length;e++){var f=d[e],g=this.get(f);a.call(c,
g,f,this)}};l.clone=function(){return new Vp(this)};function Xp(a,c){return Object.prototype.hasOwnProperty.call(a,c)}var Yp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Zp(a,c){if(a)for(var d=a.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;0<=f?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e];c(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}function $p(a){if(a[1]){var c=a[0],d=c.indexOf("#");
0<=d&&(a.push(c.substr(d)),a[0]=c=c.substr(0,d));d=c.indexOf("?");0>d?a[1]="?":d==c.length-1&&(a[1]=void 0)}return a.join("")}function aq(a,c,d){if("array"==ea(c))for(var e=0;e<c.length;e++)aq(a,String(c[e]),d);else null!=c&&d.push("&",a,""===c?"":"=",encodeURIComponent(String(c)))}function bq(a,c){for(var d in c)aq(d,c[d],a);return a}function cq(a,c){this.a=this.j=this.g="";this.o=null;this.f=this.b="";this.c=!1;var d;a instanceof cq?(this.c=ca(c)?c:a.c,dq(this,a.g),this.j=a.j,this.a=a.a,eq(this,
a.o),this.b=a.b,fq(this,a.i.clone()),this.f=a.f):a&&(d=String(a).match(Yp))?(this.c=!!c,dq(this,d[1]||"",!0),this.j=gq(d[2]||""),this.a=gq(d[3]||"",!0),eq(this,d[4]),this.b=gq(d[5]||"",!0),fq(this,d[6]||"",!0),this.f=gq(d[7]||"")):(this.c=!!c,this.i=new hq(null,0,this.c))}cq.prototype.toString=function(){var a=[],c=this.g;c&&a.push(iq(c,jq,!0),":");var d=this.a;if(d||"file"==c)a.push("//"),(c=this.j)&&a.push(iq(c,jq,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),
d=this.o,null!=d&&a.push(":",String(d));if(d=this.b)this.a&&"/"!=d.charAt(0)&&a.push("/"),a.push(iq(d,"/"==d.charAt(0)?kq:lq,!0));(d=this.i.toString())&&a.push("?",d);(d=this.f)&&a.push("#",iq(d,mq));return a.join("")};cq.prototype.clone=function(){return new cq(this)};function dq(a,c,d){a.g=d?gq(c,!0):c;a.g&&(a.g=a.g.replace(/:$/,""))}function eq(a,c){if(c){c=Number(c);if(isNaN(c)||0>c)throw Error("Bad port number "+c);a.o=c}else a.o=null}function fq(a,c,d){c instanceof hq?(a.i=c,nq(a.i,a.c)):(d||
(c=iq(c,oq)),a.i=new hq(c,0,a.c))}function pq(a){return a instanceof cq?a.clone():new cq(a,void 0)}function qq(a,c){a instanceof cq||(a=pq(a));c instanceof cq||(c=pq(c));var d=a,e=c,f=d.clone(),g=!!e.g;g?dq(f,e.g):g=!!e.j;g?f.j=e.j:g=!!e.a;g?f.a=e.a:g=null!=e.o;var h=e.b;if(g)eq(f,e.o);else if(g=!!e.b)if("/"!=h.charAt(0)&&(d.a&&!d.b?h="/"+h:(d=f.b.lastIndexOf("/"),-1!=d&&(h=f.b.substr(0,d+1)+h))),d=h,".."==d||"."==d)h="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var h=0==d.lastIndexOf("/",
0),d=d.split("/"),k=[],m=0;m<d.length;){var n=d[m++];"."==n?h&&m==d.length&&k.push(""):".."==n?((1<k.length||1==k.length&&""!=k[0])&&k.pop(),h&&m==d.length&&k.push("")):(k.push(n),h=!0)}h=k.join("/")}else h=d;g?f.b=h:g=""!==e.i.toString();g?fq(f,gq(e.i.toString())):g=!!e.f;g&&(f.f=e.f);return f}function gq(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function iq(a,c,d){return ga(a)?(a=encodeURI(a).replace(c,rq),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}
function rq(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var jq=/[#\/\?@]/g,lq=/[\#\?:]/g,kq=/[\#\?]/g,oq=/[\#\?@]/g,mq=/#/g;function hq(a,c,d){this.a=this.b=null;this.g=a||null;this.f=!!d}function sq(a){a.b||(a.b=new Vp,a.a=0,a.g&&Zp(a.g,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}l=hq.prototype;l.tc=function(){sq(this);return this.a};l.add=function(a,c){sq(this);this.g=null;a=tq(this,a);var d=this.b.get(a);d||this.b.set(a,d=[]);d.push(c);this.a=
this.a+1;return this};l.remove=function(a){sq(this);a=tq(this,a);return Xp(this.b.a,a)?(this.g=null,this.a=this.a-this.b.get(a).length,this.b.remove(a)):!1};l.clear=function(){this.b=this.g=null;this.a=0};l.Qa=function(){sq(this);return 0==this.a};function uq(a,c){sq(a);c=tq(a,c);return Xp(a.b.a,c)}l.O=function(){sq(this);for(var a=this.b.wc(),c=this.b.O(),d=[],e=0;e<c.length;e++)for(var f=a[e],g=0;g<f.length;g++)d.push(c[e]);return d};l.wc=function(a){sq(this);var c=[];if(ga(a))uq(this,a)&&(c=Ge(c,
this.b.get(tq(this,a))));else{a=this.b.wc();for(var d=0;d<a.length;d++)c=Ge(c,a[d])}return c};l.set=function(a,c){sq(this);this.g=null;a=tq(this,a);uq(this,a)&&(this.a=this.a-this.b.get(a).length);this.b.set(a,[c]);this.a=this.a+1;return this};l.get=function(a,c){var d=a?this.wc(a):[];return 0<d.length?String(d[0]):c};l.toString=function(){if(this.g)return this.g;if(!this.b)return"";for(var a=[],c=this.b.O(),d=0;d<c.length;d++)for(var e=c[d],f=encodeURIComponent(String(e)),e=this.wc(e),g=0;g<e.length;g++){var h=
f;""!==e[g]&&(h+="="+encodeURIComponent(String(e[g])));a.push(h)}return this.g=a.join("&")};l.clone=function(){var a=new hq;a.g=this.g;this.b&&(a.b=this.b.clone(),a.a=this.a);return a};function tq(a,c){var d=String(c);a.f&&(d=d.toLowerCase());return d}function nq(a,c){c&&!a.f&&(sq(a),a.g=null,a.b.forEach(function(a,c){var f=c.toLowerCase();c!=f&&(this.remove(c),this.remove(f),0<a.length&&(this.g=null,this.b.set(tq(this,f),He(a)),this.a=this.a+a.length))},a));a.f=c}function vq(a){a=a||{};this.g=a.font;
this.i=a.rotation;this.a=a.scale;this.s=a.text;this.o=a.textAlign;this.l=a.textBaseline;this.b=void 0!==a.fill?a.fill:new ck({color:"#333"});this.j=void 0!==a.stroke?a.stroke:null;this.f=void 0!==a.offsetX?a.offsetX:0;this.c=void 0!==a.offsetY?a.offsetY:0}l=vq.prototype;l.Mj=function(){return this.g};l.$j=function(){return this.f};l.ak=function(){return this.c};l.vn=function(){return this.b};l.wn=function(){return this.i};l.xn=function(){return this.a};l.yn=function(){return this.j};l.Ha=function(){return this.s};
l.mk=function(){return this.o};l.nk=function(){return this.l};l.Eo=function(a){this.g=a};l.ei=function(a){this.f=a};l.fi=function(a){this.c=a};l.Do=function(a){this.b=a};l.zn=function(a){this.i=a};l.An=function(a){this.a=a};l.Ko=function(a){this.j=a};l.hi=function(a){this.s=a};l.ii=function(a){this.o=a};l.Lo=function(a){this.l=a};function wq(a){a=a?a:{};Io.call(this);this.defaultDataProjection=ad("EPSG:4326");this.g=a.defaultStyle?a.defaultStyle:xq;this.c=void 0!==a.extractStyles?a.extractStyles:
!0;this.j=void 0!==a.writeStyles?a.writeStyles:!0;this.b={};this.i=void 0!==a.showPointNames?a.showPointNames:!0}y(wq,Io);var yq=["http://www.google.com/kml/ext/2.2"],zq=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Aq=[255,255,255,1],Bq=new ck({color:Aq}),Cq=[20,2],Dq=[64,64],Eq=new xi({anchor:Cq,anchorOrigin:"bottom-left",anchorXUnits:"pixels",anchorYUnits:"pixels",crossOrigin:"anonymous",rotation:0,
scale:.5,size:Dq,src:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),Fq=new ik({color:Aq,width:1}),Gq=new vq({font:"bold 16px Helvetica",fill:Bq,stroke:new ik({color:[51,51,51,1],width:2}),scale:.8}),xq=[new lk({fill:Bq,image:Eq,text:Gq,stroke:Fq,zIndex:0})],Hq={fraction:"fraction",pixels:"pixels"};function Iq(a,c){var d=null,e=[0,0],f="start";a.a&&(d=a.a.hd())&&2==d.length&&(e[0]=a.a.j*d[0]/2,e[1]=-a.a.j*d[1]/2,f="left");if(pb(a.Ha()))d=new vq({text:c,offsetX:e[0],offsetY:e[1],textAlign:f});
else{var d=a.Ha(),g={},h;for(h in d)g[h]=d[h];d=g;d.hi(c);d.ii(f);d.ei(e[0]);d.fi(e[1])}return new lk({text:d})}function Jq(a,c,d,e,f){return function(){var g=f,h="";g&&this.W()&&(g="Point"===this.W().X());g&&(h=this.get("name"),g=g&&h);if(a)return g?(g=Iq(a[0],h),a.concat(g)):a;if(c){var k=Kq(c,d,e);return g?(g=Iq(k[0],h),k.concat(g)):k}return g?(g=Iq(d[0],h),d.concat(g)):d}}function Kq(a,c,d){return Array.isArray(a)?a:"string"===typeof a?(!(a in d)&&"#"+a in d&&(a="#"+a),Kq(d[a],c,d)):c}function Lq(a){a=
Cl(a,!1);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}function Mq(a){a=Cl(a,!1);for(var c=[],d=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,e;e=d.exec(a);)c.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),a=a.substr(e[0].length);return""!==a?void 0:c}function Nq(a){var c=Cl(a,
!1);return a.baseURI?qq(a.baseURI,c.trim()).toString():c.trim()}function Oq(a){a=Qo(a);if(void 0!==a)return Math.sqrt(a)}function Pq(a,c){return P(null,Qq,a,c)}function Rq(a,c){var d=P({v:[],pi:[]},Sq,a,c);if(d){var e=d.v,d=d.pi,f,g;f=0;for(g=Math.min(e.length,d.length);f<g;++f)e[4*f+3]=d[f];d=new S(null);d.ba("XYZM",e);return d}}function Tq(a,c){var d=P({},Uq,a,c),e=P(null,Vq,a,c);if(e){var f=new S(null);f.ba("XYZ",e);f.C(d);return f}}function Wq(a,c){var d=P({},Uq,a,c),e=P(null,Vq,a,c);if(e){var f=
new F(null);f.ba("XYZ",e,[e.length]);f.C(d);return f}}function Xq(a,c){var d=P([],Yq,a,c);if(!d)return null;if(0===d.length)return new zo(d);var e=!0,f=d[0].X(),g,h,k;h=1;for(k=d.length;h<k;++h)if(g=d[h],g.X()!=f){e=!1;break}if(e){if("Point"==f){g=d[0];e=g.f;f=g.ga();h=1;for(k=d.length;h<k;++h)g=d[h],Za(f,g.ga());g=new oo(null);g.ba(e,f);Zq(g,d);return g}return"LineString"==f?(g=new T(null),no(g,d),Zq(g,d),g):"Polygon"==f?(g=new po(null),ro(g,d),Zq(g,d),g):"GeometryCollection"==f?new zo(d):null}return new zo(d)}
function $q(a,c){var d=P({},Uq,a,c),e=P(null,Vq,a,c);if(e){var f=new E(null);f.ba("XYZ",e);f.C(d);return f}}function ar(a,c){var d=P({},Uq,a,c),e=P([null],br,a,c);if(e&&e[0]){var f=new F(null),g=e[0],h=[g.length],k,m;k=1;for(m=e.length;k<m;++k)Za(g,e[k]),h.push(g.length);f.ba("XYZ",g,h);f.C(d);return f}}function cr(a,c){var d=P({},dr,a,c);if(!d)return null;var e="fillStyle"in d?d.fillStyle:Bq,f=d.fill;void 0===f||f||(e=null);var f="imageStyle"in d?d.imageStyle:Eq,g="textStyle"in d?d.textStyle:Gq,
h="strokeStyle"in d?d.strokeStyle:Fq,d=d.outline;void 0===d||d||(h=null);return[new lk({fill:e,image:f,stroke:h,text:g,zIndex:void 0})]}function Zq(a,c){var d=c.length,e=Array(c.length),f=Array(c.length),g,h,k,m;k=m=!1;for(h=0;h<d;++h)g=c[h],e[h]=g.get("extrude"),f[h]=g.get("altitudeMode"),k=k||void 0!==e[h],m=m||f[h];k&&a.set("extrude",e);m&&a.set("altitudeMode",f)}function er(a,c){Ql(fr,a,c)}var gr=O(zq,{value:Jl(U)}),fr=O(zq,{Data:function(a,c){var d=a.getAttribute("name");if(null!==d){var e=P(void 0,
gr,a,c);e&&(c[c.length-1][d]=e)}},SchemaData:function(a,c){Ql(hr,a,c)}}),Uq=O(zq,{extrude:L(No),altitudeMode:L(U)}),Qq=O(zq,{coordinates:Jl(Mq)}),br=O(zq,{innerBoundaryIs:function(a,c){var d=P(void 0,ir,a,c);d&&c[c.length-1].push(d)},outerBoundaryIs:function(a,c){var d=P(void 0,jr,a,c);d&&(c[c.length-1][0]=d)}}),Sq=O(zq,{when:function(a,c){var d=c[c.length-1].pi,e=Cl(a,!1);if(e=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/.exec(e)){var f=
Date.UTC(parseInt(e[1],10),e[3]?parseInt(e[3],10)-1:0,e[5]?parseInt(e[5],10):1,e[7]?parseInt(e[7],10):0,e[8]?parseInt(e[8],10):0,e[9]?parseInt(e[9],10):0);if(e[10]&&"Z"!=e[10]){var g="-"==e[11]?-1:1,f=f+60*g*parseInt(e[12],10);e[13]&&(f+=3600*g*parseInt(e[13],10))}d.push(f)}else d.push(0)}},O(yq,{coord:function(a,c){var d=c[c.length-1].v,e=Cl(a,!1);(e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(e))?d.push(parseFloat(e[1]),
parseFloat(e[2]),parseFloat(e[3]),0):d.push(0,0,0,0)}})),Vq=O(zq,{coordinates:Jl(Mq)}),kr=O(zq,{href:L(Nq)},O(yq,{x:L(Qo),y:L(Qo),w:L(Qo),h:L(Qo)})),lr=O(zq,{Icon:L(function(a,c){var d=P({},kr,a,c);return d?d:null}),heading:L(Qo),hotSpot:L(function(a){var c=a.getAttribute("xunits"),d=a.getAttribute("yunits");return{x:parseFloat(a.getAttribute("x")),Tf:Hq[c],y:parseFloat(a.getAttribute("y")),Uf:Hq[d]}}),scale:L(Oq)}),ir=O(zq,{LinearRing:Jl(Pq)}),mr=O(zq,{color:L(Lq),scale:L(Oq)}),nr=O(zq,{color:L(Lq),
width:L(Qo)}),Yq=O(zq,{LineString:Il(Tq),LinearRing:Il(Wq),MultiGeometry:Il(Xq),Point:Il($q),Polygon:Il(ar)}),or=O(yq,{Track:Il(Rq)}),qr=O(zq,{ExtendedData:er,Link:function(a,c){Ql(pr,a,c)},address:L(U),description:L(U),name:L(U),open:L(No),phoneNumber:L(U),visibility:L(No)}),pr=O(zq,{href:L(Nq)}),jr=O(zq,{LinearRing:Jl(Pq)}),rr=O(zq,{Style:L(cr),key:L(U),styleUrl:L(function(a){var c=Cl(a,!1).trim();return a.baseURI?qq(a.baseURI,c).toString():c})}),tr=O(zq,{ExtendedData:er,MultiGeometry:L(Xq,"geometry"),
LineString:L(Tq,"geometry"),LinearRing:L(Wq,"geometry"),Point:L($q,"geometry"),Polygon:L(ar,"geometry"),Style:L(cr),StyleMap:function(a,c){var d=P(void 0,sr,a,c);if(d){var e=c[c.length-1];Array.isArray(d)?e.Style=d:"string"===typeof d&&(e.styleUrl=d)}},address:L(U),description:L(U),name:L(U),open:L(No),phoneNumber:L(U),styleUrl:L(Nq),visibility:L(No)},O(yq,{MultiTrack:L(function(a,c){var d=P([],or,a,c);if(d){var e=new T(null);no(e,d);return e}},"geometry"),Track:L(Rq,"geometry")})),ur=O(zq,{color:L(Lq),
fill:L(No),outline:L(No)}),hr=O(zq,{SimpleData:function(a,c){var d=a.getAttribute("name");if(null!==d){var e=U(a);c[c.length-1][d]=e}}}),dr=O(zq,{IconStyle:function(a,c){var d=P({},lr,a,c);if(d){var e=c[c.length-1],f="Icon"in d?d.Icon:{},g;g=(g=f.href)?g:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";var h,k,m,n=d.hotSpot;n?(h=[n.x,n.y],k=n.Tf,m=n.Uf):"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"===g?(h=Cq,m=k="pixels"):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(g)&&
(h=[.5,0],m=k="fraction");var p,n=f.x,q=f.y;void 0!==n&&void 0!==q&&(p=[n,q]);var r,n=f.w,f=f.h;void 0!==n&&void 0!==f&&(r=[n,f]);var t,f=d.heading;void 0!==f&&(t=Pa(f));d=d.scale;"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"==g&&(r=Dq,void 0===d&&(d=.5));h=new xi({anchor:h,anchorOrigin:"bottom-left",anchorXUnits:k,anchorYUnits:m,crossOrigin:"anonymous",offset:p,offsetOrigin:"bottom-left",rotation:t,scale:d,size:r,src:g});e.imageStyle=h}},LabelStyle:function(a,c){var d=P({},mr,a,
c);d&&(c[c.length-1].textStyle=new vq({fill:new ck({color:"color"in d?d.color:Aq}),scale:d.scale}))},LineStyle:function(a,c){var d=P({},nr,a,c);d&&(c[c.length-1].strokeStyle=new ik({color:"color"in d?d.color:Aq,width:"width"in d?d.width:1}))},PolyStyle:function(a,c){var d=P({},ur,a,c);if(d){var e=c[c.length-1];e.fillStyle=new ck({color:"color"in d?d.color:Aq});var f=d.fill;void 0!==f&&(e.fill=f);d=d.outline;void 0!==d&&(e.outline=d)}}}),sr=O(zq,{Pair:function(a,c){var d=P({},rr,a,c);if(d){var e=d.key;
e&&"normal"==e&&((e=d.styleUrl)&&(c[c.length-1]=e),(d=d.Style)&&(c[c.length-1]=d))}}});l=wq.prototype;l.Af=function(a,c){var d=O(zq,{Document:Hl(this.Af,this),Folder:Hl(this.Af,this),Placemark:Il(this.If,this),Style:this.oo.bind(this),StyleMap:this.no.bind(this)});if(d=P([],d,a,c,this))return d};l.If=function(a,c){var d=P({geometry:null},tr,a,c);if(d){var e=new xl,f=a.getAttribute("id");null!==f&&e.hc(f);var f=c[0],g=d.geometry;g&&ho(g,!1,f);e.Ra(g);delete d.geometry;this.c&&e.lf(Jq(d.Style,d.styleUrl,
this.g,this.b,this.i));delete d.Style;e.C(d);return e}};l.oo=function(a,c){var d=a.getAttribute("id");if(null!==d){var e=cr(a,c);e&&(d=a.baseURI?qq(a.baseURI,"#"+d).toString():"#"+d,this.b[d]=e)}};l.no=function(a,c){var d=a.getAttribute("id");if(null!==d){var e=P(void 0,sr,a,c);e&&(d=a.baseURI?qq(a.baseURI,"#"+d).toString():"#"+d,this.b[d]=e)}};l.Ih=function(a,c){if(!Wa(zq,a.namespaceURI))return null;var d=this.If(a,[fo(this,a,c)]);return d?d:null};l.gc=function(a,c){if(!Wa(zq,a.namespaceURI))return[];
var d;d=a.localName;if("Document"==d||"Folder"==d)return(d=this.Af(a,[fo(this,a,c)]))?d:[];if("Placemark"==d)return(d=this.If(a,[fo(this,a,c)]))?[d]:[];if("kml"==d){d=[];var e;for(e=a.firstElementChild;e;e=e.nextElementSibling){var f=this.gc(e,c);f&&Za(d,f)}return d}return[]};l.io=function(a){if(El(a))return vr(this,a);if(Fl(a))return wr(this,a);if("string"===typeof a)return a=Gl(a),vr(this,a)};function vr(a,c){var d;for(d=c.firstChild;d;d=d.nextSibling)if(1==d.nodeType){var e=wr(a,d);if(e)return e}}
function wr(a,c){var d;for(d=c.firstElementChild;d;d=d.nextElementSibling)if(Wa(zq,d.namespaceURI)&&"name"==d.localName)return U(d);for(d=c.firstElementChild;d;d=d.nextElementSibling){var e=d.localName;if(Wa(zq,d.namespaceURI)&&("Document"==e||"Folder"==e||"Placemark"==e||"kml"==e)&&(e=wr(a,d)))return e}}l.jo=function(a){var c=[];El(a)?Za(c,xr(this,a)):Fl(a)?Za(c,yr(this,a)):"string"===typeof a&&(a=Gl(a),Za(c,xr(this,a)));return c};function xr(a,c){var d,e=[];for(d=c.firstChild;d;d=d.nextSibling)1==
d.nodeType&&Za(e,yr(a,d));return e}function yr(a,c){var d,e=[];for(d=c.firstElementChild;d;d=d.nextElementSibling)if(Wa(zq,d.namespaceURI)&&"NetworkLink"==d.localName){var f=P({},qr,d,[]);e.push(f)}for(d=c.firstElementChild;d;d=d.nextElementSibling)f=d.localName,!Wa(zq,d.namespaceURI)||"Document"!=f&&"Folder"!=f&&"kml"!=f||Za(e,yr(a,d));return e}function zr(a,c){var d=Me(c),d=[255*(4==d.length?d[3]:1),d[2],d[1],d[0]],e;for(e=0;4>e;++e){var f=parseInt(d[e],10).toString(16);d[e]=1==f.length?"0"+f:f}Vo(a,
d.join(""))}function Ar(a,c,d){Rl({node:a},Br,Cr,[c],d)}function Dr(a,c,d){var e={node:a};c.Wa()&&a.setAttribute("id",c.Wa());a=c.P();var f=c.$b();f&&(f=f.call(c,0))&&(f=Array.isArray(f)?f[0]:f,this.j&&(a.Style=f),(f=f.Ha())&&(a.name=f.Ha()));f=Er[d[d.length-1].node.namespaceURI];a=Pl(a,f);Rl(e,Fr,Ol,a,d,f);a=d[0];(c=c.W())&&(c=ho(c,!0,a));Rl(e,Fr,Gr,[c],d)}function Hr(a,c,d){var e=c.ga();a={node:a};a.layout=c.f;a.stride=c.ra();Rl(a,Ir,Jr,[e],d)}function Kr(a,c,d){c=c.Qd();var e=c.shift();a={node:a};
Rl(a,Lr,Mr,c,d);Rl(a,Lr,Nr,[e],d)}function Or(a,c){Wo(a,Math.round(c*c*1E6)/1E6)}var Pr=O(zq,["Document","Placemark"]),Sr=O(zq,{Document:N(function(a,c,d){Rl({node:a},Qr,Rr,c,d,void 0,this)}),Placemark:N(Dr)}),Qr=O(zq,{Placemark:N(Dr)}),Tr={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"},Ur=O(zq,["href"],O(yq,["x","y","w","h"])),Vr=O(zq,{href:N(Vo)},O(yq,{x:N(Wo),y:N(Wo),w:N(Wo),
h:N(Wo)})),Wr=O(zq,["scale","heading","Icon","hotSpot"]),Yr=O(zq,{Icon:N(function(a,c,d){a={node:a};var e=Ur[d[d.length-1].node.namespaceURI],f=Pl(c,e);Rl(a,Vr,Ol,f,d,e);e=Ur[yq[0]];f=Pl(c,e);Rl(a,Vr,Xr,f,d,e)}),heading:N(Wo),hotSpot:N(function(a,c){a.setAttribute("x",c.x);a.setAttribute("y",c.y);a.setAttribute("xunits",c.Tf);a.setAttribute("yunits",c.Uf)}),scale:N(Or)}),Zr=O(zq,["color","scale"]),$r=O(zq,{color:N(zr),scale:N(Or)}),as=O(zq,["color","width"]),bs=O(zq,{color:N(zr),width:N(Wo)}),Br=
O(zq,{LinearRing:N(Hr)}),cs=O(zq,{LineString:N(Hr),Point:N(Hr),Polygon:N(Kr)}),Er=O(zq,"name open visibility address phoneNumber description styleUrl Style".split(" ")),Fr=O(zq,{MultiGeometry:N(function(a,c,d){a={node:a};var e=c.X(),f,g;"MultiPoint"==e?(f=c.fe(),g=ds):"MultiLineString"==e?(f=c.jd(),g=es):"MultiPolygon"==e&&(f=c.Rd(),g=fs);Rl(a,cs,g,f,d)}),LineString:N(Hr),LinearRing:N(Hr),Point:N(Hr),Polygon:N(Kr),Style:N(function(a,c,d){a={node:a};var e={},f=c.c,g=c.f,h=c.a;c=c.Ha();h instanceof
xi&&(e.IconStyle=h);c&&(e.LabelStyle=c);g&&(e.LineStyle=g);f&&(e.PolyStyle=f);c=gs[d[d.length-1].node.namespaceURI];e=Pl(e,c);Rl(a,hs,Ol,e,d,c)}),address:N(Vo),description:N(Vo),name:N(Vo),open:N(Uo),phoneNumber:N(Vo),styleUrl:N(Vo),visibility:N(Uo)}),Ir=O(zq,{coordinates:N(function(a,c,d){d=d[d.length-1];var e=d.layout;d=d.stride;var f;"XY"==e||"XYM"==e?f=2:("XYZ"==e||"XYZM"==e)&&(f=3);var g,h=c.length,k="";if(0<h){k+=c[0];for(e=1;e<f;++e)k+=","+c[e];for(g=d;g<h;g+=d)for(k+=" "+c[g],e=1;e<f;++e)k+=
","+c[g+e]}Vo(a,k)})}),Lr=O(zq,{outerBoundaryIs:N(Ar),innerBoundaryIs:N(Ar)}),is=O(zq,{color:N(zr)}),gs=O(zq,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),hs=O(zq,{IconStyle:N(function(a,c,d){a={node:a};var e={},f=c.Db(),g=c.hd(),h={href:c.b.l};if(f){h.w=f[0];h.h=f[1];var k=c.Vb(),m=c.Ia();m&&g&&0!==m[0]&&m[1]!==f[1]&&(h.x=m[0],h.y=g[1]-(m[1]+f[1]));k&&0!==k[0]&&k[1]!==f[1]&&(e.hotSpot={x:k[0],Tf:"pixels",y:f[1]-k[1],Uf:"pixels"})}e.Icon=h;f=c.j;1!==f&&(e.scale=f);c=c.s;0!==c&&(e.heading=c);
c=Wr[d[d.length-1].node.namespaceURI];e=Pl(e,c);Rl(a,Yr,Ol,e,d,c)}),LabelStyle:N(function(a,c,d){a={node:a};var e={},f=c.b;f&&(e.color=f.b);(c=c.a)&&1!==c&&(e.scale=c);c=Zr[d[d.length-1].node.namespaceURI];e=Pl(e,c);Rl(a,$r,Ol,e,d,c)}),LineStyle:N(function(a,c,d){a={node:a};var e=as[d[d.length-1].node.namespaceURI];c=Pl({color:c.b,width:c.a},e);Rl(a,bs,Ol,c,d,e)}),PolyStyle:N(function(a,c,d){Rl({node:a},is,js,[c.b],d)})});function Xr(a,c,d){return Bl(yq[0],"gx:"+d)}function Rr(a,c){return Bl(c[c.length-
1].node.namespaceURI,"Placemark")}function Gr(a,c){if(a)return Bl(c[c.length-1].node.namespaceURI,Tr[a.X()])}var js=Ml("color"),Jr=Ml("coordinates"),Mr=Ml("innerBoundaryIs"),ds=Ml("Point"),es=Ml("LineString"),Cr=Ml("LinearRing"),fs=Ml("Polygon"),Nr=Ml("outerBoundaryIs");wq.prototype.a=function(a,c){c=go(this,c);var d=Bl(zq[4],"kml");d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",yq[0]);d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");
d.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:d},f={};1<a.length?f.Document=a:1==a.length&&(f.Placemark=a[0]);var g=Pr[d.namespaceURI],f=Pl(f,g);Rl(e,Sr,Ol,f,[c],g,this);return d};(function(){var a={},c={ha:a};(function(d){if("object"===typeof a&&"undefined"!==typeof c)c.ha=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==
typeof self?e=self:e=this;e.tp=d()}})(function(){return function e(a,c,h){function k(n,q){if(!c[n]){if(!a[n]){var r="function"==typeof require&&require;if(!q&&r)return r(n,!0);if(m)return m(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={ha:{}};a[n][0].call(r.ha,function(c){var e=a[n][1][c];return k(e?e:c)},r,r.ha,e,a,c,h)}return c[n].ha}for(var m="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(a,c){function g(a){var c;a&&
a.length&&(c=a,a=c.length);a=new Uint8Array(a||0);c&&a.set(c);a.Th=m.Th;a.Sf=m.Sf;a.Lh=m.Lh;a.vi=m.vi;a.Hf=m.Hf;a.ui=m.ui;a.Bf=m.Bf;a.ri=m.ri;a.toString=m.toString;a.write=m.write;a.slice=m.slice;a.mg=m.mg;a.ej=!0;return a}function h(a){for(var c=a.length,e=[],f=0,g,h;f<c;f++){g=a.charCodeAt(f);if(55295<g&&57344>g)if(h)if(56320>g){e.push(239,191,189);h=g;continue}else g=h-55296<<10|g-56320|65536,h=null;else{56319<g||f+1===c?e.push(239,191,189):h=g;continue}else h&&(e.push(239,191,189),h=null);128>
g?e.push(g):2048>g?e.push(g>>6|192,g&63|128):65536>g?e.push(g>>12|224,g>>6&63|128,g&63|128):e.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}return e}c.ha=g;var k=a("ieee754"),m,n,p;m={Th:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},Sf:function(a,c){this[c]=a;this[c+1]=a>>>8;this[c+2]=a>>>16;this[c+3]=a>>>24},Lh:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},Hf:function(a){return k.read(this,a,!0,23,4)},Bf:function(a){return k.read(this,a,
!0,52,8)},ui:function(a,c){return k.write(this,a,c,!0,23,4)},ri:function(a,c){return k.write(this,a,c,!0,52,8)},toString:function(a,c,e){var f=a="";e=Math.min(this.length,e||this.length);for(c=c||0;c<e;c++){var g=this[c];127>=g?(a+=decodeURIComponent(f)+String.fromCharCode(g),f=""):f+="%"+g.toString(16)}return a+=decodeURIComponent(f)},write:function(a,c){for(var e=a===n?p:h(a),f=0;f<e.length;f++)this[c+f]=e[f]},slice:function(a,c){return this.subarray(a,c)},mg:function(a,c){c=c||0;for(var e=0;e<
this.length;e++)a[c+e]=this[e]}};m.vi=m.Sf;g.byteLength=function(a){n=a;p=h(a);return p.length};g.isBuffer=function(a){return!(!a||!a.ej)}},{ieee754:3}],2:[function(a,c){(function(g){function h(a){this.Eb=k.isBuffer(a)?a:new k(a||0);this.ca=0;this.length=this.Eb.length}c.ha=h;var k=g.ap||a("./buffer");h.f=0;h.g=1;h.b=2;h.a=5;var m=Math.pow(2,63);h.prototype={Ff:function(a,c,e){for(e=e||this.length;this.ca<e;){var f=this.Ca(),g=this.ca;a(f>>3,c,this);this.ca===g&&this.Qo(f)}return c},co:function(){var a=
this.Eb.Hf(this.ca);this.ca+=4;return a},Zn:function(){var a=this.Eb.Bf(this.ca);this.ca+=8;return a},Ca:function(){var a=this.Eb,c,e,f,g,h;c=a[this.ca++];if(128>c)return c;c=c&127;f=a[this.ca++];if(128>f)return c|f<<7;f=(f&127)<<7;g=a[this.ca++];if(128>g)return c|f|g<<14;g=(g&127)<<14;h=a[this.ca++];if(128>h)return c|f|g|h<<21;e=a[this.ca++];c=(c|f|g|(h&127)<<21)+268435456*(e&127);if(128>e)return c;e=a[this.ca++];c+=34359738368*(e&127);if(128>e)return c;e=a[this.ca++];c+=4398046511104*(e&127);if(128>
e)return c;e=a[this.ca++];c+=562949953421312*(e&127);if(128>e)return c;e=a[this.ca++];c+=72057594037927936*(e&127);if(128>e)return c;e=a[this.ca++];if(128>e)return c+0x7fffffffffffffff*(e&127);throw Error("Expected varint not more than 10 bytes");},po:function(){var a=this.ca,c=this.Ca();if(c<m)return c;for(var e=this.ca-2;255===this.Eb[e];)e--;e<a&&(e=a);for(var f=c=0;f<e-a+1;f++)var g=~this.Eb[a+f]&127,c=c+(4>f?g<<7*f:g*Math.pow(2,7*f));return-c-1},ud:function(){var a=this.Ca();return 1===a%2?(a+
1)/-2:a/2},Xn:function(){return!!this.Ca()},Kf:function(){var a=this.Ca()+this.ca,c=this.Eb.toString("utf8",this.ca,a);this.ca=a;return c},Qo:function(a){a=a&7;if(a===h.f)for(;127<this.Eb[this.ca++];);else if(a===h.b)this.ca=this.Ca()+this.ca;else if(a===h.a)this.ca+=4;else if(a===h.g)this.ca+=8;else throw Error("Unimplemented type: "+a);}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./buffer":1}],3:[function(a,c,g){g.read=
function(a,c,e,f,g){var q;q=8*g-f-1;var r=(1<<q)-1,t=r>>1,v=-7;g=e?g-1:0;var w=e?-1:1,A=a[c+g];g+=w;e=A&(1<<-v)-1;A>>=-v;for(v+=q;0<v;e=256*e+a[c+g],g+=w,v-=8);q=e&(1<<-v)-1;e>>=-v;for(v+=f;0<v;q=256*q+a[c+g],g+=w,v-=8);if(0===e)e=1-t;else{if(e===r)return q?NaN:Infinity*(A?-1:1);q+=Math.pow(2,f);e=e-t}return(A?-1:1)*q*Math.pow(2,e-f)};g.write=function(a,c,e,f,g,q){var r,t=8*q-g-1,v=(1<<t)-1,w=v>>1,A=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;q=f?0:q-1;var D=f?1:-1,z=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);
isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,f=v):(f=Math.floor(Math.log(c)/Math.LN2),1>c*(r=Math.pow(2,-f))&&(f--,r*=2),c=1<=f+w?c+A/r:c+A*Math.pow(2,1-w),2<=c*r&&(f++,r/=2),f+w>=v?(c=0,f=v):1<=f+w?(c=(c*r-1)*Math.pow(2,g),f+=w):(c=c*Math.pow(2,w-1)*Math.pow(2,g),f=0));for(;8<=g;a[e+q]=c&255,q+=D,c/=256,g-=8);f=f<<g|c;for(t+=g;0<t;a[e+q]=f&255,q+=D,f/=256,t-=8);a[e+q-D]|=128*z}},{}]},{},[2])(2)});Xl=c.ha})();(function(){var a={},c={ha:a};(function(d){if("object"===typeof a&&"undefined"!==typeof c)c.ha=
d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.vp=d()}})(function(){return function e(a,c,h){function k(n,q){if(!c[n]){if(!a[n]){var r="function"==typeof require&&require;if(!q&&r)return r(n,!0);if(m)return m(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={ha:{}};a[n][0].call(r.ha,function(c){var e=a[n][1][c];return k(e?e:c)},r,r.ha,e,a,c,h)}return c[n].ha}for(var m="function"==
typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(a,c){c.ha.Wi=a("./lib/vectortile.js");c.ha.op=a("./lib/vectortilefeature.js");c.ha.pp=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(a,c){function g(a,c,e){3===a&&(a=new h(e,e.Ca()+e.ca),a.length&&(c[a.name]=a))}var h=a("./vectortilelayer");c.ha=function(a,c){this.layers=a.Ff(g,{},c)}},{"./vectortilelayer":4}],3:[function(a,c){function g(a,c,
e,f,g){this.properties={};this.extent=e;this.type=0;this.nc=a;this.Ke=-1;this.Fd=f;this.Hd=g;a.Ff(h,this,c)}function h(a,c,e){if(1==a)c.rp=e.Ca();else if(2==a)for(a=e.Ca()+e.ca;e.ca<a;){var f=c.Fd[e.Ca()],g=c.Hd[e.Ca()];c.properties[f]=g}else 3==a?c.type=e.Ca():4==a&&(c.Ke=e.ca)}var k=a("point-geometry");c.ha=g;g.b=["Unknown","Point","LineString","Polygon"];g.prototype.Og=function(){var a=this.nc;a.ca=this.Ke;for(var c=a.Ca()+a.ca,e=1,f=0,g=0,h=0,v=[],w;a.ca<c;)if(f||(f=a.Ca(),e=f&7,f=f>>3),f--,1===
e||2===e)g+=a.ud(),h+=a.ud(),1===e&&(w&&v.push(w),w=[]),w.push(new k(g,h));else if(7===e)w&&w.push(w[0].clone());else throw Error("unknown command "+e);w&&v.push(w);return v};g.prototype.bbox=function(){var a=this.nc;a.ca=this.Ke;for(var c=a.Ca()+a.ca,e=1,f=0,g=0,h=0,k=Infinity,w=-Infinity,A=Infinity,D=-Infinity;a.ca<c;)if(f||(f=a.Ca(),e=f&7,f=f>>3),f--,1===e||2===e)g+=a.ud(),h+=a.ud(),g<k&&(k=g),g>w&&(w=g),h<A&&(A=h),h>D&&(D=h);else if(7!==e)throw Error("unknown command "+e);return[k,A,w,D]}},{"point-geometry":5}],
4:[function(a,c){function g(a,c){this.version=1;this.name=null;this.extent=4096;this.length=0;this.nc=a;this.Fd=[];this.Hd=[];this.Ed=[];a.Ff(h,this,c);this.length=this.Ed.length}function h(a,c,e){15===a?c.version=e.Ca():1===a?c.name=e.Kf():5===a?c.extent=e.Ca():2===a?c.Ed.push(e.ca):3===a?c.Fd.push(e.Kf()):4===a&&c.Hd.push(k(e))}function k(a){for(var c=null,e=a.Ca()+a.ca;a.ca<e;)c=a.Ca()>>3,c=1===c?a.Kf():2===c?a.co():3===c?a.Zn():4===c?a.po():5===c?a.Ca():6===c?a.ud():7===c?a.Xn():null;return c}
var m=a("./vectortilefeature.js");c.ha=g;g.prototype.feature=function(a){if(0>a||a>=this.Ed.length)throw Error("feature index out of bounds");this.nc.ca=this.Ed[a];a=this.nc.Ca()+this.nc.ca;return new m(this.nc,a,this.extent,this.Fd,this.Hd)}},{"./vectortilefeature.js":3}],5:[function(a,c){function g(a,c){this.x=a;this.y=c}c.ha=g;g.prototype={clone:function(){return new g(this.x,this.y)},add:function(a){return this.clone().Xi(a)},rotate:function(a){return this.clone().hj(a)},round:function(){return this.clone().ij()},
angle:function(){return Math.atan2(this.y,this.x)},Xi:function(a){this.x+=a.x;this.y+=a.y;return this},hj:function(a){var c=Math.cos(a);a=Math.sin(a);var e=a*this.x+c*this.y;this.x=c*this.x-a*this.y;this.y=e;return this},ij:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};g.b=function(a){return a instanceof g?a:Array.isArray(a)?new g(a[0],a[1]):a}},{}]},{},[1])(1)});Yl=c.ha})();function ks(a){this.defaultDataProjection=null;a=a?a:{};this.defaultDataProjection=new Yc({code:"",
units:"tile-pixels"});this.b=a.featureClass?a.featureClass:al;this.g=a.geometryName?a.geometryName:"geometry";this.a=a.layerName?a.layerName:"layer";this.f=a.layers?a.layers:null}y(ks,eo);ks.prototype.X=function(){return"arraybuffer"};ks.prototype.Ea=function(a,c){var d=this.f,e=new Xl(a),e=new Yl.Wi(e),f=[],g=this.b,h,k,m;for(m in e.layers)if(!d||-1!=d.indexOf(m)){h=e.layers[m];for(var n=0,p=h.length;n<p;++n){if(g===al){var q=h.feature(n);k=m;var r=q.Og(),t=[],v=[];ls(r,v,t);var w=q.type,A=void 0;
1===w?A=1===r.length?"Point":"MultiPoint":2===w?A=1===r.length?"LineString":"MultiLineString":3===w&&(A="Polygon");q=q.properties;q[this.a]=k;k=new this.b(A,v,t,q)}else{q=h.feature(n);A=m;v=c;k=new this.b;t=q.properties;t[this.a]=A;A=q.type;if(0===A)A=null;else{q=q.Og();r=[];w=[];ls(q,w,r);var D=void 0;1===A?D=1===q.length?new E(null):new oo(null):2===A?1===q.length?D=new S(null):D=new T(null):3===A&&(D=new F(null));D.ba("XY",w,r);A=D}(v=ho(A,!1,go(this,v)))&&(t[this.g]=v);k.C(t);k.Bc(this.g)}f.push(k)}}return f};
ks.prototype.Sa=function(){return this.defaultDataProjection};ks.prototype.c=function(a){this.f=a};function ls(a,c,d){for(var e=0,f=0,g=a.length;f<g;++f){var h=a[f],k,m;k=0;for(m=h.length;k<m;++k){var n=h[k];c.push(n.x,n.y)}e+=2*k;d.push(e)}}function ms(){Io.call(this);this.defaultDataProjection=ad("EPSG:4326")}y(ms,Io);function ns(a,c){c[c.length-1].zd[a.getAttribute("k")]=a.getAttribute("v")}var os=[null],ps=O(os,{nd:function(a,c){c[c.length-1].Lc.push(a.getAttribute("ref"))},tag:ns}),rs=O(os,{node:function(a,
c){var d=c[0],e=c[c.length-1],f=a.getAttribute("id"),g=[parseFloat(a.getAttribute("lon")),parseFloat(a.getAttribute("lat"))];e.Sg[f]=g;var h=P({zd:{}},qs,a,c);pb(h.zd)||(g=new E(g),ho(g,!1,d),d=new xl(g),d.hc(f),d.C(h.zd),e.features.push(d))},way:function(a,c){for(var d=c[0],e=a.getAttribute("id"),f=P({Lc:[],zd:{}},ps,a,c),g=c[c.length-1],h=[],k=0,m=f.Lc.length;k<m;k++)Za(h,g.Sg[f.Lc[k]]);f.Lc[0]==f.Lc[f.Lc.length-1]?(k=new F(null),k.ba("XY",h,[h.length])):(k=new S(null),k.ba("XY",h));ho(k,!1,d);
d=new xl(k);d.hc(e);d.C(f.zd);g.features.push(d)}}),qs=O(os,{tag:ns});ms.prototype.gc=function(a,c){var d=fo(this,a,c);return"osm"==a.localName&&(d=P({Sg:{},features:[]},rs,a,[d]),d.features)?d.features:[]};function ss(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")}function ts(){}ts.prototype.read=function(a){return El(a)?this.a(a):Fl(a)?this.b(a):"string"===typeof a?(a=Gl(a),this.a(a)):null};function us(){}y(us,ts);us.prototype.a=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==
a.nodeType)return this.b(a);return null};us.prototype.b=function(a){return(a=P({},vs,a,[]))?a:null};var ws=[null,"http://www.opengis.net/ows/1.1"],vs=O(ws,{ServiceIdentification:L(function(a,c){return P({},xs,a,c)}),ServiceProvider:L(function(a,c){return P({},ys,a,c)}),OperationsMetadata:L(function(a,c){return P({},zs,a,c)})}),As=O(ws,{DeliveryPoint:L(U),City:L(U),AdministrativeArea:L(U),PostalCode:L(U),Country:L(U),ElectronicMailAddress:L(U)}),Bs=O(ws,{Value:Kl(function(a){return U(a)})}),Cs=O(ws,
{AllowedValues:L(function(a,c){return P({},Bs,a,c)})}),Es=O(ws,{Phone:L(function(a,c){return P({},Ds,a,c)}),Address:L(function(a,c){return P({},As,a,c)})}),Gs=O(ws,{HTTP:L(function(a,c){return P({},Fs,a,c)})}),Fs=O(ws,{Get:Kl(function(a,c){var d=ss(a);return d?P({href:d},Hs,a,c):void 0}),Post:void 0}),Is=O(ws,{DCP:L(function(a,c){return P({},Gs,a,c)})}),zs=O(ws,{Operation:function(a,c){var d=a.getAttribute("name"),e=P({},Is,a,c);e&&(c[c.length-1][d]=e)}}),Ds=O(ws,{Voice:L(U),Facsimile:L(U)}),Hs=O(ws,
{Constraint:Kl(function(a,c){var d=a.getAttribute("name");return d?P({name:d},Cs,a,c):void 0})}),Js=O(ws,{IndividualName:L(U),PositionName:L(U),ContactInfo:L(function(a,c){return P({},Es,a,c)})}),xs=O(ws,{Title:L(U),ServiceTypeVersion:L(U),ServiceType:L(U)}),ys=O(ws,{ProviderName:L(U),ProviderSite:L(ss),ServiceContact:L(function(a,c){return P({},Js,a,c)})});function Ks(a,c,d,e){var f;void 0!==e?f=e:f=[];for(var g=e=0;g<c;){var h=a[g++];f[e++]=a[g++];f[e++]=h;for(h=2;h<d;++h)f[e++]=a[g++]}f.length=
e}function Ls(a){a=a?a:{};this.defaultDataProjection=null;this.defaultDataProjection=ad("EPSG:4326");this.b=a.factor?a.factor:1E5;this.a=a.geometryLayout?a.geometryLayout:"XY"}y(Ls,Op);function Ms(a,c,d){var e,f=Array(c);for(e=0;e<c;++e)f[e]=0;var g,h;g=0;for(h=a.length;g<h;)for(e=0;e<c;++e,++g){var k=a[g],m=k-f[e];f[e]=k;a[g]=m}return Ns(a,d?d:1E5)}function Ps(a,c,d){var e,f=Array(c);for(e=0;e<c;++e)f[e]=0;a=Qs(a,d?d:1E5);var g;d=0;for(g=a.length;d<g;)for(e=0;e<c;++e,++d)f[e]+=a[d],a[d]=f[e];return a}
function Ns(a,c){var d=c?c:1E5,e,f;e=0;for(f=a.length;e<f;++e)a[e]=Math.round(a[e]*d);d=0;for(e=a.length;d<e;++d)f=a[d],a[d]=0>f?~(f<<1):f<<1;d="";e=0;for(f=a.length;e<f;++e){for(var g=a[e],h=void 0,k="";32<=g;)h=(32|g&31)+63,k+=String.fromCharCode(h),g>>=5;k+=String.fromCharCode(g+63);d+=k}return d}function Qs(a,c){var d=c?c:1E5,e=[],f=0,g=0,h,k;h=0;for(k=a.length;h<k;++h){var m=a.charCodeAt(h)-63,f=f|(m&31)<<g;32>m?(e.push(f),g=f=0):g+=5}f=0;for(g=e.length;f<g;++f)h=e[f],e[f]=h&1?~(h>>1):h>>1;f=
0;for(g=e.length;f<g;++f)e[f]/=d;return e}l=Ls.prototype;l.rd=function(a,c){var d=this.td(a,c);return new xl(d)};l.Ef=function(a,c){return[this.rd(a,c)]};l.td=function(a,c){var d=yd(this.a),e=Ps(a,d,this.b);Ks(e,e.length,d,e);d=Ld(e,0,e.length,d);return ho(new S(d,this.a),!1,go(this,c))};l.Be=function(a,c){var d=a.W();return d?this.Bd(d,c):""};l.ti=function(a,c){return this.Be(a[0],c)};l.Bd=function(a,c){a=ho(a,!0,go(this,c));var d=a.ga(),e=a.ra();Ks(d,d.length,e,d);return Ms(d,e,this.b)};function Rs(a){a=
a?a:{};this.defaultDataProjection=null;this.defaultDataProjection=ad(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326")}y(Rs,io);function Ss(a,c){var d=[],e,f,g,h;g=0;for(h=a.length;g<h;++g)e=a[g],0<g&&d.pop(),0<=e?f=c[e]:f=c[~e].slice().reverse(),d.push.apply(d,f);e=0;for(f=d.length;e<f;++e)d[e]=d[e].slice();return d}function Ts(a,c,d,e,f){a=a.geometries;var g=[],h,k;h=0;for(k=a.length;h<k;++h)g[h]=Us(a[h],c,d,e,f);return g}function Us(a,c,d,e,f){var g=a.type,h=Vs[g];c="Point"===g||"MultiPoint"===
g?h(a,d,e):h(a,c);d=new xl;d.Ra(ho(c,!1,f));void 0!==a.id&&d.hc(a.id);a.properties&&d.C(a.properties);return d}Rs.prototype.Df=function(a,c){if("Topology"==a.type){var d,e=null,f=null;a.transform&&(d=a.transform,e=d.scale,f=d.translate);var g=a.arcs;if(d){d=e;var h=f,k,m;k=0;for(m=g.length;k<m;++k)for(var n=g[k],p=d,q=h,r=0,t=0,v=void 0,w=void 0,A=void 0,w=0,A=n.length;w<A;++w)v=n[w],r+=v[0],t+=v[1],v[0]=r,v[1]=t,Ws(v,p,q)}d=[];h=ob(a.objects);k=0;for(m=h.length;k<m;++k)"GeometryCollection"===h[k].type?
(n=h[k],d.push.apply(d,Ts(n,g,e,f,c))):(n=h[k],d.push(Us(n,g,e,f,c)));return d}return[]};function Ws(a,c,d){a[0]=a[0]*c[0]+d[0];a[1]=a[1]*c[1]+d[1]}Rs.prototype.Sa=function(){return this.defaultDataProjection};var Vs={Point:function(a,c,d){a=a.coordinates;c&&d&&Ws(a,c,d);return new E(a)},LineString:function(a,c){var d=Ss(a.arcs,c);return new S(d)},Polygon:function(a,c){var d=[],e,f;e=0;for(f=a.arcs.length;e<f;++e)d[e]=Ss(a.arcs[e],c);return new F(d)},MultiPoint:function(a,c,d){a=a.coordinates;var e,
f;if(c&&d)for(e=0,f=a.length;e<f;++e)Ws(a[e],c,d);return new oo(a)},MultiLineString:function(a,c){var d=[],e,f;e=0;for(f=a.arcs.length;e<f;++e)d[e]=Ss(a.arcs[e],c);return new T(d)},MultiPolygon:function(a,c){var d=[],e,f,g,h,k,m;k=0;for(m=a.arcs.length;k<m;++k){e=a.arcs[k];f=[];g=0;for(h=e.length;g<h;++g)f[g]=Ss(e[g],c);d[k]=f}return new po(d)}};function Xs(a){a=a?a:{};this.i=a.featureType;this.g=a.featureNS;this.b=a.gmlFormat?a.gmlFormat:new Zo;this.c=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd";
Io.call(this)}y(Xs,Io);Xs.prototype.gc=function(a,c){var d={featureType:this.i,featureNS:this.g};mb(d,fo(this,a,c?c:{}));d=[d];this.b.b["http://www.opengis.net/gml"].featureMember=Il(Lo.prototype.sd);(d=P([],this.b.b,a,d,this.b))||(d=[]);return d};Xs.prototype.o=function(a){if(El(a))return Ys(a);if(Fl(a))return P({},Zs,a,[]);if("string"===typeof a)return a=Gl(a),Ys(a)};Xs.prototype.j=function(a){if(El(a))return $s(this,a);if(Fl(a))return at(this,a);if("string"===typeof a)return a=Gl(a),$s(this,a)};
function $s(a,c){for(var d=c.firstChild;d;d=d.nextSibling)if(1==d.nodeType)return at(a,d)}var bt={"http://www.opengis.net/gml":{boundedBy:L(Lo.prototype.te,"bounds")}};function at(a,c){var d={},e=To(c.getAttribute("numberOfFeatures"));d.numberOfFeatures=e;return P(d,bt,c,[],a.b)}var ct={"http://www.opengis.net/wfs":{totalInserted:L(So),totalUpdated:L(So),totalDeleted:L(So)}},dt={"http://www.opengis.net/ogc":{FeatureId:Il(function(a){return a.getAttribute("fid")})}},et={"http://www.opengis.net/wfs":{Feature:function(a,
c){Ql(dt,a,c)}}},Zs={"http://www.opengis.net/wfs":{TransactionSummary:L(function(a,c){return P({},ct,a,c)},"transactionSummary"),InsertResults:L(function(a,c){return P([],et,a,c)},"insertIds")}};function Ys(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType)return P({},Zs,a,[])}var ft={"http://www.opengis.net/wfs":{PropertyName:N(Vo)}};function gt(a,c){var d=Bl("http://www.opengis.net/ogc","Filter"),e=Bl("http://www.opengis.net/ogc","FeatureId");d.appendChild(e);e.setAttribute("fid",c);a.appendChild(d)}
var ht={"http://www.opengis.net/wfs":{Insert:N(function(a,c,d){var e=d[d.length-1],e=Bl(e.featureNS,e.featureType);a.appendChild(e);Zo.prototype.si(e,c,d)}),Update:N(function(a,c,d){var e=d[d.length-1],f=e.featureType,g=e.featurePrefix,g=g?g:"feature",h=e.featureNS;a.setAttribute("typeName",g+":"+f);a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+g,h);f=c.Wa();if(void 0!==f){for(var g=c.O(),h=[],k=0,m=g.length;k<m;k++){var n=c.get(g[k]);void 0!==n&&h.push({name:g[k],value:n})}Rl({node:a,
srsName:e.srsName},ht,Ml("Property"),h,d);gt(a,f)}}),Delete:N(function(a,c,d){var e=d[d.length-1];d=e.featureType;var f=e.featurePrefix,f=f?f:"feature",e=e.featureNS;a.setAttribute("typeName",f+":"+d);a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+f,e);c=c.Wa();void 0!==c&&gt(a,c)}),Property:N(function(a,c,d){var e=Bl("http://www.opengis.net/wfs","Name");a.appendChild(e);Vo(e,c.name);void 0!==c.value&&null!==c.value&&(e=Bl("http://www.opengis.net/wfs","Value"),a.appendChild(e),c.value instanceof
vd?Zo.prototype.De(e,c.value,d):Vo(e,c.value))}),Native:N(function(a,c){c.Xo&&a.setAttribute("vendorId",c.Xo);void 0!==c.Bo&&a.setAttribute("safeToIgnore",c.Bo);void 0!==c.value&&Vo(a,c.value)})}},it={"http://www.opengis.net/wfs":{Query:N(function(a,c,d){var e=d[d.length-1],f=e.featurePrefix,g=e.featureNS,h=e.propertyNames,k=e.srsName;a.setAttribute("typeName",(f?f+":":"")+c);k&&a.setAttribute("srsName",k);g&&a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+f,g);c=mb({},e);c.node=a;Rl(c,
ft,Ml("PropertyName"),h,d);if(e=e.bbox)h=Bl("http://www.opengis.net/ogc","Filter"),c=d[d.length-1].geometryName,f=Bl("http://www.opengis.net/ogc","BBOX"),h.appendChild(f),g=Bl("http://www.opengis.net/ogc","PropertyName"),Vo(g,c),f.appendChild(g),Zo.prototype.De(f,e,d),a.appendChild(h)})}};Xs.prototype.l=function(a){var c=Bl("http://www.opengis.net/wfs","GetFeature");c.setAttribute("service","WFS");c.setAttribute("version","1.1.0");a&&(a.handle&&c.setAttribute("handle",a.handle),a.outputFormat&&c.setAttribute("outputFormat",
a.outputFormat),void 0!==a.maxFeatures&&c.setAttribute("maxFeatures",a.maxFeatures),a.resultType&&c.setAttribute("resultType",a.resultType),void 0!==a.startIndex&&c.setAttribute("startIndex",a.startIndex),void 0!==a.count&&c.setAttribute("count",a.count));c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.c);var d=a.featureTypes;a=[{node:c,srsName:a.srsName,featureNS:a.featureNS?a.featureNS:this.g,featurePrefix:a.featurePrefix,geometryName:a.geometryName,bbox:a.bbox,
propertyNames:a.propertyNames?a.propertyNames:[]}];var e=mb({},a[a.length-1]);e.node=c;Rl(e,it,Ml("Query"),d,a);return c};Xs.prototype.U=function(a,c,d,e){var f=[],g=Bl("http://www.opengis.net/wfs","Transaction");g.setAttribute("service","WFS");g.setAttribute("version","1.1.0");var h,k;e&&(h=e.gmlOptions?e.gmlOptions:{},e.handle&&g.setAttribute("handle",e.handle));g.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.c);a&&(k={node:g,featureNS:e.featureNS,featureType:e.featureType,
featurePrefix:e.featurePrefix},mb(k,h),Rl(k,ht,Ml("Insert"),a,f));c&&(k={node:g,featureNS:e.featureNS,featureType:e.featureType,featurePrefix:e.featurePrefix},mb(k,h),Rl(k,ht,Ml("Update"),c,f));d&&Rl({node:g,featureNS:e.featureNS,featureType:e.featureType,featurePrefix:e.featurePrefix},ht,Ml("Delete"),d,f);e.nativeElements&&Rl({node:g,featureNS:e.featureNS,featureType:e.featureType,featurePrefix:e.featurePrefix},ht,Ml("Native"),e.nativeElements,f);return g};Xs.prototype.Jf=function(a){for(a=a.firstChild;a;a=
a.nextSibling)if(1==a.nodeType)return this.we(a);return null};Xs.prototype.we=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var c=[{}];this.b.te(a,c);return ad(c.pop().srsName)}return null};function jt(a){a=a?a:{};this.defaultDataProjection=null;this.b=void 0!==a.splitCollection?a.splitCollection:!1}
y(jt,Op);function kt(a){a=a.Z();return 0===a.length?"":a[0]+" "+a[1]}function lt(a){a=a.Z();for(var c=[],d=0,e=a.length;d<e;++d)c.push(a[d][0]+" "+a[d][1]);return c.join(",")}function mt(a){var c=[];a=a.Qd();for(var d=0,e=a.length;d<e;++d)c.push("("+lt(a[d])+")");return c.join(",")}function nt(a){var c=a.X();a=(0,ot[c])(a);c=c.toUpperCase();return 0===a.length?c+" EMPTY":c+"("+a+")"}var ot={Point:kt,LineString:lt,Polygon:mt,MultiPoint:function(a){var c=[];a=a.fe();for(var d=0,e=a.length;d<e;++d)c.push("("+
kt(a[d])+")");return c.join(",")},MultiLineString:function(a){var c=[];a=a.jd();for(var d=0,e=a.length;d<e;++d)c.push("("+lt(a[d])+")");return c.join(",")},MultiPolygon:function(a){var c=[];a=a.Rd();for(var d=0,e=a.length;d<e;++d)c.push("("+mt(a[d])+")");return c.join(",")},GeometryCollection:function(a){var c=[];a=a.yg();for(var d=0,e=a.length;d<e;++d)c.push(nt(a[d]));return c.join(",")}};l=jt.prototype;l.rd=function(a,c){var d=this.td(a,c);if(d){var e=new xl;e.Ra(d);return e}return null};l.Ef=function(a,
c){var d=[],e=this.td(a,c);this.b&&"GeometryCollection"==e.X()?d=e.c:d=[e];for(var f=[],g=0,h=d.length;g<h;++g)e=new xl,e.Ra(d[g]),f.push(e);return f};l.td=function(a,c){var d;d=new pt(new qt(a));d.b=rt(d.a);return(d=st(d))?ho(d,!1,c):null};l.Be=function(a,c){var d=a.W();return d?this.Bd(d,c):""};l.ti=function(a,c){if(1==a.length)return this.Be(a[0],c);for(var d=[],e=0,f=a.length;e<f;++e)d.push(a[e].W());d=new zo(d);return this.Bd(d,c)};l.Bd=function(a,c){return nt(ho(a,!0,c))};function qt(a){this.a=
a;this.b=-1}function rt(a){var c=a.a.charAt(++a.b),d={position:a.b,value:c};if("("==c)d.type=2;else if(","==c)d.type=5;else if(")"==c)d.type=3;else if("0"<=c&&"9">=c||"."==c||"-"==c){d.type=4;var e,c=a.b,f=!1,g=!1;do{if("."==e)f=!0;else if("e"==e||"E"==e)g=!0;e=a.a.charAt(++a.b)}while("0"<=e&&"9">=e||"."==e&&(void 0===f||!f)||!g&&("e"==e||"E"==e)||g&&("-"==e||"+"==e));a=parseFloat(a.a.substring(c,a.b--));d.value=a}else if("a"<=c&&"z">=c||"A"<=c&&"Z">=c){d.type=1;c=a.b;do e=a.a.charAt(++a.b);while("a"<=
e&&"z">=e||"A"<=e&&"Z">=e);a=a.a.substring(c,a.b--).toUpperCase();d.value=a}else{if(" "==c||"\t"==c||"\r"==c||"\n"==c)return rt(a);if(""===c)d.type=6;else throw Error("Unexpected character: "+c);}return d}function pt(a){this.a=a}l=pt.prototype;l.match=function(a){if(a=this.b.type==a)this.b=rt(this.a);return a};function st(a){var c=a.b;if(a.match(1)){var d=c.value;if("GEOMETRYCOLLECTION"==d){a:{if(a.match(2)){c=[];do c.push(st(a));while(a.match(5));if(a.match(3)){a=c;break a}}else if(tt(a)){a=[];break a}throw Error(ut(a));
}return new zo(a)}var e=vt[d],c=wt[d];if(!e||!c)throw Error("Invalid geometry type: "+d);a=e.call(a);return new c(a)}throw Error(ut(a));}l.yf=function(){if(this.match(2)){var a=xt(this);if(this.match(3))return a}else if(tt(this))return null;throw Error(ut(this));};l.xf=function(){if(this.match(2)){var a=yt(this);if(this.match(3))return a}else if(tt(this))return[];throw Error(ut(this));};l.zf=function(){if(this.match(2)){var a=zt(this);if(this.match(3))return a}else if(tt(this))return[];throw Error(ut(this));
};l.Kn=function(){if(this.match(2)){var a;if(2==this.b.type)for(a=[this.yf()];this.match(5);)a.push(this.yf());else a=yt(this);if(this.match(3))return a}else if(tt(this))return[];throw Error(ut(this));};l.Jn=function(){if(this.match(2)){var a=zt(this);if(this.match(3))return a}else if(tt(this))return[];throw Error(ut(this));};l.Ln=function(){if(this.match(2)){for(var a=[this.zf()];this.match(5);)a.push(this.zf());if(this.match(3))return a}else if(tt(this))return[];throw Error(ut(this));};function xt(a){for(var c=
[],d=0;2>d;++d){var e=a.b;if(a.match(4))c.push(e.value);else break}if(2==c.length)return c;throw Error(ut(a));}function yt(a){for(var c=[xt(a)];a.match(5);)c.push(xt(a));return c}function zt(a){for(var c=[a.xf()];a.match(5);)c.push(a.xf());return c}function tt(a){var c=1==a.b.type&&"EMPTY"==a.b.value;c&&(a.b=rt(a.a));return c}function ut(a){return"Unexpected `"+a.b.value+"` at position "+a.b.position+" in `"+a.a.a+"`"}var wt={POINT:E,LINESTRING:S,POLYGON:F,MULTIPOINT:oo,MULTILINESTRING:T,MULTIPOLYGON:po},
vt={POINT:pt.prototype.yf,LINESTRING:pt.prototype.xf,POLYGON:pt.prototype.zf,MULTIPOINT:pt.prototype.Kn,MULTILINESTRING:pt.prototype.Jn,MULTIPOLYGON:pt.prototype.Ln};function At(){this.version=void 0}y(At,ts);At.prototype.a=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType)return this.b(a);return null};At.prototype.b=function(a){this.version=a.getAttribute("version").trim();return(a=P({version:this.version},Bt,a,[]))?a:null};function Ct(a,c){return P({},Dt,a,c)}function Et(a,c){return P({},
Ft,a,c)}function Gt(a,c){var d=Ct(a,c);if(d){var e=[To(a.getAttribute("width")),To(a.getAttribute("height"))];d.size=e;return d}}function Ht(a,c){return P([],It,a,c)}var Jt=[null,"http://www.opengis.net/wms"],Bt=O(Jt,{Service:L(function(a,c){return P({},Kt,a,c)}),Capability:L(function(a,c){return P({},Lt,a,c)})}),Lt=O(Jt,{Request:L(function(a,c){return P({},Mt,a,c)}),Exception:L(function(a,c){return P([],Nt,a,c)}),Layer:L(function(a,c){return P({},Ot,a,c)})}),Kt=O(Jt,{Name:L(U),Title:L(U),Abstract:L(U),
KeywordList:L(Ht),OnlineResource:L(ss),ContactInformation:L(function(a,c){return P({},Pt,a,c)}),Fees:L(U),AccessConstraints:L(U),LayerLimit:L(So),MaxWidth:L(So),MaxHeight:L(So)}),Pt=O(Jt,{ContactPersonPrimary:L(function(a,c){return P({},Qt,a,c)}),ContactPosition:L(U),ContactAddress:L(function(a,c){return P({},Rt,a,c)}),ContactVoiceTelephone:L(U),ContactFacsimileTelephone:L(U),ContactElectronicMailAddress:L(U)}),Qt=O(Jt,{ContactPerson:L(U),ContactOrganization:L(U)}),Rt=O(Jt,{AddressType:L(U),Address:L(U),
City:L(U),StateOrProvince:L(U),PostCode:L(U),Country:L(U)}),Nt=O(Jt,{Format:Il(U)}),Ot=O(Jt,{Name:L(U),Title:L(U),Abstract:L(U),KeywordList:L(Ht),CRS:Kl(U),EX_GeographicBoundingBox:L(function(a,c){var d=P({},St,a,c);if(d){var e=d.westBoundLongitude,f=d.southBoundLatitude,g=d.eastBoundLongitude,d=d.northBoundLatitude;return void 0===e||void 0===f||void 0===g||void 0===d?void 0:[e,f,g,d]}}),BoundingBox:Kl(function(a){var c=[Ro(a.getAttribute("minx")),Ro(a.getAttribute("miny")),Ro(a.getAttribute("maxx")),
Ro(a.getAttribute("maxy"))],d=[Ro(a.getAttribute("resx")),Ro(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:c,res:d}}),Dimension:Kl(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:Oo(a.getAttribute("multipleValues")),nearestValue:Oo(a.getAttribute("nearestValue")),current:Oo(a.getAttribute("current")),values:U(a)}}),Attribution:L(function(a,c){return P({},Tt,a,
c)}),AuthorityURL:Kl(function(a,c){var d=Ct(a,c);if(d)return d.name=a.getAttribute("name"),d}),Identifier:Kl(U),MetadataURL:Kl(function(a,c){var d=Ct(a,c);if(d)return d.type=a.getAttribute("type"),d}),DataURL:Kl(Ct),FeatureListURL:Kl(Ct),Style:Kl(function(a,c){return P({},Ut,a,c)}),MinScaleDenominator:L(Qo),MaxScaleDenominator:L(Qo),Layer:Kl(function(a,c){var d=c[c.length-1],e=P({},Ot,a,c);if(e){var f=Oo(a.getAttribute("queryable"));void 0===f&&(f=d.queryable);e.queryable=void 0!==f?f:!1;f=To(a.getAttribute("cascaded"));
void 0===f&&(f=d.cascaded);e.cascaded=f;f=Oo(a.getAttribute("opaque"));void 0===f&&(f=d.opaque);e.opaque=void 0!==f?f:!1;f=Oo(a.getAttribute("noSubsets"));void 0===f&&(f=d.noSubsets);e.noSubsets=void 0!==f?f:!1;(f=Ro(a.getAttribute("fixedWidth")))||(f=d.fixedWidth);e.fixedWidth=f;(f=Ro(a.getAttribute("fixedHeight")))||(f=d.fixedHeight);e.fixedHeight=f;["Style","CRS","AuthorityURL"].forEach(function(a){a in d&&(e[a]=(e[a]||[]).concat(d[a]))});"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in
e||(e[a]=d[a])});return e}})}),Tt=O(Jt,{Title:L(U),OnlineResource:L(ss),LogoURL:L(Gt)}),St=O(Jt,{westBoundLongitude:L(Qo),eastBoundLongitude:L(Qo),southBoundLatitude:L(Qo),northBoundLatitude:L(Qo)}),Mt=O(Jt,{GetCapabilities:L(Et),GetMap:L(Et),GetFeatureInfo:L(Et)}),Ft=O(Jt,{Format:Kl(U),DCPType:Kl(function(a,c){return P({},Vt,a,c)})}),Vt=O(Jt,{HTTP:L(function(a,c){return P({},Wt,a,c)})}),Wt=O(Jt,{Get:L(Ct),Post:L(Ct)}),Ut=O(Jt,{Name:L(U),Title:L(U),Abstract:L(U),LegendURL:Kl(Gt),StyleSheetURL:L(Ct),
StyleURL:L(Ct)}),Dt=O(Jt,{Format:L(U),OnlineResource:L(ss)}),It=O(Jt,{Keyword:Il(U)});function Xt(a){a=a?a:{};this.g="http://mapserver.gis.umn.edu/mapserver";this.b=new Yo;this.c=a.layers?a.layers:null;Io.call(this)}y(Xt,Io);Xt.prototype.gc=function(a,c){var d={featureType:this.featureType,featureNS:this.featureNS};c&&mb(d,fo(this,a,c));var e=[d];a.setAttribute("namespaceURI",this.g);var f=a.localName,d=[];if(0!==a.childNodes.length){if("msGMLOutput"==f)for(var g=0,h=a.childNodes.length;g<h;g++){var k=
a.childNodes[g];if(1===k.nodeType){var m=e[0],n=k.localName.replace("_layer","");if(!this.c||Wa(this.c,n)){n+="_feature";m.featureType=n;m.featureNS=this.g;var p={};p[n]=Il(this.b.Cf,this.b);m=O([m.featureNS,null],p);k.setAttribute("namespaceURI",this.g);(k=P([],m,k,e,this.b))&&Za(d,k)}}}"FeatureCollection"==f&&(e=P([],this.b.b,a,[{}],this.b))&&(d=e)}return d};function Yt(){this.g=new us}y(Yt,ts);Yt.prototype.a=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType)return this.b(a);return null};
Yt.prototype.b=function(a){var c=a.getAttribute("version").trim(),d=this.g.b(a);if(!d)return null;d.version=c;return(d=P(d,Zt,a,[]))?d:null};function $t(a){var c=U(a).split(" ");if(c&&2==c.length)return a=+c[0],c=+c[1],isNaN(a)||isNaN(c)?void 0:[a,c]}var au=[null,"http://www.opengis.net/wmts/1.0"],bu=[null,"http://www.opengis.net/ows/1.1"],Zt=O(au,{Contents:L(function(a,c){return P({},cu,a,c)})}),cu=O(au,{Layer:Kl(function(a,c){return P({},du,a,c)}),TileMatrixSet:Kl(function(a,c){return P({},eu,a,
c)})}),du=O(au,{Style:Kl(function(a,c){var d=P({},fu,a,c);if(d){var e="true"===a.getAttribute("isDefault");d.isDefault=e;return d}}),Format:Kl(U),TileMatrixSetLink:Kl(function(a,c){return P({},gu,a,c)}),Dimension:Kl(function(a,c){return P({},hu,a,c)}),ResourceURL:Kl(function(a){var c=a.getAttribute("format"),d=a.getAttribute("template");a=a.getAttribute("resourceType");var e={};c&&(e.format=c);d&&(e.template=d);a&&(e.resourceType=a);return e})},O(bu,{Title:L(U),Abstract:L(U),WGS84BoundingBox:L(function(a,
c){var d=P([],iu,a,c);return 2!=d.length?void 0:nc(d)}),Identifier:L(U)})),fu=O(au,{LegendURL:Kl(function(a){var c={};c.format=a.getAttribute("format");c.href=ss(a);return c})},O(bu,{Title:L(U),Identifier:L(U)})),gu=O(au,{TileMatrixSet:L(U)}),hu=O(au,{Default:L(U),Value:Kl(U)},O(bu,{Identifier:L(U)})),iu=O(bu,{LowerCorner:Il($t),UpperCorner:Il($t)}),eu=O(au,{WellKnownScaleSet:L(U),TileMatrix:Kl(function(a,c){return P({},ju,a,c)})},O(bu,{SupportedCRS:L(U),Identifier:L(U)})),ju=O(au,{TopLeftCorner:L($t),
ScaleDenominator:L(Qo),TileWidth:L(So),TileHeight:L(So),MatrixWidth:L(So),MatrixHeight:L(So)},O(bu,{Identifier:L(U)}));function ku(a){Kb.call(this);a=a||{};this.a=null;this.c=sd;this.f=void 0;C(this,Mb("projection"),this.Bl,this);C(this,Mb("tracking"),this.Cl,this);void 0!==a.projection&&this.Wg(ad(a.projection));void 0!==a.trackingOptions&&this.ji(a.trackingOptions);this.be(void 0!==a.tracking?a.tracking:!1)}y(ku,Kb);l=ku.prototype;l.fa=function(){this.be(!1);ku.ia.fa.call(this)};l.Bl=function(){var a=
this.Ug();a&&(this.c=dd(ad("EPSG:4326"),a),this.a&&this.set("position",this.c(this.a)))};l.Cl=function(){if(eh){var a=this.Vg();a&&void 0===this.f?this.f=aa.navigator.geolocation.watchPosition(this.Sn.bind(this),this.Tn.bind(this),this.Fg()):a||void 0===this.f||(aa.navigator.geolocation.clearWatch(this.f),this.f=void 0)}};l.Sn=function(a){a=a.coords;this.set("accuracy",a.accuracy);this.set("altitude",null===a.altitude?void 0:a.altitude);this.set("altitudeAccuracy",null===a.altitudeAccuracy?void 0:
a.altitudeAccuracy);this.set("heading",null===a.heading?void 0:Pa(a.heading));this.a?(this.a[0]=a.longitude,this.a[1]=a.latitude):this.a=[a.longitude,a.latitude];var c=this.c(this.a);this.set("position",c);this.set("speed",null===a.speed?void 0:a.speed);a=ce(Rj,this.a,a.accuracy);a.oc(this.c);this.set("accuracyGeometry",a);this.u()};l.Tn=function(a){a.type="error";this.be(!1);this.b(a)};l.Cj=function(){return this.get("accuracy")};l.Dj=function(){return this.get("accuracyGeometry")||null};l.Fj=function(){return this.get("altitude")};
l.Gj=function(){return this.get("altitudeAccuracy")};l.zl=function(){return this.get("heading")};l.Al=function(){return this.get("position")};l.Ug=function(){return this.get("projection")};l.kk=function(){return this.get("speed")};l.Vg=function(){return this.get("tracking")};l.Fg=function(){return this.get("trackingOptions")};l.Wg=function(a){this.set("projection",a)};l.be=function(a){this.set("tracking",a)};l.ji=function(a){this.set("trackingOptions",a)};function lu(a,c,d){xd.call(this);this.Of(a,
c?c:0,d)}y(lu,xd);l=lu.prototype;l.clone=function(){var a=new lu(null),c=this.v.slice();zd(a,this.f,c);a.u();return a};l.ub=function(a,c,d,e){var f=this.v;a-=f[0];var g=c-f[1];c=a*a+g*g;if(c<e){if(0===c)for(e=0;e<this.a;++e)d[e]=f[e];else for(e=this.qf()/Math.sqrt(c),d[0]=f[0]+e*a,d[1]=f[1]+e*g,e=2;e<this.a;++e)d[e]=f[e];d.length=this.a;return c}return e};l.yc=function(a,c){var d=this.v,e=a-d[0],d=c-d[1];return e*e+d*d<=mu(this)};l.od=function(){return this.v.slice(0,this.a)};l.Ld=function(a){var c=
this.v,d=c[this.a]-c[0];return yc(c[0]-d,c[1]-d,c[0]+d,c[1]+d,a)};l.qf=function(){return Math.sqrt(mu(this))};function mu(a){var c=a.v[a.a]-a.v[0];a=a.v[a.a+1]-a.v[1];return c*c+a*a}l.X=function(){return"Circle"};l.Ka=function(a){var c=this.G();return Qc(a,c)?(c=this.od(),a[0]<=c[0]&&a[2]>=c[0]||a[1]<=c[1]&&a[3]>=c[1]?!0:Ec(a,this.lg,this)):!1};l.Vl=function(a){var c=this.a,d=this.v[c]-this.v[0],e=a.slice();e[c]=e[0]+d;for(d=1;d<c;++d)e[c+d]=a[d];zd(this,this.f,e);this.u()};l.Of=function(a,c,d){if(a){Ad(this,
d,a,0);this.v||(this.v=[]);d=this.v;a=Id(d,a);d[a++]=d[0]+c;var e;c=1;for(e=this.a;c<e;++c)d[a++]=d[c];d.length=a}else zd(this,"XY",null);this.u()};l.Wl=function(a){this.v[this.a]=this.v[0]+a;this.u()};function nu(a,c,d){for(var e=[],f=a(0),g=a(1),h=c(f),k=c(g),m=[g,f],n=[k,h],p=[1,0],q={},r=1E5,t,v,w,A,D;0<--r&&0<p.length;)w=p.pop(),f=m.pop(),h=n.pop(),g=w.toString(),g in q||(e.push(h[0],h[1]),q[g]=!0),A=p.pop(),g=m.pop(),k=n.pop(),D=(w+A)/2,t=a(D),v=c(t),Na(v[0],v[1],h[0],h[1],k[0],k[1])<d?(e.push(k[0],
k[1]),g=A.toString(),q[g]=!0):(p.push(A,D,D,w),n.push(k,v,v,h),m.push(g,t,t,f));return e}function ou(a,c,d,e,f){var g=ad("EPSG:4326");return nu(function(e){return[a,c+(d-c)*e]},rd(g,e),f)}function pu(a,c,d,e,f){var g=ad("EPSG:4326");return nu(function(e){return[c+(d-c)*e,a]},rd(g,e),f)}function qu(a){a=a||{};this.c=this.o=null;this.g=this.i=Infinity;this.f=this.j=-Infinity;this.B=this.U=Infinity;this.H=this.N=-Infinity;this.S=void 0!==a.targetSize?a.targetSize:100;this.D=void 0!==a.maxLines?a.maxLines:
100;this.b=[];this.a=[];this.va=void 0!==a.strokeStyle?a.strokeStyle:ru;this.A=this.l=void 0;this.s=null;this.setMap(void 0!==a.map?a.map:null)}var ru=new ik({color:"rgba(0,0,0,0.2)"}),su=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];function tu(a,c,d,e,f,g,h){var k=h;c=ou(c,d,e,a.c,f);k=void 0!==a.b[k]?a.b[k]:new S(null);k.ba("XY",c);Qc(k.G(),g)&&(a.b[h++]=k);return h}function uu(a,c,d,e,f){var g=f;c=pu(c,a.f,a.g,a.c,d);g=void 0!==a.a[g]?a.a[g]:new S(null);g.ba("XY",c);Qc(g.G(),e)&&(a.a[f++]=
g);return f}l=qu.prototype;l.Dl=function(){return this.o};l.Yj=function(){return this.b};l.ek=function(){return this.a};l.Kg=function(a){var c=a.vectorContext,d=a.frameState,e=d.extent;a=d.viewState;var f=a.center,g=a.projection,h=a.resolution;a=d.pixelRatio;a=h*h/(4*a*a);if(!this.c||!qd(this.c,g)){var k=ad("EPSG:4326"),m=g.G(),n=g.i,p=ud(n,k,g),q=n[2],r=n[1],t=n[0],v=p[3],w=p[2],A=p[1],p=p[0];this.i=n[3];this.g=q;this.j=r;this.f=t;this.U=v;this.B=w;this.N=A;this.H=p;this.l=rd(k,g);this.A=rd(g,k);
this.s=this.A(Nc(m));this.c=g}k=0;g.a&&(g=g.G(),k=Lc(g),d=d.focus[0],d<g[0]||d>g[2])&&(k*=Math.ceil((g[0]-d)/k),e=[e[0]+k,e[1],e[2]+k,e[3]]);d=this.s[0];g=this.s[1];k=-1;n=Math.pow(this.S*h,2);q=[];r=[];h=0;for(m=su.length;h<m;++h){t=su[h]/2;q[0]=d-t;q[1]=g-t;r[0]=d+t;r[1]=g+t;this.l(q,q);this.l(r,r);t=Math.pow(r[0]-q[0],2)+Math.pow(r[1]-q[1],2);if(t<=n)break;k=su[h]}h=k;if(-1==h)this.b.length=this.a.length=0;else{d=this.A(f);f=d[0];d=d[1];g=this.D;k=[Math.max(e[0],this.H),Math.max(e[1],this.N),Math.min(e[2],
this.B),Math.min(e[3],this.U)];k=ud(k,this.c,"EPSG:4326");n=k[3];r=k[1];f=Math.floor(f/h)*h;q=La(f,this.f,this.g);m=tu(this,q,r,n,a,e,0);for(k=0;q!=this.f&&k++<g;)q=Math.max(q-h,this.f),m=tu(this,q,r,n,a,e,m);q=La(f,this.f,this.g);for(k=0;q!=this.g&&k++<g;)q=Math.min(q+h,this.g),m=tu(this,q,r,n,a,e,m);this.b.length=m;d=Math.floor(d/h)*h;f=La(d,this.j,this.i);m=uu(this,f,a,e,0);for(k=0;f!=this.j&&k++<g;)f=Math.max(f-h,this.j),m=uu(this,f,a,e,m);f=La(d,this.j,this.i);for(k=0;f!=this.i&&k++<g;)f=Math.min(f+
h,this.i),m=uu(this,f,a,e,m);this.a.length=m}c.Qb(null,this.va);a=0;for(f=this.b.length;a<f;++a)h=this.b[a],c.dd(h,null);a=0;for(f=this.a.length;a<f;++a)h=this.a[a],c.dd(h,null)};l.setMap=function(a){this.o&&(this.o.J("postcompose",this.Kg,this),this.o.render());a&&(a.I("postcompose",this.Kg,this),a.render());this.o=a};function vu(a,c,d,e,f,g,h){ii.call(this,a,c,d,0,e);this.o=f;this.g=new Image;null!==g&&(this.g.crossOrigin=g);this.i={};this.c=null;this.state=0;this.j=h}y(vu,ii);vu.prototype.a=function(a){if(void 0!==
a){var c;a=x(a);if(a in this.i)return this.i[a];pb(this.i)?c=this.g:c=this.g.cloneNode(!1);return this.i[a]=c}return this.g};vu.prototype.s=function(){this.state=3;this.c.forEach(sb);this.c=null;ji(this)};vu.prototype.A=function(){void 0===this.resolution&&(this.resolution=Mc(this.extent)/this.g.height);this.state=2;this.c.forEach(sb);this.c=null;ji(this)};vu.prototype.load=function(){0==this.state&&(this.state=1,ji(this),this.c=[xb(this.g,"error",this.s,this),xb(this.g,"load",this.A,this)],this.j(this,
this.o))};function wu(a,c,d,e,f){Vf.call(this,a,c);this.o=d;this.g=new Image;null!==e&&(this.g.crossOrigin=e);this.c={};this.j=null;this.l=f}y(wu,Vf);l=wu.prototype;l.fa=function(){1==this.state&&xu(this);this.a&&Bb(this.a);this.state=5;Wf(this);wu.ia.fa.call(this)};l.fb=function(a){if(void 0!==a){var c=x(a);if(c in this.c)return this.c[c];a=pb(this.c)?this.g:this.g.cloneNode(!1);return this.c[c]=a}return this.g};l.gb=function(){return this.o};l.El=function(){this.state=3;xu(this);Wf(this)};l.Fl=
function(){this.state=this.g.naturalWidth&&this.g.naturalHeight?2:4;xu(this);Wf(this)};l.load=function(){0==this.state&&(this.state=1,Wf(this),this.j=[xb(this.g,"error",this.El,this),xb(this.g,"load",this.Fl,this)],this.l(this,this.o))};function xu(a){a.j.forEach(sb);a.j=null}function yu(a){a=a?a:{};Pi.call(this,{handleEvent:Tc});this.c=a.formatConstructors?a.formatConstructors:[];this.l=a.projection?ad(a.projection):null;this.a=null;this.target=a.target?a.target:null}y(yu,Pi);function zu(a){a=a.dataTransfer.files;
var c,d,e;c=0;for(d=a.length;c<d;++c){e=a.item(c);var f=new FileReader;f.addEventListener("load",qa(this.o,e).bind(this));f.readAsText(e)}}function Au(a){a.stopPropagation();a.preventDefault();a.dataTransfer.dropEffect="copy"}yu.prototype.o=function(a,c){var d=c.target.result,e=this.A,f=this.l;f||(f=e.aa().i);var e=this.c,g=[],h,k;h=0;for(k=e.length;h<k;++h){var m=new e[h];var n={featureProjection:f};try{g=m.Ea(d,n)}catch(p){g=null}if(g&&0<g.length)break}this.b(new Bu(Cu,this,a,g,f))};yu.prototype.setMap=
function(a){this.a&&(this.a.forEach(sb),this.a=null);yu.ia.setMap.call(this,a);a&&(a=this.target?this.target:a.a,this.a=[C(a,"drop",zu,this),C(a,"dragenter",Au,this),C(a,"dragover",Au,this),C(a,"drop",Au,this)])};var Cu="addfeatures";function Bu(a,c,d,e,f){Cb.call(this,a,c);this.features=e;this.file=d;this.projection=f}y(Bu,Cb);function Du(a){a=a?a:{};cj.call(this,{handleDownEvent:Eu,handleDragEvent:Fu,handleUpEvent:Gu});this.s=a.condition?a.condition:$i;this.a=this.c=void 0;this.l=0;this.B=void 0!==
a.duration?a.duration:400}y(Du,cj);function Fu(a){if(bj(a)){var c=a.map,d=c.ab(),e=a.pixel;a=e[0]-d[0]/2;e=d[1]/2-e[1];d=Math.atan2(e,a);a=Math.sqrt(a*a+e*e);e=c.aa();c.render();if(void 0!==this.c){var f=d-this.c;Qi(c,e,e.Ma()-f)}this.c=d;void 0!==this.a&&(d=this.a*(e.$()/a),Si(c,e,d));void 0!==this.a&&(this.l=this.a/a);this.a=a}}function Gu(a){if(!bj(a))return!0;a=a.map;var c=a.aa();le(c,-1);var d=this.l-1,e=c.Ma(),e=c.constrainRotation(e,0);Qi(a,c,e,void 0,void 0);var e=c.$(),f=this.B,e=c.constrainResolution(e,
0,d);Si(a,c,e,void 0,f);this.l=0;return!1}function Eu(a){return bj(a)&&this.s(a)?(le(a.map.aa(),1),this.a=this.c=void 0,!0):!1}function Hu(a,c){Cb.call(this,a);this.feature=c}y(Hu,Cb);function Iu(a){cj.call(this,{handleDownEvent:Ju,handleEvent:Ku,handleUpEvent:Lu});this.ya=null;this.S=!1;this.mc=a.source?a.source:null;this.sb=a.features?a.features:null;this.kj=a.snapTolerance?a.snapTolerance:12;this.Y=a.type;this.c=Mu(this.Y);this.Ua=a.minPoints?a.minPoints:this.c===Nu?3:2;this.ta=a.maxPoints?a.maxPoints:
Infinity;var c=a.geometryFunction;if(!c)if("Circle"===this.Y)c=function(a,c){var d=c?c:new lu([NaN,NaN]);d.Of(a[0],Math.sqrt(Xb(a[0],a[1])));return d};else{var d,c=this.c;c===Ou?d=E:c===Pu?d=S:c===Nu&&(d=F);c=function(a,c){var g=c;g?g.ma(a):g=new d(a);return g}}this.H=c;this.T=this.B=this.a=this.D=this.l=this.s=null;this.tj=a.clickTolerance?a.clickTolerance*a.clickTolerance:36;this.na=new G({source:new Q({useSpatialIndex:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:Qu()});this.lc=a.geometryName;
this.Di=a.condition?a.condition:Zi;this.oa=a.freehandCondition?a.freehandCondition:$i;C(this,Mb("active"),this.oi,this)}y(Iu,cj);function Qu(){var a=qk();return function(c){return a[c.W().X()]}}l=Iu.prototype;l.setMap=function(a){Iu.ia.setMap.call(this,a);this.oi()};function Ku(a){this.c!==Pu&&this.c!==Nu||!this.oa(a)||(this.S=!0);var c=!this.S;this.S&&a.type===ai?(Ru(this,a),c=!1):a.type===$h?c=Su(this,a):a.type===Uh&&(c=!1);return dj.call(this,a)&&c}function Ju(a){return this.Di(a)?(this.ya=a.pixel,
!0):this.S?(this.ya=a.pixel,this.s||Tu(this,a),!0):!1}function Lu(a){this.S=!1;var c=this.ya,d=a.pixel,e=c[0]-d[0],c=c[1]-d[1],d=!0;e*e+c*c<=this.tj&&(Su(this,a),this.s?this.c===Uu?this.ed():Vu(this,a)?this.ed():Ru(this,a):(Tu(this,a),this.c===Ou&&this.ed()),d=!1);return d}function Su(a,c){if(a.s){var d=c.coordinate,e=a.l.W(),f;a.c===Ou?f=a.a:a.c===Nu?(f=a.a[0],f=f[f.length-1],Vu(a,c)&&(d=a.s.slice())):(f=a.a,f=f[f.length-1]);f[0]=d[0];f[1]=d[1];a.H(a.a,e);a.D&&a.D.W().ma(d);e instanceof F&&a.c!==
Nu?(a.B||(a.B=new xl(new S(null))),e=e.Ag(0),d=a.B.W(),d.ba(e.f,e.ga())):a.T&&(d=a.B.W(),d.ma(a.T));Wu(a)}else d=c.coordinate.slice(),a.D?a.D.W().ma(d):(a.D=new xl(new E(d)),Wu(a));return!0}function Vu(a,c){var d=!1;if(a.l){var e=!1,f=[a.s];a.c===Pu?e=a.a.length>a.Ua:a.c===Nu&&(e=a.a[0].length>a.Ua,f=[a.a[0][0],a.a[0][a.a[0].length-2]]);if(e)for(var e=c.map,g=0,h=f.length;g<h;g++){var k=f[g],m=e.Ga(k),n=c.pixel,d=n[0]-m[0],m=n[1]-m[1],n=a.S&&a.oa(c)?1:a.kj;if(d=Math.sqrt(d*d+m*m)<=n){a.s=k;break}}}return d}
function Tu(a,c){var d=c.coordinate;a.s=d;a.c===Ou?a.a=d.slice():a.c===Nu?(a.a=[[d.slice(),d.slice()]],a.T=a.a[0]):(a.a=[d.slice(),d.slice()],a.c===Uu&&(a.T=a.a));a.T&&(a.B=new xl(new S(a.T)));d=a.H(a.a);a.l=new xl;a.lc&&a.l.Bc(a.lc);a.l.Ra(d);Wu(a);a.b(new Hu("drawstart",a.l))}function Ru(a,c){var d=c.coordinate,e=a.l.W(),f,g;if(a.c===Pu)a.s=d.slice(),g=a.a,g.push(d.slice()),f=g.length>a.ta,a.H(g,e);else if(a.c===Nu){g=a.a[0];g.push(d.slice());if(f=g.length>a.ta)a.s=g[0];a.H(a.a,e)}Wu(a);f&&a.ed()}
l.to=function(){var a=this.l.W(),c,d;this.c===Pu?(c=this.a,c.splice(-2,1),this.H(c,a)):this.c===Nu&&(c=this.a[0],c.splice(-2,1),d=this.B.W(),d.ma(c),this.H(this.a,a));0===c.length&&(this.s=null);Wu(this)};l.ed=function(){var a=Xu(this),c=this.a,d=a.W();this.c===Pu?(c.pop(),this.H(c,d)):this.c===Nu&&(c[0].pop(),c[0].push(c[0][0]),this.H(c,d));"MultiPoint"===this.Y?a.Ra(new oo([c])):"MultiLineString"===this.Y?a.Ra(new T([c])):"MultiPolygon"===this.Y&&a.Ra(new po([c]));this.b(new Hu("drawend",a));this.sb&&
this.sb.push(a);this.mc&&this.mc.tb(a)};function Xu(a){a.s=null;var c=a.l;c&&(a.l=null,a.D=null,a.B=null,a.na.ea().clear(!0));return c}l.cm=function(a){var c=a.W();this.l=a;this.a=c.Z();a=this.a[this.a.length-1];this.s=a.slice();this.a.push(a.slice());Wu(this);this.b(new Hu("drawstart",this.l))};l.Dc=Uc;function Wu(a){var c=[];a.l&&c.push(a.l);a.B&&c.push(a.B);a.D&&c.push(a.D);a=a.na.ea();a.clear(!0);a.Fc(c)}l.oi=function(){var a=this.A,c=this.f();a&&c||Xu(this);this.na.setMap(c?a:null)};function Mu(a){var c;
"Point"===a||"MultiPoint"===a?c=Ou:"LineString"===a||"MultiLineString"===a?c=Pu:"Polygon"===a||"MultiPolygon"===a?c=Nu:"Circle"===a&&(c=Uu);return c}var Ou="Point",Pu="LineString",Nu="Polygon",Uu="Circle";function Yu(a,c,d){Cb.call(this,a);this.features=c;this.mapBrowserPointerEvent=d}y(Yu,Cb);function Zu(a){cj.call(this,{handleDownEvent:$u,handleDragEvent:av,handleEvent:bv,handleUpEvent:cv});this.ta=a.deleteCondition?a.deleteCondition:Hg(Zi,Yi);this.oa=this.c=null;this.ya=[0,0];this.H=this.T=!1;
this.a=new $l;this.D=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.s=this.na=!1;this.l=null;this.S=new G({source:new Q({useSpatialIndex:!1,wrapX:!!a.wrapX}),style:a.style?a.style:dv(),updateWhileAnimating:!0,updateWhileInteracting:!0});this.Y={Point:this.jm,LineString:this.dh,LinearRing:this.dh,Polygon:this.km,MultiPoint:this.hm,MultiLineString:this.gm,MultiPolygon:this.im,GeometryCollection:this.fm};this.B=a.features;this.B.forEach(this.rf,this);C(this.B,"add",this.dm,this);C(this.B,"remove",
this.em,this)}y(Zu,cj);l=Zu.prototype;l.rf=function(a){var c=a.W();c.X()in this.Y&&this.Y[c.X()].call(this,a,c);(c=this.A)&&ev(this,this.ya,c);C(a,"change",this.bh,this)};function fv(a,c){a.H||(a.H=!0,a.b(new Yu("modifystart",a.B,c)))}function gv(a,c){hv(a,c);a.c&&0===a.B.Zb()&&(a.S.ea().mb(a.c),a.c=null);yb(c,"change",a.bh,a)}function hv(a,c){var d=a.a,e=[];d.forEach(function(a){c===a.feature&&e.push(a)});for(var f=e.length-1;0<=f;--f)d.remove(e[f])}l.setMap=function(a){this.S.setMap(a);Zu.ia.setMap.call(this,
a)};l.dm=function(a){this.rf(a.element)};l.bh=function(a){this.s||(a=a.target,gv(this,a),this.rf(a))};l.em=function(a){gv(this,a.element)};l.jm=function(a,c){var d=c.Z(),d={feature:a,geometry:c,ka:[d,d]};this.a.Aa(c.G(),d)};l.hm=function(a,c){var d=c.Z(),e,f,g;f=0;for(g=d.length;f<g;++f)e=d[f],e={feature:a,geometry:c,depth:[f],index:f,ka:[e,e]},this.a.Aa(c.G(),e)};l.dh=function(a,c){var d=c.Z(),e,f,g,h;e=0;for(f=d.length-1;e<f;++e)g=d.slice(e,e+2),h={feature:a,geometry:c,index:e,ka:g},this.a.Aa(nc(g),
h)};l.gm=function(a,c){var d=c.Z(),e,f,g,h,k,m,n;h=0;for(k=d.length;h<k;++h)for(e=d[h],f=0,g=e.length-1;f<g;++f)m=e.slice(f,f+2),n={feature:a,geometry:c,depth:[h],index:f,ka:m},this.a.Aa(nc(m),n)};l.km=function(a,c){var d=c.Z(),e,f,g,h,k,m,n;h=0;for(k=d.length;h<k;++h)for(e=d[h],f=0,g=e.length-1;f<g;++f)m=e.slice(f,f+2),n={feature:a,geometry:c,depth:[h],index:f,ka:m},this.a.Aa(nc(m),n)};l.im=function(a,c){var d=c.Z(),e,f,g,h,k,m,n,p,q,r;m=0;for(n=d.length;m<n;++m)for(p=d[m],h=0,k=p.length;h<k;++h)for(e=
p[h],f=0,g=e.length-1;f<g;++f)q=e.slice(f,f+2),r={feature:a,geometry:c,depth:[h,m],index:f,ka:q},this.a.Aa(nc(q),r)};l.fm=function(a,c){var d,e=c.c;for(d=0;d<e.length;++d)this.Y[e[d].X()].call(this,a,e[d])};function iv(a,c){var d=a.c;d?d.W().ma(c):(d=new xl(new E(c)),a.c=d,a.S.ea().tb(d))}function jv(a,c){return a.index-c.index}function $u(a){ev(this,a.pixel,a.map);this.l=[];this.H=!1;var c=this.c;if(c){var d=[],c=c.W().Z(),e=nc([c]),e=cm(this.a,e),f={};e.sort(jv);for(var g=0,h=e.length;g<h;++g){var k=
e[g],m=k.ka,n=x(k.feature),p=k.depth;p&&(n+="-"+p.join("-"));f[n]||(f[n]=Array(2));if(Vb(m[0],c)&&!f[n][0])this.l.push([k,0]),f[n][0]=k;else if(Vb(m[1],c)&&!f[n][1]){if("LineString"!==k.geometry.X()&&"MultiLineString"!==k.geometry.X()||!f[n][0]||0!==f[n][0].index)this.l.push([k,1]),f[n][1]=k}else x(m)in this.oa&&!f[n][0]&&!f[n][1]&&d.push([k,c])}d.length&&fv(this,a);for(a=d.length-1;0<=a;--a)this.bl.apply(this,d[a])}return!!this.c}function av(a){this.T=!1;fv(this,a);a=a.coordinate;for(var c=0,d=this.l.length;c<
d;++c){for(var e=this.l[c],f=e[0],g=f.depth,h=f.geometry,k=h.Z(),m=f.ka,e=e[1];a.length<h.ra();)a.push(0);switch(h.X()){case "Point":k=a;m[0]=m[1]=a;break;case "MultiPoint":k[f.index]=a;m[0]=m[1]=a;break;case "LineString":k[f.index+e]=a;m[e]=a;break;case "MultiLineString":k[g[0]][f.index+e]=a;m[e]=a;break;case "Polygon":k[g[0]][f.index+e]=a;m[e]=a;break;case "MultiPolygon":k[g[1]][g[0]][f.index+e]=a,m[e]=a}f=h;this.s=!0;f.ma(k);this.s=!1}iv(this,a)}function cv(a){for(var c,d=this.l.length-1;0<=d;--d)c=
this.l[d][0],am(this.a,nc(c.ka),c);this.H&&(this.b(new Yu("modifyend",this.B,a)),this.H=!1);return!1}function bv(a){if(!(a instanceof Qh))return!0;var c;a.map.aa().f.slice()[1]||a.type!=$h||this.N||(this.ya=a.pixel,ev(this,a.pixel,a.map));if(this.c&&this.ta(a))if(a.type==Vh&&this.T)c=!0;else{this.c.W();fv(this,a);c=this.l;var d={},e,f,g,h,k,m,n,p,q;for(k=c.length-1;0<=k;--k)if(g=c[k],p=g[0],h=p.geometry,f=h.Z(),q=x(p.feature),p.depth&&(q+="-"+p.depth.join("-")),n=e=m=void 0,0===g[1]?(e=p,m=p.index):
1==g[1]&&(n=p,m=p.index+1),q in d||(d[q]=[n,e,m]),g=d[q],void 0!==n&&(g[0]=n),void 0!==e&&(g[1]=e),void 0!==g[0]&&void 0!==g[1]){e=f;q=!1;n=m-1;switch(h.X()){case "MultiLineString":f[p.depth[0]].splice(m,1);q=!0;break;case "LineString":f.splice(m,1);q=!0;break;case "MultiPolygon":e=e[p.depth[1]];case "Polygon":e=e[p.depth[0]],4<e.length&&(m==e.length-1&&(m=0),e.splice(m,1),q=!0,0===m&&(e.pop(),e.push(e[0]),n=e.length-1))}q&&(this.a.remove(g[0]),this.a.remove(g[1]),e=h,this.s=!0,e.ma(f),this.s=!1,
f={depth:p.depth,feature:p.feature,geometry:p.geometry,index:n,ka:[g[0].ka[0],g[1].ka[1]]},this.a.Aa(nc(f.ka),f),kv(this,h,m,p.depth,-1),this.c&&(this.S.ea().mb(this.c),this.c=null))}c=!0;this.b(new Yu("modifyend",this.B,a));this.H=!1}a.type==Vh&&(this.T=!1);return dj.call(this,a)&&!c}function ev(a,c,d){function e(a,c){return Yb(f,a.ka)-Yb(f,c.ka)}var f=d.Oa(c),g=d.Oa([c[0]-a.D,c[1]+a.D]),h=d.Oa([c[0]+a.D,c[1]-a.D]),g=nc([g,h]),g=cm(a.a,g);if(0<g.length){g.sort(e);var h=g[0].ka,k=Sb(f,h),m=d.Ga(k);
if(Math.sqrt(Xb(c,m))<=a.D){c=d.Ga(h[0]);d=d.Ga(h[1]);c=Xb(m,c);d=Xb(m,d);a.na=Math.sqrt(Math.min(c,d))<=a.D;a.na&&(k=c>d?h[1]:h[0]);iv(a,k);d={};d[x(h)]=!0;c=1;for(m=g.length;c<m;++c)if(k=g[c].ka,Vb(h[0],k[0])&&Vb(h[1],k[1])||Vb(h[0],k[1])&&Vb(h[1],k[0]))d[x(k)]=!0;else break;a.oa=d;return}}a.c&&(a.S.ea().mb(a.c),a.c=null)}l.bl=function(a,c){for(var d=a.ka,e=a.feature,f=a.geometry,g=a.depth,h=a.index,k;c.length<f.ra();)c.push(0);switch(f.X()){case "MultiLineString":k=f.Z();k[g[0]].splice(h+1,0,c);
break;case "Polygon":k=f.Z();k[g[0]].splice(h+1,0,c);break;case "MultiPolygon":k=f.Z();k[g[1]][g[0]].splice(h+1,0,c);break;case "LineString":k=f.Z();k.splice(h+1,0,c);break;default:return}this.s=!0;f.ma(k);this.s=!1;k=this.a;k.remove(a);kv(this,f,h,g,1);var m={ka:[d[0],c],feature:e,geometry:f,depth:g,index:h};k.Aa(nc(m.ka),m);this.l.push([m,1]);d={ka:[c,d[1]],feature:e,geometry:f,depth:g,index:h+1};k.Aa(nc(d.ka),d);this.l.push([d,0]);this.T=!0};function kv(a,c,d,e,f){em(a.a,c.G(),function(a){a.geometry===
c&&(void 0===e||void 0===a.depth||bb(a.depth,e))&&a.index>d&&(a.index+=f)})}function dv(){var a=qk();return function(){return a.Point}}function lv(a,c,d,e){Cb.call(this,a);this.selected=c;this.deselected=d;this.mapBrowserEvent=e}y(lv,Cb);function mv(a){Pi.call(this,{handleEvent:nv});var c=a?a:{};this.N=c.condition?c.condition:Yi;this.B=c.addCondition?c.addCondition:Uc;this.H=c.removeCondition?c.removeCondition:Uc;this.D=c.toggleCondition?c.toggleCondition:$i;this.s=c.multi?c.multi:!1;this.o=c.filter?
c.filter:Tc;this.c=new G({source:new Q({useSpatialIndex:!1,features:c.features,wrapX:c.wrapX}),style:c.style?c.style:ov(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(c.layers)if(ia(c.layers))a=function(a){return c.layers(a)};else{var d=c.layers;a=function(a){return Wa(d,a)}}else a=Tc;this.l=a;this.a={};a=this.c.ea().c;C(a,"add",this.lm,this);C(a,"remove",this.om,this)}y(mv,Pi);l=mv.prototype;l.mm=function(){return this.c.ea().c};l.nm=function(a){a=x(a);return this.a[a]};function nv(a){if(!this.N(a))return!0;
var c=this.B(a),d=this.H(a),e=this.D(a),f=!c&&!d&&!e,g=a.map,h=this.c.ea().c,k=[],m=[],n=!1;if(f)g.fd(a.pixel,function(a,c){if(this.o(a,c)){m.push(a);var d=x(a);this.a[d]=c;return!this.s}},this,this.l),0<m.length&&1==h.Zb()&&h.item(0)==m[0]||(n=!0,0!==h.Zb()&&(k=Array.prototype.concat(h.a),h.clear()),h.jf(m),0===m.length?nb(this.a):0<k.length&&k.forEach(function(a){a=x(a);delete this.a[a]},this));else{g.fd(a.pixel,function(a,f){if(this.o(a,f)){if(!c&&!e||Wa(h.a,a))(d||e)&&Wa(h.a,a)&&(k.push(a),g=
x(a),delete this.a[g]);else{m.push(a);var g=x(a);this.a[g]=f}return!this.s}},this,this.l);for(f=k.length-1;0<=f;--f)h.remove(k[f]);h.jf(m);if(0<m.length||0<k.length)n=!0}n&&this.b(new lv("select",m,k,a));return Xi(a)}l.setMap=function(a){var c=this.A,d=this.c.ea().c;c&&d.forEach(c.mi,c);mv.ia.setMap.call(this,a);this.c.setMap(a);a&&d.forEach(a.ki,a)};function ov(){var a=qk();Za(a.Polygon,a.LineString);Za(a.GeometryCollection,a.LineString);return function(c){return a[c.W().X()]}}l.lm=function(a){a=
a.element;var c=this.A;c&&c.ki(a)};l.om=function(a){a=a.element;var c=this.A;c&&c.mi(a)};function pv(a){cj.call(this,{handleEvent:qv,handleDownEvent:Tc,handleUpEvent:rv});a=a?a:{};this.s=a.source?a.source:null;this.na=void 0!==a.vertex?a.vertex:!0;this.T=void 0!==a.edge?a.edge:!0;this.l=a.features?a.features:null;this.oa=[];this.H={};this.D={};this.Y={};this.B={};this.S=null;this.c=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.ta=sv.bind(this);this.a=new $l;this.ya={Point:this.um,LineString:this.gh,
LinearRing:this.gh,Polygon:this.vm,MultiPoint:this.sm,MultiLineString:this.rm,MultiPolygon:this.tm,GeometryCollection:this.qm}}y(pv,cj);l=pv.prototype;l.tb=function(a,c){var d=void 0!==c?c:!0,e=a.W(),f=this.ya[e.X()];if(f){var g=x(a);this.Y[g]=e.G(oc());f.call(this,a,e);d&&(this.D[g]=C(e,"change",this.Ak.bind(this,a),this),this.H[g]=C(a,Mb(a.a),this.pm,this))}};l.zj=function(a){this.tb(a)};l.Aj=function(a){this.mb(a)};l.eh=function(a){var c;a instanceof jm?c=a.feature:a instanceof Be&&(c=a.element);
this.tb(c)};l.fh=function(a){var c;a instanceof jm?c=a.feature:a instanceof Be&&(c=a.element);this.mb(c)};l.pm=function(a){a=a.target;this.mb(a,!0);this.tb(a,!0)};l.Ak=function(a){if(this.N){var c=x(a);c in this.B||(this.B[c]=a)}else this.ni(a)};l.mb=function(a,c){var d=void 0!==c?c:!0,e=x(a),f=this.Y[e];if(f){var g=this.a,h=[];em(g,f,function(c){a===c.feature&&h.push(c)});for(f=h.length-1;0<=f;--f)g.remove(h[f]);d&&(Ib(this.D[e]),delete this.D[e],Ib(this.H[e]),delete this.H[e])}};l.setMap=function(a){var c=
this.A,d=this.oa,e;this.l?e=this.l:this.s&&(e=this.s.je());c&&(d.forEach(Ib),d.length=0,e.forEach(this.Aj,this));pv.ia.setMap.call(this,a);a&&(this.l?d.push(C(this.l,"add",this.eh,this),C(this.l,"remove",this.fh,this)):this.s&&d.push(C(this.s,"addfeature",this.eh,this),C(this.s,"removefeature",this.fh,this)),e.forEach(this.zj,this))};l.Dc=Uc;l.ni=function(a){this.mb(a,!1);this.tb(a,!1)};l.qm=function(a,c){var d,e=c.c;for(d=0;d<e.length;++d)this.ya[e[d].X()].call(this,a,e[d])};l.gh=function(a,c){var d=
c.Z(),e,f,g,h;e=0;for(f=d.length-1;e<f;++e)g=d.slice(e,e+2),h={feature:a,ka:g},this.a.Aa(nc(g),h)};l.rm=function(a,c){var d=c.Z(),e,f,g,h,k,m,n;h=0;for(k=d.length;h<k;++h)for(e=d[h],f=0,g=e.length-1;f<g;++f)m=e.slice(f,f+2),n={feature:a,ka:m},this.a.Aa(nc(m),n)};l.sm=function(a,c){var d=c.Z(),e,f,g;f=0;for(g=d.length;f<g;++f)e=d[f],e={feature:a,ka:[e,e]},this.a.Aa(c.G(),e)};l.tm=function(a,c){var d=c.Z(),e,f,g,h,k,m,n,p,q,r;m=0;for(n=d.length;m<n;++m)for(p=d[m],h=0,k=p.length;h<k;++h)for(e=p[h],f=
0,g=e.length-1;f<g;++f)q=e.slice(f,f+2),r={feature:a,ka:q},this.a.Aa(nc(q),r)};l.um=function(a,c){var d=c.Z(),d={feature:a,ka:[d,d]};this.a.Aa(c.G(),d)};l.vm=function(a,c){var d=c.Z(),e,f,g,h,k,m,n;h=0;for(k=d.length;h<k;++h)for(e=d[h],f=0,g=e.length-1;f<g;++f)m=e.slice(f,f+2),n={feature:a,ka:m},this.a.Aa(nc(m),n)};function qv(a){var c,d;d=a.pixel;var e=a.coordinate;c=a.map;var f=c.Oa([d[0]-this.c,d[1]+this.c]),g=c.Oa([d[0]+this.c,d[1]-this.c]),f=nc([f,g]),h=cm(this.a,f),k=!1,f=!1,m=null,g=null;if(0<
h.length){this.S=e;h.sort(this.ta);h=h[0].ka;if(this.na&&!this.T){if(e=c.Ga(h[0]),k=c.Ga(h[1]),e=Xb(d,e),d=Xb(d,k),k=Math.sqrt(Math.min(e,d)),k=k<=this.c)f=!0,m=e>d?h[1]:h[0],g=c.Ga(m)}else this.T&&(m=Sb(e,h),g=c.Ga(m),Math.sqrt(Xb(d,g))<=this.c&&(f=!0,this.na&&(e=c.Ga(h[0]),k=c.Ga(h[1]),e=Xb(g,e),d=Xb(g,k),k=Math.sqrt(Math.min(e,d)),k=k<=this.c)))&&(m=e>d?h[1]:h[0],g=c.Ga(m));f&&(g=[Math.round(g[0]),Math.round(g[1])])}c=m;d=g;f&&(a.coordinate=c.slice(0,2),a.pixel=d);return dj.call(this,a)}function rv(){var a=
ob(this.B);a.length&&(a.forEach(this.ni,this),this.B={});return!1}function sv(a,c){return Yb(this.S,a.ka)-Yb(this.S,c.ka)}function tv(a,c,d){Cb.call(this,a);this.features=c;this.coordinate=d}y(tv,Cb);function uv(a){cj.call(this,{handleDownEvent:vv,handleDragEvent:wv,handleMoveEvent:xv,handleUpEvent:yv});this.s=void 0;this.a=null;this.c=void 0!==a.features?a.features:null;this.l=null}y(uv,cj);function vv(a){this.l=zv(this,a.pixel,a.map);return!this.a&&this.l?(this.a=a.coordinate,xv.call(this,a),this.b(new tv("translatestart",
this.c,a.coordinate)),!0):!1}function yv(a){return this.a?(this.a=null,xv.call(this,a),this.b(new tv("translateend",this.c,a.coordinate)),!0):!1}function wv(a){if(this.a){a=a.coordinate;var c=a[0]-this.a[0],d=a[1]-this.a[1];if(this.c)this.c.forEach(function(a){var e=a.W();e.Mc(c,d);a.Ra(e)});else if(this.l){var e=this.l.W();e.Mc(c,d);this.l.Ra(e)}this.a=a;this.b(new tv("translating",this.c,a))}}function xv(a){var c=a.map.vc();if(a=a.map.fd(a.pixel,function(a){return a})){var d=!1;this.c&&Wa(this.c.a,
a)&&(d=!0);this.s=c.style.cursor;c.style.cursor=this.a?"-webkit-grabbing":d?"-webkit-grab":"pointer";c.style.cursor=this.a?d?"grab":"pointer":"grabbing"}else c.style.cursor=void 0!==this.s?this.s:"",this.s=void 0}function zv(a,c,d){var e=null;c=d.fd(c,function(a){return a});a.c&&Wa(a.c.a,c)&&(e=c);return e}function V(a){a=a?a:{};var c=mb({},a);delete c.gradient;delete c.radius;delete c.blur;delete c.shadow;delete c.weight;G.call(this,c);this.i=null;this.Y=void 0!==a.shadow?a.shadow:250;this.T=void 0;
this.S=null;C(this,Mb("gradient"),this.Bk,this);this.ai(a.gradient?a.gradient:Av);this.Wh(void 0!==a.blur?a.blur:15);this.jh(void 0!==a.radius?a.radius:8);C(this,Mb("blur"),this.ef,this);C(this,Mb("radius"),this.ef,this);this.ef();var d=a.weight?a.weight:"weight",e;"string"===typeof d?e=function(a){return a.get(d)}:e=d;this.c(function(a){a=e(a);a=void 0!==a?La(a,0,1):1;var c=255*a|0,d=this.S[c];d||(d=[new lk({image:new xi({opacity:a,src:this.T})})],this.S[c]=d);return d}.bind(this));this.set("renderOrder",
null);C(this,"render",this.Sk,this)}y(V,G);var Av=["#00f","#0ff","#0f0","#ff0","#f00"];l=V.prototype;l.rg=function(){return this.get("blur")};l.zg=function(){return this.get("gradient")};l.ih=function(){return this.get("radius")};l.Bk=function(){for(var a=this.zg(),c=Pg(1,256),d=c.createLinearGradient(0,0,1,256),e=1/(a.length-1),f=0,g=a.length;f<g;++f)d.addColorStop(f*e,a[f]);c.fillStyle=d;c.fillRect(0,0,1,256);this.i=c.getImageData(0,0,1,256).data};l.ef=function(){var a=this.ih(),c=this.rg(),d=a+
c+1,e=2*d,e=Pg(e,e);e.shadowOffsetX=e.shadowOffsetY=this.Y;e.shadowBlur=c;e.shadowColor="#000";e.beginPath();c=d-this.Y;e.arc(c,c,a,0,2*Math.PI,!0);e.fill();this.T=e.canvas.toDataURL();this.S=Array(256);this.u()};l.Sk=function(a){a=a.context;var c=a.canvas,c=a.getImageData(0,0,c.width,c.height),d=c.data,e,f,g;e=0;for(f=d.length;e<f;e+=4)if(g=4*d[e+3])d[e]=this.i[g],d[e+1]=this.i[g+1],d[e+2]=this.i[g+2];a.putImageData(c,0,0)};l.Wh=function(a){this.set("blur",a)};l.ai=function(a){this.set("gradient",
a)};l.jh=function(a){this.set("radius",a)};function Bv(a,c,d,e){function f(){delete aa[h];g.parentNode.removeChild(g)}var g=aa.document.createElement("script"),h="olc_"+x(c);g.async=!0;g.src=a+(-1==a.indexOf("?")?"?":"&")+(e||"callback")+"="+h;var k=aa.setTimeout(function(){f();d&&d()},1E4);aa[h]=function(a){aa.clearTimeout(k);f();c(a)};aa.document.getElementsByTagName("head")[0].appendChild(g)}function Cv(a,c,d,e,f,g,h,k,m,n,p){Vf.call(this,f,0);this.N=void 0!==p?p:!1;this.B=h;this.U=k;this.i=null;
this.c={};this.j=c;this.l=e;this.s=g?g:f;this.g=[];this.Qc=null;this.o=0;g=e.Da(this.s);k=this.l.G();f=this.j.G();g=k?Pc(g,k):g;if(0===Jc(g))this.state=4;else if((k=a.G())&&(f?f=Pc(f,k):f=k),e=e.$(this.s[0]),e=hl(a,d,Nc(g),e),!isFinite(e)||0>=e)this.state=4;else if(this.A=new kl(a,d,g,f,e*(void 0!==n?n:.5)),0===this.A.f.length)this.state=4;else if(this.o=ig(c,e),d=ml(this.A),f&&(a.a?(d[1]=La(d[1],f[1],f[3]),d[3]=La(d[3],f[1],f[3])):d=Pc(d,f)),Jc(d))if(a=dg(c,d,this.o),100>(a.wa-a.ua+1)*(a.Ba-a.za+
1)){for(c=a.ua;c<=a.wa;c++)for(d=a.za;d<=a.Ba;d++)(n=m(this.o,c,d,h))&&this.g.push(n);0===this.g.length&&(this.state=4)}else this.state=3;else this.state=4}y(Cv,Vf);Cv.prototype.fa=function(){1==this.state&&(this.Qc.forEach(sb),this.Qc=null);Cv.ia.fa.call(this)};Cv.prototype.fb=function(a){if(void 0!==a){var c=x(a);if(c in this.c)return this.c[c];a=pb(this.c)?this.i:this.i.cloneNode(!1);return this.c[c]=a}return this.i};Cv.prototype.wd=function(){var a=[];this.g.forEach(function(c){c&&2==c.V()&&a.push({extent:this.j.Da(c.ja),
image:c.fb()})},this);this.g.length=0;if(0===a.length)this.state=3;else{var c=this.s[0],d=this.l.Ya(c),e=ha(d)?d:d[0],d=ha(d)?d:d[1],c=this.l.$(c),f=this.j.$(this.o),g=this.l.Da(this.s);this.i=jl(e,d,this.B,f,this.j.G(),c,g,this.A,a,this.U,this.N);this.state=2}Wf(this)};Cv.prototype.load=function(){if(0==this.state){this.state=1;Wf(this);var a=0;this.Qc=[];this.g.forEach(function(c){var d=c.V();if(0==d||1==d){a++;var e;e=C(c,"change",function(){var d=c.V();if(2==d||3==d||4==d)sb(e),a--,0===a&&(this.Qc.forEach(sb),
this.Qc=null,this.wd())},this);this.Qc.push(e)}},this);this.g.forEach(function(a){0==a.V()&&a.load()});0===a&&aa.setTimeout(this.wd.bind(this),0)}};function W(a){wm.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:Dv,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX});this.crossOrigin=
void 0!==a.crossOrigin?a.crossOrigin:null;this.tileClass=void 0!==a.tileClass?a.tileClass:wu;this.i={};this.l={};this.oa=a.reprojectionErrorThreshold;this.B=!1}y(W,wm);l=W.prototype;l.th=function(){if(Tf(this.a))return!0;for(var a in this.i)if(Tf(this.i[a]))return!0;return!1};l.uh=function(a,c){var d=this.ld(a);Uf(this.a,this.a==d?c:{});for(var e in this.i){var f=this.i[e];Uf(f,f==d?c:{})}};l.Pd=function(a){return this.f&&a&&!qd(this.f,a)?0:this.$e()};l.$e=function(){return 0};l.cf=function(a){return this.f&&
a&&!qd(this.f,a)?!1:W.ia.cf.call(this,a)};l.eb=function(a){var c=this.f;return!this.tileGrid||c&&!qd(c,a)?(c=x(a).toString(),c in this.l||(this.l[c]=jg(a)),this.l[c]):this.tileGrid};l.ld=function(a){var c=this.f;if(!c||qd(c,a))return this.a;a=x(a).toString();a in this.i||(this.i[a]=new Sf);return this.i[a]};function Ev(a,c,d,e,f,g,h){c=[c,d,e];f=(d=qg(a,c,g))?a.tileUrlFunction(d,f,g):void 0;f=new a.tileClass(c,void 0!==f?0:4,void 0!==f?f:"",a.crossOrigin,a.tileLoadFunction);f.key=h;C(f,"change",a.vh,
a);return f}l.Lb=function(a,c,d,e,f){if(this.f&&f&&!qd(this.f,f)){var g=this.ld(f);c=[a,c,d];a=this.Cb.apply(this,c);if(Rf(g,a))return g.get(a);var h=this.f;d=this.eb(h);var k=this.eb(f),m=qg(this,c,f);e=new Cv(h,d,f,k,c,m,this.Yb(e),this.$e(),function(a,c,d,e){return Fv(this,a,c,d,e,h)}.bind(this),this.oa,this.B);g.set(a,e);return e}return Fv(this,a,c,d,e,f)};function Fv(a,c,d,e,f,g){var h=null,k=a.Cb(c,d,e),m=a.af();if(Rf(a.a,k)){if(h=a.a.get(k),h.key!=m){var n=h;h.a&&h.a.key==m?(h=h.a,2==n.V()&&
(h.a=n)):(h=Ev(a,c,d,e,f,g,m),2==n.V()?h.a=n:n.a&&2==n.a.V()&&(h.a=n.a,n.a=null));h.a&&(h.a.a=null);a.a.replace(k,h)}}else h=Ev(a,c,d,e,f,g,m),a.a.set(k,h);return h}l.nb=function(a){if(this.B!=a){this.B=a;for(var c in this.i)this.i[c].clear();this.u()}};l.ob=function(a,c){var d=ad(a);d&&(d=x(d).toString(),d in this.l||(this.l[d]=c))};function Dv(a,c){a.fb().src=c}function Gv(a){W.call(this,{cacheSize:a.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:ad("EPSG:3857"),reprojectionErrorThreshold:a.reprojectionErrorThreshold,
state:"loading",tileLoadFunction:a.tileLoadFunction,wrapX:void 0!==a.wrapX?a.wrapX:!0});this.o=void 0!==a.culture?a.culture:"en-us";this.c=void 0!==a.maxZoom?a.maxZoom:-1;Bv("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+a.imagerySet+"?uriScheme=https&include=ImageryProviders&key="+a.key,this.s.bind(this),void 0,"jsonp")}y(Gv,W);var Hv=new Ae({html:'<a class="ol-attribution-bing-tos" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'});Gv.prototype.s=function(a){if(200!=
a.statusCode||"OK"!=a.statusDescription||"ValidCredentials"!=a.authenticationResultCode||1!=a.resourceSets.length||1!=a.resourceSets[0].resources.length)Zf(this,"error");else{var c=a.brandLogoUri;-1==c.indexOf("https")&&(c=c.replace("http","https"));var d=a.resourceSets[0].resources[0],e=-1==this.c?d.zoomMax:this.c;a=kg(this.f);var f=mg({extent:a,minZoom:d.zoomMin,maxZoom:e,tileSize:d.imageWidth==d.imageHeight?d.imageWidth:[d.imageWidth,d.imageHeight]});this.tileGrid=f;var g=this.o;this.tileUrlFunction=
tm(d.imageUrlSubdomains.map(function(a){var c=[0,0,0],e=d.imageUrl.replace("{subdomain}",a).replace("{culture}",g);return function(a){if(a)return ue(a[0],a[1],-a[2]-1,c),e.replace("{quadkey}",ve(c))}}));if(d.imageryProviders){var h=dd(ad("EPSG:4326"),this.f);a=d.imageryProviders.map(function(a){var c=a.attribution,d={};a.coverageAreas.forEach(function(a){var c=a.zoomMin,g=Math.min(a.zoomMax,e);a=a.bbox;a=Sc([a[1],a[0],a[3],a[2]],h);var k,m;for(k=c;k<=g;++k)m=k.toString(),c=dg(f,a,k),m in d?d[m].push(c):
d[m]=[c]});return new Ae({html:c,tileRanges:d})});a.push(Hv);this.la(a)}this.H=c;Zf(this,"ready")}};function Iv(a){var c=void 0!==a.projection?a.projection:"EPSG:3857",d=void 0!==a.tileGrid?a.tileGrid:mg({extent:kg(c),maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize});W.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:a.opaque,projection:c,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:d,tileLoadFunction:a.tileLoadFunction,
tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0})}y(Iv,W);function Jv(a){this.s=a.account;this.A=a.map||"";this.c=a.config||{};this.o={};Iv.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,maxZoom:void 0!==a.maxZoom?a.maxZoom:18,minZoom:a.minZoom,projection:a.projection,wrapX:a.wrapX});Kv(this)}y(Jv,Iv);Jv.prototype.D=function(){return this.c};Jv.prototype.Y=function(a){for(var c in a)this.c[c]=
a[c];Kv(this)};function Kv(a){var c=JSON.stringify(a.c);if(a.o[c])Lv(a,a.o[c]);else{var d="https://"+a.s+".cartodb.com/api/v1/map";a.A&&(d+="/named/"+a.A);var e=new XMLHttpRequest;e.addEventListener("load",a.T.bind(a,c));e.addEventListener("error",a.S.bind(a));e.open("POST",d);e.setRequestHeader("Content-type","application/json");e.send(JSON.stringify(a.c))}}Jv.prototype.T=function(a,c){var d=c.target;if(200<=d.status&&300>d.status){var e;try{e=JSON.parse(d.responseText)}catch(f){Zf(this,"error");
return}Lv(this,e);this.o[a]=e}else Zf(this,"error")};Jv.prototype.S=function(){Zf(this,"error")};function Lv(a,c){a.Pa("https://"+c.cdn_url.https+"/"+a.s+"/api/v1/map/"+c.layergroupid+"/{z}/{x}/{y}.png")}function X(a){Q.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,wrapX:a.wrapX});this.B=void 0;this.oa=void 0!==a.distance?a.distance:20;this.A=[];this.Y=a.geometryFunction||function(a){return a.W()};this.s=a.source;this.s.I("change",X.prototype.Ua,this)}
y(X,Q);X.prototype.ta=function(){return this.s};X.prototype.Jc=function(a,c,d){this.s.Jc(a,c,d);c!==this.B&&(this.clear(),this.B=c,Mv(this),this.Fc(this.A))};X.prototype.Ua=function(){this.clear();Mv(this);this.Fc(this.A);this.u()};function Mv(a){if(void 0!==a.B){a.A.length=0;for(var c=oc(),d=a.oa*a.B,e=a.s.je(),f={},g=0,h=e.length;g<h;g++){var k=e[g];x(k).toString()in f||!(k=a.Y(k))||(k=k.Z(),zc(k,c),qc(c,d,c),k=a.s.Ze(c),k=k.filter(function(a){a=x(a).toString();return a in f?!1:f[a]=!0}),a.A.push(Nv(a,
k)))}}}function Nv(a,c){for(var d=[0,0],e=c.length-1;0<=e;--e){var f=a.Y(c[e]);f?Rb(d,f.Z()):c.splice(e,1)}e=1/c.length;d[0]*=e;d[1]*=e;d=new xl(new E(d));d.set("features",c);return d}function Ov(a){pl.call(this,{projection:a.projection,resolutions:a.resolutions});this.T=void 0!==a.crossOrigin?a.crossOrigin:null;this.l=void 0!==a.displayDpi?a.displayDpi:96;this.j=a.params||{};this.S=a.url;this.c=void 0!==a.imageLoadFunction?a.imageLoadFunction:vl;this.Y=void 0!==a.hidpi?a.hidpi:!0;this.oa=void 0!==
a.metersPerUnit?a.metersPerUnit:1;this.s=void 0!==a.ratio?a.ratio:1;this.ta=void 0!==a.useOverlay?a.useOverlay:!1;this.i=null;this.D=0}y(Ov,pl);l=Ov.prototype;l.Em=function(){return this.j};l.gd=function(a,c,d){c=ql(this,c);d=this.Y?d:1;var e=this.i;if(e&&this.D==this.g&&e.$()==c&&e.f==d&&wc(e.G(),a))return e;1!=this.s&&(a=a.slice(),Rc(a,this.s));var f=[Lc(a)/c*d,Mc(a)/c*d];if(void 0!==this.S){var e=this.S,g=Nc(a),h=this.oa,k=Lc(a),m=Mc(a),n=f[0],p=f[1],q=.0254/this.l,f={OPERATION:this.ta?"GETDYNAMICMAPOVERLAYIMAGE":
"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.l,SETDISPLAYWIDTH:Math.round(f[0]),SETDISPLAYHEIGHT:Math.round(f[1]),SETVIEWSCALE:p*k>n*m?k*h/(n*q):m*h/(p*q),SETVIEWCENTERX:g[0],SETVIEWCENTERY:g[1]};mb(f,this.j);e=$p(bq([e],f));e=new vu(a,c,d,this.da(),e,this.T,this.c);C(e,"change",this.o,this)}else e=null;this.i=e;this.D=this.g;return e};l.Dm=function(){return this.c};l.Gm=function(a){mb(this.j,a);this.u()};l.Fm=function(a){this.i=
null;this.c=a;this.u()};function Pv(a){var c=a.imageExtent,d=void 0!==a.crossOrigin?a.crossOrigin:null,e=void 0!==a.imageLoadFunction?a.imageLoadFunction:vl;pl.call(this,{attributions:a.attributions,logo:a.logo,projection:ad(a.projection)});this.c=new vu(c,void 0,1,this.da(),a.url,d,e);this.i=a.imageSize?a.imageSize:null;C(this.c,"change",this.o,this)}y(Pv,pl);Pv.prototype.gd=function(a){return Qc(a,this.c.G())?this.c:null};Pv.prototype.o=function(a){if(2==this.c.V()){var c=this.c.G(),d=this.c.a(),
e,f;this.i?(e=this.i[0],f=this.i[1]):(e=d.width,f=d.height);c=Math.ceil(Lc(c)/(Mc(c)/f));if(c!=e){var g=document.createElement("canvas");g.width=c;g.height=f;g.getContext("2d").drawImage(d,0,0,e,f,0,0,g.width,g.height);this.c.g=g}}Pv.ia.o.call(this,a)};function Qv(a){a=a||{};pl.call(this,{attributions:a.attributions,logo:a.logo,projection:a.projection,resolutions:a.resolutions});this.oa=void 0!==a.crossOrigin?a.crossOrigin:null;this.j=a.url;this.D=void 0!==a.imageLoadFunction?a.imageLoadFunction:
vl;this.i=a.params||{};this.s=!0;Rv(this);this.Y=a.serverType;this.ta=void 0!==a.hidpi?a.hidpi:!0;this.c=null;this.S=[0,0];this.T=0;this.l=void 0!==a.ratio?a.ratio:1.5}y(Qv,pl);var Sv=[101,101];l=Qv.prototype;l.Mm=function(a,c,d,e){if(void 0!==this.j){var f=Oc(a,c,0,Sv),g={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.i.LAYERS};mb(g,this.i,e);e=Math.floor((f[3]-a[1])/c);g[this.s?"I":"X"]=Math.floor((a[0]-f[0])/c);g[this.s?"J":"Y"]=e;return Tv(this,
f,Sv,1,ad(d),g)}};l.Om=function(){return this.i};l.gd=function(a,c,d,e){if(void 0===this.j)return null;c=ql(this,c);1==d||this.ta&&void 0!==this.Y||(d=1);a=a.slice();var f=(a[0]+a[2])/2,g=(a[1]+a[3])/2,h=c/d,k=Lc(a)/h,h=Mc(a)/h,m=this.c;if(m&&this.T==this.g&&m.$()==c&&m.f==d&&wc(m.G(),a))return m;if(1!=this.l){var m=this.l*Lc(a)/2,n=this.l*Mc(a)/2;a[0]=f-m;a[1]=g-n;a[2]=f+m;a[3]=g+n}f={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};mb(f,this.i);this.S[0]=Math.ceil(k*
this.l);this.S[1]=Math.ceil(h*this.l);e=Tv(this,a,this.S,d,e,f);this.c=new vu(a,c,d,this.da(),e,this.oa,this.D);this.T=this.g;C(this.c,"change",this.o,this);return this.c};l.Nm=function(){return this.D};function Tv(a,c,d,e,f,g){g[a.s?"CRS":"SRS"]=f.kb;"STYLES"in a.i||(g.STYLES=new String(""));if(1!=e)switch(a.Y){case "geoserver":e=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+e):"dpi:"+e;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=
90*e}g.WIDTH=d[0];g.HEIGHT=d[1];d=f.b;var h;a.s&&"ne"==d.substr(0,2)?h=[c[1],c[0],c[3],c[2]]:h=c;g.BBOX=h.join(",");return $p(bq([a.j],g))}l.Pm=function(){return this.j};l.Qm=function(a){this.c=null;this.D=a;this.u()};l.Rm=function(a){a!=this.j&&(this.j=a,this.c=null,this.u())};l.Sm=function(a){mb(this.i,a);Rv(this);this.c=null;this.u()};function Rv(a){a.s=0<=Ha(a.i.VERSION||"1.3.0","1.3")}function Uv(a){a=a||{};var c;void 0!==a.attributions?c=a.attributions:c=[Vv];Iv.call(this,{attributions:c,cacheSize:a.cacheSize,
crossOrigin:void 0!==a.crossOrigin?a.crossOrigin:"anonymous",opaque:void 0!==a.opaque?a.opaque:!0,maxZoom:void 0!==a.maxZoom?a.maxZoom:19,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,url:void 0!==a.url?a.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:a.wrapX})}y(Uv,Iv);var Vv=new Ae({html:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});function Wv(a){a=a||{};var c=Xv[a.layer];this.c=a.layer;
Iv.call(this,{attributions:c.attributions,cacheSize:a.cacheSize,crossOrigin:"anonymous",logo:"https://developer.mapquest.com/content/osm/mq_logo.png",maxZoom:c.maxZoom,reprojectionErrorThreshold:a.reprojectionErrorThreshold,opaque:c.opaque,tileLoadFunction:a.tileLoadFunction,url:void 0!==a.url?a.url:"https://otile{1-4}-s.mqcdn.com/tiles/1.0.0/"+this.c+"/{z}/{x}/{y}.jpg"})}y(Wv,Iv);var Yv=new Ae({html:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a>'}),Xv={osm:{maxZoom:19,opaque:!0,
attributions:[Yv,Vv]},sat:{maxZoom:18,opaque:!0,attributions:[Yv,new Ae({html:"Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency"})]},hyb:{maxZoom:18,opaque:!1,attributions:[Yv,Vv]}};Wv.prototype.o=function(){return this.c};(function(){var a={},c={ha:a};(function(d){if("object"===typeof a&&"undefined"!==typeof c)c.ha=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.up=d()}})(function(){return function e(a,
c,h){function k(n,q){if(!c[n]){if(!a[n]){var r="function"==typeof require&&require;if(!q&&r)return r(n,!0);if(m)return m(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={ha:{}};a[n][0].call(r.ha,function(c){var e=a[n][1][c];return k(e?e:c)},r,r.ha,e,a,c,h)}return c[n].ha}for(var m="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(a,c,g){a=a("./processor");g.Ri=a},{"./processor":2}],2:[function(a,c){function g(a){var c=!0;try{new ImageData(10,
10)}catch(e){c=!1}return function(e){var f=e.buffers,g=e.meta,h=e.width,k=e.height,m=f.length,n=f[0].byteLength;if(e.imageOps){n=Array(m);for(e=0;e<m;++e){var B=n,J=e,K;K=new Uint8ClampedArray(f[e]);var M=h,Y=k;K=c?new ImageData(K,M,Y):{data:K,width:M,height:Y};B[J]=K}h=a(n,g).data}else{h=new Uint8ClampedArray(n);k=Array(m);B=Array(m);for(e=0;e<m;++e)k[e]=new Uint8ClampedArray(f[e]),B[e]=[0,0,0,0];for(f=0;f<n;f+=4){for(e=0;e<m;++e)J=k[e],B[e][0]=J[f],B[e][1]=J[f+1],B[e][2]=J[f+2],B[e][3]=J[f+3];e=
a(B,g);h[f]=e[0];h[f+1]=e[1];h[f+2]=e[2];h[f+3]=e[3]}}return h.buffer}}function h(a,c){var e=Object.keys(a.lib||{}).map(function(c){return"var "+c+" = "+a.lib[c].toString()+";"}).concat(["var __minion__ = ("+g.toString()+")(",a.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),e=URL.createObjectURL(new Blob(e,{type:"text/javascript"})),e=new Worker(e);
e.addEventListener("message",c);return e}function k(a,c){var e=g(a.operation);return{postMessage:function(a){setTimeout(function(){c({data:{buffer:e(a),meta:a.meta}})},0)}}}function m(a){this.Le=!!a.$k;var c;0===a.threads?c=0:this.Le?c=1:c=a.threads||1;var e=[];if(c)for(var f=0;f<c;++f)e[f]=h(a,this.bg.bind(this,f));else e[0]=k(a,this.bg.bind(this,0));this.Id=e;this.Vc=[];this.fj=a.Wn||Infinity;this.Gd=0;this.Ec={};this.Me=null}var n=a("./util").tl;m.prototype.Un=function(a,c,e){this.cj({xc:a,Qg:c,
jg:e});this.Zf()};m.prototype.cj=function(a){for(this.Vc.push(a);this.Vc.length>this.fj;)this.Vc.shift().jg(null,null)};m.prototype.Zf=function(){if(0===this.Gd&&0<this.Vc.length){var a=this.Me=this.Vc.shift(),c=a.xc[0].width,e=a.xc[0].height,f=a.xc.map(function(a){return a.data.buffer}),g=this.Id.length;this.Gd=g;if(1===g)this.Id[0].postMessage({buffers:f,meta:a.Qg,imageOps:this.Le,width:c,height:e},f);else for(var h=4*Math.ceil(a.xc[0].data.length/4/g),k=0;k<g;++k){for(var m=k*h,n=[],B=0,J=f.length;B<
J;++B)n.push(f[k].slice(m,m+h));this.Id[k].postMessage({buffers:n,meta:a.Qg,imageOps:this.Le,width:c,height:e},n)}}};m.prototype.bg=function(a,c){this.qp||(this.Ec[a]=c.data,--this.Gd,0===this.Gd&&this.gj())};m.prototype.gj=function(){var a=this.Me,c=this.Id.length,e,f;if(1===c)e=new Uint8ClampedArray(this.Ec[0].buffer),f=this.Ec[0].meta;else{var g=a.xc[0].data.length;e=new Uint8ClampedArray(g);f=Array(g);for(var g=4*Math.ceil(g/4/c),h=0;h<c;++h){var k=h*g;e.set(new Uint8ClampedArray(this.Ec[h].buffer),
k);f[h]=this.Ec[h].meta}}this.Me=null;this.Ec={};a.jg(null,n(e,a.xc[0].width,a.xc[0].height),f);this.Zf()};c.ha=m},{"./util":3}],3:[function(a,c,g){var h=!0;try{new ImageData(10,10)}catch(m){h=!1}var k=document.createElement("canvas").getContext("2d");g.tl=function(a,c,e){if(h)return new ImageData(a,c,e);c=k.createImageData(c,e);c.data.set(a);return c}},{}]},{},[1])(1)});Zl=c.ha})();function Zv(a){this.D=null;this.ta=void 0!==a.operationType?a.operationType:"pixel";this.Ua=void 0!==a.threads?a.threads:
1;this.c=$v(a.sources);for(var c=0,d=this.c.length;c<d;++c)C(this.c[c],"change",this.u,this);this.i=Pg();this.Y=new Li(function(){return 1},this.u.bind(this));for(var c=aw(this.c),d={},e=0,f=c.length;e<f;++e)d[x(c[e].layer)]=c[e];this.j=this.l=null;this.T={animate:!1,attributions:{},coordinateToPixelMatrix:cc(),extent:null,focus:null,index:0,layerStates:d,layerStatesArray:c,logos:{},pixelRatio:1,pixelToCoordinateMatrix:cc(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.Y,
time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}};pl.call(this,{});void 0!==a.operation&&this.s(a.operation,a.lib)}y(Zv,pl);Zv.prototype.s=function(a,c){this.D=new Zl.Ri({operation:a,$k:"image"===this.ta,Wn:1,lib:c,threads:this.Ua});this.u()};function bw(a,c,d){var e=a.l;return!e||a.g!==e.Ao||d!==e.resolution||!Cc(c,e.extent)}Zv.prototype.B=function(a,c,d,e){d=!0;for(var f,g=0,h=this.c.length;g<h;++g)if(f=this.c[g].a.ea(),"ready"!==f.V()){d=!1;break}if(!d)return null;
if(!bw(this,a,c))return this.j;d=this.i.canvas;f=Math.round(Lc(a)/c);g=Math.round(Mc(a)/c);if(f!==d.width||g!==d.height)d.width=f,d.height=g;f=mb({},this.T);f.viewState=mb({},f.viewState);var g=Nc(a),h=Math.round(Lc(a)/c),k=Math.round(Mc(a)/c);f.extent=a;f.focus=Nc(a);f.size[0]=h;f.size[1]=k;h=f.viewState;h.center=g;h.projection=e;h.resolution=c;this.j=e=new fl(a,c,1,this.da(),d,this.S.bind(this,f));this.l={extent:a,resolution:c,Ao:this.g};return e};Zv.prototype.S=function(a,c){for(var d=this.c.length,
e=Array(d),f=0;f<d;++f){var g;g=this.c[f];var h=a,k=a.layerStatesArray[f];if(g.o(h,k)){var m=h.size[0],n=h.size[1];if(cw){var p=cw.canvas;p.width!==m||p.height!==n?cw=Pg(m,n):cw.clearRect(0,0,m,n)}else cw=Pg(m,n);g.c(h,k,cw);g=cw.getImageData(0,0,m,n)}else g=null;if(g)e[f]=g;else return}d={};this.b(new dw(ew,a,d));this.D.Un(e,d,this.oa.bind(this,a,c));Mi(a.tileQueue,16,16)};Zv.prototype.oa=function(a,c,d,e,f){d?c(d):e&&(this.b(new dw(fw,a,f)),bw(this,a.extent,a.viewState.resolution/a.pixelRatio)||
this.i.putImageData(e,0,0),c(null))};var cw=null;function aw(a){return a.map(function(a){return di(a.a)})}function $v(a){for(var c=a.length,d=Array(c),e=0;e<c;++e){var f=e,g=a[e],h=null;g instanceof ng?(g=new Xj({source:g}),h=new pm(g)):g instanceof pl&&(g=new Wj({source:g}),h=new om(g));d[f]=h}return d}function dw(a,c,d){Cb.call(this,a);this.extent=c.extent;this.resolution=c.viewState.resolution/c.pixelRatio;this.data=d}y(dw,Cb);var ew="beforeoperations",fw="afteroperations";var gw={terrain:{vb:"jpg",
opaque:!0},"terrain-background":{vb:"jpg",opaque:!0},"terrain-labels":{vb:"png",opaque:!1},"terrain-lines":{vb:"png",opaque:!1},"toner-background":{vb:"png",opaque:!0},toner:{vb:"png",opaque:!0},"toner-hybrid":{vb:"png",opaque:!1},"toner-labels":{vb:"png",opaque:!1},"toner-lines":{vb:"png",opaque:!1},"toner-lite":{vb:"png",opaque:!0},watercolor:{vb:"jpg",opaque:!0}},hw={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}};function iw(a){var c=a.layer.indexOf("-"),
c=-1==c?a.layer:a.layer.slice(0,c),c=hw[c],d=gw[a.layer];Iv.call(this,{attributions:jw,cacheSize:a.cacheSize,crossOrigin:"anonymous",maxZoom:c.maxZoom,minZoom:c.minZoom,opaque:d.opaque,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,url:void 0!==a.url?a.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+a.layer+"/{z}/{x}/{y}."+d.vb})}y(iw,Iv);var jw=[new Ae({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.'}),
Vv];function kw(a){a=a||{};W.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0});this.c=a.params||{};this.o=oc()}y(kw,W);kw.prototype.s=function(){return this.c};kw.prototype.Yb=function(a){return a};kw.prototype.sc=function(a,c,d){var e=this.tileGrid;e||(e=this.eb(d));
if(!(e.Kb().length<=a[0])){var f=e.Da(a,this.o),g=Qb(e.Ya(a[0]),this.j);1!=c&&(g=Pb(g,c,this.j));e={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};mb(e,this.c);var h=this.urls;h?(d=d.kb.split(":").pop(),e.SIZE=g[0]+","+g[1],e.BBOX=f.join(","),e.BBOXSR=d,e.IMAGESR=d,e.DPI=Math.round(e.DPI?e.DPI*c:90*c),a=(1==h.length?h[0]:h[Qa((a[1]<<a[0])+a[2],h.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),a=$p(bq([a],e))):a=void 0;return a}};kw.prototype.A=
function(a){mb(this.c,a);this.u()};function lw(a,c,d){Vf.call(this,a,2);this.i=c;this.c=d;this.g={}}y(lw,Vf);lw.prototype.fb=function(a){a=void 0!==a?x(a):-1;if(a in this.g)return this.g[a];var c=this.i,d=Pg(c[0],c[1]);d.strokeStyle="black";d.strokeRect(.5,.5,c[0]+.5,c[1]+.5);d.fillStyle="black";d.textAlign="center";d.textBaseline="middle";d.font="24px sans-serif";d.fillText(this.c,c[0]/2,c[1]/2);return this.g[a]=d.canvas};function mw(a){ng.call(this,{opaque:!1,projection:a.projection,tileGrid:a.tileGrid,
wrapX:void 0!==a.wrapX?a.wrapX:!0})}y(mw,ng);mw.prototype.Lb=function(a,c,d){var e=this.Cb(a,c,d);if(Rf(this.a,e))return this.a.get(e);var f=Qb(this.tileGrid.Ya(a));a=[a,c,d];c=(c=qg(this,a))?qg(this,c).toString():"";f=new lw(a,f,c);this.a.set(e,f);return f};function nw(a){this.c=null;W.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,projection:ad("EPSG:3857"),reprojectionErrorThreshold:a.reprojectionErrorThreshold,state:"loading",tileLoadFunction:a.tileLoadFunction,
wrapX:void 0!==a.wrapX?a.wrapX:!0});if(a.jsonp)Bv(a.url,this.rh.bind(this),this.Yd.bind(this));else{var c=new XMLHttpRequest;c.addEventListener("load",this.Fn.bind(this));c.addEventListener("error",this.En.bind(this));c.open("GET",a.url);c.send()}}y(nw,W);l=nw.prototype;l.Fn=function(a){a=a.target;if(200<=a.status&&300>a.status){var c;try{c=JSON.parse(a.responseText)}catch(d){this.Yd();return}this.rh(c)}else this.Yd()};l.En=function(){this.Yd()};l.pk=function(){return this.c};l.rh=function(a){var c=
ad("EPSG:4326"),d=this.f,e;void 0!==a.bounds&&(e=Sc(a.bounds,dd(c,d)));var f=a.minzoom||0,g=a.maxzoom||22;this.tileGrid=d=mg({extent:kg(d),maxZoom:g,minZoom:f});this.tileUrlFunction=sm(a.tiles,d);if(void 0!==a.attribution&&!this.da()){c=void 0!==e?e:c.G();e={};for(var h;f<=g;++f)h=f.toString(),e[h]=[dg(d,c,f)];this.la([new Ae({html:a.attribution,tileRanges:e})])}this.c=a;Zf(this,"ready")};l.Yd=function(){Zf(this,"error")};function ow(a){ng.call(this,{projection:ad("EPSG:3857"),state:"loading"});this.o=
void 0!==a.preemptive?a.preemptive:!0;this.i=um;this.c=void 0;a.url?Bv(a.url,this.sh.bind(this)):a.tileJSON&&this.sh(a.tileJSON)}y(ow,ng);l=ow.prototype;l.lk=function(){return this.c};l.yj=function(a,c,d,e,f){this.tileGrid?(c=this.tileGrid.Ud(a,c),pw(this.Lb(c[0],c[1],c[2],1,this.f),a,d,e,f)):!0===f?Ig(function(){d.call(e,null)}):d.call(e,null)};l.sh=function(a){var c=ad("EPSG:4326"),d=this.f,e;void 0!==a.bounds&&(e=Sc(a.bounds,dd(c,d)));var f=a.minzoom||0,g=a.maxzoom||22;this.tileGrid=d=mg({extent:kg(d),
maxZoom:g,minZoom:f});this.c=a.template;var h=a.grids;if(h){this.i=sm(h,d);if(void 0!==a.attribution){c=void 0!==e?e:c.G();for(e={};f<=g;++f)h=f.toString(),e[h]=[dg(d,c,f)];this.la([new Ae({html:a.attribution,tileRanges:e})])}Zf(this,"ready")}else Zf(this,"error")};l.Lb=function(a,c,d,e,f){var g=this.Cb(a,c,d);if(Rf(this.a,g))return this.a.get(g);a=[a,c,d];c=qg(this,a,f);e=this.i(c,e,f);e=new qw(a,void 0!==e?0:4,void 0!==e?e:"",this.tileGrid.Da(a),this.o);this.a.set(g,e);return e};l.Rf=function(a,
c,d){a=this.Cb(a,c,d);Rf(this.a,a)&&this.a.get(a)};function qw(a,c,d,e,f){Vf.call(this,a,c);this.o=d;this.g=e;this.l=f;this.j=this.i=this.c=null}y(qw,Vf);l=qw.prototype;l.fb=function(){return null};l.getData=function(a){if(!this.c||!this.i||!this.j)return null;var c=this.c[Math.floor((1-(a[1]-this.g[1])/(this.g[3]-this.g[1]))*this.c.length)];if("string"!==typeof c)return null;a=c.charCodeAt(Math.floor((a[0]-this.g[0])/(this.g[2]-this.g[0])*c.length));93<=a&&a--;35<=a&&a--;a-=32;return a in this.i?
this.j[this.i[a]]:null};function pw(a,c,d,e,f){0==a.state&&!0===f?(xb(a,"change",function(){d.call(e,this.getData(c))},a),rw(a)):!0===f?Ig(function(){d.call(e,this.getData(c))},a):d.call(e,a.getData(c))}l.gb=function(){return this.o};l.zk=function(){this.state=3;Wf(this)};l.Tm=function(a){this.c=a.grid;this.i=a.keys;this.j=a.data;this.state=4;Wf(this)};function rw(a){0==a.state&&(a.state=1,Bv(a.o,a.Tm.bind(a),a.zk.bind(a)))}l.load=function(){this.l&&rw(this)};function sw(a){a=a||{};var c=a.params||
{};W.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:!("TRANSPARENT"in c?c.TRANSPARENT:1),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0});this.s=void 0!==a.gutter?a.gutter:0;this.c=c;this.Y="";tw(this);this.o=!0;this.A=a.serverType;this.S=void 0!==a.hidpi?a.hidpi:!0;this.D="";uw(this);this.T=oc();
vw(this)}y(sw,W);l=sw.prototype;l.Um=function(a,c,d,e){d=ad(d);var f=this.tileGrid;f||(f=this.eb(d));c=f.Ud(a,c);if(!(f.Kb().length<=c[0])){var g=f.$(c[0]),h=f.Da(c,this.T),f=Qb(f.Ya(c[0]),this.j),k=this.s;0!==k&&(f=Ob(f,k,this.j),h=qc(h,g*k,h));k={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.c.LAYERS};mb(k,this.c,e);e=Math.floor((h[3]-a[1])/g);k[this.o?"I":"X"]=Math.floor((a[0]-h[0])/g);k[this.o?"J":"Y"]=e;return ww(this,c,f,h,1,d,k)}};
l.$e=function(){return this.s};l.af=function(){return this.Y};l.Cb=function(a,c,d){return this.D+sw.ia.Cb.call(this,a,c,d)};l.Vm=function(){return this.c};function ww(a,c,d,e,f,g,h){var k=a.urls;if(k){h.WIDTH=d[0];h.HEIGHT=d[1];h[a.o?"CRS":"SRS"]=g.kb;"STYLES"in a.c||(h.STYLES=new String(""));if(1!=f)switch(a.A){case "geoserver":d=90*f+.5|0;h.FORMAT_OPTIONS="FORMAT_OPTIONS"in h?h.FORMAT_OPTIONS+(";dpi:"+d):"dpi:"+d;break;case "mapserver":h.MAP_RESOLUTION=90*f;break;case "carmentaserver":case "qgis":h.DPI=
90*f}g=g.b;a.o&&"ne"==g.substr(0,2)&&(a=e[0],e[0]=e[1],e[1]=a,a=e[2],e[2]=e[3],e[3]=a);h.BBOX=e.join(",");return $p(bq([1==k.length?k[0]:k[Qa((c[1]<<c[0])+c[2],k.length)]],h))}}l.Yb=function(a){return this.S&&void 0!==this.A?a:1};function uw(a){var c=0,d=[];if(a.urls){var e,f;e=0;for(f=a.urls.length;e<f;++e)d[c++]=a.urls[e]}a.D=d.join("#")}function tw(a){var c=0,d=[],e;for(e in a.c)d[c++]=e+"-"+a.c[e];a.Y=d.join("/")}l.sc=function(a,c,d){var e=this.tileGrid;e||(e=this.eb(d));if(!(e.Kb().length<=a[0])){1==
c||this.S&&void 0!==this.A||(c=1);var f=e.$(a[0]),g=e.Da(a,this.T),e=Qb(e.Ya(a[0]),this.j),h=this.s;0!==h&&(e=Ob(e,h,this.j),g=qc(g,f*h,g));1!=c&&(e=Pb(e,c,this.j));f={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};mb(f,this.c);return ww(this,a,e,g,c,d,f)}};l.Wm=function(a){mb(this.c,a);uw(this);tw(this);vw(this);this.u()};function vw(a){a.o=0<=Ha(a.c.VERSION||"1.3.0","1.3")}function xw(a){this.j=a.matrixIds;$f.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,
resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})}y(xw,$f);xw.prototype.l=function(){return this.j};function yw(a,c){var d=[],e=[],f=[],g=[],h=[],k;k=ad(a.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var m=k.Xb(),n="ne"==k.b.substr(0,2);a.TileMatrix.sort(function(a,c){return c.ScaleDenominator-a.ScaleDenominator});a.TileMatrix.forEach(function(a){e.push(a.Identifier);var c=2.8E-4*a.ScaleDenominator/m,k=a.TileWidth,t=a.TileHeight;n?f.push([a.TopLeftCorner[1],
a.TopLeftCorner[0]]):f.push(a.TopLeftCorner);d.push(c);g.push(k==t?k:[k,t]);h.push([a.MatrixWidth,-a.MatrixHeight])});return new xw({extent:c,origins:f,resolutions:d,matrixIds:e,tileSizes:g,sizes:h})}function Z(a){function c(a){a="KVP"==e?$p(bq([a],g)):a.replace(/\{(\w+?)\}/g,function(a,c){return c.toLowerCase()in g?g[c.toLowerCase()]:a});return function(c){if(c){var d={TileMatrix:f.j[c[0]],TileCol:c[1],TileRow:-c[2]-1};mb(d,h);c=a;return c="KVP"==e?$p(bq([c],d)):c.replace(/\{(\w+?)\}/g,function(a,
c){return d[c]})}}}this.T=void 0!==a.version?a.version:"1.0.0";this.A=void 0!==a.format?a.format:"image/jpeg";this.c=void 0!==a.dimensions?a.dimensions:{};this.o="";zw(this);this.D=a.layer;this.s=a.matrixSet;this.S=a.style;var d=a.urls;void 0===d&&void 0!==a.url&&(d=vm(a.url));var e=this.Y=void 0!==a.requestEncoding?a.requestEncoding:"KVP",f=a.tileGrid,g={layer:this.D,style:this.S,tilematrixset:this.s};"KVP"==e&&mb(g,{Service:"WMTS",Request:"GetTile",Version:this.T,Format:this.A});var h=this.c,k=
d&&0<d.length?tm(d.map(c)):um;W.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:f,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:k,urls:d,wrapX:void 0!==a.wrapX?a.wrapX:!1})}y(Z,W);l=Z.prototype;l.Kj=function(){return this.c};l.Xm=function(){return this.A};l.af=function(){return this.o};l.Ym=function(){return this.D};
l.Xj=function(){return this.s};l.jk=function(){return this.Y};l.Zm=function(){return this.S};l.rk=function(){return this.T};function zw(a){var c=0,d=[],e;for(e in a.c)d[c++]=e+"-"+a.c[e];a.o=d.join("/")}l.Wo=function(a){mb(this.c,a);zw(this);this.u()};function Aw(a){a=a||{};var c=a.size,d=c[0],e=c[1],f=[],g=256;switch(void 0!==a.tierSizeCalculation?a.tierSizeCalculation:"default"){case "default":for(;d>g||e>g;)f.push([Math.ceil(d/g),Math.ceil(e/g)]),g+=g;break;case "truncated":for(;d>g||e>g;)f.push([Math.ceil(d/
g),Math.ceil(e/g)]),d>>=1,e>>=1}f.push([1,1]);f.reverse();for(var g=[1],h=[0],e=1,d=f.length;e<d;e++)g.push(1<<e),h.push(f[e-1][0]*f[e-1][1]+h[e-1]);g.reverse();var c=[0,-c[1],c[0],0],c=new $f({extent:c,origin:Ic(c),resolutions:g}),k=a.url;W.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:Bw,tileGrid:c,tileUrlFunction:function(a){if(a){var c=a[0],d=a[1];a=-a[2]-1;return k+"TileGroup"+
((d+a*f[c][0]+h[c])/256|0)+"/"+c+"-"+d+"-"+a+".jpg"}}})}y(Aw,W);function Bw(a,c,d,e,f){wu.call(this,a,c,d,e,f);this.i={}}y(Bw,wu);Bw.prototype.fb=function(a){var c=void 0!==a?x(a).toString():"";if(c in this.i)return this.i[c];a=Bw.ia.fb.call(this,a);if(2==this.state){if(256==a.width&&256==a.height)return this.i[c]=a;var d=Pg(256,256);d.drawImage(a,0,0);return this.i[c]=d.canvas}return a};function Cw(a){a=a||{};this.a=void 0!==a.initialSize?a.initialSize:256;this.g=void 0!==a.maxSize?a.maxSize:void 0!==
ra?ra:2048;this.b=void 0!==a.space?a.space:1;this.c=[new Dw(this.a,this.b)];this.f=this.a;this.i=[new Dw(this.f,this.b)]}Cw.prototype.add=function(a,c,d,e,f,g){if(c+this.b>this.g||d+this.b>this.g)return null;e=Ew(this,!1,a,c,d,e,g);if(!e)return null;a=Ew(this,!0,a,c,d,void 0!==f?f:ta,g);return{offsetX:e.offsetX,offsetY:e.offsetY,image:e.image,Lg:a.image}};function Ew(a,c,d,e,f,g,h){var k=c?a.i:a.c,m,n,p;n=0;for(p=k.length;n<p;++n){m=k[n];if(m=m.add(d,e,f,g,h))return m;m||n!==p-1||(c?(m=Math.min(2*
a.f,a.g),a.f=m):(m=Math.min(2*a.a,a.g),a.a=m),m=new Dw(m,a.b),k.push(m),++p)}}function Dw(a,c){this.b=c;this.a=[{x:0,y:0,width:a,height:a}];this.f={};this.g=document.createElement("CANVAS");this.g.width=a;this.g.height=a;this.c=this.g.getContext("2d")}Dw.prototype.get=function(a){return this.f[a]||null};Dw.prototype.add=function(a,c,d,e,f){var g,h,k;h=0;for(k=this.a.length;h<k;++h)if(g=this.a[h],g.width>=c+this.b&&g.height>=d+this.b)return k={offsetX:g.x+this.b,offsetY:g.y+this.b,image:this.g},this.f[a]=
k,e.call(f,this.c,g.x+this.b,g.y+this.b),a=h,c=c+this.b,d=d+this.b,f=e=void 0,g.width-c>g.height-d?(e={x:g.x+c,y:g.y,width:g.width-c,height:g.height},f={x:g.x,y:g.y+d,width:c,height:g.height-d},Fw(this,a,e,f)):(e={x:g.x+c,y:g.y,width:g.width-c,height:d},f={x:g.x,y:g.y+d,width:g.width,height:g.height-d},Fw(this,a,e,f)),k;return null};function Fw(a,c,d,e){c=[c,1];0<d.width&&0<d.height&&c.push(d);0<e.width&&0<e.height&&c.push(e);a.a.splice.apply(a.a,c)}function Gw(a){this.U=this.f=this.c=null;this.l=
void 0!==a.fill?a.fill:null;this.va=[0,0];this.b=a.points;this.g=void 0!==a.radius?a.radius:a.radius1;this.i=void 0!==a.radius2?a.radius2:this.g;this.o=void 0!==a.angle?a.angle:0;this.a=void 0!==a.stroke?a.stroke:null;this.D=this.S=this.H=null;var c=a.atlasManager,d="",e="",f=0,g=null,h,k=0;this.a&&(h=Oe(this.a.b),k=this.a.a,void 0===k&&(k=1),g=this.a.g,bh||(g=null),e=this.a.c,void 0===e&&(e="round"),d=this.a.f,void 0===d&&(d="round"),f=this.a.i,void 0===f&&(f=10));var m=2*(this.g+k)+1,d={strokeStyle:h,
yd:k,size:m,lineCap:d,lineDash:g,lineJoin:e,miterLimit:f};if(void 0===c){this.f=document.createElement("CANVAS");this.f.height=m;this.f.width=m;var c=m=this.f.width,n=this.f.getContext("2d");this.Ch(d,n,0,0);this.l?this.U=this.f:(n=this.U=document.createElement("CANVAS"),n.height=d.size,n.width=d.size,n=n.getContext("2d"),this.Bh(d,n,0,0))}else m=Math.round(m),(e=!this.l)&&(n=this.Bh.bind(this,d)),f=this.a?jk(this.a):"-",g=this.l?dk(this.l):"-",this.c&&f==this.c[1]&&g==this.c[2]&&this.g==this.c[3]&&
this.i==this.c[4]&&this.o==this.c[5]&&this.b==this.c[6]||(this.c=["r"+f+g+(void 0!==this.g?this.g.toString():"-")+(void 0!==this.i?this.i.toString():"-")+(void 0!==this.o?this.o.toString():"-")+(void 0!==this.b?this.b.toString():"-"),f,g,this.g,this.i,this.o,this.b]),n=c.add(this.c[0],m,m,this.Ch.bind(this,d),n),this.f=n.image,this.va=[n.offsetX,n.offsetY],c=n.image.width,this.U=e?n.Lg:this.f;this.H=[m/2,m/2];this.S=[m,m];this.D=[c,c];wi.call(this,{opacity:1,rotateWithView:void 0!==a.rotateWithView?
a.rotateWithView:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0})}y(Gw,wi);l=Gw.prototype;l.Vb=function(){return this.H};l.dn=function(){return this.o};l.en=function(){return this.l};l.ke=function(){return this.U};l.ec=function(){return this.f};l.hd=function(){return this.D};l.qd=function(){return 2};l.Ia=function(){return this.va};l.fn=function(){return this.b};l.gn=function(){return this.g};l.ik=function(){return this.i};l.Db=function(){return this.S};
l.hn=function(){return this.a};l.hf=ta;l.load=ta;l.Qf=ta;l.Ch=function(a,c,d,e){var f;c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.g&&(this.b*=2);for(d=0;d<=this.b;d++)e=2*d*Math.PI/this.b-Math.PI/2+this.o,f=0===d%2?this.g:this.i,c.lineTo(a.size/2+f*Math.cos(e),a.size/2+f*Math.sin(e));this.l&&(c.fillStyle=Qe(this.l.b),c.fill());this.a&&(c.strokeStyle=a.strokeStyle,c.lineWidth=a.yd,a.lineDash&&c.setLineDash(a.lineDash),c.lineCap=a.lineCap,c.lineJoin=a.lineJoin,c.miterLimit=
a.miterLimit,c.stroke());c.closePath()};l.Bh=function(a,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.g&&(this.b*=2);var f;for(d=0;d<=this.b;d++)f=2*d*Math.PI/this.b-Math.PI/2+this.o,e=0===d%2?this.g:this.i,c.lineTo(a.size/2+e*Math.cos(f),a.size/2+e*Math.sin(f));c.fillStyle=Yj;c.fill();this.a&&(c.strokeStyle=a.strokeStyle,c.lineWidth=a.yd,a.lineDash&&c.setLineDash(a.lineDash),c.stroke());c.closePath()};u("ol.animation.bounce",function(a){var c=a.resolution,d=a.start?
a.start:Date.now(),e=void 0!==a.duration?a.duration:1E3,f=a.easing?a.easing:qe;return function(a,h){if(h.time<d)return h.animate=!0,h.viewHints[0]+=1,!0;if(h.time<d+e){var k=f((h.time-d)/e),m=c-h.viewState.resolution;h.animate=!0;h.viewState.resolution+=k*m;h.viewHints[0]+=1;return!0}return!1}},OPENLAYERS);u("ol.animation.pan",re,OPENLAYERS);u("ol.animation.rotate",se,OPENLAYERS);u("ol.animation.zoom",te,OPENLAYERS);u("ol.Attribution",Ae,OPENLAYERS);Ae.prototype.getHTML=Ae.prototype.g;Be.prototype.element=
Be.prototype.element;u("ol.Collection",De,OPENLAYERS);De.prototype.clear=De.prototype.clear;De.prototype.extend=De.prototype.jf;De.prototype.forEach=De.prototype.forEach;De.prototype.getArray=De.prototype.ul;De.prototype.item=De.prototype.item;De.prototype.getLength=De.prototype.Zb;De.prototype.insertAt=De.prototype.Zd;De.prototype.pop=De.prototype.pop;De.prototype.push=De.prototype.push;De.prototype.remove=De.prototype.remove;De.prototype.removeAt=De.prototype.Lf;De.prototype.setAt=De.prototype.Co;
u("ol.colorlike.asColorLike",Qe,OPENLAYERS);u("ol.coordinate.add",Rb,OPENLAYERS);u("ol.coordinate.createStringXY",function(a){return function(c){return Zb(c,a)}},OPENLAYERS);u("ol.coordinate.format",Ub,OPENLAYERS);u("ol.coordinate.rotate",Wb,OPENLAYERS);u("ol.coordinate.toStringHDMS",function(a,c){return a?Tb(a[1],"NS",c)+" "+Tb(a[0],"EW",c):""},OPENLAYERS);u("ol.coordinate.toStringXY",Zb,OPENLAYERS);u("ol.DeviceOrientation",co,OPENLAYERS);co.prototype.getAlpha=co.prototype.Ej;co.prototype.getBeta=
co.prototype.Hj;co.prototype.getGamma=co.prototype.Nj;co.prototype.getHeading=co.prototype.vl;co.prototype.getTracking=co.prototype.Tg;co.prototype.setTracking=co.prototype.kf;u("ol.easing.easeIn",me,OPENLAYERS);u("ol.easing.easeOut",ne,OPENLAYERS);u("ol.easing.inAndOut",oe,OPENLAYERS);u("ol.easing.linear",pe,OPENLAYERS);u("ol.easing.upAndDown",qe,OPENLAYERS);u("ol.extent.boundingExtent",nc,OPENLAYERS);u("ol.extent.buffer",qc,OPENLAYERS);u("ol.extent.containsCoordinate",tc,OPENLAYERS);u("ol.extent.containsExtent",
wc,OPENLAYERS);u("ol.extent.containsXY",vc,OPENLAYERS);u("ol.extent.createEmpty",oc,OPENLAYERS);u("ol.extent.equals",Cc,OPENLAYERS);u("ol.extent.extend",Dc,OPENLAYERS);u("ol.extent.getBottomLeft",Fc,OPENLAYERS);u("ol.extent.getBottomRight",Gc,OPENLAYERS);u("ol.extent.getCenter",Nc,OPENLAYERS);u("ol.extent.getHeight",Mc,OPENLAYERS);u("ol.extent.getIntersection",Pc,OPENLAYERS);u("ol.extent.getSize",function(a){return[a[2]-a[0],a[3]-a[1]]},OPENLAYERS);u("ol.extent.getTopLeft",Ic,OPENLAYERS);u("ol.extent.getTopRight",
Hc,OPENLAYERS);u("ol.extent.getWidth",Lc,OPENLAYERS);u("ol.extent.intersects",Qc,OPENLAYERS);u("ol.extent.isEmpty",Kc,OPENLAYERS);u("ol.extent.applyTransform",Sc,OPENLAYERS);u("ol.Feature",xl,OPENLAYERS);xl.prototype.clone=xl.prototype.clone;xl.prototype.getGeometry=xl.prototype.W;xl.prototype.getId=xl.prototype.Wa;xl.prototype.getGeometryName=xl.prototype.Pj;xl.prototype.getStyle=xl.prototype.xl;xl.prototype.getStyleFunction=xl.prototype.$b;xl.prototype.setGeometry=xl.prototype.Ra;xl.prototype.setStyle=
xl.prototype.lf;xl.prototype.setId=xl.prototype.hc;xl.prototype.setGeometryName=xl.prototype.Bc;u("ol.featureloader.tile",Tl,OPENLAYERS);u("ol.featureloader.xhr",Ul,OPENLAYERS);u("ol.Geolocation",ku,OPENLAYERS);ku.prototype.getAccuracy=ku.prototype.Cj;ku.prototype.getAccuracyGeometry=ku.prototype.Dj;ku.prototype.getAltitude=ku.prototype.Fj;ku.prototype.getAltitudeAccuracy=ku.prototype.Gj;ku.prototype.getHeading=ku.prototype.zl;ku.prototype.getPosition=ku.prototype.Al;ku.prototype.getProjection=ku.prototype.Ug;
ku.prototype.getSpeed=ku.prototype.kk;ku.prototype.getTracking=ku.prototype.Vg;ku.prototype.getTrackingOptions=ku.prototype.Fg;ku.prototype.setProjection=ku.prototype.Wg;ku.prototype.setTracking=ku.prototype.be;ku.prototype.setTrackingOptions=ku.prototype.ji;u("ol.Graticule",qu,OPENLAYERS);qu.prototype.getMap=qu.prototype.Dl;qu.prototype.getMeridians=qu.prototype.Yj;qu.prototype.getParallels=qu.prototype.ek;qu.prototype.setMap=qu.prototype.setMap;u("ol.has.DEVICE_PIXEL_RATIO",ah,OPENLAYERS);u("ol.has.CANVAS",
ch,OPENLAYERS);u("ol.has.DEVICE_ORIENTATION",dh,OPENLAYERS);u("ol.has.GEOLOCATION",eh,OPENLAYERS);u("ol.has.TOUCH",fh,OPENLAYERS);u("ol.has.WEBGL",Wg,OPENLAYERS);vu.prototype.getImage=vu.prototype.a;wu.prototype.getImage=wu.prototype.fb;u("ol.Kinetic",Ni,OPENLAYERS);u("ol.loadingstrategy.all",Vl,OPENLAYERS);u("ol.loadingstrategy.bbox",function(a){return[a]},OPENLAYERS);u("ol.loadingstrategy.tile",function(a){return function(c,d){var e=ig(a,d),f=dg(a,c,e),g=[],e=[e,0,0];for(e[1]=f.ua;e[1]<=f.wa;++e[1])for(e[2]=
f.za;e[2]<=f.Ba;++e[2])g.push(a.Da(e));return g}},OPENLAYERS);u("ol.Map",R,OPENLAYERS);R.prototype.addControl=R.prototype.lj;R.prototype.addInteraction=R.prototype.mj;R.prototype.addLayer=R.prototype.dg;R.prototype.addOverlay=R.prototype.eg;R.prototype.beforeRender=R.prototype.Va;R.prototype.forEachFeatureAtPixel=R.prototype.fd;R.prototype.forEachLayerAtPixel=R.prototype.Hl;R.prototype.hasFeatureAtPixel=R.prototype.Zk;R.prototype.getEventCoordinate=R.prototype.Lj;R.prototype.getEventPixel=R.prototype.Od;
R.prototype.getTarget=R.prototype.mf;R.prototype.getTargetElement=R.prototype.vc;R.prototype.getCoordinateFromPixel=R.prototype.Oa;R.prototype.getControls=R.prototype.Jj;R.prototype.getOverlays=R.prototype.ck;R.prototype.getOverlayById=R.prototype.bk;R.prototype.getInteractions=R.prototype.Qj;R.prototype.getLayerGroup=R.prototype.uc;R.prototype.getLayers=R.prototype.Xg;R.prototype.getPixelFromCoordinate=R.prototype.Ga;R.prototype.getSize=R.prototype.ab;R.prototype.getView=R.prototype.aa;R.prototype.getViewport=
R.prototype.sk;R.prototype.renderSync=R.prototype.yo;R.prototype.render=R.prototype.render;R.prototype.removeControl=R.prototype.ro;R.prototype.removeInteraction=R.prototype.so;R.prototype.removeLayer=R.prototype.uo;R.prototype.removeOverlay=R.prototype.vo;R.prototype.setLayerGroup=R.prototype.bi;R.prototype.setSize=R.prototype.Pf;R.prototype.setTarget=R.prototype.Yg;R.prototype.setView=R.prototype.Mo;R.prototype.updateSize=R.prototype.Rc;Ph.prototype.originalEvent=Ph.prototype.originalEvent;Ph.prototype.pixel=
Ph.prototype.pixel;Ph.prototype.coordinate=Ph.prototype.coordinate;Ph.prototype.dragging=Ph.prototype.dragging;Of.prototype.map=Of.prototype.map;Of.prototype.frameState=Of.prototype.frameState;Jb.prototype.key=Jb.prototype.key;Jb.prototype.oldValue=Jb.prototype.oldValue;u("ol.Object",Kb,OPENLAYERS);Kb.prototype.get=Kb.prototype.get;Kb.prototype.getKeys=Kb.prototype.O;Kb.prototype.getProperties=Kb.prototype.P;Kb.prototype.set=Kb.prototype.set;Kb.prototype.setProperties=Kb.prototype.C;Kb.prototype.unset=
Kb.prototype.R;u("ol.Observable",Hb,OPENLAYERS);u("ol.Observable.unByKey",Ib,OPENLAYERS);Hb.prototype.changed=Hb.prototype.u;Hb.prototype.dispatchEvent=Hb.prototype.b;Hb.prototype.getRevision=Hb.prototype.K;Hb.prototype.on=Hb.prototype.I;Hb.prototype.once=Hb.prototype.L;Hb.prototype.un=Hb.prototype.J;Hb.prototype.unByKey=Hb.prototype.M;u("ol.inherits",y,OPENLAYERS);u("ol.Overlay",Kn,OPENLAYERS);Kn.prototype.getElement=Kn.prototype.ce;Kn.prototype.getId=Kn.prototype.Wa;Kn.prototype.getMap=Kn.prototype.de;
Kn.prototype.getOffset=Kn.prototype.Dg;Kn.prototype.getPosition=Kn.prototype.Zg;Kn.prototype.getPositioning=Kn.prototype.Eg;Kn.prototype.setElement=Kn.prototype.Yh;Kn.prototype.setMap=Kn.prototype.setMap;Kn.prototype.setOffset=Kn.prototype.di;Kn.prototype.setPosition=Kn.prototype.nf;Kn.prototype.setPositioning=Kn.prototype.gi;u("ol.render.toContext",function(a,c){var d=a.canvas,e=c?c:{},f=e.pixelRatio||ah;if(e=e.size)d.width=e[0]*f,d.height=e[1]*f,d.style.width=e[0]+"px",d.style.height=e[1]+"px";
d=[0,0,d.width,d.height];e=ki(cc(),0,0,f,f,0,0,0);return new sk(a,f,d,e,0)},OPENLAYERS);u("ol.size.toSize",Qb,OPENLAYERS);Vf.prototype.getTileCoord=Vf.prototype.f;zl.prototype.getFormat=zl.prototype.Il;zl.prototype.setFeatures=zl.prototype.Zh;zl.prototype.setProjection=zl.prototype.pf;zl.prototype.setLoader=zl.prototype.ci;u("ol.View",ge,OPENLAYERS);ge.prototype.constrainCenter=ge.prototype.Md;ge.prototype.constrainResolution=ge.prototype.constrainResolution;ge.prototype.constrainRotation=ge.prototype.constrainRotation;
ge.prototype.getCenter=ge.prototype.bb;ge.prototype.calculateExtent=ge.prototype.Gc;ge.prototype.getProjection=ge.prototype.Jl;ge.prototype.getResolution=ge.prototype.$;ge.prototype.getRotation=ge.prototype.Ma;ge.prototype.getZoom=ge.prototype.uk;ge.prototype.fit=ge.prototype.Xe;ge.prototype.centerOn=ge.prototype.vj;ge.prototype.rotate=ge.prototype.rotate;ge.prototype.setCenter=ge.prototype.lb;ge.prototype.setResolution=ge.prototype.Sb;ge.prototype.setRotation=ge.prototype.ee;ge.prototype.setZoom=
ge.prototype.Po;u("ol.xml.getAllTextContent",Cl,OPENLAYERS);u("ol.xml.parse",Gl,OPENLAYERS);Sm.prototype.getGL=Sm.prototype.Bn;Sm.prototype.useProgram=Sm.prototype.re;u("ol.tilegrid.TileGrid",$f,OPENLAYERS);$f.prototype.getMaxZoom=$f.prototype.Bg;$f.prototype.getMinZoom=$f.prototype.Cg;$f.prototype.getOrigin=$f.prototype.Ia;$f.prototype.getResolution=$f.prototype.$;$f.prototype.getResolutions=$f.prototype.Kb;$f.prototype.getTileCoordExtent=$f.prototype.Da;$f.prototype.getTileCoordForCoordAndResolution=
$f.prototype.Ud;$f.prototype.getTileCoordForCoordAndZ=$f.prototype.md;$f.prototype.getTileSize=$f.prototype.Ya;u("ol.tilegrid.createXYZ",mg,OPENLAYERS);u("ol.tilegrid.WMTS",xw,OPENLAYERS);xw.prototype.getMatrixIds=xw.prototype.l;u("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",yw,OPENLAYERS);u("ol.style.AtlasManager",Cw,OPENLAYERS);u("ol.style.Circle",kk,OPENLAYERS);kk.prototype.getFill=kk.prototype.$m;kk.prototype.getImage=kk.prototype.ec;kk.prototype.getRadius=kk.prototype.an;kk.prototype.getStroke=
kk.prototype.bn;u("ol.style.Fill",ck,OPENLAYERS);ck.prototype.getColor=ck.prototype.g;ck.prototype.setColor=ck.prototype.f;u("ol.style.Icon",xi,OPENLAYERS);xi.prototype.getAnchor=xi.prototype.Vb;xi.prototype.getImage=xi.prototype.ec;xi.prototype.getOrigin=xi.prototype.Ia;xi.prototype.getSrc=xi.prototype.cn;xi.prototype.getSize=xi.prototype.Db;xi.prototype.load=xi.prototype.load;u("ol.style.Image",wi,OPENLAYERS);wi.prototype.getOpacity=wi.prototype.le;wi.prototype.getRotateWithView=wi.prototype.Sd;
wi.prototype.getRotation=wi.prototype.me;wi.prototype.getScale=wi.prototype.ne;wi.prototype.getSnapToPixel=wi.prototype.Td;wi.prototype.setOpacity=wi.prototype.oe;wi.prototype.setRotation=wi.prototype.pe;wi.prototype.setScale=wi.prototype.qe;u("ol.style.RegularShape",Gw,OPENLAYERS);Gw.prototype.getAnchor=Gw.prototype.Vb;Gw.prototype.getAngle=Gw.prototype.dn;Gw.prototype.getFill=Gw.prototype.en;Gw.prototype.getImage=Gw.prototype.ec;Gw.prototype.getOrigin=Gw.prototype.Ia;Gw.prototype.getPoints=Gw.prototype.fn;
Gw.prototype.getRadius=Gw.prototype.gn;Gw.prototype.getRadius2=Gw.prototype.ik;Gw.prototype.getSize=Gw.prototype.Db;Gw.prototype.getStroke=Gw.prototype.hn;u("ol.style.Stroke",ik,OPENLAYERS);ik.prototype.getColor=ik.prototype.jn;ik.prototype.getLineCap=ik.prototype.Tj;ik.prototype.getLineDash=ik.prototype.kn;ik.prototype.getLineJoin=ik.prototype.Uj;ik.prototype.getMiterLimit=ik.prototype.Zj;ik.prototype.getWidth=ik.prototype.ln;ik.prototype.setColor=ik.prototype.mn;ik.prototype.setLineCap=ik.prototype.Ho;
ik.prototype.setLineDash=ik.prototype.nn;ik.prototype.setLineJoin=ik.prototype.Io;ik.prototype.setMiterLimit=ik.prototype.Jo;ik.prototype.setWidth=ik.prototype.No;u("ol.style.Style",lk,OPENLAYERS);lk.prototype.getGeometry=lk.prototype.W;lk.prototype.getGeometryFunction=lk.prototype.Oj;lk.prototype.getFill=lk.prototype.pn;lk.prototype.getImage=lk.prototype.qn;lk.prototype.getStroke=lk.prototype.rn;lk.prototype.getText=lk.prototype.Ha;lk.prototype.getZIndex=lk.prototype.sn;lk.prototype.setGeometry=
lk.prototype.Dh;lk.prototype.setZIndex=lk.prototype.tn;u("ol.style.Text",vq,OPENLAYERS);vq.prototype.getFont=vq.prototype.Mj;vq.prototype.getOffsetX=vq.prototype.$j;vq.prototype.getOffsetY=vq.prototype.ak;vq.prototype.getFill=vq.prototype.vn;vq.prototype.getRotation=vq.prototype.wn;vq.prototype.getScale=vq.prototype.xn;vq.prototype.getStroke=vq.prototype.yn;vq.prototype.getText=vq.prototype.Ha;vq.prototype.getTextAlign=vq.prototype.mk;vq.prototype.getTextBaseline=vq.prototype.nk;vq.prototype.setFont=
vq.prototype.Eo;vq.prototype.setOffsetX=vq.prototype.ei;vq.prototype.setOffsetY=vq.prototype.fi;vq.prototype.setFill=vq.prototype.Do;vq.prototype.setRotation=vq.prototype.zn;vq.prototype.setScale=vq.prototype.An;vq.prototype.setStroke=vq.prototype.Ko;vq.prototype.setText=vq.prototype.hi;vq.prototype.setTextAlign=vq.prototype.ii;vq.prototype.setTextBaseline=vq.prototype.Lo;u("ol.Sphere",Vc,OPENLAYERS);Vc.prototype.geodesicArea=Vc.prototype.a;Vc.prototype.haversineDistance=Vc.prototype.b;u("ol.source.BingMaps",
Gv,OPENLAYERS);u("ol.source.BingMaps.TOS_ATTRIBUTION",Hv,OPENLAYERS);u("ol.source.CartoDB",Jv,OPENLAYERS);Jv.prototype.getConfig=Jv.prototype.D;Jv.prototype.updateConfig=Jv.prototype.Y;u("ol.source.Cluster",X,OPENLAYERS);X.prototype.getSource=X.prototype.ta;u("ol.source.ImageCanvas",wl,OPENLAYERS);u("ol.source.ImageMapGuide",Ov,OPENLAYERS);Ov.prototype.getParams=Ov.prototype.Em;Ov.prototype.getImageLoadFunction=Ov.prototype.Dm;Ov.prototype.updateParams=Ov.prototype.Gm;Ov.prototype.setImageLoadFunction=
Ov.prototype.Fm;u("ol.source.Image",pl,OPENLAYERS);rl.prototype.image=rl.prototype.image;u("ol.source.ImageStatic",Pv,OPENLAYERS);u("ol.source.ImageVector",mm,OPENLAYERS);mm.prototype.getSource=mm.prototype.Hm;mm.prototype.getStyle=mm.prototype.Im;mm.prototype.getStyleFunction=mm.prototype.Jm;mm.prototype.setStyle=mm.prototype.qh;u("ol.source.ImageWMS",Qv,OPENLAYERS);Qv.prototype.getGetFeatureInfoUrl=Qv.prototype.Mm;Qv.prototype.getParams=Qv.prototype.Om;Qv.prototype.getImageLoadFunction=Qv.prototype.Nm;
Qv.prototype.getUrl=Qv.prototype.Pm;Qv.prototype.setImageLoadFunction=Qv.prototype.Qm;Qv.prototype.setUrl=Qv.prototype.Rm;Qv.prototype.updateParams=Qv.prototype.Sm;u("ol.source.MapQuest",Wv,OPENLAYERS);Wv.prototype.getLayer=Wv.prototype.o;u("ol.source.OSM",Uv,OPENLAYERS);u("ol.source.OSM.ATTRIBUTION",Vv,OPENLAYERS);u("ol.source.Raster",Zv,OPENLAYERS);Zv.prototype.setOperation=Zv.prototype.s;dw.prototype.extent=dw.prototype.extent;dw.prototype.resolution=dw.prototype.resolution;dw.prototype.data=dw.prototype.data;
u("ol.source.Source",Xf,OPENLAYERS);Xf.prototype.getAttributions=Xf.prototype.da;Xf.prototype.getLogo=Xf.prototype.qa;Xf.prototype.getProjection=Xf.prototype.sa;Xf.prototype.getState=Xf.prototype.V;Xf.prototype.refresh=Xf.prototype.pa;Xf.prototype.setAttributions=Xf.prototype.la;u("ol.source.Stamen",iw,OPENLAYERS);u("ol.source.TileArcGISRest",kw,OPENLAYERS);kw.prototype.getParams=kw.prototype.s;kw.prototype.updateParams=kw.prototype.A;u("ol.source.TileDebug",mw,OPENLAYERS);u("ol.source.TileImage",
W,OPENLAYERS);W.prototype.setRenderReprojectionEdges=W.prototype.nb;W.prototype.setTileGridForProjection=W.prototype.ob;u("ol.source.TileJSON",nw,OPENLAYERS);nw.prototype.getTileJSON=nw.prototype.pk;u("ol.source.Tile",ng,OPENLAYERS);ng.prototype.getTileGrid=ng.prototype.Ja;rg.prototype.tile=rg.prototype.tile;u("ol.source.TileUTFGrid",ow,OPENLAYERS);ow.prototype.getTemplate=ow.prototype.lk;ow.prototype.forDataAtCoordinateAndResolution=ow.prototype.yj;u("ol.source.TileWMS",sw,OPENLAYERS);sw.prototype.getGetFeatureInfoUrl=
sw.prototype.Um;sw.prototype.getParams=sw.prototype.Vm;sw.prototype.updateParams=sw.prototype.Wm;wm.prototype.getTileLoadFunction=wm.prototype.Xa;wm.prototype.getTileUrlFunction=wm.prototype.Za;wm.prototype.getUrls=wm.prototype.$a;wm.prototype.setTileLoadFunction=wm.prototype.cb;wm.prototype.setTileUrlFunction=wm.prototype.Na;wm.prototype.setUrl=wm.prototype.Pa;wm.prototype.setUrls=wm.prototype.Ta;u("ol.source.Vector",Q,OPENLAYERS);Q.prototype.addFeature=Q.prototype.tb;Q.prototype.addFeatures=Q.prototype.Fc;
Q.prototype.clear=Q.prototype.clear;Q.prototype.forEachFeature=Q.prototype.pg;Q.prototype.forEachFeatureInExtent=Q.prototype.wb;Q.prototype.forEachFeatureIntersectingExtent=Q.prototype.qg;Q.prototype.getFeaturesCollection=Q.prototype.xg;Q.prototype.getFeatures=Q.prototype.je;Q.prototype.getFeaturesAtCoordinate=Q.prototype.wg;Q.prototype.getFeaturesInExtent=Q.prototype.Ze;Q.prototype.getClosestFeatureToCoordinate=Q.prototype.sg;Q.prototype.getExtent=Q.prototype.G;Q.prototype.getFeatureById=Q.prototype.vg;
Q.prototype.getFormat=Q.prototype.wh;Q.prototype.getUrl=Q.prototype.xh;Q.prototype.removeFeature=Q.prototype.mb;jm.prototype.feature=jm.prototype.feature;u("ol.source.VectorTile",xm,OPENLAYERS);u("ol.source.WMTS",Z,OPENLAYERS);Z.prototype.getDimensions=Z.prototype.Kj;Z.prototype.getFormat=Z.prototype.Xm;Z.prototype.getLayer=Z.prototype.Ym;Z.prototype.getMatrixSet=Z.prototype.Xj;Z.prototype.getRequestEncoding=Z.prototype.jk;Z.prototype.getStyle=Z.prototype.Zm;Z.prototype.getVersion=Z.prototype.rk;
Z.prototype.updateDimensions=Z.prototype.Wo;u("ol.source.WMTS.optionsFromCapabilities",function(a,c){var d=ab(a.Contents.Layer,function(a){return a.Identifier==c.layer}),e=a.Contents.TileMatrixSet,f,g;f=1<d.TileMatrixSetLink.length?"projection"in c?eb(d.TileMatrixSetLink,function(a){return ab(e,function(c){return c.Identifier==a.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==c.projection}):eb(d.TileMatrixSetLink,function(a){return a.TileMatrixSet==c.matrixSet}):
0;0>f&&(f=0);g=d.TileMatrixSetLink[f].TileMatrixSet;var h=d.Format[0];"format"in c&&(h=c.format);f=eb(d.Style,function(a){return"style"in c?a.Title==c.style:a.isDefault});0>f&&(f=0);f=d.Style[f].Identifier;var k={};"Dimension"in d&&d.Dimension.forEach(function(a){var c=a.Identifier,d=a.Default;void 0===d&&(d=a.Value[0]);k[c]=d});var m=ab(a.Contents.TileMatrixSet,function(a){return a.Identifier==g}),n;n="projection"in c?ad(c.projection):ad(m.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,
"$1:$3"));var p=d.WGS84BoundingBox,q,r;void 0!==p&&(r=ad("EPSG:4326").G(),r=p[0]==r[0]&&p[2]==r[2],q=ud(p,"EPSG:4326",n),(p=n.G())&&(wc(p,q)||(q=void 0)));var m=yw(m,q),t=[];q=c.requestEncoding;q=void 0!==q?q:"";if(a.hasOwnProperty("OperationsMetadata")&&a.OperationsMetadata.hasOwnProperty("GetTile")&&0!==q.indexOf("REST"))for(var d=a.OperationsMetadata.GetTile.DCP.HTTP.Get,p=0,v=d.length;p<v;++p){var w=ab(d[p].Constraint,function(a){return"GetEncoding"==a.name}).AllowedValues.Value;0<w.length&&Wa(w,
"KVP")&&(q="KVP",t.push(d[p].href))}else q="REST",d.ResourceURL.forEach(function(a){"tile"==a.resourceType&&(h=a.format,t.push(a.template))});return{urls:t,layer:c.layer,matrixSet:g,format:h,projection:n,requestEncoding:q,tileGrid:m,style:f,dimensions:k,wrapX:r}},OPENLAYERS);u("ol.source.XYZ",Iv,OPENLAYERS);u("ol.source.Zoomify",Aw,OPENLAYERS);fi.prototype.vectorContext=fi.prototype.vectorContext;fi.prototype.frameState=fi.prototype.frameState;fi.prototype.context=fi.prototype.context;fi.prototype.glContext=
fi.prototype.glContext;al.prototype.get=al.prototype.get;al.prototype.getExtent=al.prototype.G;al.prototype.getGeometry=al.prototype.W;al.prototype.getProperties=al.prototype.zm;al.prototype.getType=al.prototype.X;u("ol.render.VectorContext",ei,OPENLAYERS);pn.prototype.setStyle=pn.prototype.pd;pn.prototype.drawGeometry=pn.prototype.pc;pn.prototype.drawFeature=pn.prototype.Se;sk.prototype.drawCircle=sk.prototype.Nd;sk.prototype.setStyle=sk.prototype.pd;sk.prototype.drawGeometry=sk.prototype.pc;sk.prototype.drawFeature=
sk.prototype.Se;u("ol.proj.common.add",Vj,OPENLAYERS);u("ol.proj.METERS_PER_UNIT",Xc,OPENLAYERS);u("ol.proj.Projection",Yc,OPENLAYERS);Yc.prototype.getCode=Yc.prototype.Ij;Yc.prototype.getExtent=Yc.prototype.G;Yc.prototype.getUnits=Yc.prototype.xm;Yc.prototype.getMetersPerUnit=Yc.prototype.Xb;Yc.prototype.getWorldExtent=Yc.prototype.tk;Yc.prototype.isGlobal=Yc.prototype.dl;Yc.prototype.setGlobal=Yc.prototype.Go;Yc.prototype.setExtent=Yc.prototype.ym;Yc.prototype.setWorldExtent=Yc.prototype.Oo;Yc.prototype.setGetPointResolution=
Yc.prototype.Fo;Yc.prototype.getPointResolution=Yc.prototype.getPointResolution;u("ol.proj.setProj4",function(a){$c=a},OPENLAYERS);u("ol.proj.addEquivalentProjections",bd,OPENLAYERS);u("ol.proj.addProjection",nd,OPENLAYERS);u("ol.proj.addCoordinateTransforms",cd,OPENLAYERS);u("ol.proj.fromLonLat",function(a,c){return td(a,"EPSG:4326",void 0!==c?c:"EPSG:3857")},OPENLAYERS);u("ol.proj.toLonLat",function(a,c){return td(a,void 0!==c?c:"EPSG:3857","EPSG:4326")},OPENLAYERS);u("ol.proj.get",ad,OPENLAYERS);
u("ol.proj.equivalent",qd,OPENLAYERS);u("ol.proj.getTransform",rd,OPENLAYERS);u("ol.proj.transform",td,OPENLAYERS);u("ol.proj.transformExtent",ud,OPENLAYERS);u("ol.layer.Heatmap",V,OPENLAYERS);V.prototype.getBlur=V.prototype.rg;V.prototype.getGradient=V.prototype.zg;V.prototype.getRadius=V.prototype.ih;V.prototype.setBlur=V.prototype.Wh;V.prototype.setGradient=V.prototype.ai;V.prototype.setRadius=V.prototype.jh;u("ol.layer.Image",Wj,OPENLAYERS);Wj.prototype.getSource=Wj.prototype.ea;u("ol.layer.Layer",
gi,OPENLAYERS);gi.prototype.getSource=gi.prototype.ea;gi.prototype.setMap=gi.prototype.setMap;gi.prototype.setSource=gi.prototype.Cc;u("ol.layer.Base",ci,OPENLAYERS);ci.prototype.getExtent=ci.prototype.G;ci.prototype.getMaxResolution=ci.prototype.Ib;ci.prototype.getMinResolution=ci.prototype.Jb;ci.prototype.getOpacity=ci.prototype.Nb;ci.prototype.getVisible=ci.prototype.yb;ci.prototype.getZIndex=ci.prototype.Ob;ci.prototype.setExtent=ci.prototype.ac;ci.prototype.setMaxResolution=ci.prototype.ic;ci.prototype.setMinResolution=
ci.prototype.jc;ci.prototype.setOpacity=ci.prototype.bc;ci.prototype.setVisible=ci.prototype.cc;ci.prototype.setZIndex=ci.prototype.dc;u("ol.layer.Group",Mj,OPENLAYERS);Mj.prototype.getLayers=Mj.prototype.Nc;Mj.prototype.setLayers=Mj.prototype.hh;u("ol.layer.Tile",Xj,OPENLAYERS);Xj.prototype.getPreload=Xj.prototype.a;Xj.prototype.getSource=Xj.prototype.ea;Xj.prototype.setPreload=Xj.prototype.c;Xj.prototype.getUseInterimTilesOnError=Xj.prototype.f;Xj.prototype.setUseInterimTilesOnError=Xj.prototype.i;
u("ol.layer.Vector",G,OPENLAYERS);G.prototype.getSource=G.prototype.ea;G.prototype.getStyle=G.prototype.N;G.prototype.getStyleFunction=G.prototype.H;G.prototype.setStyle=G.prototype.c;u("ol.layer.VectorTile",H,OPENLAYERS);H.prototype.getPreload=H.prototype.i;H.prototype.getUseInterimTilesOnError=H.prototype.S;H.prototype.setPreload=H.prototype.T;H.prototype.setUseInterimTilesOnError=H.prototype.Y;u("ol.interaction.DoubleClickZoom",Ti,OPENLAYERS);u("ol.interaction.DoubleClickZoom.handleEvent",Ui,OPENLAYERS);
u("ol.interaction.DragAndDrop",yu,OPENLAYERS);u("ol.interaction.DragAndDrop.handleEvent",Tc,OPENLAYERS);Bu.prototype.features=Bu.prototype.features;Bu.prototype.file=Bu.prototype.file;Bu.prototype.projection=Bu.prototype.projection;qj.prototype.coordinate=qj.prototype.coordinate;qj.prototype.mapBrowserEvent=qj.prototype.mapBrowserEvent;u("ol.interaction.DragBox",rj,OPENLAYERS);rj.prototype.getGeometry=rj.prototype.W;u("ol.interaction.DragPan",fj,OPENLAYERS);u("ol.interaction.DragRotateAndZoom",Du,
OPENLAYERS);u("ol.interaction.DragRotate",jj,OPENLAYERS);u("ol.interaction.DragZoom",wj,OPENLAYERS);Hu.prototype.feature=Hu.prototype.feature;u("ol.interaction.Draw",Iu,OPENLAYERS);u("ol.interaction.Draw.handleEvent",Ku,OPENLAYERS);Iu.prototype.removeLastPoint=Iu.prototype.to;Iu.prototype.finishDrawing=Iu.prototype.ed;Iu.prototype.extend=Iu.prototype.cm;u("ol.interaction.Draw.createRegularPolygon",function(a,c){return function(d,e){var f=d[0],g=d[1],h=Math.sqrt(Xb(f,g)),k=e?e:ee(new lu(f),a);fe(k,
f,h,c?c:Math.atan((g[1]-f[1])/(g[0]-f[0])));return k}},OPENLAYERS);u("ol.interaction.Interaction",Pi,OPENLAYERS);Pi.prototype.getActive=Pi.prototype.f;Pi.prototype.getMap=Pi.prototype.j;Pi.prototype.setActive=Pi.prototype.i;u("ol.interaction.defaults",Lj,OPENLAYERS);u("ol.interaction.KeyboardPan",xj,OPENLAYERS);u("ol.interaction.KeyboardPan.handleEvent",yj,OPENLAYERS);u("ol.interaction.KeyboardZoom",zj,OPENLAYERS);u("ol.interaction.KeyboardZoom.handleEvent",Aj,OPENLAYERS);Yu.prototype.features=Yu.prototype.features;
Yu.prototype.mapBrowserPointerEvent=Yu.prototype.mapBrowserPointerEvent;u("ol.interaction.Modify",Zu,OPENLAYERS);u("ol.interaction.Modify.handleEvent",bv,OPENLAYERS);u("ol.interaction.MouseWheelZoom",Bj,OPENLAYERS);u("ol.interaction.MouseWheelZoom.handleEvent",Cj,OPENLAYERS);Bj.prototype.setMouseAnchor=Bj.prototype.H;u("ol.interaction.PinchRotate",Dj,OPENLAYERS);u("ol.interaction.PinchZoom",Hj,OPENLAYERS);u("ol.interaction.Pointer",cj,OPENLAYERS);u("ol.interaction.Pointer.handleEvent",dj,OPENLAYERS);
lv.prototype.selected=lv.prototype.selected;lv.prototype.deselected=lv.prototype.deselected;lv.prototype.mapBrowserEvent=lv.prototype.mapBrowserEvent;u("ol.interaction.Select",mv,OPENLAYERS);mv.prototype.getFeatures=mv.prototype.mm;mv.prototype.getLayer=mv.prototype.nm;u("ol.interaction.Select.handleEvent",nv,OPENLAYERS);mv.prototype.setMap=mv.prototype.setMap;u("ol.interaction.Snap",pv,OPENLAYERS);pv.prototype.addFeature=pv.prototype.tb;pv.prototype.removeFeature=pv.prototype.mb;tv.prototype.features=
tv.prototype.features;tv.prototype.coordinate=tv.prototype.coordinate;u("ol.interaction.Translate",uv,OPENLAYERS);u("ol.geom.Circle",lu,OPENLAYERS);lu.prototype.clone=lu.prototype.clone;lu.prototype.getCenter=lu.prototype.od;lu.prototype.getRadius=lu.prototype.qf;lu.prototype.getType=lu.prototype.X;lu.prototype.intersectsExtent=lu.prototype.Ka;lu.prototype.setCenter=lu.prototype.Vl;lu.prototype.setCenterAndRadius=lu.prototype.Of;lu.prototype.setRadius=lu.prototype.Wl;lu.prototype.transform=lu.prototype.hb;
u("ol.geom.Geometry",vd,OPENLAYERS);vd.prototype.getClosestPoint=vd.prototype.xb;vd.prototype.getExtent=vd.prototype.G;vd.prototype.rotate=vd.prototype.rotate;vd.prototype.simplify=vd.prototype.Ab;vd.prototype.transform=vd.prototype.hb;u("ol.geom.GeometryCollection",zo,OPENLAYERS);zo.prototype.clone=zo.prototype.clone;zo.prototype.getGeometries=zo.prototype.yg;zo.prototype.getType=zo.prototype.X;zo.prototype.intersectsExtent=zo.prototype.Ka;zo.prototype.setGeometries=zo.prototype.$h;zo.prototype.applyTransform=
zo.prototype.oc;zo.prototype.translate=zo.prototype.Mc;u("ol.geom.LinearRing",Pd,OPENLAYERS);Pd.prototype.clone=Pd.prototype.clone;Pd.prototype.getArea=Pd.prototype.Zl;Pd.prototype.getCoordinates=Pd.prototype.Z;Pd.prototype.getType=Pd.prototype.X;Pd.prototype.setCoordinates=Pd.prototype.ma;u("ol.geom.LineString",S,OPENLAYERS);S.prototype.appendCoordinate=S.prototype.nj;S.prototype.clone=S.prototype.clone;S.prototype.forEachSegment=S.prototype.Bj;S.prototype.getCoordinateAtM=S.prototype.Xl;S.prototype.getCoordinates=
S.prototype.Z;S.prototype.getCoordinateAt=S.prototype.tg;S.prototype.getLength=S.prototype.Yl;S.prototype.getType=S.prototype.X;S.prototype.intersectsExtent=S.prototype.Ka;S.prototype.setCoordinates=S.prototype.ma;u("ol.geom.MultiLineString",T,OPENLAYERS);T.prototype.appendLineString=T.prototype.oj;T.prototype.clone=T.prototype.clone;T.prototype.getCoordinateAtM=T.prototype.$l;T.prototype.getCoordinates=T.prototype.Z;T.prototype.getLineString=T.prototype.Vj;T.prototype.getLineStrings=T.prototype.jd;
T.prototype.getType=T.prototype.X;T.prototype.intersectsExtent=T.prototype.Ka;T.prototype.setCoordinates=T.prototype.ma;u("ol.geom.MultiPoint",oo,OPENLAYERS);oo.prototype.appendPoint=oo.prototype.qj;oo.prototype.clone=oo.prototype.clone;oo.prototype.getCoordinates=oo.prototype.Z;oo.prototype.getPoint=oo.prototype.fk;oo.prototype.getPoints=oo.prototype.fe;oo.prototype.getType=oo.prototype.X;oo.prototype.intersectsExtent=oo.prototype.Ka;oo.prototype.setCoordinates=oo.prototype.ma;u("ol.geom.MultiPolygon",
po,OPENLAYERS);po.prototype.appendPolygon=po.prototype.rj;po.prototype.clone=po.prototype.clone;po.prototype.getArea=po.prototype.am;po.prototype.getCoordinates=po.prototype.Z;po.prototype.getInteriorPoints=po.prototype.Sj;po.prototype.getPolygon=po.prototype.hk;po.prototype.getPolygons=po.prototype.Rd;po.prototype.getType=po.prototype.X;po.prototype.intersectsExtent=po.prototype.Ka;po.prototype.setCoordinates=po.prototype.ma;u("ol.geom.Point",E,OPENLAYERS);E.prototype.clone=E.prototype.clone;E.prototype.getCoordinates=
E.prototype.Z;E.prototype.getType=E.prototype.X;E.prototype.intersectsExtent=E.prototype.Ka;E.prototype.setCoordinates=E.prototype.ma;u("ol.geom.Polygon",F,OPENLAYERS);F.prototype.appendLinearRing=F.prototype.pj;F.prototype.clone=F.prototype.clone;F.prototype.getArea=F.prototype.bm;F.prototype.getCoordinates=F.prototype.Z;F.prototype.getInteriorPoint=F.prototype.Rj;F.prototype.getLinearRingCount=F.prototype.Wj;F.prototype.getLinearRing=F.prototype.Ag;F.prototype.getLinearRings=F.prototype.Qd;F.prototype.getType=
F.prototype.X;F.prototype.intersectsExtent=F.prototype.Ka;F.prototype.setCoordinates=F.prototype.ma;u("ol.geom.Polygon.circular",ce,OPENLAYERS);u("ol.geom.Polygon.fromExtent",de,OPENLAYERS);u("ol.geom.Polygon.fromCircle",ee,OPENLAYERS);u("ol.geom.SimpleGeometry",xd,OPENLAYERS);xd.prototype.getFirstCoordinate=xd.prototype.Fb;xd.prototype.getLastCoordinate=xd.prototype.Gb;xd.prototype.getLayout=xd.prototype.Hb;xd.prototype.applyTransform=xd.prototype.oc;xd.prototype.translate=xd.prototype.Mc;u("ol.format.EsriJSON",
so,OPENLAYERS);so.prototype.readFeature=so.prototype.Pb;so.prototype.readFeatures=so.prototype.Ea;so.prototype.readGeometry=so.prototype.Pc;so.prototype.readProjection=so.prototype.Sa;so.prototype.writeGeometry=so.prototype.Tc;so.prototype.writeGeometryObject=so.prototype.Ee;so.prototype.writeFeature=so.prototype.Ad;so.prototype.writeFeatureObject=so.prototype.Sc;so.prototype.writeFeatures=so.prototype.Ub;so.prototype.writeFeaturesObject=so.prototype.Ce;u("ol.format.Feature",eo,OPENLAYERS);u("ol.format.GeoJSON",
Do,OPENLAYERS);Do.prototype.readFeature=Do.prototype.Pb;Do.prototype.readFeatures=Do.prototype.Ea;Do.prototype.readGeometry=Do.prototype.Pc;Do.prototype.readProjection=Do.prototype.Sa;Do.prototype.writeFeature=Do.prototype.Ad;Do.prototype.writeFeatureObject=Do.prototype.Sc;Do.prototype.writeFeatures=Do.prototype.Ub;Do.prototype.writeFeaturesObject=Do.prototype.Ce;Do.prototype.writeGeometry=Do.prototype.Tc;Do.prototype.writeGeometryObject=Do.prototype.Ee;u("ol.format.GPX",hp,OPENLAYERS);hp.prototype.readFeature=
hp.prototype.Pb;hp.prototype.readFeatures=hp.prototype.Ea;hp.prototype.readProjection=hp.prototype.Sa;hp.prototype.writeFeatures=hp.prototype.Ub;hp.prototype.writeFeaturesNode=hp.prototype.a;u("ol.format.IGC",Qp,OPENLAYERS);Qp.prototype.readFeature=Qp.prototype.Pb;Qp.prototype.readFeatures=Qp.prototype.Ea;Qp.prototype.readProjection=Qp.prototype.Sa;u("ol.format.KML",wq,OPENLAYERS);wq.prototype.readFeature=wq.prototype.Pb;wq.prototype.readFeatures=wq.prototype.Ea;wq.prototype.readName=wq.prototype.io;
wq.prototype.readNetworkLinks=wq.prototype.jo;wq.prototype.readProjection=wq.prototype.Sa;wq.prototype.writeFeatures=wq.prototype.Ub;wq.prototype.writeFeaturesNode=wq.prototype.a;u("ol.format.MVT",ks,OPENLAYERS);ks.prototype.setLayers=ks.prototype.c;u("ol.format.OSMXML",ms,OPENLAYERS);ms.prototype.readFeatures=ms.prototype.Ea;ms.prototype.readProjection=ms.prototype.Sa;u("ol.format.Polyline",Ls,OPENLAYERS);u("ol.format.Polyline.encodeDeltas",Ms,OPENLAYERS);u("ol.format.Polyline.decodeDeltas",Ps,OPENLAYERS);
u("ol.format.Polyline.encodeFloats",Ns,OPENLAYERS);u("ol.format.Polyline.decodeFloats",Qs,OPENLAYERS);Ls.prototype.readFeature=Ls.prototype.Pb;Ls.prototype.readFeatures=Ls.prototype.Ea;Ls.prototype.readGeometry=Ls.prototype.Pc;Ls.prototype.readProjection=Ls.prototype.Sa;Ls.prototype.writeGeometry=Ls.prototype.Tc;u("ol.format.TopoJSON",Rs,OPENLAYERS);Rs.prototype.readFeatures=Rs.prototype.Ea;Rs.prototype.readProjection=Rs.prototype.Sa;u("ol.format.WFS",Xs,OPENLAYERS);Xs.prototype.readFeatures=Xs.prototype.Ea;
Xs.prototype.readTransactionResponse=Xs.prototype.o;Xs.prototype.readFeatureCollectionMetadata=Xs.prototype.j;Xs.prototype.writeGetFeature=Xs.prototype.l;Xs.prototype.writeTransaction=Xs.prototype.U;Xs.prototype.readProjection=Xs.prototype.Sa;u("ol.format.WKT",jt,OPENLAYERS);jt.prototype.readFeature=jt.prototype.Pb;jt.prototype.readFeatures=jt.prototype.Ea;jt.prototype.readGeometry=jt.prototype.Pc;jt.prototype.writeFeature=jt.prototype.Ad;jt.prototype.writeFeatures=jt.prototype.Ub;jt.prototype.writeGeometry=
jt.prototype.Tc;u("ol.format.WMSCapabilities",At,OPENLAYERS);At.prototype.read=At.prototype.read;u("ol.format.WMSGetFeatureInfo",Xt,OPENLAYERS);Xt.prototype.readFeatures=Xt.prototype.Ea;u("ol.format.WMTSCapabilities",Yt,OPENLAYERS);Yt.prototype.read=Yt.prototype.read;u("ol.format.GML2",Yo,OPENLAYERS);u("ol.format.GML3",Zo,OPENLAYERS);Zo.prototype.writeGeometryNode=Zo.prototype.s;Zo.prototype.writeFeatures=Zo.prototype.Ub;Zo.prototype.writeFeaturesNode=Zo.prototype.a;u("ol.format.GML",Zo,OPENLAYERS);
Zo.prototype.writeFeatures=Zo.prototype.Ub;Zo.prototype.writeFeaturesNode=Zo.prototype.a;Lo.prototype.readFeatures=Lo.prototype.Ea;u("ol.events.condition.altKeyOnly",function(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey},OPENLAYERS);u("ol.events.condition.altShiftKeysOnly",Vi,OPENLAYERS);u("ol.events.condition.always",Tc,OPENLAYERS);u("ol.events.condition.click",function(a){return a.type==Th},OPENLAYERS);u("ol.events.condition.never",Uc,OPENLAYERS);u("ol.events.condition.pointerMove",
Xi,OPENLAYERS);u("ol.events.condition.singleClick",Yi,OPENLAYERS);u("ol.events.condition.doubleClick",function(a){return a.type==Uh},OPENLAYERS);u("ol.events.condition.noModifierKeys",Zi,OPENLAYERS);u("ol.events.condition.platformModifierKeyOnly",function(a){a=a.originalEvent;return!a.altKey&&($g?a.metaKey:a.ctrlKey)&&!a.shiftKey},OPENLAYERS);u("ol.events.condition.shiftKeyOnly",$i,OPENLAYERS);u("ol.events.condition.targetNotEditable",aj,OPENLAYERS);u("ol.events.condition.mouseOnly",bj,OPENLAYERS);
Cb.prototype.type=Cb.prototype.type;Cb.prototype.target=Cb.prototype.target;Cb.prototype.preventDefault=Cb.prototype.preventDefault;Cb.prototype.stopPropagation=Cb.prototype.stopPropagation;u("ol.control.Attribution",sg,OPENLAYERS);u("ol.control.Attribution.render",tg,OPENLAYERS);sg.prototype.getCollapsible=sg.prototype.Ll;sg.prototype.setCollapsible=sg.prototype.Ol;sg.prototype.setCollapsed=sg.prototype.Nl;sg.prototype.getCollapsed=sg.prototype.Kl;u("ol.control.Control",Pf,OPENLAYERS);Pf.prototype.getMap=
Pf.prototype.i;Pf.prototype.setMap=Pf.prototype.setMap;Pf.prototype.setTarget=Pf.prototype.c;u("ol.control.defaults",yg,OPENLAYERS);u("ol.control.FullScreen",Dg,OPENLAYERS);u("ol.control.MousePosition",Eg,OPENLAYERS);u("ol.control.MousePosition.render",Fg,OPENLAYERS);Eg.prototype.getCoordinateFormat=Eg.prototype.ug;Eg.prototype.getProjection=Eg.prototype.$g;Eg.prototype.setCoordinateFormat=Eg.prototype.Xh;Eg.prototype.setProjection=Eg.prototype.ah;u("ol.control.OverviewMap",On,OPENLAYERS);u("ol.control.OverviewMap.render",
Pn,OPENLAYERS);On.prototype.getCollapsible=On.prototype.Rl;On.prototype.setCollapsible=On.prototype.Ul;On.prototype.setCollapsed=On.prototype.Tl;On.prototype.getCollapsed=On.prototype.Ql;On.prototype.getOverviewMap=On.prototype.dk;u("ol.control.Rotate",vg,OPENLAYERS);u("ol.control.Rotate.render",wg,OPENLAYERS);u("ol.control.ScaleLine",Tn,OPENLAYERS);Tn.prototype.getUnits=Tn.prototype.N;u("ol.control.ScaleLine.render",Un,OPENLAYERS);Tn.prototype.setUnits=Tn.prototype.D;u("ol.control.Zoom",xg,OPENLAYERS);
u("ol.control.ZoomSlider",Xn,OPENLAYERS);u("ol.control.ZoomSlider.render",Zn,OPENLAYERS);u("ol.control.ZoomToExtent",bo,OPENLAYERS);u("ol.color.asArray",Me,OPENLAYERS);u("ol.color.asString",Oe,OPENLAYERS);Be.prototype.type=Be.prototype.type;Be.prototype.target=Be.prototype.target;Be.prototype.preventDefault=Be.prototype.preventDefault;Be.prototype.stopPropagation=Be.prototype.stopPropagation;Kb.prototype.changed=Kb.prototype.u;Kb.prototype.dispatchEvent=Kb.prototype.b;Kb.prototype.getRevision=Kb.prototype.K;
Kb.prototype.on=Kb.prototype.I;Kb.prototype.once=Kb.prototype.L;Kb.prototype.un=Kb.prototype.J;Kb.prototype.unByKey=Kb.prototype.M;De.prototype.get=De.prototype.get;De.prototype.getKeys=De.prototype.O;De.prototype.getProperties=De.prototype.P;De.prototype.set=De.prototype.set;De.prototype.setProperties=De.prototype.C;De.prototype.unset=De.prototype.R;De.prototype.changed=De.prototype.u;De.prototype.dispatchEvent=De.prototype.b;De.prototype.getRevision=De.prototype.K;De.prototype.on=De.prototype.I;
De.prototype.once=De.prototype.L;De.prototype.un=De.prototype.J;De.prototype.unByKey=De.prototype.M;co.prototype.get=co.prototype.get;co.prototype.getKeys=co.prototype.O;co.prototype.getProperties=co.prototype.P;co.prototype.set=co.prototype.set;co.prototype.setProperties=co.prototype.C;co.prototype.unset=co.prototype.R;co.prototype.changed=co.prototype.u;co.prototype.dispatchEvent=co.prototype.b;co.prototype.getRevision=co.prototype.K;co.prototype.on=co.prototype.I;co.prototype.once=co.prototype.L;
co.prototype.un=co.prototype.J;co.prototype.unByKey=co.prototype.M;xl.prototype.get=xl.prototype.get;xl.prototype.getKeys=xl.prototype.O;xl.prototype.getProperties=xl.prototype.P;xl.prototype.set=xl.prototype.set;xl.prototype.setProperties=xl.prototype.C;xl.prototype.unset=xl.prototype.R;xl.prototype.changed=xl.prototype.u;xl.prototype.dispatchEvent=xl.prototype.b;xl.prototype.getRevision=xl.prototype.K;xl.prototype.on=xl.prototype.I;xl.prototype.once=xl.prototype.L;xl.prototype.un=xl.prototype.J;
xl.prototype.unByKey=xl.prototype.M;ku.prototype.get=ku.prototype.get;ku.prototype.getKeys=ku.prototype.O;ku.prototype.getProperties=ku.prototype.P;ku.prototype.set=ku.prototype.set;ku.prototype.setProperties=ku.prototype.C;ku.prototype.unset=ku.prototype.R;ku.prototype.changed=ku.prototype.u;ku.prototype.dispatchEvent=ku.prototype.b;ku.prototype.getRevision=ku.prototype.K;ku.prototype.on=ku.prototype.I;ku.prototype.once=ku.prototype.L;ku.prototype.un=ku.prototype.J;ku.prototype.unByKey=ku.prototype.M;
wu.prototype.getTileCoord=wu.prototype.f;R.prototype.get=R.prototype.get;R.prototype.getKeys=R.prototype.O;R.prototype.getProperties=R.prototype.P;R.prototype.set=R.prototype.set;R.prototype.setProperties=R.prototype.C;R.prototype.unset=R.prototype.R;R.prototype.changed=R.prototype.u;R.prototype.dispatchEvent=R.prototype.b;R.prototype.getRevision=R.prototype.K;R.prototype.on=R.prototype.I;R.prototype.once=R.prototype.L;R.prototype.un=R.prototype.J;R.prototype.unByKey=R.prototype.M;Of.prototype.type=
Of.prototype.type;Of.prototype.target=Of.prototype.target;Of.prototype.preventDefault=Of.prototype.preventDefault;Of.prototype.stopPropagation=Of.prototype.stopPropagation;Ph.prototype.map=Ph.prototype.map;Ph.prototype.frameState=Ph.prototype.frameState;Ph.prototype.type=Ph.prototype.type;Ph.prototype.target=Ph.prototype.target;Ph.prototype.preventDefault=Ph.prototype.preventDefault;Ph.prototype.stopPropagation=Ph.prototype.stopPropagation;Qh.prototype.originalEvent=Qh.prototype.originalEvent;Qh.prototype.pixel=
Qh.prototype.pixel;Qh.prototype.coordinate=Qh.prototype.coordinate;Qh.prototype.dragging=Qh.prototype.dragging;Qh.prototype.preventDefault=Qh.prototype.preventDefault;Qh.prototype.stopPropagation=Qh.prototype.stopPropagation;Qh.prototype.map=Qh.prototype.map;Qh.prototype.frameState=Qh.prototype.frameState;Qh.prototype.type=Qh.prototype.type;Qh.prototype.target=Qh.prototype.target;Jb.prototype.type=Jb.prototype.type;Jb.prototype.target=Jb.prototype.target;Jb.prototype.preventDefault=Jb.prototype.preventDefault;
Jb.prototype.stopPropagation=Jb.prototype.stopPropagation;Kn.prototype.get=Kn.prototype.get;Kn.prototype.getKeys=Kn.prototype.O;Kn.prototype.getProperties=Kn.prototype.P;Kn.prototype.set=Kn.prototype.set;Kn.prototype.setProperties=Kn.prototype.C;Kn.prototype.unset=Kn.prototype.R;Kn.prototype.changed=Kn.prototype.u;Kn.prototype.dispatchEvent=Kn.prototype.b;Kn.prototype.getRevision=Kn.prototype.K;Kn.prototype.on=Kn.prototype.I;Kn.prototype.once=Kn.prototype.L;Kn.prototype.un=Kn.prototype.J;Kn.prototype.unByKey=
Kn.prototype.M;zl.prototype.getTileCoord=zl.prototype.f;ge.prototype.get=ge.prototype.get;ge.prototype.getKeys=ge.prototype.O;ge.prototype.getProperties=ge.prototype.P;ge.prototype.set=ge.prototype.set;ge.prototype.setProperties=ge.prototype.C;ge.prototype.unset=ge.prototype.R;ge.prototype.changed=ge.prototype.u;ge.prototype.dispatchEvent=ge.prototype.b;ge.prototype.getRevision=ge.prototype.K;ge.prototype.on=ge.prototype.I;ge.prototype.once=ge.prototype.L;ge.prototype.un=ge.prototype.J;ge.prototype.unByKey=
ge.prototype.M;xw.prototype.getMaxZoom=xw.prototype.Bg;xw.prototype.getMinZoom=xw.prototype.Cg;xw.prototype.getOrigin=xw.prototype.Ia;xw.prototype.getResolution=xw.prototype.$;xw.prototype.getResolutions=xw.prototype.Kb;xw.prototype.getTileCoordExtent=xw.prototype.Da;xw.prototype.getTileCoordForCoordAndResolution=xw.prototype.Ud;xw.prototype.getTileCoordForCoordAndZ=xw.prototype.md;xw.prototype.getTileSize=xw.prototype.Ya;kk.prototype.getOpacity=kk.prototype.le;kk.prototype.getRotateWithView=kk.prototype.Sd;
kk.prototype.getRotation=kk.prototype.me;kk.prototype.getScale=kk.prototype.ne;kk.prototype.getSnapToPixel=kk.prototype.Td;kk.prototype.setOpacity=kk.prototype.oe;kk.prototype.setRotation=kk.prototype.pe;kk.prototype.setScale=kk.prototype.qe;xi.prototype.getOpacity=xi.prototype.le;xi.prototype.getRotateWithView=xi.prototype.Sd;xi.prototype.getRotation=xi.prototype.me;xi.prototype.getScale=xi.prototype.ne;xi.prototype.getSnapToPixel=xi.prototype.Td;xi.prototype.setOpacity=xi.prototype.oe;xi.prototype.setRotation=
xi.prototype.pe;xi.prototype.setScale=xi.prototype.qe;Gw.prototype.getOpacity=Gw.prototype.le;Gw.prototype.getRotateWithView=Gw.prototype.Sd;Gw.prototype.getRotation=Gw.prototype.me;Gw.prototype.getScale=Gw.prototype.ne;Gw.prototype.getSnapToPixel=Gw.prototype.Td;Gw.prototype.setOpacity=Gw.prototype.oe;Gw.prototype.setRotation=Gw.prototype.pe;Gw.prototype.setScale=Gw.prototype.qe;Xf.prototype.get=Xf.prototype.get;Xf.prototype.getKeys=Xf.prototype.O;Xf.prototype.getProperties=Xf.prototype.P;Xf.prototype.set=
Xf.prototype.set;Xf.prototype.setProperties=Xf.prototype.C;Xf.prototype.unset=Xf.prototype.R;Xf.prototype.changed=Xf.prototype.u;Xf.prototype.dispatchEvent=Xf.prototype.b;Xf.prototype.getRevision=Xf.prototype.K;Xf.prototype.on=Xf.prototype.I;Xf.prototype.once=Xf.prototype.L;Xf.prototype.un=Xf.prototype.J;Xf.prototype.unByKey=Xf.prototype.M;ng.prototype.getAttributions=ng.prototype.da;ng.prototype.getLogo=ng.prototype.qa;ng.prototype.getProjection=ng.prototype.sa;ng.prototype.getState=ng.prototype.V;
ng.prototype.refresh=ng.prototype.pa;ng.prototype.setAttributions=ng.prototype.la;ng.prototype.get=ng.prototype.get;ng.prototype.getKeys=ng.prototype.O;ng.prototype.getProperties=ng.prototype.P;ng.prototype.set=ng.prototype.set;ng.prototype.setProperties=ng.prototype.C;ng.prototype.unset=ng.prototype.R;ng.prototype.changed=ng.prototype.u;ng.prototype.dispatchEvent=ng.prototype.b;ng.prototype.getRevision=ng.prototype.K;ng.prototype.on=ng.prototype.I;ng.prototype.once=ng.prototype.L;ng.prototype.un=
ng.prototype.J;ng.prototype.unByKey=ng.prototype.M;wm.prototype.getTileGrid=wm.prototype.Ja;wm.prototype.refresh=wm.prototype.pa;wm.prototype.getAttributions=wm.prototype.da;wm.prototype.getLogo=wm.prototype.qa;wm.prototype.getProjection=wm.prototype.sa;wm.prototype.getState=wm.prototype.V;wm.prototype.setAttributions=wm.prototype.la;wm.prototype.get=wm.prototype.get;wm.prototype.getKeys=wm.prototype.O;wm.prototype.getProperties=wm.prototype.P;wm.prototype.set=wm.prototype.set;wm.prototype.setProperties=
wm.prototype.C;wm.prototype.unset=wm.prototype.R;wm.prototype.changed=wm.prototype.u;wm.prototype.dispatchEvent=wm.prototype.b;wm.prototype.getRevision=wm.prototype.K;wm.prototype.on=wm.prototype.I;wm.prototype.once=wm.prototype.L;wm.prototype.un=wm.prototype.J;wm.prototype.unByKey=wm.prototype.M;W.prototype.getTileLoadFunction=W.prototype.Xa;W.prototype.getTileUrlFunction=W.prototype.Za;W.prototype.getUrls=W.prototype.$a;W.prototype.setTileLoadFunction=W.prototype.cb;W.prototype.setTileUrlFunction=
W.prototype.Na;W.prototype.setUrl=W.prototype.Pa;W.prototype.setUrls=W.prototype.Ta;W.prototype.getTileGrid=W.prototype.Ja;W.prototype.refresh=W.prototype.pa;W.prototype.getAttributions=W.prototype.da;W.prototype.getLogo=W.prototype.qa;W.prototype.getProjection=W.prototype.sa;W.prototype.getState=W.prototype.V;W.prototype.setAttributions=W.prototype.la;W.prototype.get=W.prototype.get;W.prototype.getKeys=W.prototype.O;W.prototype.getProperties=W.prototype.P;W.prototype.set=W.prototype.set;W.prototype.setProperties=
W.prototype.C;W.prototype.unset=W.prototype.R;W.prototype.changed=W.prototype.u;W.prototype.dispatchEvent=W.prototype.b;W.prototype.getRevision=W.prototype.K;W.prototype.on=W.prototype.I;W.prototype.once=W.prototype.L;W.prototype.un=W.prototype.J;W.prototype.unByKey=W.prototype.M;Gv.prototype.setRenderReprojectionEdges=Gv.prototype.nb;Gv.prototype.setTileGridForProjection=Gv.prototype.ob;Gv.prototype.getTileLoadFunction=Gv.prototype.Xa;Gv.prototype.getTileUrlFunction=Gv.prototype.Za;Gv.prototype.getUrls=
Gv.prototype.$a;Gv.prototype.setTileLoadFunction=Gv.prototype.cb;Gv.prototype.setTileUrlFunction=Gv.prototype.Na;Gv.prototype.setUrl=Gv.prototype.Pa;Gv.prototype.setUrls=Gv.prototype.Ta;Gv.prototype.getTileGrid=Gv.prototype.Ja;Gv.prototype.refresh=Gv.prototype.pa;Gv.prototype.getAttributions=Gv.prototype.da;Gv.prototype.getLogo=Gv.prototype.qa;Gv.prototype.getProjection=Gv.prototype.sa;Gv.prototype.getState=Gv.prototype.V;Gv.prototype.setAttributions=Gv.prototype.la;Gv.prototype.get=Gv.prototype.get;
Gv.prototype.getKeys=Gv.prototype.O;Gv.prototype.getProperties=Gv.prototype.P;Gv.prototype.set=Gv.prototype.set;Gv.prototype.setProperties=Gv.prototype.C;Gv.prototype.unset=Gv.prototype.R;Gv.prototype.changed=Gv.prototype.u;Gv.prototype.dispatchEvent=Gv.prototype.b;Gv.prototype.getRevision=Gv.prototype.K;Gv.prototype.on=Gv.prototype.I;Gv.prototype.once=Gv.prototype.L;Gv.prototype.un=Gv.prototype.J;Gv.prototype.unByKey=Gv.prototype.M;Iv.prototype.setRenderReprojectionEdges=Iv.prototype.nb;Iv.prototype.setTileGridForProjection=
Iv.prototype.ob;Iv.prototype.getTileLoadFunction=Iv.prototype.Xa;Iv.prototype.getTileUrlFunction=Iv.prototype.Za;Iv.prototype.getUrls=Iv.prototype.$a;Iv.prototype.setTileLoadFunction=Iv.prototype.cb;Iv.prototype.setTileUrlFunction=Iv.prototype.Na;Iv.prototype.setUrl=Iv.prototype.Pa;Iv.prototype.setUrls=Iv.prototype.Ta;Iv.prototype.getTileGrid=Iv.prototype.Ja;Iv.prototype.refresh=Iv.prototype.pa;Iv.prototype.getAttributions=Iv.prototype.da;Iv.prototype.getLogo=Iv.prototype.qa;Iv.prototype.getProjection=
Iv.prototype.sa;Iv.prototype.getState=Iv.prototype.V;Iv.prototype.setAttributions=Iv.prototype.la;Iv.prototype.get=Iv.prototype.get;Iv.prototype.getKeys=Iv.prototype.O;Iv.prototype.getProperties=Iv.prototype.P;Iv.prototype.set=Iv.prototype.set;Iv.prototype.setProperties=Iv.prototype.C;Iv.prototype.unset=Iv.prototype.R;Iv.prototype.changed=Iv.prototype.u;Iv.prototype.dispatchEvent=Iv.prototype.b;Iv.prototype.getRevision=Iv.prototype.K;Iv.prototype.on=Iv.prototype.I;Iv.prototype.once=Iv.prototype.L;
Iv.prototype.un=Iv.prototype.J;Iv.prototype.unByKey=Iv.prototype.M;Jv.prototype.setRenderReprojectionEdges=Jv.prototype.nb;Jv.prototype.setTileGridForProjection=Jv.prototype.ob;Jv.prototype.getTileLoadFunction=Jv.prototype.Xa;Jv.prototype.getTileUrlFunction=Jv.prototype.Za;Jv.prototype.getUrls=Jv.prototype.$a;Jv.prototype.setTileLoadFunction=Jv.prototype.cb;Jv.prototype.setTileUrlFunction=Jv.prototype.Na;Jv.prototype.setUrl=Jv.prototype.Pa;Jv.prototype.setUrls=Jv.prototype.Ta;Jv.prototype.getTileGrid=
Jv.prototype.Ja;Jv.prototype.refresh=Jv.prototype.pa;Jv.prototype.getAttributions=Jv.prototype.da;Jv.prototype.getLogo=Jv.prototype.qa;Jv.prototype.getProjection=Jv.prototype.sa;Jv.prototype.getState=Jv.prototype.V;Jv.prototype.setAttributions=Jv.prototype.la;Jv.prototype.get=Jv.prototype.get;Jv.prototype.getKeys=Jv.prototype.O;Jv.prototype.getProperties=Jv.prototype.P;Jv.prototype.set=Jv.prototype.set;Jv.prototype.setProperties=Jv.prototype.C;Jv.prototype.unset=Jv.prototype.R;Jv.prototype.changed=
Jv.prototype.u;Jv.prototype.dispatchEvent=Jv.prototype.b;Jv.prototype.getRevision=Jv.prototype.K;Jv.prototype.on=Jv.prototype.I;Jv.prototype.once=Jv.prototype.L;Jv.prototype.un=Jv.prototype.J;Jv.prototype.unByKey=Jv.prototype.M;Q.prototype.getAttributions=Q.prototype.da;Q.prototype.getLogo=Q.prototype.qa;Q.prototype.getProjection=Q.prototype.sa;Q.prototype.getState=Q.prototype.V;Q.prototype.refresh=Q.prototype.pa;Q.prototype.setAttributions=Q.prototype.la;Q.prototype.get=Q.prototype.get;Q.prototype.getKeys=
Q.prototype.O;Q.prototype.getProperties=Q.prototype.P;Q.prototype.set=Q.prototype.set;Q.prototype.setProperties=Q.prototype.C;Q.prototype.unset=Q.prototype.R;Q.prototype.changed=Q.prototype.u;Q.prototype.dispatchEvent=Q.prototype.b;Q.prototype.getRevision=Q.prototype.K;Q.prototype.on=Q.prototype.I;Q.prototype.once=Q.prototype.L;Q.prototype.un=Q.prototype.J;Q.prototype.unByKey=Q.prototype.M;X.prototype.addFeature=X.prototype.tb;X.prototype.addFeatures=X.prototype.Fc;X.prototype.clear=X.prototype.clear;
X.prototype.forEachFeature=X.prototype.pg;X.prototype.forEachFeatureInExtent=X.prototype.wb;X.prototype.forEachFeatureIntersectingExtent=X.prototype.qg;X.prototype.getFeaturesCollection=X.prototype.xg;X.prototype.getFeatures=X.prototype.je;X.prototype.getFeaturesAtCoordinate=X.prototype.wg;X.prototype.getFeaturesInExtent=X.prototype.Ze;X.prototype.getClosestFeatureToCoordinate=X.prototype.sg;X.prototype.getExtent=X.prototype.G;X.prototype.getFeatureById=X.prototype.vg;X.prototype.getFormat=X.prototype.wh;
X.prototype.getUrl=X.prototype.xh;X.prototype.removeFeature=X.prototype.mb;X.prototype.getAttributions=X.prototype.da;X.prototype.getLogo=X.prototype.qa;X.prototype.getProjection=X.prototype.sa;X.prototype.getState=X.prototype.V;X.prototype.refresh=X.prototype.pa;X.prototype.setAttributions=X.prototype.la;X.prototype.get=X.prototype.get;X.prototype.getKeys=X.prototype.O;X.prototype.getProperties=X.prototype.P;X.prototype.set=X.prototype.set;X.prototype.setProperties=X.prototype.C;X.prototype.unset=
X.prototype.R;X.prototype.changed=X.prototype.u;X.prototype.dispatchEvent=X.prototype.b;X.prototype.getRevision=X.prototype.K;X.prototype.on=X.prototype.I;X.prototype.once=X.prototype.L;X.prototype.un=X.prototype.J;X.prototype.unByKey=X.prototype.M;pl.prototype.getAttributions=pl.prototype.da;pl.prototype.getLogo=pl.prototype.qa;pl.prototype.getProjection=pl.prototype.sa;pl.prototype.getState=pl.prototype.V;pl.prototype.refresh=pl.prototype.pa;pl.prototype.setAttributions=pl.prototype.la;pl.prototype.get=
pl.prototype.get;pl.prototype.getKeys=pl.prototype.O;pl.prototype.getProperties=pl.prototype.P;pl.prototype.set=pl.prototype.set;pl.prototype.setProperties=pl.prototype.C;pl.prototype.unset=pl.prototype.R;pl.prototype.changed=pl.prototype.u;pl.prototype.dispatchEvent=pl.prototype.b;pl.prototype.getRevision=pl.prototype.K;pl.prototype.on=pl.prototype.I;pl.prototype.once=pl.prototype.L;pl.prototype.un=pl.prototype.J;pl.prototype.unByKey=pl.prototype.M;wl.prototype.getAttributions=wl.prototype.da;wl.prototype.getLogo=
wl.prototype.qa;wl.prototype.getProjection=wl.prototype.sa;wl.prototype.getState=wl.prototype.V;wl.prototype.refresh=wl.prototype.pa;wl.prototype.setAttributions=wl.prototype.la;wl.prototype.get=wl.prototype.get;wl.prototype.getKeys=wl.prototype.O;wl.prototype.getProperties=wl.prototype.P;wl.prototype.set=wl.prototype.set;wl.prototype.setProperties=wl.prototype.C;wl.prototype.unset=wl.prototype.R;wl.prototype.changed=wl.prototype.u;wl.prototype.dispatchEvent=wl.prototype.b;wl.prototype.getRevision=
wl.prototype.K;wl.prototype.on=wl.prototype.I;wl.prototype.once=wl.prototype.L;wl.prototype.un=wl.prototype.J;wl.prototype.unByKey=wl.prototype.M;Ov.prototype.getAttributions=Ov.prototype.da;Ov.prototype.getLogo=Ov.prototype.qa;Ov.prototype.getProjection=Ov.prototype.sa;Ov.prototype.getState=Ov.prototype.V;Ov.prototype.refresh=Ov.prototype.pa;Ov.prototype.setAttributions=Ov.prototype.la;Ov.prototype.get=Ov.prototype.get;Ov.prototype.getKeys=Ov.prototype.O;Ov.prototype.getProperties=Ov.prototype.P;
Ov.prototype.set=Ov.prototype.set;Ov.prototype.setProperties=Ov.prototype.C;Ov.prototype.unset=Ov.prototype.R;Ov.prototype.changed=Ov.prototype.u;Ov.prototype.dispatchEvent=Ov.prototype.b;Ov.prototype.getRevision=Ov.prototype.K;Ov.prototype.on=Ov.prototype.I;Ov.prototype.once=Ov.prototype.L;Ov.prototype.un=Ov.prototype.J;Ov.prototype.unByKey=Ov.prototype.M;rl.prototype.type=rl.prototype.type;rl.prototype.target=rl.prototype.target;rl.prototype.preventDefault=rl.prototype.preventDefault;rl.prototype.stopPropagation=
rl.prototype.stopPropagation;Pv.prototype.getAttributions=Pv.prototype.da;Pv.prototype.getLogo=Pv.prototype.qa;Pv.prototype.getProjection=Pv.prototype.sa;Pv.prototype.getState=Pv.prototype.V;Pv.prototype.refresh=Pv.prototype.pa;Pv.prototype.setAttributions=Pv.prototype.la;Pv.prototype.get=Pv.prototype.get;Pv.prototype.getKeys=Pv.prototype.O;Pv.prototype.getProperties=Pv.prototype.P;Pv.prototype.set=Pv.prototype.set;Pv.prototype.setProperties=Pv.prototype.C;Pv.prototype.unset=Pv.prototype.R;Pv.prototype.changed=
Pv.prototype.u;Pv.prototype.dispatchEvent=Pv.prototype.b;Pv.prototype.getRevision=Pv.prototype.K;Pv.prototype.on=Pv.prototype.I;Pv.prototype.once=Pv.prototype.L;Pv.prototype.un=Pv.prototype.J;Pv.prototype.unByKey=Pv.prototype.M;mm.prototype.getAttributions=mm.prototype.da;mm.prototype.getLogo=mm.prototype.qa;mm.prototype.getProjection=mm.prototype.sa;mm.prototype.getState=mm.prototype.V;mm.prototype.refresh=mm.prototype.pa;mm.prototype.setAttributions=mm.prototype.la;mm.prototype.get=mm.prototype.get;
mm.prototype.getKeys=mm.prototype.O;mm.prototype.getProperties=mm.prototype.P;mm.prototype.set=mm.prototype.set;mm.prototype.setProperties=mm.prototype.C;mm.prototype.unset=mm.prototype.R;mm.prototype.changed=mm.prototype.u;mm.prototype.dispatchEvent=mm.prototype.b;mm.prototype.getRevision=mm.prototype.K;mm.prototype.on=mm.prototype.I;mm.prototype.once=mm.prototype.L;mm.prototype.un=mm.prototype.J;mm.prototype.unByKey=mm.prototype.M;Qv.prototype.getAttributions=Qv.prototype.da;Qv.prototype.getLogo=
Qv.prototype.qa;Qv.prototype.getProjection=Qv.prototype.sa;Qv.prototype.getState=Qv.prototype.V;Qv.prototype.refresh=Qv.prototype.pa;Qv.prototype.setAttributions=Qv.prototype.la;Qv.prototype.get=Qv.prototype.get;Qv.prototype.getKeys=Qv.prototype.O;Qv.prototype.getProperties=Qv.prototype.P;Qv.prototype.set=Qv.prototype.set;Qv.prototype.setProperties=Qv.prototype.C;Qv.prototype.unset=Qv.prototype.R;Qv.prototype.changed=Qv.prototype.u;Qv.prototype.dispatchEvent=Qv.prototype.b;Qv.prototype.getRevision=
Qv.prototype.K;Qv.prototype.on=Qv.prototype.I;Qv.prototype.once=Qv.prototype.L;Qv.prototype.un=Qv.prototype.J;Qv.prototype.unByKey=Qv.prototype.M;Wv.prototype.setRenderReprojectionEdges=Wv.prototype.nb;Wv.prototype.setTileGridForProjection=Wv.prototype.ob;Wv.prototype.getTileLoadFunction=Wv.prototype.Xa;Wv.prototype.getTileUrlFunction=Wv.prototype.Za;Wv.prototype.getUrls=Wv.prototype.$a;Wv.prototype.setTileLoadFunction=Wv.prototype.cb;Wv.prototype.setTileUrlFunction=Wv.prototype.Na;Wv.prototype.setUrl=
Wv.prototype.Pa;Wv.prototype.setUrls=Wv.prototype.Ta;Wv.prototype.getTileGrid=Wv.prototype.Ja;Wv.prototype.refresh=Wv.prototype.pa;Wv.prototype.getAttributions=Wv.prototype.da;Wv.prototype.getLogo=Wv.prototype.qa;Wv.prototype.getProjection=Wv.prototype.sa;Wv.prototype.getState=Wv.prototype.V;Wv.prototype.setAttributions=Wv.prototype.la;Wv.prototype.get=Wv.prototype.get;Wv.prototype.getKeys=Wv.prototype.O;Wv.prototype.getProperties=Wv.prototype.P;Wv.prototype.set=Wv.prototype.set;Wv.prototype.setProperties=
Wv.prototype.C;Wv.prototype.unset=Wv.prototype.R;Wv.prototype.changed=Wv.prototype.u;Wv.prototype.dispatchEvent=Wv.prototype.b;Wv.prototype.getRevision=Wv.prototype.K;Wv.prototype.on=Wv.prototype.I;Wv.prototype.once=Wv.prototype.L;Wv.prototype.un=Wv.prototype.J;Wv.prototype.unByKey=Wv.prototype.M;Uv.prototype.setRenderReprojectionEdges=Uv.prototype.nb;Uv.prototype.setTileGridForProjection=Uv.prototype.ob;Uv.prototype.getTileLoadFunction=Uv.prototype.Xa;Uv.prototype.getTileUrlFunction=Uv.prototype.Za;
Uv.prototype.getUrls=Uv.prototype.$a;Uv.prototype.setTileLoadFunction=Uv.prototype.cb;Uv.prototype.setTileUrlFunction=Uv.prototype.Na;Uv.prototype.setUrl=Uv.prototype.Pa;Uv.prototype.setUrls=Uv.prototype.Ta;Uv.prototype.getTileGrid=Uv.prototype.Ja;Uv.prototype.refresh=Uv.prototype.pa;Uv.prototype.getAttributions=Uv.prototype.da;Uv.prototype.getLogo=Uv.prototype.qa;Uv.prototype.getProjection=Uv.prototype.sa;Uv.prototype.getState=Uv.prototype.V;Uv.prototype.setAttributions=Uv.prototype.la;Uv.prototype.get=
Uv.prototype.get;Uv.prototype.getKeys=Uv.prototype.O;Uv.prototype.getProperties=Uv.prototype.P;Uv.prototype.set=Uv.prototype.set;Uv.prototype.setProperties=Uv.prototype.C;Uv.prototype.unset=Uv.prototype.R;Uv.prototype.changed=Uv.prototype.u;Uv.prototype.dispatchEvent=Uv.prototype.b;Uv.prototype.getRevision=Uv.prototype.K;Uv.prototype.on=Uv.prototype.I;Uv.prototype.once=Uv.prototype.L;Uv.prototype.un=Uv.prototype.J;Uv.prototype.unByKey=Uv.prototype.M;Zv.prototype.getAttributions=Zv.prototype.da;Zv.prototype.getLogo=
Zv.prototype.qa;Zv.prototype.getProjection=Zv.prototype.sa;Zv.prototype.getState=Zv.prototype.V;Zv.prototype.refresh=Zv.prototype.pa;Zv.prototype.setAttributions=Zv.prototype.la;Zv.prototype.get=Zv.prototype.get;Zv.prototype.getKeys=Zv.prototype.O;Zv.prototype.getProperties=Zv.prototype.P;Zv.prototype.set=Zv.prototype.set;Zv.prototype.setProperties=Zv.prototype.C;Zv.prototype.unset=Zv.prototype.R;Zv.prototype.changed=Zv.prototype.u;Zv.prototype.dispatchEvent=Zv.prototype.b;Zv.prototype.getRevision=
Zv.prototype.K;Zv.prototype.on=Zv.prototype.I;Zv.prototype.once=Zv.prototype.L;Zv.prototype.un=Zv.prototype.J;Zv.prototype.unByKey=Zv.prototype.M;dw.prototype.type=dw.prototype.type;dw.prototype.target=dw.prototype.target;dw.prototype.preventDefault=dw.prototype.preventDefault;dw.prototype.stopPropagation=dw.prototype.stopPropagation;iw.prototype.setRenderReprojectionEdges=iw.prototype.nb;iw.prototype.setTileGridForProjection=iw.prototype.ob;iw.prototype.getTileLoadFunction=iw.prototype.Xa;iw.prototype.getTileUrlFunction=
iw.prototype.Za;iw.prototype.getUrls=iw.prototype.$a;iw.prototype.setTileLoadFunction=iw.prototype.cb;iw.prototype.setTileUrlFunction=iw.prototype.Na;iw.prototype.setUrl=iw.prototype.Pa;iw.prototype.setUrls=iw.prototype.Ta;iw.prototype.getTileGrid=iw.prototype.Ja;iw.prototype.refresh=iw.prototype.pa;iw.prototype.getAttributions=iw.prototype.da;iw.prototype.getLogo=iw.prototype.qa;iw.prototype.getProjection=iw.prototype.sa;iw.prototype.getState=iw.prototype.V;iw.prototype.setAttributions=iw.prototype.la;
iw.prototype.get=iw.prototype.get;iw.prototype.getKeys=iw.prototype.O;iw.prototype.getProperties=iw.prototype.P;iw.prototype.set=iw.prototype.set;iw.prototype.setProperties=iw.prototype.C;iw.prototype.unset=iw.prototype.R;iw.prototype.changed=iw.prototype.u;iw.prototype.dispatchEvent=iw.prototype.b;iw.prototype.getRevision=iw.prototype.K;iw.prototype.on=iw.prototype.I;iw.prototype.once=iw.prototype.L;iw.prototype.un=iw.prototype.J;iw.prototype.unByKey=iw.prototype.M;kw.prototype.setRenderReprojectionEdges=
kw.prototype.nb;kw.prototype.setTileGridForProjection=kw.prototype.ob;kw.prototype.getTileLoadFunction=kw.prototype.Xa;kw.prototype.getTileUrlFunction=kw.prototype.Za;kw.prototype.getUrls=kw.prototype.$a;kw.prototype.setTileLoadFunction=kw.prototype.cb;kw.prototype.setTileUrlFunction=kw.prototype.Na;kw.prototype.setUrl=kw.prototype.Pa;kw.prototype.setUrls=kw.prototype.Ta;kw.prototype.getTileGrid=kw.prototype.Ja;kw.prototype.refresh=kw.prototype.pa;kw.prototype.getAttributions=kw.prototype.da;kw.prototype.getLogo=
kw.prototype.qa;kw.prototype.getProjection=kw.prototype.sa;kw.prototype.getState=kw.prototype.V;kw.prototype.setAttributions=kw.prototype.la;kw.prototype.get=kw.prototype.get;kw.prototype.getKeys=kw.prototype.O;kw.prototype.getProperties=kw.prototype.P;kw.prototype.set=kw.prototype.set;kw.prototype.setProperties=kw.prototype.C;kw.prototype.unset=kw.prototype.R;kw.prototype.changed=kw.prototype.u;kw.prototype.dispatchEvent=kw.prototype.b;kw.prototype.getRevision=kw.prototype.K;kw.prototype.on=kw.prototype.I;
kw.prototype.once=kw.prototype.L;kw.prototype.un=kw.prototype.J;kw.prototype.unByKey=kw.prototype.M;mw.prototype.getTileGrid=mw.prototype.Ja;mw.prototype.refresh=mw.prototype.pa;mw.prototype.getAttributions=mw.prototype.da;mw.prototype.getLogo=mw.prototype.qa;mw.prototype.getProjection=mw.prototype.sa;mw.prototype.getState=mw.prototype.V;mw.prototype.setAttributions=mw.prototype.la;mw.prototype.get=mw.prototype.get;mw.prototype.getKeys=mw.prototype.O;mw.prototype.getProperties=mw.prototype.P;mw.prototype.set=
mw.prototype.set;mw.prototype.setProperties=mw.prototype.C;mw.prototype.unset=mw.prototype.R;mw.prototype.changed=mw.prototype.u;mw.prototype.dispatchEvent=mw.prototype.b;mw.prototype.getRevision=mw.prototype.K;mw.prototype.on=mw.prototype.I;mw.prototype.once=mw.prototype.L;mw.prototype.un=mw.prototype.J;mw.prototype.unByKey=mw.prototype.M;nw.prototype.setRenderReprojectionEdges=nw.prototype.nb;nw.prototype.setTileGridForProjection=nw.prototype.ob;nw.prototype.getTileLoadFunction=nw.prototype.Xa;
nw.prototype.getTileUrlFunction=nw.prototype.Za;nw.prototype.getUrls=nw.prototype.$a;nw.prototype.setTileLoadFunction=nw.prototype.cb;nw.prototype.setTileUrlFunction=nw.prototype.Na;nw.prototype.setUrl=nw.prototype.Pa;nw.prototype.setUrls=nw.prototype.Ta;nw.prototype.getTileGrid=nw.prototype.Ja;nw.prototype.refresh=nw.prototype.pa;nw.prototype.getAttributions=nw.prototype.da;nw.prototype.getLogo=nw.prototype.qa;nw.prototype.getProjection=nw.prototype.sa;nw.prototype.getState=nw.prototype.V;nw.prototype.setAttributions=
nw.prototype.la;nw.prototype.get=nw.prototype.get;nw.prototype.getKeys=nw.prototype.O;nw.prototype.getProperties=nw.prototype.P;nw.prototype.set=nw.prototype.set;nw.prototype.setProperties=nw.prototype.C;nw.prototype.unset=nw.prototype.R;nw.prototype.changed=nw.prototype.u;nw.prototype.dispatchEvent=nw.prototype.b;nw.prototype.getRevision=nw.prototype.K;nw.prototype.on=nw.prototype.I;nw.prototype.once=nw.prototype.L;nw.prototype.un=nw.prototype.J;nw.prototype.unByKey=nw.prototype.M;rg.prototype.type=
rg.prototype.type;rg.prototype.target=rg.prototype.target;rg.prototype.preventDefault=rg.prototype.preventDefault;rg.prototype.stopPropagation=rg.prototype.stopPropagation;ow.prototype.getTileGrid=ow.prototype.Ja;ow.prototype.refresh=ow.prototype.pa;ow.prototype.getAttributions=ow.prototype.da;ow.prototype.getLogo=ow.prototype.qa;ow.prototype.getProjection=ow.prototype.sa;ow.prototype.getState=ow.prototype.V;ow.prototype.setAttributions=ow.prototype.la;ow.prototype.get=ow.prototype.get;ow.prototype.getKeys=
ow.prototype.O;ow.prototype.getProperties=ow.prototype.P;ow.prototype.set=ow.prototype.set;ow.prototype.setProperties=ow.prototype.C;ow.prototype.unset=ow.prototype.R;ow.prototype.changed=ow.prototype.u;ow.prototype.dispatchEvent=ow.prototype.b;ow.prototype.getRevision=ow.prototype.K;ow.prototype.on=ow.prototype.I;ow.prototype.once=ow.prototype.L;ow.prototype.un=ow.prototype.J;ow.prototype.unByKey=ow.prototype.M;sw.prototype.setRenderReprojectionEdges=sw.prototype.nb;sw.prototype.setTileGridForProjection=
sw.prototype.ob;sw.prototype.getTileLoadFunction=sw.prototype.Xa;sw.prototype.getTileUrlFunction=sw.prototype.Za;sw.prototype.getUrls=sw.prototype.$a;sw.prototype.setTileLoadFunction=sw.prototype.cb;sw.prototype.setTileUrlFunction=sw.prototype.Na;sw.prototype.setUrl=sw.prototype.Pa;sw.prototype.setUrls=sw.prototype.Ta;sw.prototype.getTileGrid=sw.prototype.Ja;sw.prototype.refresh=sw.prototype.pa;sw.prototype.getAttributions=sw.prototype.da;sw.prototype.getLogo=sw.prototype.qa;sw.prototype.getProjection=
sw.prototype.sa;sw.prototype.getState=sw.prototype.V;sw.prototype.setAttributions=sw.prototype.la;sw.prototype.get=sw.prototype.get;sw.prototype.getKeys=sw.prototype.O;sw.prototype.getProperties=sw.prototype.P;sw.prototype.set=sw.prototype.set;sw.prototype.setProperties=sw.prototype.C;sw.prototype.unset=sw.prototype.R;sw.prototype.changed=sw.prototype.u;sw.prototype.dispatchEvent=sw.prototype.b;sw.prototype.getRevision=sw.prototype.K;sw.prototype.on=sw.prototype.I;sw.prototype.once=sw.prototype.L;
sw.prototype.un=sw.prototype.J;sw.prototype.unByKey=sw.prototype.M;jm.prototype.type=jm.prototype.type;jm.prototype.target=jm.prototype.target;jm.prototype.preventDefault=jm.prototype.preventDefault;jm.prototype.stopPropagation=jm.prototype.stopPropagation;xm.prototype.getTileLoadFunction=xm.prototype.Xa;xm.prototype.getTileUrlFunction=xm.prototype.Za;xm.prototype.getUrls=xm.prototype.$a;xm.prototype.setTileLoadFunction=xm.prototype.cb;xm.prototype.setTileUrlFunction=xm.prototype.Na;xm.prototype.setUrl=
xm.prototype.Pa;xm.prototype.setUrls=xm.prototype.Ta;xm.prototype.getTileGrid=xm.prototype.Ja;xm.prototype.refresh=xm.prototype.pa;xm.prototype.getAttributions=xm.prototype.da;xm.prototype.getLogo=xm.prototype.qa;xm.prototype.getProjection=xm.prototype.sa;xm.prototype.getState=xm.prototype.V;xm.prototype.setAttributions=xm.prototype.la;xm.prototype.get=xm.prototype.get;xm.prototype.getKeys=xm.prototype.O;xm.prototype.getProperties=xm.prototype.P;xm.prototype.set=xm.prototype.set;xm.prototype.setProperties=
xm.prototype.C;xm.prototype.unset=xm.prototype.R;xm.prototype.changed=xm.prototype.u;xm.prototype.dispatchEvent=xm.prototype.b;xm.prototype.getRevision=xm.prototype.K;xm.prototype.on=xm.prototype.I;xm.prototype.once=xm.prototype.L;xm.prototype.un=xm.prototype.J;xm.prototype.unByKey=xm.prototype.M;Z.prototype.setRenderReprojectionEdges=Z.prototype.nb;Z.prototype.setTileGridForProjection=Z.prototype.ob;Z.prototype.getTileLoadFunction=Z.prototype.Xa;Z.prototype.getTileUrlFunction=Z.prototype.Za;Z.prototype.getUrls=
Z.prototype.$a;Z.prototype.setTileLoadFunction=Z.prototype.cb;Z.prototype.setTileUrlFunction=Z.prototype.Na;Z.prototype.setUrl=Z.prototype.Pa;Z.prototype.setUrls=Z.prototype.Ta;Z.prototype.getTileGrid=Z.prototype.Ja;Z.prototype.refresh=Z.prototype.pa;Z.prototype.getAttributions=Z.prototype.da;Z.prototype.getLogo=Z.prototype.qa;Z.prototype.getProjection=Z.prototype.sa;Z.prototype.getState=Z.prototype.V;Z.prototype.setAttributions=Z.prototype.la;Z.prototype.get=Z.prototype.get;Z.prototype.getKeys=Z.prototype.O;
Z.prototype.getProperties=Z.prototype.P;Z.prototype.set=Z.prototype.set;Z.prototype.setProperties=Z.prototype.C;Z.prototype.unset=Z.prototype.R;Z.prototype.changed=Z.prototype.u;Z.prototype.dispatchEvent=Z.prototype.b;Z.prototype.getRevision=Z.prototype.K;Z.prototype.on=Z.prototype.I;Z.prototype.once=Z.prototype.L;Z.prototype.un=Z.prototype.J;Z.prototype.unByKey=Z.prototype.M;Aw.prototype.setRenderReprojectionEdges=Aw.prototype.nb;Aw.prototype.setTileGridForProjection=Aw.prototype.ob;Aw.prototype.getTileLoadFunction=
Aw.prototype.Xa;Aw.prototype.getTileUrlFunction=Aw.prototype.Za;Aw.prototype.getUrls=Aw.prototype.$a;Aw.prototype.setTileLoadFunction=Aw.prototype.cb;Aw.prototype.setTileUrlFunction=Aw.prototype.Na;Aw.prototype.setUrl=Aw.prototype.Pa;Aw.prototype.setUrls=Aw.prototype.Ta;Aw.prototype.getTileGrid=Aw.prototype.Ja;Aw.prototype.refresh=Aw.prototype.pa;Aw.prototype.getAttributions=Aw.prototype.da;Aw.prototype.getLogo=Aw.prototype.qa;Aw.prototype.getProjection=Aw.prototype.sa;Aw.prototype.getState=Aw.prototype.V;
Aw.prototype.setAttributions=Aw.prototype.la;Aw.prototype.get=Aw.prototype.get;Aw.prototype.getKeys=Aw.prototype.O;Aw.prototype.getProperties=Aw.prototype.P;Aw.prototype.set=Aw.prototype.set;Aw.prototype.setProperties=Aw.prototype.C;Aw.prototype.unset=Aw.prototype.R;Aw.prototype.changed=Aw.prototype.u;Aw.prototype.dispatchEvent=Aw.prototype.b;Aw.prototype.getRevision=Aw.prototype.K;Aw.prototype.on=Aw.prototype.I;Aw.prototype.once=Aw.prototype.L;Aw.prototype.un=Aw.prototype.J;Aw.prototype.unByKey=
Aw.prototype.M;Cv.prototype.getTileCoord=Cv.prototype.f;ni.prototype.changed=ni.prototype.u;ni.prototype.dispatchEvent=ni.prototype.b;ni.prototype.getRevision=ni.prototype.K;ni.prototype.on=ni.prototype.I;ni.prototype.once=ni.prototype.L;ni.prototype.un=ni.prototype.J;ni.prototype.unByKey=ni.prototype.M;tn.prototype.changed=tn.prototype.u;tn.prototype.dispatchEvent=tn.prototype.b;tn.prototype.getRevision=tn.prototype.K;tn.prototype.on=tn.prototype.I;tn.prototype.once=tn.prototype.L;tn.prototype.un=
tn.prototype.J;tn.prototype.unByKey=tn.prototype.M;wn.prototype.changed=wn.prototype.u;wn.prototype.dispatchEvent=wn.prototype.b;wn.prototype.getRevision=wn.prototype.K;wn.prototype.on=wn.prototype.I;wn.prototype.once=wn.prototype.L;wn.prototype.un=wn.prototype.J;wn.prototype.unByKey=wn.prototype.M;Cn.prototype.changed=Cn.prototype.u;Cn.prototype.dispatchEvent=Cn.prototype.b;Cn.prototype.getRevision=Cn.prototype.K;Cn.prototype.on=Cn.prototype.I;Cn.prototype.once=Cn.prototype.L;Cn.prototype.un=Cn.prototype.J;
Cn.prototype.unByKey=Cn.prototype.M;En.prototype.changed=En.prototype.u;En.prototype.dispatchEvent=En.prototype.b;En.prototype.getRevision=En.prototype.K;En.prototype.on=En.prototype.I;En.prototype.once=En.prototype.L;En.prototype.un=En.prototype.J;En.prototype.unByKey=En.prototype.M;Dm.prototype.changed=Dm.prototype.u;Dm.prototype.dispatchEvent=Dm.prototype.b;Dm.prototype.getRevision=Dm.prototype.K;Dm.prototype.on=Dm.prototype.I;Dm.prototype.once=Dm.prototype.L;Dm.prototype.un=Dm.prototype.J;Dm.prototype.unByKey=
Dm.prototype.M;Em.prototype.changed=Em.prototype.u;Em.prototype.dispatchEvent=Em.prototype.b;Em.prototype.getRevision=Em.prototype.K;Em.prototype.on=Em.prototype.I;Em.prototype.once=Em.prototype.L;Em.prototype.un=Em.prototype.J;Em.prototype.unByKey=Em.prototype.M;Fm.prototype.changed=Fm.prototype.u;Fm.prototype.dispatchEvent=Fm.prototype.b;Fm.prototype.getRevision=Fm.prototype.K;Fm.prototype.on=Fm.prototype.I;Fm.prototype.once=Fm.prototype.L;Fm.prototype.un=Fm.prototype.J;Fm.prototype.unByKey=Fm.prototype.M;
Hm.prototype.changed=Hm.prototype.u;Hm.prototype.dispatchEvent=Hm.prototype.b;Hm.prototype.getRevision=Hm.prototype.K;Hm.prototype.on=Hm.prototype.I;Hm.prototype.once=Hm.prototype.L;Hm.prototype.un=Hm.prototype.J;Hm.prototype.unByKey=Hm.prototype.M;Dk.prototype.changed=Dk.prototype.u;Dk.prototype.dispatchEvent=Dk.prototype.b;Dk.prototype.getRevision=Dk.prototype.K;Dk.prototype.on=Dk.prototype.I;Dk.prototype.once=Dk.prototype.L;Dk.prototype.un=Dk.prototype.J;Dk.prototype.unByKey=Dk.prototype.M;om.prototype.changed=
om.prototype.u;om.prototype.dispatchEvent=om.prototype.b;om.prototype.getRevision=om.prototype.K;om.prototype.on=om.prototype.I;om.prototype.once=om.prototype.L;om.prototype.un=om.prototype.J;om.prototype.unByKey=om.prototype.M;pm.prototype.changed=pm.prototype.u;pm.prototype.dispatchEvent=pm.prototype.b;pm.prototype.getRevision=pm.prototype.K;pm.prototype.on=pm.prototype.I;pm.prototype.once=pm.prototype.L;pm.prototype.un=pm.prototype.J;pm.prototype.unByKey=pm.prototype.M;qm.prototype.changed=qm.prototype.u;
qm.prototype.dispatchEvent=qm.prototype.b;qm.prototype.getRevision=qm.prototype.K;qm.prototype.on=qm.prototype.I;qm.prototype.once=qm.prototype.L;qm.prototype.un=qm.prototype.J;qm.prototype.unByKey=qm.prototype.M;zm.prototype.changed=zm.prototype.u;zm.prototype.dispatchEvent=zm.prototype.b;zm.prototype.getRevision=zm.prototype.K;zm.prototype.on=zm.prototype.I;zm.prototype.once=zm.prototype.L;zm.prototype.un=zm.prototype.J;zm.prototype.unByKey=zm.prototype.M;fi.prototype.type=fi.prototype.type;fi.prototype.target=
fi.prototype.target;fi.prototype.preventDefault=fi.prototype.preventDefault;fi.prototype.stopPropagation=fi.prototype.stopPropagation;Lg.prototype.type=Lg.prototype.type;Lg.prototype.target=Lg.prototype.target;Lg.prototype.preventDefault=Lg.prototype.preventDefault;Lg.prototype.stopPropagation=Lg.prototype.stopPropagation;ci.prototype.get=ci.prototype.get;ci.prototype.getKeys=ci.prototype.O;ci.prototype.getProperties=ci.prototype.P;ci.prototype.set=ci.prototype.set;ci.prototype.setProperties=ci.prototype.C;
ci.prototype.unset=ci.prototype.R;ci.prototype.changed=ci.prototype.u;ci.prototype.dispatchEvent=ci.prototype.b;ci.prototype.getRevision=ci.prototype.K;ci.prototype.on=ci.prototype.I;ci.prototype.once=ci.prototype.L;ci.prototype.un=ci.prototype.J;ci.prototype.unByKey=ci.prototype.M;gi.prototype.getExtent=gi.prototype.G;gi.prototype.getMaxResolution=gi.prototype.Ib;gi.prototype.getMinResolution=gi.prototype.Jb;gi.prototype.getOpacity=gi.prototype.Nb;gi.prototype.getVisible=gi.prototype.yb;gi.prototype.getZIndex=
gi.prototype.Ob;gi.prototype.setExtent=gi.prototype.ac;gi.prototype.setMaxResolution=gi.prototype.ic;gi.prototype.setMinResolution=gi.prototype.jc;gi.prototype.setOpacity=gi.prototype.bc;gi.prototype.setVisible=gi.prototype.cc;gi.prototype.setZIndex=gi.prototype.dc;gi.prototype.get=gi.prototype.get;gi.prototype.getKeys=gi.prototype.O;gi.prototype.getProperties=gi.prototype.P;gi.prototype.set=gi.prototype.set;gi.prototype.setProperties=gi.prototype.C;gi.prototype.unset=gi.prototype.R;gi.prototype.changed=
gi.prototype.u;gi.prototype.dispatchEvent=gi.prototype.b;gi.prototype.getRevision=gi.prototype.K;gi.prototype.on=gi.prototype.I;gi.prototype.once=gi.prototype.L;gi.prototype.un=gi.prototype.J;gi.prototype.unByKey=gi.prototype.M;G.prototype.setMap=G.prototype.setMap;G.prototype.setSource=G.prototype.Cc;G.prototype.getExtent=G.prototype.G;G.prototype.getMaxResolution=G.prototype.Ib;G.prototype.getMinResolution=G.prototype.Jb;G.prototype.getOpacity=G.prototype.Nb;G.prototype.getVisible=G.prototype.yb;
G.prototype.getZIndex=G.prototype.Ob;G.prototype.setExtent=G.prototype.ac;G.prototype.setMaxResolution=G.prototype.ic;G.prototype.setMinResolution=G.prototype.jc;G.prototype.setOpacity=G.prototype.bc;G.prototype.setVisible=G.prototype.cc;G.prototype.setZIndex=G.prototype.dc;G.prototype.get=G.prototype.get;G.prototype.getKeys=G.prototype.O;G.prototype.getProperties=G.prototype.P;G.prototype.set=G.prototype.set;G.prototype.setProperties=G.prototype.C;G.prototype.unset=G.prototype.R;G.prototype.changed=
G.prototype.u;G.prototype.dispatchEvent=G.prototype.b;G.prototype.getRevision=G.prototype.K;G.prototype.on=G.prototype.I;G.prototype.once=G.prototype.L;G.prototype.un=G.prototype.J;G.prototype.unByKey=G.prototype.M;V.prototype.getSource=V.prototype.ea;V.prototype.getStyle=V.prototype.N;V.prototype.getStyleFunction=V.prototype.H;V.prototype.setStyle=V.prototype.c;V.prototype.setMap=V.prototype.setMap;V.prototype.setSource=V.prototype.Cc;V.prototype.getExtent=V.prototype.G;V.prototype.getMaxResolution=
V.prototype.Ib;V.prototype.getMinResolution=V.prototype.Jb;V.prototype.getOpacity=V.prototype.Nb;V.prototype.getVisible=V.prototype.yb;V.prototype.getZIndex=V.prototype.Ob;V.prototype.setExtent=V.prototype.ac;V.prototype.setMaxResolution=V.prototype.ic;V.prototype.setMinResolution=V.prototype.jc;V.prototype.setOpacity=V.prototype.bc;V.prototype.setVisible=V.prototype.cc;V.prototype.setZIndex=V.prototype.dc;V.prototype.get=V.prototype.get;V.prototype.getKeys=V.prototype.O;V.prototype.getProperties=
V.prototype.P;V.prototype.set=V.prototype.set;V.prototype.setProperties=V.prototype.C;V.prototype.unset=V.prototype.R;V.prototype.changed=V.prototype.u;V.prototype.dispatchEvent=V.prototype.b;V.prototype.getRevision=V.prototype.K;V.prototype.on=V.prototype.I;V.prototype.once=V.prototype.L;V.prototype.un=V.prototype.J;V.prototype.unByKey=V.prototype.M;Wj.prototype.setMap=Wj.prototype.setMap;Wj.prototype.setSource=Wj.prototype.Cc;Wj.prototype.getExtent=Wj.prototype.G;Wj.prototype.getMaxResolution=Wj.prototype.Ib;
Wj.prototype.getMinResolution=Wj.prototype.Jb;Wj.prototype.getOpacity=Wj.prototype.Nb;Wj.prototype.getVisible=Wj.prototype.yb;Wj.prototype.getZIndex=Wj.prototype.Ob;Wj.prototype.setExtent=Wj.prototype.ac;Wj.prototype.setMaxResolution=Wj.prototype.ic;Wj.prototype.setMinResolution=Wj.prototype.jc;Wj.prototype.setOpacity=Wj.prototype.bc;Wj.prototype.setVisible=Wj.prototype.cc;Wj.prototype.setZIndex=Wj.prototype.dc;Wj.prototype.get=Wj.prototype.get;Wj.prototype.getKeys=Wj.prototype.O;Wj.prototype.getProperties=
Wj.prototype.P;Wj.prototype.set=Wj.prototype.set;Wj.prototype.setProperties=Wj.prototype.C;Wj.prototype.unset=Wj.prototype.R;Wj.prototype.changed=Wj.prototype.u;Wj.prototype.dispatchEvent=Wj.prototype.b;Wj.prototype.getRevision=Wj.prototype.K;Wj.prototype.on=Wj.prototype.I;Wj.prototype.once=Wj.prototype.L;Wj.prototype.un=Wj.prototype.J;Wj.prototype.unByKey=Wj.prototype.M;Mj.prototype.getExtent=Mj.prototype.G;Mj.prototype.getMaxResolution=Mj.prototype.Ib;Mj.prototype.getMinResolution=Mj.prototype.Jb;
Mj.prototype.getOpacity=Mj.prototype.Nb;Mj.prototype.getVisible=Mj.prototype.yb;Mj.prototype.getZIndex=Mj.prototype.Ob;Mj.prototype.setExtent=Mj.prototype.ac;Mj.prototype.setMaxResolution=Mj.prototype.ic;Mj.prototype.setMinResolution=Mj.prototype.jc;Mj.prototype.setOpacity=Mj.prototype.bc;Mj.prototype.setVisible=Mj.prototype.cc;Mj.prototype.setZIndex=Mj.prototype.dc;Mj.prototype.get=Mj.prototype.get;Mj.prototype.getKeys=Mj.prototype.O;Mj.prototype.getProperties=Mj.prototype.P;Mj.prototype.set=Mj.prototype.set;
Mj.prototype.setProperties=Mj.prototype.C;Mj.prototype.unset=Mj.prototype.R;Mj.prototype.changed=Mj.prototype.u;Mj.prototype.dispatchEvent=Mj.prototype.b;Mj.prototype.getRevision=Mj.prototype.K;Mj.prototype.on=Mj.prototype.I;Mj.prototype.once=Mj.prototype.L;Mj.prototype.un=Mj.prototype.J;Mj.prototype.unByKey=Mj.prototype.M;Xj.prototype.setMap=Xj.prototype.setMap;Xj.prototype.setSource=Xj.prototype.Cc;Xj.prototype.getExtent=Xj.prototype.G;Xj.prototype.getMaxResolution=Xj.prototype.Ib;Xj.prototype.getMinResolution=
Xj.prototype.Jb;Xj.prototype.getOpacity=Xj.prototype.Nb;Xj.prototype.getVisible=Xj.prototype.yb;Xj.prototype.getZIndex=Xj.prototype.Ob;Xj.prototype.setExtent=Xj.prototype.ac;Xj.prototype.setMaxResolution=Xj.prototype.ic;Xj.prototype.setMinResolution=Xj.prototype.jc;Xj.prototype.setOpacity=Xj.prototype.bc;Xj.prototype.setVisible=Xj.prototype.cc;Xj.prototype.setZIndex=Xj.prototype.dc;Xj.prototype.get=Xj.prototype.get;Xj.prototype.getKeys=Xj.prototype.O;Xj.prototype.getProperties=Xj.prototype.P;Xj.prototype.set=
Xj.prototype.set;Xj.prototype.setProperties=Xj.prototype.C;Xj.prototype.unset=Xj.prototype.R;Xj.prototype.changed=Xj.prototype.u;Xj.prototype.dispatchEvent=Xj.prototype.b;Xj.prototype.getRevision=Xj.prototype.K;Xj.prototype.on=Xj.prototype.I;Xj.prototype.once=Xj.prototype.L;Xj.prototype.un=Xj.prototype.J;Xj.prototype.unByKey=Xj.prototype.M;H.prototype.getSource=H.prototype.ea;H.prototype.getStyle=H.prototype.N;H.prototype.getStyleFunction=H.prototype.H;H.prototype.setStyle=H.prototype.c;H.prototype.setMap=
H.prototype.setMap;H.prototype.setSource=H.prototype.Cc;H.prototype.getExtent=H.prototype.G;H.prototype.getMaxResolution=H.prototype.Ib;H.prototype.getMinResolution=H.prototype.Jb;H.prototype.getOpacity=H.prototype.Nb;H.prototype.getVisible=H.prototype.yb;H.prototype.getZIndex=H.prototype.Ob;H.prototype.setExtent=H.prototype.ac;H.prototype.setMaxResolution=H.prototype.ic;H.prototype.setMinResolution=H.prototype.jc;H.prototype.setOpacity=H.prototype.bc;H.prototype.setVisible=H.prototype.cc;H.prototype.setZIndex=
H.prototype.dc;H.prototype.get=H.prototype.get;H.prototype.getKeys=H.prototype.O;H.prototype.getProperties=H.prototype.P;H.prototype.set=H.prototype.set;H.prototype.setProperties=H.prototype.C;H.prototype.unset=H.prototype.R;H.prototype.changed=H.prototype.u;H.prototype.dispatchEvent=H.prototype.b;H.prototype.getRevision=H.prototype.K;H.prototype.on=H.prototype.I;H.prototype.once=H.prototype.L;H.prototype.un=H.prototype.J;H.prototype.unByKey=H.prototype.M;Pi.prototype.get=Pi.prototype.get;Pi.prototype.getKeys=
Pi.prototype.O;Pi.prototype.getProperties=Pi.prototype.P;Pi.prototype.set=Pi.prototype.set;Pi.prototype.setProperties=Pi.prototype.C;Pi.prototype.unset=Pi.prototype.R;Pi.prototype.changed=Pi.prototype.u;Pi.prototype.dispatchEvent=Pi.prototype.b;Pi.prototype.getRevision=Pi.prototype.K;Pi.prototype.on=Pi.prototype.I;Pi.prototype.once=Pi.prototype.L;Pi.prototype.un=Pi.prototype.J;Pi.prototype.unByKey=Pi.prototype.M;Ti.prototype.getActive=Ti.prototype.f;Ti.prototype.getMap=Ti.prototype.j;Ti.prototype.setActive=
Ti.prototype.i;Ti.prototype.get=Ti.prototype.get;Ti.prototype.getKeys=Ti.prototype.O;Ti.prototype.getProperties=Ti.prototype.P;Ti.prototype.set=Ti.prototype.set;Ti.prototype.setProperties=Ti.prototype.C;Ti.prototype.unset=Ti.prototype.R;Ti.prototype.changed=Ti.prototype.u;Ti.prototype.dispatchEvent=Ti.prototype.b;Ti.prototype.getRevision=Ti.prototype.K;Ti.prototype.on=Ti.prototype.I;Ti.prototype.once=Ti.prototype.L;Ti.prototype.un=Ti.prototype.J;Ti.prototype.unByKey=Ti.prototype.M;yu.prototype.getActive=
yu.prototype.f;yu.prototype.getMap=yu.prototype.j;yu.prototype.setActive=yu.prototype.i;yu.prototype.get=yu.prototype.get;yu.prototype.getKeys=yu.prototype.O;yu.prototype.getProperties=yu.prototype.P;yu.prototype.set=yu.prototype.set;yu.prototype.setProperties=yu.prototype.C;yu.prototype.unset=yu.prototype.R;yu.prototype.changed=yu.prototype.u;yu.prototype.dispatchEvent=yu.prototype.b;yu.prototype.getRevision=yu.prototype.K;yu.prototype.on=yu.prototype.I;yu.prototype.once=yu.prototype.L;yu.prototype.un=
yu.prototype.J;yu.prototype.unByKey=yu.prototype.M;Bu.prototype.type=Bu.prototype.type;Bu.prototype.target=Bu.prototype.target;Bu.prototype.preventDefault=Bu.prototype.preventDefault;Bu.prototype.stopPropagation=Bu.prototype.stopPropagation;qj.prototype.type=qj.prototype.type;qj.prototype.target=qj.prototype.target;qj.prototype.preventDefault=qj.prototype.preventDefault;qj.prototype.stopPropagation=qj.prototype.stopPropagation;cj.prototype.getActive=cj.prototype.f;cj.prototype.getMap=cj.prototype.j;
cj.prototype.setActive=cj.prototype.i;cj.prototype.get=cj.prototype.get;cj.prototype.getKeys=cj.prototype.O;cj.prototype.getProperties=cj.prototype.P;cj.prototype.set=cj.prototype.set;cj.prototype.setProperties=cj.prototype.C;cj.prototype.unset=cj.prototype.R;cj.prototype.changed=cj.prototype.u;cj.prototype.dispatchEvent=cj.prototype.b;cj.prototype.getRevision=cj.prototype.K;cj.prototype.on=cj.prototype.I;cj.prototype.once=cj.prototype.L;cj.prototype.un=cj.prototype.J;cj.prototype.unByKey=cj.prototype.M;
rj.prototype.getActive=rj.prototype.f;rj.prototype.getMap=rj.prototype.j;rj.prototype.setActive=rj.prototype.i;rj.prototype.get=rj.prototype.get;rj.prototype.getKeys=rj.prototype.O;rj.prototype.getProperties=rj.prototype.P;rj.prototype.set=rj.prototype.set;rj.prototype.setProperties=rj.prototype.C;rj.prototype.unset=rj.prototype.R;rj.prototype.changed=rj.prototype.u;rj.prototype.dispatchEvent=rj.prototype.b;rj.prototype.getRevision=rj.prototype.K;rj.prototype.on=rj.prototype.I;rj.prototype.once=rj.prototype.L;
rj.prototype.un=rj.prototype.J;rj.prototype.unByKey=rj.prototype.M;fj.prototype.getActive=fj.prototype.f;fj.prototype.getMap=fj.prototype.j;fj.prototype.setActive=fj.prototype.i;fj.prototype.get=fj.prototype.get;fj.prototype.getKeys=fj.prototype.O;fj.prototype.getProperties=fj.prototype.P;fj.prototype.set=fj.prototype.set;fj.prototype.setProperties=fj.prototype.C;fj.prototype.unset=fj.prototype.R;fj.prototype.changed=fj.prototype.u;fj.prototype.dispatchEvent=fj.prototype.b;fj.prototype.getRevision=
fj.prototype.K;fj.prototype.on=fj.prototype.I;fj.prototype.once=fj.prototype.L;fj.prototype.un=fj.prototype.J;fj.prototype.unByKey=fj.prototype.M;Du.prototype.getActive=Du.prototype.f;Du.prototype.getMap=Du.prototype.j;Du.prototype.setActive=Du.prototype.i;Du.prototype.get=Du.prototype.get;Du.prototype.getKeys=Du.prototype.O;Du.prototype.getProperties=Du.prototype.P;Du.prototype.set=Du.prototype.set;Du.prototype.setProperties=Du.prototype.C;Du.prototype.unset=Du.prototype.R;Du.prototype.changed=Du.prototype.u;
Du.prototype.dispatchEvent=Du.prototype.b;Du.prototype.getRevision=Du.prototype.K;Du.prototype.on=Du.prototype.I;Du.prototype.once=Du.prototype.L;Du.prototype.un=Du.prototype.J;Du.prototype.unByKey=Du.prototype.M;jj.prototype.getActive=jj.prototype.f;jj.prototype.getMap=jj.prototype.j;jj.prototype.setActive=jj.prototype.i;jj.prototype.get=jj.prototype.get;jj.prototype.getKeys=jj.prototype.O;jj.prototype.getProperties=jj.prototype.P;jj.prototype.set=jj.prototype.set;jj.prototype.setProperties=jj.prototype.C;
jj.prototype.unset=jj.prototype.R;jj.prototype.changed=jj.prototype.u;jj.prototype.dispatchEvent=jj.prototype.b;jj.prototype.getRevision=jj.prototype.K;jj.prototype.on=jj.prototype.I;jj.prototype.once=jj.prototype.L;jj.prototype.un=jj.prototype.J;jj.prototype.unByKey=jj.prototype.M;wj.prototype.getGeometry=wj.prototype.W;wj.prototype.getActive=wj.prototype.f;wj.prototype.getMap=wj.prototype.j;wj.prototype.setActive=wj.prototype.i;wj.prototype.get=wj.prototype.get;wj.prototype.getKeys=wj.prototype.O;
wj.prototype.getProperties=wj.prototype.P;wj.prototype.set=wj.prototype.set;wj.prototype.setProperties=wj.prototype.C;wj.prototype.unset=wj.prototype.R;wj.prototype.changed=wj.prototype.u;wj.prototype.dispatchEvent=wj.prototype.b;wj.prototype.getRevision=wj.prototype.K;wj.prototype.on=wj.prototype.I;wj.prototype.once=wj.prototype.L;wj.prototype.un=wj.prototype.J;wj.prototype.unByKey=wj.prototype.M;Hu.prototype.type=Hu.prototype.type;Hu.prototype.target=Hu.prototype.target;Hu.prototype.preventDefault=
Hu.prototype.preventDefault;Hu.prototype.stopPropagation=Hu.prototype.stopPropagation;Iu.prototype.getActive=Iu.prototype.f;Iu.prototype.getMap=Iu.prototype.j;Iu.prototype.setActive=Iu.prototype.i;Iu.prototype.get=Iu.prototype.get;Iu.prototype.getKeys=Iu.prototype.O;Iu.prototype.getProperties=Iu.prototype.P;Iu.prototype.set=Iu.prototype.set;Iu.prototype.setProperties=Iu.prototype.C;Iu.prototype.unset=Iu.prototype.R;Iu.prototype.changed=Iu.prototype.u;Iu.prototype.dispatchEvent=Iu.prototype.b;Iu.prototype.getRevision=
Iu.prototype.K;Iu.prototype.on=Iu.prototype.I;Iu.prototype.once=Iu.prototype.L;Iu.prototype.un=Iu.prototype.J;Iu.prototype.unByKey=Iu.prototype.M;xj.prototype.getActive=xj.prototype.f;xj.prototype.getMap=xj.prototype.j;xj.prototype.setActive=xj.prototype.i;xj.prototype.get=xj.prototype.get;xj.prototype.getKeys=xj.prototype.O;xj.prototype.getProperties=xj.prototype.P;xj.prototype.set=xj.prototype.set;xj.prototype.setProperties=xj.prototype.C;xj.prototype.unset=xj.prototype.R;xj.prototype.changed=xj.prototype.u;
xj.prototype.dispatchEvent=xj.prototype.b;xj.prototype.getRevision=xj.prototype.K;xj.prototype.on=xj.prototype.I;xj.prototype.once=xj.prototype.L;xj.prototype.un=xj.prototype.J;xj.prototype.unByKey=xj.prototype.M;zj.prototype.getActive=zj.prototype.f;zj.prototype.getMap=zj.prototype.j;zj.prototype.setActive=zj.prototype.i;zj.prototype.get=zj.prototype.get;zj.prototype.getKeys=zj.prototype.O;zj.prototype.getProperties=zj.prototype.P;zj.prototype.set=zj.prototype.set;zj.prototype.setProperties=zj.prototype.C;
zj.prototype.unset=zj.prototype.R;zj.prototype.changed=zj.prototype.u;zj.prototype.dispatchEvent=zj.prototype.b;zj.prototype.getRevision=zj.prototype.K;zj.prototype.on=zj.prototype.I;zj.prototype.once=zj.prototype.L;zj.prototype.un=zj.prototype.J;zj.prototype.unByKey=zj.prototype.M;Yu.prototype.type=Yu.prototype.type;Yu.prototype.target=Yu.prototype.target;Yu.prototype.preventDefault=Yu.prototype.preventDefault;Yu.prototype.stopPropagation=Yu.prototype.stopPropagation;Zu.prototype.getActive=Zu.prototype.f;
Zu.prototype.getMap=Zu.prototype.j;Zu.prototype.setActive=Zu.prototype.i;Zu.prototype.get=Zu.prototype.get;Zu.prototype.getKeys=Zu.prototype.O;Zu.prototype.getProperties=Zu.prototype.P;Zu.prototype.set=Zu.prototype.set;Zu.prototype.setProperties=Zu.prototype.C;Zu.prototype.unset=Zu.prototype.R;Zu.prototype.changed=Zu.prototype.u;Zu.prototype.dispatchEvent=Zu.prototype.b;Zu.prototype.getRevision=Zu.prototype.K;Zu.prototype.on=Zu.prototype.I;Zu.prototype.once=Zu.prototype.L;Zu.prototype.un=Zu.prototype.J;
Zu.prototype.unByKey=Zu.prototype.M;Bj.prototype.getActive=Bj.prototype.f;Bj.prototype.getMap=Bj.prototype.j;Bj.prototype.setActive=Bj.prototype.i;Bj.prototype.get=Bj.prototype.get;Bj.prototype.getKeys=Bj.prototype.O;Bj.prototype.getProperties=Bj.prototype.P;Bj.prototype.set=Bj.prototype.set;Bj.prototype.setProperties=Bj.prototype.C;Bj.prototype.unset=Bj.prototype.R;Bj.prototype.changed=Bj.prototype.u;Bj.prototype.dispatchEvent=Bj.prototype.b;Bj.prototype.getRevision=Bj.prototype.K;Bj.prototype.on=
Bj.prototype.I;Bj.prototype.once=Bj.prototype.L;Bj.prototype.un=Bj.prototype.J;Bj.prototype.unByKey=Bj.prototype.M;Dj.prototype.getActive=Dj.prototype.f;Dj.prototype.getMap=Dj.prototype.j;Dj.prototype.setActive=Dj.prototype.i;Dj.prototype.get=Dj.prototype.get;Dj.prototype.getKeys=Dj.prototype.O;Dj.prototype.getProperties=Dj.prototype.P;Dj.prototype.set=Dj.prototype.set;Dj.prototype.setProperties=Dj.prototype.C;Dj.prototype.unset=Dj.prototype.R;Dj.prototype.changed=Dj.prototype.u;Dj.prototype.dispatchEvent=
Dj.prototype.b;Dj.prototype.getRevision=Dj.prototype.K;Dj.prototype.on=Dj.prototype.I;Dj.prototype.once=Dj.prototype.L;Dj.prototype.un=Dj.prototype.J;Dj.prototype.unByKey=Dj.prototype.M;Hj.prototype.getActive=Hj.prototype.f;Hj.prototype.getMap=Hj.prototype.j;Hj.prototype.setActive=Hj.prototype.i;Hj.prototype.get=Hj.prototype.get;Hj.prototype.getKeys=Hj.prototype.O;Hj.prototype.getProperties=Hj.prototype.P;Hj.prototype.set=Hj.prototype.set;Hj.prototype.setProperties=Hj.prototype.C;Hj.prototype.unset=
Hj.prototype.R;Hj.prototype.changed=Hj.prototype.u;Hj.prototype.dispatchEvent=Hj.prototype.b;Hj.prototype.getRevision=Hj.prototype.K;Hj.prototype.on=Hj.prototype.I;Hj.prototype.once=Hj.prototype.L;Hj.prototype.un=Hj.prototype.J;Hj.prototype.unByKey=Hj.prototype.M;lv.prototype.type=lv.prototype.type;lv.prototype.target=lv.prototype.target;lv.prototype.preventDefault=lv.prototype.preventDefault;lv.prototype.stopPropagation=lv.prototype.stopPropagation;mv.prototype.getActive=mv.prototype.f;mv.prototype.getMap=
mv.prototype.j;mv.prototype.setActive=mv.prototype.i;mv.prototype.get=mv.prototype.get;mv.prototype.getKeys=mv.prototype.O;mv.prototype.getProperties=mv.prototype.P;mv.prototype.set=mv.prototype.set;mv.prototype.setProperties=mv.prototype.C;mv.prototype.unset=mv.prototype.R;mv.prototype.changed=mv.prototype.u;mv.prototype.dispatchEvent=mv.prototype.b;mv.prototype.getRevision=mv.prototype.K;mv.prototype.on=mv.prototype.I;mv.prototype.once=mv.prototype.L;mv.prototype.un=mv.prototype.J;mv.prototype.unByKey=
mv.prototype.M;pv.prototype.getActive=pv.prototype.f;pv.prototype.getMap=pv.prototype.j;pv.prototype.setActive=pv.prototype.i;pv.prototype.get=pv.prototype.get;pv.prototype.getKeys=pv.prototype.O;pv.prototype.getProperties=pv.prototype.P;pv.prototype.set=pv.prototype.set;pv.prototype.setProperties=pv.prototype.C;pv.prototype.unset=pv.prototype.R;pv.prototype.changed=pv.prototype.u;pv.prototype.dispatchEvent=pv.prototype.b;pv.prototype.getRevision=pv.prototype.K;pv.prototype.on=pv.prototype.I;pv.prototype.once=
pv.prototype.L;pv.prototype.un=pv.prototype.J;pv.prototype.unByKey=pv.prototype.M;tv.prototype.type=tv.prototype.type;tv.prototype.target=tv.prototype.target;tv.prototype.preventDefault=tv.prototype.preventDefault;tv.prototype.stopPropagation=tv.prototype.stopPropagation;uv.prototype.getActive=uv.prototype.f;uv.prototype.getMap=uv.prototype.j;uv.prototype.setActive=uv.prototype.i;uv.prototype.get=uv.prototype.get;uv.prototype.getKeys=uv.prototype.O;uv.prototype.getProperties=uv.prototype.P;uv.prototype.set=
uv.prototype.set;uv.prototype.setProperties=uv.prototype.C;uv.prototype.unset=uv.prototype.R;uv.prototype.changed=uv.prototype.u;uv.prototype.dispatchEvent=uv.prototype.b;uv.prototype.getRevision=uv.prototype.K;uv.prototype.on=uv.prototype.I;uv.prototype.once=uv.prototype.L;uv.prototype.un=uv.prototype.J;uv.prototype.unByKey=uv.prototype.M;vd.prototype.get=vd.prototype.get;vd.prototype.getKeys=vd.prototype.O;vd.prototype.getProperties=vd.prototype.P;vd.prototype.set=vd.prototype.set;vd.prototype.setProperties=
vd.prototype.C;vd.prototype.unset=vd.prototype.R;vd.prototype.changed=vd.prototype.u;vd.prototype.dispatchEvent=vd.prototype.b;vd.prototype.getRevision=vd.prototype.K;vd.prototype.on=vd.prototype.I;vd.prototype.once=vd.prototype.L;vd.prototype.un=vd.prototype.J;vd.prototype.unByKey=vd.prototype.M;xd.prototype.getClosestPoint=xd.prototype.xb;xd.prototype.getExtent=xd.prototype.G;xd.prototype.rotate=xd.prototype.rotate;xd.prototype.simplify=xd.prototype.Ab;xd.prototype.transform=xd.prototype.hb;xd.prototype.get=
xd.prototype.get;xd.prototype.getKeys=xd.prototype.O;xd.prototype.getProperties=xd.prototype.P;xd.prototype.set=xd.prototype.set;xd.prototype.setProperties=xd.prototype.C;xd.prototype.unset=xd.prototype.R;xd.prototype.changed=xd.prototype.u;xd.prototype.dispatchEvent=xd.prototype.b;xd.prototype.getRevision=xd.prototype.K;xd.prototype.on=xd.prototype.I;xd.prototype.once=xd.prototype.L;xd.prototype.un=xd.prototype.J;xd.prototype.unByKey=xd.prototype.M;lu.prototype.getFirstCoordinate=lu.prototype.Fb;
lu.prototype.getLastCoordinate=lu.prototype.Gb;lu.prototype.getLayout=lu.prototype.Hb;lu.prototype.rotate=lu.prototype.rotate;lu.prototype.getClosestPoint=lu.prototype.xb;lu.prototype.getExtent=lu.prototype.G;lu.prototype.simplify=lu.prototype.Ab;lu.prototype.get=lu.prototype.get;lu.prototype.getKeys=lu.prototype.O;lu.prototype.getProperties=lu.prototype.P;lu.prototype.set=lu.prototype.set;lu.prototype.setProperties=lu.prototype.C;lu.prototype.unset=lu.prototype.R;lu.prototype.changed=lu.prototype.u;
lu.prototype.dispatchEvent=lu.prototype.b;lu.prototype.getRevision=lu.prototype.K;lu.prototype.on=lu.prototype.I;lu.prototype.once=lu.prototype.L;lu.prototype.un=lu.prototype.J;lu.prototype.unByKey=lu.prototype.M;zo.prototype.getClosestPoint=zo.prototype.xb;zo.prototype.getExtent=zo.prototype.G;zo.prototype.rotate=zo.prototype.rotate;zo.prototype.simplify=zo.prototype.Ab;zo.prototype.transform=zo.prototype.hb;zo.prototype.get=zo.prototype.get;zo.prototype.getKeys=zo.prototype.O;zo.prototype.getProperties=
zo.prototype.P;zo.prototype.set=zo.prototype.set;zo.prototype.setProperties=zo.prototype.C;zo.prototype.unset=zo.prototype.R;zo.prototype.changed=zo.prototype.u;zo.prototype.dispatchEvent=zo.prototype.b;zo.prototype.getRevision=zo.prototype.K;zo.prototype.on=zo.prototype.I;zo.prototype.once=zo.prototype.L;zo.prototype.un=zo.prototype.J;zo.prototype.unByKey=zo.prototype.M;Pd.prototype.getFirstCoordinate=Pd.prototype.Fb;Pd.prototype.getLastCoordinate=Pd.prototype.Gb;Pd.prototype.getLayout=Pd.prototype.Hb;
Pd.prototype.rotate=Pd.prototype.rotate;Pd.prototype.getClosestPoint=Pd.prototype.xb;Pd.prototype.getExtent=Pd.prototype.G;Pd.prototype.simplify=Pd.prototype.Ab;Pd.prototype.transform=Pd.prototype.hb;Pd.prototype.get=Pd.prototype.get;Pd.prototype.getKeys=Pd.prototype.O;Pd.prototype.getProperties=Pd.prototype.P;Pd.prototype.set=Pd.prototype.set;Pd.prototype.setProperties=Pd.prototype.C;Pd.prototype.unset=Pd.prototype.R;Pd.prototype.changed=Pd.prototype.u;Pd.prototype.dispatchEvent=Pd.prototype.b;Pd.prototype.getRevision=
Pd.prototype.K;Pd.prototype.on=Pd.prototype.I;Pd.prototype.once=Pd.prototype.L;Pd.prototype.un=Pd.prototype.J;Pd.prototype.unByKey=Pd.prototype.M;S.prototype.getFirstCoordinate=S.prototype.Fb;S.prototype.getLastCoordinate=S.prototype.Gb;S.prototype.getLayout=S.prototype.Hb;S.prototype.rotate=S.prototype.rotate;S.prototype.getClosestPoint=S.prototype.xb;S.prototype.getExtent=S.prototype.G;S.prototype.simplify=S.prototype.Ab;S.prototype.transform=S.prototype.hb;S.prototype.get=S.prototype.get;S.prototype.getKeys=
S.prototype.O;S.prototype.getProperties=S.prototype.P;S.prototype.set=S.prototype.set;S.prototype.setProperties=S.prototype.C;S.prototype.unset=S.prototype.R;S.prototype.changed=S.prototype.u;S.prototype.dispatchEvent=S.prototype.b;S.prototype.getRevision=S.prototype.K;S.prototype.on=S.prototype.I;S.prototype.once=S.prototype.L;S.prototype.un=S.prototype.J;S.prototype.unByKey=S.prototype.M;T.prototype.getFirstCoordinate=T.prototype.Fb;T.prototype.getLastCoordinate=T.prototype.Gb;T.prototype.getLayout=
T.prototype.Hb;T.prototype.rotate=T.prototype.rotate;T.prototype.getClosestPoint=T.prototype.xb;T.prototype.getExtent=T.prototype.G;T.prototype.simplify=T.prototype.Ab;T.prototype.transform=T.prototype.hb;T.prototype.get=T.prototype.get;T.prototype.getKeys=T.prototype.O;T.prototype.getProperties=T.prototype.P;T.prototype.set=T.prototype.set;T.prototype.setProperties=T.prototype.C;T.prototype.unset=T.prototype.R;T.prototype.changed=T.prototype.u;T.prototype.dispatchEvent=T.prototype.b;T.prototype.getRevision=
T.prototype.K;T.prototype.on=T.prototype.I;T.prototype.once=T.prototype.L;T.prototype.un=T.prototype.J;T.prototype.unByKey=T.prototype.M;oo.prototype.getFirstCoordinate=oo.prototype.Fb;oo.prototype.getLastCoordinate=oo.prototype.Gb;oo.prototype.getLayout=oo.prototype.Hb;oo.prototype.rotate=oo.prototype.rotate;oo.prototype.getClosestPoint=oo.prototype.xb;oo.prototype.getExtent=oo.prototype.G;oo.prototype.simplify=oo.prototype.Ab;oo.prototype.transform=oo.prototype.hb;oo.prototype.get=oo.prototype.get;
oo.prototype.getKeys=oo.prototype.O;oo.prototype.getProperties=oo.prototype.P;oo.prototype.set=oo.prototype.set;oo.prototype.setProperties=oo.prototype.C;oo.prototype.unset=oo.prototype.R;oo.prototype.changed=oo.prototype.u;oo.prototype.dispatchEvent=oo.prototype.b;oo.prototype.getRevision=oo.prototype.K;oo.prototype.on=oo.prototype.I;oo.prototype.once=oo.prototype.L;oo.prototype.un=oo.prototype.J;oo.prototype.unByKey=oo.prototype.M;po.prototype.getFirstCoordinate=po.prototype.Fb;po.prototype.getLastCoordinate=
po.prototype.Gb;po.prototype.getLayout=po.prototype.Hb;po.prototype.rotate=po.prototype.rotate;po.prototype.getClosestPoint=po.prototype.xb;po.prototype.getExtent=po.prototype.G;po.prototype.simplify=po.prototype.Ab;po.prototype.transform=po.prototype.hb;po.prototype.get=po.prototype.get;po.prototype.getKeys=po.prototype.O;po.prototype.getProperties=po.prototype.P;po.prototype.set=po.prototype.set;po.prototype.setProperties=po.prototype.C;po.prototype.unset=po.prototype.R;po.prototype.changed=po.prototype.u;
po.prototype.dispatchEvent=po.prototype.b;po.prototype.getRevision=po.prototype.K;po.prototype.on=po.prototype.I;po.prototype.once=po.prototype.L;po.prototype.un=po.prototype.J;po.prototype.unByKey=po.prototype.M;E.prototype.getFirstCoordinate=E.prototype.Fb;E.prototype.getLastCoordinate=E.prototype.Gb;E.prototype.getLayout=E.prototype.Hb;E.prototype.rotate=E.prototype.rotate;E.prototype.getClosestPoint=E.prototype.xb;E.prototype.getExtent=E.prototype.G;E.prototype.simplify=E.prototype.Ab;E.prototype.transform=
E.prototype.hb;E.prototype.get=E.prototype.get;E.prototype.getKeys=E.prototype.O;E.prototype.getProperties=E.prototype.P;E.prototype.set=E.prototype.set;E.prototype.setProperties=E.prototype.C;E.prototype.unset=E.prototype.R;E.prototype.changed=E.prototype.u;E.prototype.dispatchEvent=E.prototype.b;E.prototype.getRevision=E.prototype.K;E.prototype.on=E.prototype.I;E.prototype.once=E.prototype.L;E.prototype.un=E.prototype.J;E.prototype.unByKey=E.prototype.M;F.prototype.getFirstCoordinate=F.prototype.Fb;
F.prototype.getLastCoordinate=F.prototype.Gb;F.prototype.getLayout=F.prototype.Hb;F.prototype.rotate=F.prototype.rotate;F.prototype.getClosestPoint=F.prototype.xb;F.prototype.getExtent=F.prototype.G;F.prototype.simplify=F.prototype.Ab;F.prototype.transform=F.prototype.hb;F.prototype.get=F.prototype.get;F.prototype.getKeys=F.prototype.O;F.prototype.getProperties=F.prototype.P;F.prototype.set=F.prototype.set;F.prototype.setProperties=F.prototype.C;F.prototype.unset=F.prototype.R;F.prototype.changed=
F.prototype.u;F.prototype.dispatchEvent=F.prototype.b;F.prototype.getRevision=F.prototype.K;F.prototype.on=F.prototype.I;F.prototype.once=F.prototype.L;F.prototype.un=F.prototype.J;F.prototype.unByKey=F.prototype.M;Yo.prototype.readFeatures=Yo.prototype.Ea;Zo.prototype.readFeatures=Zo.prototype.Ea;Zo.prototype.readFeatures=Zo.prototype.Ea;Pf.prototype.get=Pf.prototype.get;Pf.prototype.getKeys=Pf.prototype.O;Pf.prototype.getProperties=Pf.prototype.P;Pf.prototype.set=Pf.prototype.set;Pf.prototype.setProperties=
Pf.prototype.C;Pf.prototype.unset=Pf.prototype.R;Pf.prototype.changed=Pf.prototype.u;Pf.prototype.dispatchEvent=Pf.prototype.b;Pf.prototype.getRevision=Pf.prototype.K;Pf.prototype.on=Pf.prototype.I;Pf.prototype.once=Pf.prototype.L;Pf.prototype.un=Pf.prototype.J;Pf.prototype.unByKey=Pf.prototype.M;sg.prototype.getMap=sg.prototype.i;sg.prototype.setMap=sg.prototype.setMap;sg.prototype.setTarget=sg.prototype.c;sg.prototype.get=sg.prototype.get;sg.prototype.getKeys=sg.prototype.O;sg.prototype.getProperties=
sg.prototype.P;sg.prototype.set=sg.prototype.set;sg.prototype.setProperties=sg.prototype.C;sg.prototype.unset=sg.prototype.R;sg.prototype.changed=sg.prototype.u;sg.prototype.dispatchEvent=sg.prototype.b;sg.prototype.getRevision=sg.prototype.K;sg.prototype.on=sg.prototype.I;sg.prototype.once=sg.prototype.L;sg.prototype.un=sg.prototype.J;sg.prototype.unByKey=sg.prototype.M;Dg.prototype.getMap=Dg.prototype.i;Dg.prototype.setMap=Dg.prototype.setMap;Dg.prototype.setTarget=Dg.prototype.c;Dg.prototype.get=
Dg.prototype.get;Dg.prototype.getKeys=Dg.prototype.O;Dg.prototype.getProperties=Dg.prototype.P;Dg.prototype.set=Dg.prototype.set;Dg.prototype.setProperties=Dg.prototype.C;Dg.prototype.unset=Dg.prototype.R;Dg.prototype.changed=Dg.prototype.u;Dg.prototype.dispatchEvent=Dg.prototype.b;Dg.prototype.getRevision=Dg.prototype.K;Dg.prototype.on=Dg.prototype.I;Dg.prototype.once=Dg.prototype.L;Dg.prototype.un=Dg.prototype.J;Dg.prototype.unByKey=Dg.prototype.M;Eg.prototype.getMap=Eg.prototype.i;Eg.prototype.setMap=
Eg.prototype.setMap;Eg.prototype.setTarget=Eg.prototype.c;Eg.prototype.get=Eg.prototype.get;Eg.prototype.getKeys=Eg.prototype.O;Eg.prototype.getProperties=Eg.prototype.P;Eg.prototype.set=Eg.prototype.set;Eg.prototype.setProperties=Eg.prototype.C;Eg.prototype.unset=Eg.prototype.R;Eg.prototype.changed=Eg.prototype.u;Eg.prototype.dispatchEvent=Eg.prototype.b;Eg.prototype.getRevision=Eg.prototype.K;Eg.prototype.on=Eg.prototype.I;Eg.prototype.once=Eg.prototype.L;Eg.prototype.un=Eg.prototype.J;Eg.prototype.unByKey=
Eg.prototype.M;On.prototype.getMap=On.prototype.i;On.prototype.setMap=On.prototype.setMap;On.prototype.setTarget=On.prototype.c;On.prototype.get=On.prototype.get;On.prototype.getKeys=On.prototype.O;On.prototype.getProperties=On.prototype.P;On.prototype.set=On.prototype.set;On.prototype.setProperties=On.prototype.C;On.prototype.unset=On.prototype.R;On.prototype.changed=On.prototype.u;On.prototype.dispatchEvent=On.prototype.b;On.prototype.getRevision=On.prototype.K;On.prototype.on=On.prototype.I;On.prototype.once=
On.prototype.L;On.prototype.un=On.prototype.J;On.prototype.unByKey=On.prototype.M;vg.prototype.getMap=vg.prototype.i;vg.prototype.setMap=vg.prototype.setMap;vg.prototype.setTarget=vg.prototype.c;vg.prototype.get=vg.prototype.get;vg.prototype.getKeys=vg.prototype.O;vg.prototype.getProperties=vg.prototype.P;vg.prototype.set=vg.prototype.set;vg.prototype.setProperties=vg.prototype.C;vg.prototype.unset=vg.prototype.R;vg.prototype.changed=vg.prototype.u;vg.prototype.dispatchEvent=vg.prototype.b;vg.prototype.getRevision=
vg.prototype.K;vg.prototype.on=vg.prototype.I;vg.prototype.once=vg.prototype.L;vg.prototype.un=vg.prototype.J;vg.prototype.unByKey=vg.prototype.M;Tn.prototype.getMap=Tn.prototype.i;Tn.prototype.setMap=Tn.prototype.setMap;Tn.prototype.setTarget=Tn.prototype.c;Tn.prototype.get=Tn.prototype.get;Tn.prototype.getKeys=Tn.prototype.O;Tn.prototype.getProperties=Tn.prototype.P;Tn.prototype.set=Tn.prototype.set;Tn.prototype.setProperties=Tn.prototype.C;Tn.prototype.unset=Tn.prototype.R;Tn.prototype.changed=
Tn.prototype.u;Tn.prototype.dispatchEvent=Tn.prototype.b;Tn.prototype.getRevision=Tn.prototype.K;Tn.prototype.on=Tn.prototype.I;Tn.prototype.once=Tn.prototype.L;Tn.prototype.un=Tn.prototype.J;Tn.prototype.unByKey=Tn.prototype.M;xg.prototype.getMap=xg.prototype.i;xg.prototype.setMap=xg.prototype.setMap;xg.prototype.setTarget=xg.prototype.c;xg.prototype.get=xg.prototype.get;xg.prototype.getKeys=xg.prototype.O;xg.prototype.getProperties=xg.prototype.P;xg.prototype.set=xg.prototype.set;xg.prototype.setProperties=
xg.prototype.C;xg.prototype.unset=xg.prototype.R;xg.prototype.changed=xg.prototype.u;xg.prototype.dispatchEvent=xg.prototype.b;xg.prototype.getRevision=xg.prototype.K;xg.prototype.on=xg.prototype.I;xg.prototype.once=xg.prototype.L;xg.prototype.un=xg.prototype.J;xg.prototype.unByKey=xg.prototype.M;Xn.prototype.getMap=Xn.prototype.i;Xn.prototype.setMap=Xn.prototype.setMap;Xn.prototype.setTarget=Xn.prototype.c;Xn.prototype.get=Xn.prototype.get;Xn.prototype.getKeys=Xn.prototype.O;Xn.prototype.getProperties=
Xn.prototype.P;Xn.prototype.set=Xn.prototype.set;Xn.prototype.setProperties=Xn.prototype.C;Xn.prototype.unset=Xn.prototype.R;Xn.prototype.changed=Xn.prototype.u;Xn.prototype.dispatchEvent=Xn.prototype.b;Xn.prototype.getRevision=Xn.prototype.K;Xn.prototype.on=Xn.prototype.I;Xn.prototype.once=Xn.prototype.L;Xn.prototype.un=Xn.prototype.J;Xn.prototype.unByKey=Xn.prototype.M;bo.prototype.getMap=bo.prototype.i;bo.prototype.setMap=bo.prototype.setMap;bo.prototype.setTarget=bo.prototype.c;bo.prototype.get=
bo.prototype.get;bo.prototype.getKeys=bo.prototype.O;bo.prototype.getProperties=bo.prototype.P;bo.prototype.set=bo.prototype.set;bo.prototype.setProperties=bo.prototype.C;bo.prototype.unset=bo.prototype.R;bo.prototype.changed=bo.prototype.u;bo.prototype.dispatchEvent=bo.prototype.b;bo.prototype.getRevision=bo.prototype.K;bo.prototype.on=bo.prototype.I;bo.prototype.once=bo.prototype.L;bo.prototype.un=bo.prototype.J;bo.prototype.unByKey=bo.prototype.M;return OPENLAYERS.ol});ol.control.LayerSwitcher=function(opt_options){var options=opt_options||{};var tipLabel=options.tipLabel?options.tipLabel:"Legend";this.mapListeners=[];this.hiddenClassName="ol-unselectable ol-control layer-switcher";if(ol.control.LayerSwitcher.isTouchDevice_())this.hiddenClassName+=" touch";this.shownClassName=this.hiddenClassName+" shown";var element=document.createElement("div");element.className=this.hiddenClassName;var button=document.createElement("button");button.setAttribute("title",tipLabel);
element.appendChild(button);this.panel=document.createElement("div");this.panel.className="panel";element.appendChild(this.panel);ol.control.LayerSwitcher.enableTouchScroll_(this.panel);var this_=this;button.onmouseover=function(e){this_.showPanel()};button.onclick=function(e){e=e||window.event;this_.showPanel();e.preventDefault()};this_.panel.onmouseout=function(e){e=e||window.event;if(!this_.panel.contains(e.toElement||e.relatedTarget))this_.hidePanel()};ol.control.Control.call(this,{element:element,
target:options.target})};ol.inherits(ol.control.LayerSwitcher,ol.control.Control);ol.control.LayerSwitcher.prototype.showPanel=function(){if(this.element.className!=this.shownClassName){this.element.className=this.shownClassName;this.renderPanel()}};ol.control.LayerSwitcher.prototype.hidePanel=function(){if(this.element.className!=this.hiddenClassName)this.element.className=this.hiddenClassName};
ol.control.LayerSwitcher.prototype.renderPanel=function(){this.ensureTopVisibleBaseLayerShown_();while(this.panel.firstChild)this.panel.removeChild(this.panel.firstChild);var ul=document.createElement("ul");this.panel.appendChild(ul);this.renderLayers_(this.getMap(),ul)};
ol.control.LayerSwitcher.prototype.setMap=function(map){for(var i=0,key;i<this.mapListeners.length;i++)this.getMap().unByKey(this.mapListeners[i]);this.mapListeners.length=0;ol.control.Control.prototype.setMap.call(this,map);if(map){var this_=this;this.mapListeners.push(map.on("pointerdown",function(){this_.hidePanel()}));this.renderPanel()}};
ol.control.LayerSwitcher.prototype.ensureTopVisibleBaseLayerShown_=function(){var lastVisibleBaseLyr;ol.control.LayerSwitcher.forEachRecursive(this.getMap(),function(l,idx,a){if(l.get("type")==="base"&&l.getVisible())lastVisibleBaseLyr=l});if(lastVisibleBaseLyr)this.setVisible_(lastVisibleBaseLyr,true)};
ol.control.LayerSwitcher.prototype.setVisible_=function(lyr,visible){var map=this.getMap();lyr.setVisible(visible);if(visible&&lyr.get("type")==="base")ol.control.LayerSwitcher.forEachRecursive(map,function(l,idx,a){if(l!=lyr&&l.get("type")==="base")l.setVisible(false)})};
ol.control.LayerSwitcher.prototype.renderLayer_=function(lyr,idx){var this_=this;var li=document.createElement("li");var lyrTitle=lyr.get("title");var lyrId=ol.control.LayerSwitcher.uuid();var label=document.createElement("label");if(lyr.getLayers&&!lyr.get("combine")){li.className="group";label.innerHTML=lyrTitle;li.appendChild(label);var ul=document.createElement("ul");li.appendChild(ul);this.renderLayers_(lyr,ul)}else{li.className="layer";var input=document.createElement("input");if(lyr.get("type")===
"base"){input.type="radio";input.name="base"}else input.type="checkbox";input.id=lyrId;input.checked=lyr.get("visible");input.onchange=function(e){this_.setVisible_(lyr,e.target.checked)};li.appendChild(input);label.htmlFor=lyrId;label.innerHTML=lyrTitle;li.appendChild(label)}return li};
ol.control.LayerSwitcher.prototype.renderLayers_=function(lyr,elm){var lyrs=lyr.getLayers().getArray().slice().reverse();for(var i=0,l;i<lyrs.length;i++){l=lyrs[i];if(l.get("title"))elm.appendChild(this.renderLayer_(l,i))}};ol.control.LayerSwitcher.forEachRecursive=function(lyr,fn){lyr.getLayers().forEach(function(lyr,idx,a){fn(lyr,idx,a);if(lyr.getLayers)ol.control.LayerSwitcher.forEachRecursive(lyr,fn)})};
ol.control.LayerSwitcher.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})};
ol.control.LayerSwitcher.enableTouchScroll_=function(elm){if(ol.control.LayerSwitcher.isTouchDevice_()){var scrollStartPos=0;elm.addEventListener("touchstart",function(event){scrollStartPos=this.scrollTop+event.touches[0].pageY},false);elm.addEventListener("touchmove",function(event){this.scrollTop=scrollStartPos-event.touches[0].pageY},false)}};ol.control.LayerSwitcher.isTouchDevice_=function(){try{document.createEvent("TouchEvent");return true}catch(e){return false}};var GIAPI={demo:{medsuv:"http://med-suv.essi-lab.eu/dab/",nextData:"http://130.186.13.22/next-data-dab/",api:"http://gs-service-production.geodab.eu/gs-service/",prod:"http://production.geodab.eu/gi-cat-StP/",preProd:"http://preproduction.geodab.eu/gi-cat-StP/",local:"http://localhost:8085/gi-cat/",hermes:"http://hermes.essi-lab.eu/dab/",v_hub:"http://vh-it.energic-od.eu/gi-cat/",tb12:"http://tb12.essi-lab.eu/pubsub-csw/",arpa:"http://arpa-er.geodab.eu/gi-cat-arpa/"},ui:{mapType:"google"},logger:{enabled:false,
info:{stringify:function(){return JSON.stringify(this,null,4)}},warn:{stringify:function(){return JSON.stringify(this,null,4)}},error:{stringify:function(){return JSON.stringify(this,null,4)}},log:function(msg,level){if(!GIAPI.logger.enabled)return;if(!level)level="info";switch(level){case "info":GIAPI.logger.info[GIAPI.isoDateTime()]=msg;break;case "warn":GIAPI.logger.warn[GIAPI.isoDateTime()]=msg;break;case "error":GIAPI.logger.error[GIAPI.isoDateTime()]=msg;break;default:return}}},random:function(){return Math.random().toString(36).slice(2)},
query:function(dabEndpoint,constraints,options,parentId,targetId,sources,queryID,viewId,servicePath,openSearchPath){if(!queryID)queryID=GIAPI.random();var start=!options?1:options.start||1;var pageSize=!options?10:options.pageSize||10;var where=!constraints?"":constraints.where||"";if(Array.prototype.isArray(where)){var tmp="";for(var i=0;i<where.length;i++)tmp+=where[i].west+","+where[i].south+","+where[i].east+","+where[i].north+"_";where=tmp.substring(0,tmp.length-1)}else if(where)where=where.west+
","+where.south+","+where.east+","+where.north;var when=!constraints?"":constraints.when||"";var when_from="";if(Array.prototype.isArray(when)){var tmp="";for(var i=0;i<when.length;i++){var fr=when[i]&&when[i].from?when[i].from:"";if(fr){var t=fr!="NONE"?"T00:00:00Z":"";tmp+=(fr.indexOf("T")===-1?fr+t:fr)+"_"}}when_from=tmp.substring(0,tmp.length-1)}else if(when&&when.from){var t=when.from!="NONE"?"T00:00:00Z":"";when_from=when.from.indexOf("T")===-1?when.from+t:when.from}var when_to="";if(Array.prototype.isArray(when)){var tmp=
"";for(var i=0;i<when.length;i++){var to=when[i]&&when[i].to?when[i].to:"";if(to){var t=to!="NONE"?"T00:00:00Z":"";tmp+=(to.indexOf("T")===-1?to+t:to)+"_"}}when_to=tmp.substring(0,tmp.length-1)}else if(when&&when.to){var t=when.to!="NONE"?"T00:00:00Z":"";when_to=when.to.indexOf("T")===-1?when.to+t:when.to}var what=GIAPI.readWhat(constraints,options);var who=!constraints?"":constraints.who||"";var who2=!constraints?"":constraints.who2||"";if(!who&&who2)who=who2;else if(who&&who2)who=who+","+who2;var kvp=
constraints&&constraints.kvp;var queryKVP="&";var kwd="";var format="";var protocol="";var kwdOrBbox="";var pla="";var sen="";var att="";var ori="";var score="";var instr="";var platTitle="";var attrTitle="";var orgName="";if(kvp){if(!Array.prototype.isArray(kvp))kvp=[kvp];for(var kvpel=0;kvpel<kvp.length;kvpel++){var key=kvp[kvpel].key;var val=kvp[kvpel].value;if(key==="kwdOrBbox"){kwdOrBbox=val;continue}if(key==="kwd"){kwd=val;continue}if(key==="frmt"){format=val;continue}if(key==="prot"){protocol=
val;continue}if(key==="pla"){pla=val;continue}if(key==="sen"){sen=val;continue}if(key==="att"){att=val;continue}if(key==="ori"){ori=val;continue}if(key==="score"){score=val;continue}if(key==="instrumentTitle"){instr=val;continue}if(key==="platformTitle"){platTitle=val;continue}if(key==="attributeTitle"){attrTitle=val;continue}if(key==="orgName"){orgName=val;continue}queryKVP+=key+"="+val+"&"}}kwd=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"keyword")||kwd;format=options&&options.termFrequency&&
GIAPI.readConstraint(constraints,"format")||format;protocol=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"protocol")||protocol;sen=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"instrumentId")||sen;pla=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"platformId")||pla;ori=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"origOrgId")||ori;att=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"attributeId")||att;
score=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"score")||score;instr=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"instrumentTitle")||instr;platTitle=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"platformTitle")||platTitle;attrTitle=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"attributeTitle")||attrTitle;orgName=options&&options.termFrequency&&GIAPI.readConstraint(constraints,"organisationName")||orgName;var from=
!constraints?"":constraints.from||"";var until=!constraints?"":constraints.until||"";var subject="";var relation="";if(options&&options.extension){if(typeof options.extension.relation==="string")relation=options.extension.relation;else relation=options.extension.relation.value;if(options.extension.concepts){what="";var concepts=options.extension.concepts;if(typeof concepts==="string")subject=concepts;else{for(var i=0;i<concepts.length;i++){var con=concepts[i];var uri=con.uri();subject+=uri+","}subject=
subject.substring(0,subject.length-1)}}else what=options.extension.keyword}var tmp_sf=!options?"":options.searchFields||"";var sf="";if(what&&tmp_sf)if(Array.prototype.isArray(tmp_sf)){for(var i=0;i<tmp_sf.length;i++)sf+=tmp_sf[i]+",";sf=sf.substring(0,sf.length-4)}else sf=tmp_sf;var spatialRel="";if(options&&options.spatialRelation)spatialRel=options.spatialRelation;var termFrequency="";if(queryID.indexOf("expand")===-1)if(options&&options.termFrequency)termFrequency=options.termFrequency.replace("source",
"providerID");else termFrequency="keyword,format,providerID,protocol,instrumentId,platformId,origOrgId,attributeId,instrumentTitle,platformTitle,orgName,attributeTitle";var path=null;if(viewId)viewId="/"+viewId;else viewId="";if(options&&options.aggregate)path=openSearchPath+viewId+"?reqID="+queryID+"&aggregate=true&";else path=subject||relation?"opensearchsemanticenhanced"+viewId+"?reqID="+queryID+"&semExec=expand&":openSearchPath+viewId+"?reqID="+queryID+"&";var slash=dabEndpoint.endsWith("/")?
"":"/";var trgId=targetId?targetId:"";var httpGet=dabEndpoint+slash+servicePath+"/"+path;httpGet+="si="+start+"&";httpGet+="ct="+pageSize+"&";httpGet+="st="+what+"&";httpGet+="kwd="+kwd+"&";httpGet+="frmt="+format+"&";httpGet+="prot="+protocol+"&";httpGet+="kwdOrBbox="+kwdOrBbox+"&";httpGet+="sscScore="+score+"&";httpGet+="instrumentTitle="+instr+"&";httpGet+="platformTitle="+platTitle+"&";httpGet+="attributeTitle="+attrTitle+"&";httpGet+="organisationName="+orgName+"&";httpGet+="searchFields="+sf+
"&";httpGet+="bbox="+where+"&";httpGet+="rel="+spatialRel+"&";httpGet+="tf="+termFrequency+"&";httpGet+="ts="+when_from+"&";httpGet+="te="+when_to+"&";httpGet+="targetId="+trgId+"&";httpGet+="from="+from+"&";httpGet+="until="+until+"&";if(GIAPI.disableCrawler)httpGet+="crawler=disabled&";if(sources)httpGet+="sources="+sources+"&";if(parentId||who)httpGet+="parents="+(parentId?encodeURIComponent(parentId):encodeURIComponent(who))+"&";httpGet+="subj="+encodeURIComponent(subject)+"&rela="+relation+queryKVP+
"outputFormat=application/json";GIAPI.logger.log("query: "+httpGet);return httpGet},status:function(dabEndpoint,extended,queryID,servicePath){var slash=dabEndpoint.endsWith("/")?"":"/";var sem=extended?"&semantic=true":"";var endpoint=GIAPI.lbStatusProxyEndpoint?GIAPI.lbStatusProxyEndpoint:dabEndpoint+slash+servicePath+"/status?";return endpoint+"id="+queryID+"&format=application/json"+sem},concept:function(dabEndpoint,keyword,uri,relation,options,servicePath){var slash=dabEndpoint.endsWith("/")?
"":"/";var queryID=GIAPI.random();var rela="";if(!keyword){keyword="";if(relation){var tmpArray=[];for(var i=0;i<relation.length;i++){var r=relation[i];if(typeof r==="string")tmpArray.push(r);else tmpArray.push(r.value)}rela=tmpArray}else{var allRela="";for(name in GIAPI.Relation)if(name!=="NONE"&&name!=="decode")allRela+=GIAPI.Relation[name].value+",";rela=allRela.substring(0,allRela.length-1)}}var si=options&&options.start?options.start:1;var ct=options&&options.count?options.count:10;var topLevel=
options&&options.topLevel?options.topLevel:"false";uri=encodeURIComponent(uri);var httpGet=dabEndpoint+slash+servicePath+"/opensearchsemanticenhanced?semExec=suggestion&si="+si+"&ct="+ct+"&reqID="+queryID+"&st="+keyword+"&topLevel="+topLevel+"&subj="+uri+"&rela="+rela+"&outputFormat=application/json";GIAPI.logger.log("concept: "+httpGet);return httpGet},mergeConstraints:function(constraints1,constraints2){var cnst1=GIAPI.clone(constraints1);var where1=cnst1?cnst1.where:"";var when1=cnst1?cnst1.when:
"";var what1=cnst1?cnst1.what:"";var who1=cnst1?cnst1.who:"";var where2=constraints2?constraints2.where:"";var when2=constraints2?constraints2.when:"";if(when2&&when2.from&&!when2.to)when2.to="NONE";else if(when2&&when2.to&&!when2.from)when2.from="NONE";var what2=constraints2?constraints2.what:"";var who2=constraints2?constraints2.who:"";if(where2)if(Array.isArray(where1))if(Array.isArray(where2))for(var i=0;i<where2.length;i++)where1.push(where2[i]);else where1.push(where2);else if(!where1)cnst1.where=
where2;else if(!GIAPI.compareWhere(cnst1.where,where2)){delete cnst1.where;cnst1.where=[];cnst1.where.push(where1);if(Array.isArray(where2))for(var i=0;i<where2.length;i++)cnst1.where.push(where2[i]);else cnst1.where.push(where2)}if(when2)if(Array.isArray(when1))if(Array.isArray(when2))for(var i=0;i<when2.length;i++)when1.push(when2[i]);else when1.push(when2);else if(!when1)cnst1.when=when2;else if(!GIAPI.compareWhen(cnst1.where,where2)){delete cnst1.when;cnst1.when=[];cnst1.when.push(when1);if(Array.isArray(when2))for(var i=
0;i<when2.length;i++)cnst1.when.push(when2[i]);else cnst1.when.push(when2)}if(what2)if(Array.isArray(what1))if(Array.isArray(what2)){what1[what1.length-1]=what1[what1.length-1]+" AND ";for(var i=0;i<what2.length;i++)what1.push(what2[i])}else what1.push(" AND "+what2);else if(!what1)cnst1.what=what2;else if(!GIAPI.compare(cnst1.what,what2)){delete cnst1.what;cnst1.what=[];cnst1.what.push(what1+" AND ");if(Array.isArray(what2))for(var i=0;i<what2.length;i++)cnst1.what.push(what2[i]);else cnst1.what.push(what2)}if(who2)if(Array.isArray(who1))if(Array.isArray(who2))for(var i=
0;i<who2.length;i++)who1.push(who2[i]);else who1.push(who2);else if(!who1)cnst1.who=who2;else if(!GIAPI.compare(cnst1.who,who2)){delete cnst1.who;cnst1.who=[];cnst1.who.push(who1);if(Array.isArray(who2))for(var i=0;i<who2.length;i++)cnst1.who.push(who2[i]);else cnst1.who.push(who2)}if(!cnst1.kvp&&!constraints2.kvp)return cnst1;cnst1.kvp=cnst1.kvp||[{}];if(Array.isArray(cnst1.kvp)&&cnst1.kvp.length===0)cnst1.kvp=[{}];if(!Array.isArray(cnst1.kvp))cnst1.kvp=[cnst1.kvp];constraints2.kvp=constraints2.kvp||
[{}];if(Array.isArray(constraints2.kvp)&&constraints2.kvp.length===0)constraints2.kvp=[{}];if(!Array.isArray(constraints2.kvp))constraints2.kvp=[constraints2.kvp];cnst1.kvp.forEach(function(obj1,index1){var key1=obj1&&obj1.key;constraints2.kvp.forEach(function(obj2,index2){var key2=obj2&&obj2.key;if(key2!=="#")if(key1&&!key2);else if(!key1&&key2)cnst1.kvp.push(obj2);else if(key1===key2){var val1=obj1.value;var val2=obj2.value;val1+=","+val2;cnst1.kvp[index1].value=val1;constraints2.kvp[index1].key=
"#"}else{var found=false;for(var i=0;i<cnst1.kvp.length;i++)if(cnst1.kvp[i].key===key2){found=true;break}if(!found)cnst1.kvp.push({"key":obj2.key,"value":obj2.value})}})});if(cnst1.kvp&&cnst1.kvp[0]&&!cnst1.kvp[0].key)cnst1.kvp.splice(0,1);return cnst1},compareWhere:function(w1,w2){return!Array.isArray(w2)&&w1.west===w2.west&&w1.east===w2.east&&w1.north===w2.north&&w1.south===w2.south},compareWhen:function(w1,w2){return!Array.isArray(w2)&&w1.from===w2.from&&w1.to===w2.to},compare:function(v1,v2){return!Array.isArray(v2)&&
v1===v2},readWhat:function(constraints,options){var tmp_what=!constraints?"":constraints.what||"";var searchOp=options&&options.searchOperator?" "+options.searchOperator+" ":" OR ";var what="";if(Array.isArray(tmp_what)){for(var i=0;i<tmp_what.length;i++)what+=tmp_what[i].trim()+searchOp;what=what.substring(0,what.length-4).trim()}else what=tmp_what.trim();return what.replace(/OR AND/g,"AND").replace(/AND OR/g,"AND")},readWho:function(constraints){var tmp_who=!constraints?"":constraints.who||"";var who=
"";if(Array.isArray(tmp_who)){for(var i=0;i<tmp_who.length;i++)who+=tmp_who[i].trim()+",";who=who.substring(0,who.length-1).trim()}else who=tmp_who.trim();return who},readConstraint:function(constraints,param){var tmp=!constraints?"":constraints[param]||"";var out="";if(Array.isArray(tmp)){for(var i=0;i<tmp.length;i++)out+=tmp[i]+" AND ";out=out.substring(0,out.length-5)}else out=tmp;return out},emptyResultSet:function(error){var resultSet={};resultSet.size=0;resultSet.pageSize=0;resultSet.start=
0;resultSet.pageIndex=0;resultSet.pageCount=0;if(error)resultSet.error=error;return resultSet},getUrlParameter:function getUrlParameter(sParam){var sPageURL=decodeURIComponent(window.location.search.substring(1));var sURLVariables=sPageURL.split("&");for(var i=0;i<sURLVariables.length;i++){var sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam)return sParameterName[1]===undefined?true:sParameterName[1]}},emptyResponse:function(){var response=[];var rs=GIAPI.emptyResultSet();
rs.paginator=GIAPI.Paginator();rs.paginator._page=GIAPI.Page([],0);response.push(rs);return response},clone:function(object){return jQuery.extend(true,{},object)},isoDateTime:function(){return(new Date).format("isoDateTimeMls")},thousandsSeparator:function(integer){return(integer+"").replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatWords:function(string){var array=string.split(" ");var out="";array.forEach(function(word){word=word.substring(0,1).toUpperCase()+word.substring(1,word.length).toLowerCase();
out+=word+" "});return out.substring(0,out.length-1)},spaces:function(count){var out="";for(var i=0;i<count;i++)out+="&nbsp;";return out},readParam:function(url,key){var value=url.split(key+"=")[1];if(value.indexOf("&")>-1)value=value.substring(0,value.indexOf("&"));return value},position:function(pos){var my;var at;switch(pos){case "left":my="right center";at="left center";break;case "right":my="left center";at="right center";break;case "top":my="center bottom";at="center top";break;case "bottom":my=
"center top";at="center bottom";break}return{"my":my,"at":at}},protocols:{"ESRI MapServer Protocol":"urn:x-esri:specification:ServiceType:ArcGIS","ESRI MapServer Protocol 10.0.0":"urn:x-esri:specification:ServiceType:ArcGIS:10.0.0","OGC Web Coverae Service 1.0 Protocol":"urn:ogc:serviceType:WebCoverageService:1.0:HTTP","Trajectory Protocol":"urn:essi:serviceType:Trajectory:HTTP","Tiled Service":"urn:essi:serviceType:TiledMapService:HTTP","OGC Web Coverage Service 1.0.0 Protocol":"urn:ogc:serviceType:WebCoverageService:1.0.0:HTTP",
"OGC Web Coverage Service 1.0.0 Protocol - EDO profile":"urn:ogc:serviceType:WebCoverageService:EDO:1.0:HTTP","OGC Web Coverage Service 1.1 Protocol":"urn:ogc:serviceType:WebCoverageService:1.1:HTTP","OGC Web Coverage Service 1.1.1 Protocol":"urn:ogc:serviceType:WebCoverageService:1.1.1:HTTP","OGC Web Coverage Service 2.0 Protocol":"urn:ogc:serviceType:WebCoverageService:2.0:HTTP","OGC Web Coverage Service Protocol":"urn:ogc:serviceType:WebCoverageService:HTTP","OGC Web Coverage Service 1.1.2 Protocol":"urn:ogc:serviceType:WebCoverageService:1.1.2:HTTP",
"OGC Web Map Service 1.1.1 Protocol":"urn:ogc:serviceType:WebMapService:1.1.1:HTTP","OGC Web Map Service 1.3.0 Protocol":"urn:ogc:serviceType:WebMapService:1.3.0:HTTP","OGC Web Map Service 1.3.0 Protocol Quality Profile":"urn:ogc:serviceType:WebMapService:1.3.0:HTTP:QualityProfile","OGC Web Map Service Protocol":"urn:ogc:serviceType:WebMapService:HTTP","OGC Web Map Tile Service 1.0.0 Protocol":"urn:ogc:serviceType:WebMapTileService:1.0.0:HTTP","OGC Web Feature Service 2.0.0 Protocol":"urn:ogc:serviceType:WebFeatureService:2.0.0:HTTP",
"OGC Web Feature Service 1.0.0 Protocol":"urn:ogc:serviceType:WebFeatureService:1.0.0:HTTP","OGC Web Feature Service 1.1.0 Protocol":"urn:ogc:serviceType:WebFeatureService:1.1.0:HTTP","OGC Web Feature Service Protocol":"urn:ogc:serviceType:WebFeatureService:HTTP","OPeNDAP Protocol":"OPeNDAP","NetCDF Subset":"NETCDF-SUBSET","NetCDF Attribute Convention for Dataset Discovery Report":"UDDC","ISO 19115 document":"ISO19115","NetCDF Markup Language":"NCML","Earth Engine Protocol":"EARTH-ENGINE","OGC Sensor Observation Service 1.0.0 Protocol":"urn:ogc:serviceType:SensorObservationService:1.0.0:HTTP",
"OGC Sensor Observation Service 2.0.0 Protocol":"urn:ogc:serviceType:SensorObservationService:2.0.0:HTTP","OGC Sensor Observation Service 2.0.0 Protocol, Hydro Application Profile":"urn:ogc:serviceType:SensorObservationServiceHydroProf:2.0.0:HTTP","OGC Sensor Observation Service Protocol":"urn:ogc:serviceType:SensorObservationService:HTTP","Access Broker Protocol":"gi-axe","GEOSS Helper Application":"geoss:helperapp","GEOSS Online Helper Application":"geoss:helperapp:online","EGASKRO Protocol":"EGASKRO",
"HYRAX Protocol":"HYRAX","RASAQM Protocol":"RASAQM","FILE Protocol":"FILE","FTP Protocol":"FTP","KISTERS Protocol":"KISTERS","HIS HYDRO Protocol":"HYDRO","ARPA HYDRO-DB Protocol":"HYDROSERVER-DB","Environment Canada Protocol":"ECANADA","HTTP Protocol":"HTTP"}};if(typeof Array.prototype.isArray!=="function")Array.prototype.isArray=function(value){return Object.prototype.toString.apply(value)==="[object Array]"};
if(typeof Array.prototype.remove!=="function")Array.prototype.remove=function(array,item){for(var i in array)if(array[i]===item){array.splice(i,1);break}};if(typeof Array.prototype.distinctValues!=="function")Array.prototype.distinctValues=function(a){return function(){return this.filter(a)}}(function(a,b,c){return c.indexOf(a,b+1)<0});if(typeof String.prototype.endsWith!=="function")String.prototype.endsWith=function(suffix){return this.indexOf(suffix,this.length-suffix.length)!==-1};
if(typeof String.prototype.includes!=="function")String.prototype.includes=function(value){return this.indexOf(value)!==-1};
(function($){$.timer=function(func,time,autostart){this.set=function(func,time,autostart){this.init=true;if(typeof func=="object"){var paramList=["autostart","time"];for(var arg in paramList)if(func[paramList[arg]]!=undefined)eval(paramList[arg]+" = func[paramList[arg]]");func=func.action}if(typeof func=="function")this.action=func;if(!isNaN(time))this.intervalTime=time;if(autostart&&!this.isActive){this.isActive=true;this.setTimer()}return this};this.once=function(time){var timer=this;if(isNaN(time))time=
0;window.setTimeout(function(){timer.action()},time);return this};this.play=function(reset){if(!this.isActive){if(reset)this.setTimer();else this.setTimer(this.remaining);this.isActive=true}return this};this.pause=function(){if(this.isActive){this.isActive=false;this.remaining-=new Date-this.last;this.clearTimer()}return this};this.stop=function(){this.isActive=false;this.remaining=this.intervalTime;this.clearTimer();return this};this.toggle=function(reset){if(this.isActive)this.pause();else if(reset)this.play(true);
else this.play();return this};this.reset=function(){this.isActive=false;this.play(true);return this};this.clearTimer=function(){window.clearTimeout(this.timeoutObject)};this.setTimer=function(time){var timer=this;if(typeof this.action!="function")return;if(isNaN(time))time=this.intervalTime;this.remaining=time;this.last=new Date;this.clearTimer();this.timeoutObject=window.setTimeout(function(){timer.go()},time)};this.go=function(){if(this.isActive){this.action();this.setTimer()}};if(this.init)return new $.timer(func,
time,autostart);else{this.set(func,time,autostart);return this}}})(jQuery);
dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){val=String(val);len=len||2;while(val.length<len)val="0"+val;return val};return function(date,mask,utc){var dF=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(date)=="[object String]"&&!/\d/.test(date)){mask=
date;date=undefined}date=date?new Date(date):new Date;if(isNaN(date))throw SyntaxError("invalid date");mask=String(dF.masks[mask]||mask||dF.masks["default"]);if(mask.slice(0,4)=="UTC:"){mask=mask.slice(4);utc=true}var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+
7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(token,
function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoTimeMls:"HH:MM:ss.l",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoDateTimeMls:"yyyy-mm-dd'T'HH:MM:ss.l",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};
dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};if(typeof Date.prototype.format!=="function")Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc)};(function($){var unloadingPage;$(window).on("beforeunload",function(){unloadingPage=true});$(window).on("unload",function(){unloadingPage=false});$.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:true,defaultDateFormat:"yy-mm-dd",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:false,loadingAnimationDelay:500,saveUserPreferences:true,jqueryuiTheme:false,unAuthorizedRequestRedirectUrl:null,ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:true,hoverAnimationDuration:60,
hoverAnimationEasing:undefined,items:[]},closeRequested:function(event,data){},formCreated:function(event,data){},formSubmitting:function(event,data){},formClosed:function(event,data){},loadingRecords:function(event,data){},recordsLoaded:function(event,data){},rowInserted:function(event,data){},rowsRemoved:function(event,data){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",
save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions();this._initializeFields();this._createFieldAndColumnList();
this._createMainContainer();this._createTableTitle();this._createToolBar();this._createTable();this._createBusyPanel();this._createErrorDialogDiv();this._addNoDataRow();this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var self=this;$.each(self.options.fields,function(fieldName,props){self._normalizeFieldOptions(fieldName,props)})},_normalizeFieldOptions:function(fieldName,props){if(props.listClass==undefined)props.listClass="";if(props.inputClass==undefined)props.inputClass=
"";if(props.dependsOn&&$.type(props.dependsOn)==="string"){var dependsOnArray=props.dependsOn.split(",");props.dependsOn=[];for(var i=0;i<dependsOnArray.length;i++)props.dependsOn.push($.trim(dependsOnArray[i]))}},_initializeFields:function(){this._lastPostData={};this._$tableRows=[];this._columnList=[];this._fieldList=[];this._cache=[]},_createFieldAndColumnList:function(){var self=this;$.each(self.options.fields,function(name,props){self._fieldList.push(name);if(props.key==true)self._keyField=name;
if(props.list!=false&&props.type!="hidden")self._columnList.push(name)})},_createMainContainer:function(){this._$mainContainer=$("<div />").addClass("jtable-main-container").appendTo(this.element);this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget")},_createTableTitle:function(){var self=this;if(!self.options.title)return;var $titleDiv=$("<div />").addClass("jtable-title").appendTo(self._$mainContainer);self._jqueryuiThemeAddClass($titleDiv,"ui-widget-header");$("<div />").addClass("jtable-title-text").appendTo($titleDiv).append(self.options.title);
if(self.options.showCloseButton){var $textSpan=$("<span />").html(self.options.messages.close);$("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",self.options.messages.close).append($textSpan).appendTo($titleDiv).click(function(e){e.preventDefault();e.stopPropagation();self._onCloseRequested()})}self._$titleDiv=$titleDiv},_createTable:function(){this._$table=$("<table></table>").addClass("jtable").appendTo(this._$mainContainer);if(this.options.tableId)this._$table.attr("id",
this.options.tableId);this._jqueryuiThemeAddClass(this._$table,"ui-widget-content");this._createTableHead();this._createTableBody()},_createTableHead:function(){var $thead=$("<thead></thead>").appendTo(this._$table);this._addRowToTableHead($thead)},_addRowToTableHead:function($thead){var $tr=$("<tr></tr>").appendTo($thead);this._addColumnsToHeaderRow($tr)},_addColumnsToHeaderRow:function($tr){for(var i=0;i<this._columnList.length;i++){var fieldName=this._columnList[i];var $headerCell=this._createHeaderCellForField(fieldName,
this.options.fields[fieldName]);$headerCell.appendTo($tr)}},_createHeaderCellForField:function(fieldName,field){field.width=field.width||"10%";var $headerTextSpan=$("<span />").addClass("jtable-column-header-text").html(field.title);var $headerContainerDiv=$("<div />").addClass("jtable-column-header-container").append($headerTextSpan);var $th=$("<th></th>").addClass("jtable-column-header").addClass(field.listClass).css("width",field.width).data("fieldName",fieldName).append($headerContainerDiv);this._jqueryuiThemeAddClass($th,
"ui-state-default");return $th},_createEmptyCommandHeader:function(){var $th=$("<th></th>").addClass("jtable-command-column-header").css("width","1%");this._jqueryuiThemeAddClass($th,"ui-state-default");return $th},_createTableBody:function(){this._$tableBody=$("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=$("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer);this._$busyDiv=$("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer);
this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header");this._hideBusy()},_createErrorDialogDiv:function(){var self=this;self._$errorDialogDiv=$("<div></div>").appendTo(self._$mainContainer);self._$errorDialogDiv.dialog({autoOpen:false,show:self.options.dialogShowEffect,hide:self.options.dialogHideEffect,modal:true,title:self.options.messages.error,buttons:[{text:self.options.messages.close,click:function(){self._$errorDialogDiv.dialog("close")}}]})},load:function(postData,completeCallback){this._lastPostData=
postData;this._reloadTable(completeCallback)},reload:function(completeCallback){this._reloadTable(completeCallback)},getRowByKey:function(key){for(var i=0;i<this._$tableRows.length;i++)if(key==this._getKeyValueOfRecord(this._$tableRows[i].data("record")))return this._$tableRows[i];return null},destroy:function(){this.element.empty();$.Widget.prototype.destroy.call(this)},_setOption:function(key,value){},_reloadTable:function(completeCallback){var self=this;var completeReload=function(data){self._hideBusy();
if(data.Result!="OK"){self._showError(data.Message);return}self._removeAllRows("reloading");self._addRecordsToTable(data.Records);self._onRecordsLoaded(data);if(completeCallback)completeCallback()};self._showBusy(self.options.messages.loadingMessage,self.options.loadingAnimationDelay);self._onLoadingRecords();if($.isFunction(self.options.actions.listAction)){var funcResult=self.options.actions.listAction(self._lastPostData,self._createJtParamsForLoading());if(self._isDeferredObject(funcResult))funcResult.done(function(data){completeReload(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError)}).always(function(){self._hideBusy()});
else completeReload(funcResult)}else{var loadUrl=self._createRecordLoadUrl();self._ajax({url:loadUrl,data:self._lastPostData,success:function(data){completeReload(data)},error:function(){self._hideBusy();self._showError(self.options.messages.serverCommunicationError)}})}},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createJtParamsForLoading:function(){return{}},_createRowFromRecord:function(record){var $tr=$("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",
this._getKeyValueOfRecord(record)).data("record",record);this._addCellsToRowUsingRecord($tr);return $tr},_addCellsToRowUsingRecord:function($row){var record=$row.data("record");for(var i=0;i<this._columnList.length;i++)this._createCellForRecordField(record,this._columnList[i]).appendTo($row)},_createCellForRecordField:function(record,fieldName){return $("<td></td>").addClass(this.options.fields[fieldName].listClass).append(this._getDisplayTextForRecordField(record,fieldName))},_addRecordsToTable:function(records){var self=
this;$.each(records,function(index,record){self._addRow(self._createRowFromRecord(record))});self._refreshRowStyles()},_addRowToTable:function($tableRow,index,isNewRow,animationsEnabled){var options={index:this._normalizeNumber(index,0,this._$tableRows.length,this._$tableRows.length)};if(isNewRow==true)options.isNewRow=true;if(animationsEnabled==false)options.animationsEnabled=false;this._addRow($tableRow,options)},_addRow:function($row,options){options=$.extend({index:this._$tableRows.length,isNewRow:false,
animationsEnabled:true},options);if(this._$tableRows.length<=0)this._removeNoDataRow();options.index=this._normalizeNumber(options.index,0,this._$tableRows.length,this._$tableRows.length);if(options.index==this._$tableRows.length){this._$tableBody.append($row);this._$tableRows.push($row)}else if(options.index==0){this._$tableBody.prepend($row);this._$tableRows.unshift($row)}else{this._$tableRows[options.index-1].after($row);this._$tableRows.splice(options.index,0,$row)}this._onRowInserted($row,options.isNewRow);
if(options.isNewRow){this._refreshRowStyles();if(this.options.animationsEnabled&&options.animationsEnabled)this._showNewRowAnimation($row)}},_showNewRowAnimation:function($tableRow){},_removeRowsFromTable:function($rows,reason){var self=this;if($rows.length<=0)return;$rows.addClass("jtable-row-removed").remove();$rows.each(function(){var index=self._findRowIndex($(this));if(index>=0)self._$tableRows.splice(index,1)});self._onRowsRemoved($rows,reason);if(self._$tableRows.length==0)self._addNoDataRow();
self._refreshRowStyles()},_findRowIndex:function($row){return this._findIndexInArray($row,this._$tableRows,function($row1,$row2){return $row1.data("record")==$row2.data("record")})},_removeAllRows:function(reason){if(this._$tableRows.length<=0)return;var $rows=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty();this._$tableRows=[];this._onRowsRemoved($rows,reason);this._addNoDataRow()},_addNoDataRow:function(){if(this._$tableBody.find(">tr.jtable-no-data-row").length>0)return;var $tr=
$("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody);var totalColumnCount=this._$table.find("thead th").length;$("<td></td>").attr("colspan",totalColumnCount).html(this.options.messages.noDataAvailable).appendTo($tr)},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function(){for(var i=0;i<this._$tableRows.length;i++)if(i%2==0)this._$tableRows[i].addClass("jtable-row-even");else this._$tableRows[i].removeClass("jtable-row-even")},
_getDisplayTextForRecordField:function(record,fieldName){var field=this.options.fields[fieldName];var fieldValue=record[fieldName];if(field.display)return field.display({record:record});if(field.type=="date")return this._getDisplayTextForDateRecordField(field,fieldValue);else if(field.type=="checkbox")return this._getCheckBoxTextForFieldByValue(fieldName,fieldValue);else if(field.options){var options=this._getOptionsForField(fieldName,{record:record,value:fieldValue,source:"list",dependedValues:this._createDependedValuesUsingRecord(record,
field.dependsOn)});return this._findOptionByValue(options,fieldValue).DisplayText}else return fieldValue},_createDependedValuesUsingRecord:function(record,dependsOn){if(!dependsOn)return{};var dependedValues={};for(var i=0;i<dependsOn.length;i++)dependedValues[dependsOn[i]]=record[dependsOn[i]];return dependedValues},_findOptionByValue:function(options,value){for(var i=0;i<options.length;i++)if(options[i].Value==value)return options[i];return{}},_getDisplayTextForDateRecordField:function(field,fieldValue){if(!fieldValue)return"";
var displayFormat=field.displayFormat||this.options.defaultDateFormat;var date=this._parseDate(fieldValue);return $.datepicker.formatDate(displayFormat,date)},_getOptionsForField:function(fieldName,funcParams){var field=this.options.fields[fieldName];var optionsSource=field.options;if($.isFunction(optionsSource)){funcParams=$.extend(true,{_cacheCleared:false,dependedValues:{},clearCache:function(){this._cacheCleared=true}},funcParams);optionsSource=optionsSource(funcParams)}var options;if(typeof optionsSource==
"string"){var cacheKey="options_"+fieldName+"_"+optionsSource;if(funcParams._cacheCleared||!this._cache[cacheKey]){this._cache[cacheKey]=this._buildOptionsFromArray(this._downloadOptions(fieldName,optionsSource));this._sortFieldOptions(this._cache[cacheKey],field.optionsSorting)}else if(funcParams.value!=undefined){var optionForValue=this._findOptionByValue(this._cache[cacheKey],funcParams.value);if(optionForValue.DisplayText==undefined){this._cache[cacheKey]=this._buildOptionsFromArray(this._downloadOptions(fieldName,
optionsSource));this._sortFieldOptions(this._cache[cacheKey],field.optionsSorting)}}options=this._cache[cacheKey]}else if(jQuery.isArray(optionsSource)){options=this._buildOptionsFromArray(optionsSource);this._sortFieldOptions(options,field.optionsSorting)}else{options=this._buildOptionsArrayFromObject(optionsSource);this._sortFieldOptions(options,field.optionsSorting)}return options},_downloadOptions:function(fieldName,url){var self=this;var options=[];self._ajax({url:url,async:false,success:function(data){if(data.Result!=
"OK"){self._showError(data.Message);return}options=data.Options},error:function(){var errMessage=self._formatString(self.options.messages.cannotLoadOptionsFor,fieldName);self._showError(errMessage)}});return options},_sortFieldOptions:function(options,sorting){if(!options||!options.length||!sorting)return;var dataSelector;if(sorting.indexOf("value")==0)dataSelector=function(option){return option.Value};else dataSelector=function(option){return option.DisplayText};var compareFunc;if($.type(dataSelector(options[0]))==
"string")compareFunc=function(option1,option2){return dataSelector(option1).localeCompare(dataSelector(option2))};else compareFunc=function(option1,option2){return dataSelector(option1)-dataSelector(option2)};if(sorting.indexOf("desc")>0)options.sort(function(a,b){return compareFunc(b,a)});else options.sort(function(a,b){return compareFunc(a,b)})},_buildOptionsArrayFromObject:function(options){var list=[];$.each(options,function(propName,propValue){list.push({Value:propName,DisplayText:propValue})});
return list},_buildOptionsFromArray:function(optionsArray){var list=[];for(var i=0;i<optionsArray.length;i++)if($.isPlainObject(optionsArray[i]))list.push(optionsArray[i]);else list.push({Value:optionsArray[i],DisplayText:optionsArray[i]});return list},_parseDate:function(dateString){if(dateString.indexOf("Date")>=0)return new Date(parseInt(dateString.substr(6),10));else if(dateString.length==10)return new Date(parseInt(dateString.substr(0,4),10),parseInt(dateString.substr(5,2),10)-1,parseInt(dateString.substr(8,
2),10));else if(dateString.length==19)return new Date(parseInt(dateString.substr(0,4),10),parseInt(dateString.substr(5,2),10)-1,parseInt(dateString.substr(8,2,10)),parseInt(dateString.substr(11,2),10),parseInt(dateString.substr(14,2),10),parseInt(dateString.substr(17,2),10));else{this._logWarn("Given date is not properly formatted: "+dateString);return"format error!"}},_createToolBar:function(){this._$toolbarDiv=$("<div />").addClass("jtable-toolbar").appendTo(this._$titleDiv);for(var i=0;i<this.options.toolbar.items.length;i++)this._addToolBarItem(this.options.toolbar.items[i])},
_addToolBarItem:function(item){if(item==undefined||item.text==undefined&&item.icon==undefined){this._logWarn("Can not add tool bar item since it is not valid!");this._logWarn(item);return null}var $toolBarItem=$("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);this._jqueryuiThemeAddClass($toolBarItem,"ui-widget ui-state-default ui-corner-all","ui-state-hover");if(item.cssClass)$toolBarItem.addClass(item.cssClass);if(item.tooltip)$toolBarItem.attr("title",item.tooltip);
if(item.icon){var $icon=$('<span class="jtable-toolbar-item-icon"></span>').appendTo($toolBarItem);if(item.icon===true);else if($.type(item.icon==="string"))$icon.css("background",'url("'+item.icon+'")')}if(item.text)$('<span class=""></span>').html(item.text).addClass("jtable-toolbar-item-text").appendTo($toolBarItem);if(item.click)$toolBarItem.click(function(){item.click()});var hoverAnimationDuration=undefined;var hoverAnimationEasing=undefined;if(this.options.toolbar.hoverAnimation){hoverAnimationDuration=
this.options.toolbar.hoverAnimationDuration;hoverAnimationEasing=this.options.toolbar.hoverAnimationEasing}$toolBarItem.hover(function(){$toolBarItem.addClass("jtable-toolbar-item-hover",hoverAnimationDuration,hoverAnimationEasing)},function(){$toolBarItem.removeClass("jtable-toolbar-item-hover",hoverAnimationDuration,hoverAnimationEasing)});return $toolBarItem},_showError:function(message){this._$errorDialogDiv.html(message).dialog("open")},_setBusyTimer:null,_showBusy:function(message,delay){var self=
this;self._$busyDiv.width(self._$mainContainer.width()).height(self._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var makeVisible=function(){self._$busyDiv.removeClass("jtable-busy-panel-background-invisible");self._$busyMessageDiv.html(message).show()};if(delay){if(self._setBusyTimer)return;self._setBusyTimer=setTimeout(makeVisible,delay)}else makeVisible()},_hideBusy:function(){clearTimeout(this._setBusyTimer);this._setBusyTimer=null;this._$busyDiv.hide();this._$busyMessageDiv.html("").hide()},
_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function($elm,className,hoverClassName){if(!this.options.jqueryuiTheme)return;$elm.addClass(className);if(hoverClassName)$elm.hover(function(){$elm.addClass(hoverClassName)},function(){$elm.removeClass(hoverClassName)})},_performAjaxCall:function(url,postData,async,success,error){this._ajax({url:url,data:postData,async:async,success:success,error:error})},_unAuthorizedRequestHandler:function(){if(this.options.unAuthorizedRequestRedirectUrl)location.href=
this.options.unAuthorizedRequestRedirectUrl;else location.reload(true)},_ajax:function(options){var self=this;var opts={statusCode:{401:function(){self._unAuthorizedRequestHandler()}}};opts=$.extend(opts,this.options.ajaxSettings,options);opts.success=function(data){if(data&&data.UnAuthorizedRequest==true)self._unAuthorizedRequestHandler();if(options.success)options.success(data)};opts.error=function(jqXHR,textStatus,errorThrown){if(unloadingPage){jqXHR.abort();return}if(options.error)options.error(arguments)};
opts.complete=function(){if(options.complete)options.complete()};$.ajax(opts)},_getKeyValueOfRecord:function(record){return record[this._keyField]},_setCookie:function(key,value){key=this._cookieKeyPrefix+key;var expireDate=new Date;expireDate.setDate(expireDate.getDate()+30);document.cookie=encodeURIComponent(key)+"="+encodeURIComponent(value)+"; expires="+expireDate.toUTCString()},_getCookie:function(key){key=this._cookieKeyPrefix+key;var equalities=document.cookie.split("; ");for(var i=0;i<equalities.length;i++){if(!equalities[i])continue;
var splitted=equalities[i].split("=");if(splitted.length!=2)continue;if(decodeURIComponent(splitted[0])===key)return decodeURIComponent(splitted[1]||"")}return null},_generateCookieKeyPrefix:function(){var simpleHash=function(value){var hash=0;if(value.length==0)return hash;for(var i=0;i<value.length;i++){var ch=value.charCodeAt(i);hash=(hash<<5)-hash+ch;hash=hash&hash}return hash};var strToHash="";if(this.options.tableId)strToHash=strToHash+this.options.tableId+"#";strToHash=strToHash+this._columnList.join("$")+
"#c"+this._$table.find("thead th").length;return"jtable#"+simpleHash(strToHash)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(data){this._trigger("recordsLoaded",null,{records:data.Records,serverResponse:data})},_onRowInserted:function($row,isNewRow){this._trigger("rowInserted",null,{row:$row,record:$row.data("record"),isNewRow:isNewRow})},_onRowsRemoved:function($rows,reason){this._trigger("rowsRemoved",null,{rows:$rows,reason:reason})},_onCloseRequested:function(){this._trigger("closeRequested",
null,{})}})})(jQuery);
(function($){$.extend(true,$.hik.jtable.prototype,{_getPropertyOfObject:function(obj,propName){if(propName.indexOf(".")<0)return obj[propName];else{var preDot=propName.substring(0,propName.indexOf("."));var postDot=propName.substring(propName.indexOf(".")+1);return this._getPropertyOfObject(obj[preDot],postDot)}},_setPropertyOfObject:function(obj,propName,value){if(propName.indexOf(".")<0)obj[propName]=value;else{var preDot=propName.substring(0,propName.indexOf("."));var postDot=propName.substring(propName.indexOf(".")+
1);this._setPropertyOfObject(obj[preDot],postDot,value)}},_insertToArrayIfDoesNotExists:function(array,value){if($.inArray(value,array)<0)array.push(value)},_findIndexInArray:function(value,array,compareFunc){if(!compareFunc)compareFunc=function(a,b){return a==b};for(var i=0;i<array.length;i++)if(compareFunc(value,array[i]))return i;return-1},_normalizeNumber:function(number,min,max,defaultValue){if(number==undefined||number==null||isNaN(number))return defaultValue;if(number<min)return min;if(number>
max)return max;return number},_formatString:function(){if(arguments.length==0)return null;var str=arguments[0];for(var i=1;i<arguments.length;i++){var placeHolder="{"+(i-1)+"}";str=str.replace(placeHolder,arguments[i])}return str},_isDeferredObject:function(obj){return obj.then&&obj.done&&obj.fail},_logDebug:function(text){if(!window.console)return;console.log("jTable DEBUG: "+text)},_logInfo:function(text){if(!window.console)return;console.log("jTable INFO: "+text)},_logWarn:function(text){if(!window.console)return;
console.log("jTable WARNING: "+text)},_logError:function(text){if(!window.console)return;console.log("jTable ERROR: "+text)}});if(!Array.prototype.indexOf)Array.prototype.indexOf=function(elt){var len=this.length;var from=Number(arguments[1])||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0)from+=len;for(;from<len;from++)if(from in this&&this[from]===elt)return from;return-1}})(jQuery);
(function($){$.extend(true,$.hik.jtable.prototype,{_submitFormUsingAjax:function(url,formData,success,error){this._ajax({url:url,data:formData,success:success,error:error})},_createInputLabelForRecordField:function(fieldName){return $("<div />").addClass("jtable-input-label").html(this.options.fields[fieldName].inputTitle||this.options.fields[fieldName].title)},_createInputForRecordField:function(funcParams){var fieldName=funcParams.fieldName,value=funcParams.value,record=funcParams.record,formType=
funcParams.formType,form=funcParams.form;var field=this.options.fields[fieldName];if(value==undefined||value==null)value=field.defaultValue;if(field.input){var $input=$(field.input({value:value,record:record,formType:formType,form:form}));if(!$input.attr("id"))$input.attr("id","Edit-"+fieldName);return $("<div />").addClass("jtable-input jtable-custom-input").append($input)}if(field.type=="date")return this._createDateInputForField(field,fieldName,value);else if(field.type=="textarea")return this._createTextAreaForField(field,
fieldName,value);else if(field.type=="password")return this._createPasswordInputForField(field,fieldName,value);else if(field.type=="checkbox")return this._createCheckboxForField(field,fieldName,value);else if(field.options)if(field.type=="radiobutton")return this._createRadioButtonListForField(field,fieldName,value,record,formType);else return this._createDropDownListForField(field,fieldName,value,record,formType,form);else return this._createTextInputForField(field,fieldName,value)},_createInputForHidden:function(fieldName,
value){if(value==undefined)value="";return $('<input type="hidden" name="'+fieldName+'" id="Edit-'+fieldName+'"></input>').val(value)},_createDateInputForField:function(field,fieldName,value){var $input=$('<input class="'+field.inputClass+'" id="Edit-'+fieldName+'" type="text" name="'+fieldName+'"></input>');if(value!=undefined)$input.val(value);var displayFormat=field.displayFormat||this.options.defaultDateFormat;$input.datepicker({dateFormat:displayFormat});return $("<div />").addClass("jtable-input jtable-date-input").append($input)},
_createTextAreaForField:function(field,fieldName,value){var $textArea=$('<textarea class="'+field.inputClass+'" id="Edit-'+fieldName+'" name="'+fieldName+'"></textarea>');if(value!=undefined)$textArea.val(value);return $("<div />").addClass("jtable-input jtable-textarea-input").append($textArea)},_createTextInputForField:function(field,fieldName,value){var $input=$('<input class="'+field.inputClass+'" id="Edit-'+fieldName+'" type="text" name="'+fieldName+'"></input>');if(value!=undefined)$input.val(value);
return $("<div />").addClass("jtable-input jtable-text-input").append($input)},_createPasswordInputForField:function(field,fieldName,value){var $input=$('<input class="'+field.inputClass+'" id="Edit-'+fieldName+'" type="password" name="'+fieldName+'"></input>');if(value!=undefined)$input.val(value);return $("<div />").addClass("jtable-input jtable-password-input").append($input)},_createCheckboxForField:function(field,fieldName,value){var self=this;if(value==undefined)value=self._getCheckBoxPropertiesForFieldByState(fieldName,
false).Value;var $containerDiv=$("<div />").addClass("jtable-input jtable-checkbox-input");var $checkBox=$('<input class="'+field.inputClass+'" id="Edit-'+fieldName+'" type="checkbox" name="'+fieldName+'" />').appendTo($containerDiv);if(value!=undefined)$checkBox.val(value);var $textSpan=$("<span>"+(field.formText||self._getCheckBoxTextForFieldByValue(fieldName,value))+"</span>").appendTo($containerDiv);if(self._getIsCheckBoxSelectedForFieldByValue(fieldName,value))$checkBox.attr("checked","checked");
var refreshCheckBoxValueAndText=function(){var checkboxProps=self._getCheckBoxPropertiesForFieldByState(fieldName,$checkBox.is(":checked"));$checkBox.attr("value",checkboxProps.Value);$textSpan.html(field.formText||checkboxProps.DisplayText)};$checkBox.click(function(){refreshCheckBoxValueAndText()});if(field.setOnTextClick!=false)$textSpan.addClass("jtable-option-text-clickable").click(function(){if($checkBox.is(":checked"))$checkBox.attr("checked",false);else $checkBox.attr("checked",true);refreshCheckBoxValueAndText()});
return $containerDiv},_createDropDownListForField:function(field,fieldName,value,record,source,form){var $containerDiv=$("<div />").addClass("jtable-input jtable-dropdown-input");var $select=$('<select class="'+field.inputClass+'" id="Edit-'+fieldName+'" name="'+fieldName+'"></select>').appendTo($containerDiv);var options=this._getOptionsForField(fieldName,{record:record,source:source,form:form,dependedValues:this._createDependedValuesUsingForm(form,field.dependsOn)});this._fillDropDownListWithOptions($select,
options,value);return $containerDiv},_fillDropDownListWithOptions:function($select,options,value){$select.empty();for(var i=0;i<options.length;i++)$("<option"+(options[i].Value==value?' selected="selected"':"")+">"+options[i].DisplayText+"</option>").val(options[i].Value).appendTo($select)},_createDependedValuesUsingForm:function($form,dependsOn){if(!dependsOn)return{};var dependedValues={};for(var i=0;i<dependsOn.length;i++){var dependedField=dependsOn[i];var $dependsOn=$form.find("select[name="+
dependedField+"]");if($dependsOn.length<=0)continue;dependedValues[dependedField]=$dependsOn.val()}return dependedValues},_createRadioButtonListForField:function(field,fieldName,value,record,source){var $containerDiv=$("<div />").addClass("jtable-input jtable-radiobuttonlist-input");var options=this._getOptionsForField(fieldName,{record:record,source:source});$.each(options,function(i,option){var $radioButtonDiv=$('<div class=""></div>').addClass("jtable-radio-input").appendTo($containerDiv);var $radioButton=
$('<input type="radio" id="Edit-'+fieldName+"-"+i+'" class="'+field.inputClass+'" name="'+fieldName+'"'+(option.Value==value+""?' checked="true"':"")+" />").val(option.Value).appendTo($radioButtonDiv);var $textSpan=$("<span></span>").html(option.DisplayText).appendTo($radioButtonDiv);if(field.setOnTextClick!=false)$textSpan.addClass("jtable-option-text-clickable").click(function(){if(!$radioButton.is(":checked"))$radioButton.attr("checked",true)})});return $containerDiv},_getCheckBoxTextForFieldByValue:function(fieldName,
value){return this.options.fields[fieldName].values[value]},_getIsCheckBoxSelectedForFieldByValue:function(fieldName,value){return this._createCheckBoxStateArrayForFieldWithCaching(fieldName)[1].Value.toString()==value.toString()},_getCheckBoxPropertiesForFieldByState:function(fieldName,checked){return this._createCheckBoxStateArrayForFieldWithCaching(fieldName)[checked?1:0]},_createCheckBoxStateArrayForFieldWithCaching:function(fieldName){var cacheKey="checkbox_"+fieldName;if(!this._cache[cacheKey])this._cache[cacheKey]=
this._createCheckBoxStateArrayForField(fieldName);return this._cache[cacheKey]},_createCheckBoxStateArrayForField:function(fieldName){var stateArray=[];var currentIndex=0;$.each(this.options.fields[fieldName].values,function(propName,propValue){if(currentIndex++<2)stateArray.push({"Value":propName,"DisplayText":propValue})});return stateArray},_makeCascadeDropDowns:function($form,record,source){var self=this;$form.find("select").each(function(){var $thisDropdown=$(this);var fieldName=$thisDropdown.attr("name");
if(!fieldName)return;var field=self.options.fields[fieldName];if(!field.dependsOn)return;$.each(field.dependsOn,function(index,dependsOnField){var $dependsOnDropdown=$form.find("select[name="+dependsOnField+"]");$dependsOnDropdown.change(function(){var funcParams={record:record,source:source,form:$form,dependedValues:{}};funcParams.dependedValues=self._createDependedValuesUsingForm($form,field.dependsOn);var options=self._getOptionsForField(fieldName,funcParams);self._fillDropDownListWithOptions($thisDropdown,
options,undefined);$thisDropdown.change()})})})},_updateRecordValuesFromForm:function(record,$form){for(var i=0;i<this._fieldList.length;i++){var fieldName=this._fieldList[i];var field=this.options.fields[fieldName];if(field.edit==false)continue;var $inputElement=$form.find('[name="'+fieldName+'"]');if($inputElement.length<=0)continue;if(field.type=="date"){var dateVal=$inputElement.val();if(dateVal){var displayFormat=field.displayFormat||this.options.defaultDateFormat;try{var date=$.datepicker.parseDate(displayFormat,
dateVal);record[fieldName]="/Date("+date.getTime()+")/"}catch(e){this._logWarn("Date format is incorrect for field "+fieldName+": "+dateVal);record[fieldName]=undefined}}else{this._logDebug("Date is empty for "+fieldName);record[fieldName]=undefined}}else if(field.options&&field.type=="radiobutton"){var $checkedElement=$inputElement.filter(":checked");if($checkedElement.length)record[fieldName]=$checkedElement.val();else record[fieldName]=undefined}else record[fieldName]=$inputElement.val()}},_setEnabledOfDialogButton:function($button,
enabled,buttonText){if(!$button)return;if(enabled!=false)$button.removeAttr("disabled").removeClass("ui-state-disabled");else $button.attr("disabled","disabled").addClass("ui-state-disabled");if(buttonText)$button.find("span").text(buttonText)}})})(jQuery);
(function($){var base={_create:$.hik.jtable.prototype._create};$.extend(true,$.hik.jtable.prototype,{options:{recordAdded:function(event,data){},messages:{addNewRecord:"Add new record"}},_$addRecordDiv:null,_create:function(){base._create.apply(this,arguments);if(!this.options.actions.createAction)return;this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var self=this;self._$addRecordDiv=$("<div />").appendTo(self._$mainContainer);self._$addRecordDiv.dialog({autoOpen:false,show:self.options.dialogShowEffect,
hide:self.options.dialogHideEffect,width:"auto",minWidth:"300",modal:true,title:self.options.messages.addNewRecord,buttons:[{text:self.options.messages.cancel,click:function(){self._$addRecordDiv.dialog("close")}},{id:"AddRecordDialogSaveButton",text:self.options.messages.save,click:function(){self._onSaveClickedOnCreateForm()}}],close:function(){var $addRecordForm=self._$addRecordDiv.find("form").first();var $saveButton=self._$addRecordDiv.parent().find("#AddRecordDialogSaveButton");self._trigger("formClosed",
null,{form:$addRecordForm,formType:"create"});self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save);$addRecordForm.remove()}});if(self.options.addRecordButton)self.options.addRecordButton.click(function(e){e.preventDefault();self._showAddRecordForm()});else self._addToolBarItem({icon:true,cssClass:"jtable-toolbar-item-add-record",text:self.options.messages.addNewRecord,click:function(){self._showAddRecordForm()}})},_onSaveClickedOnCreateForm:function(){var self=this;var $saveButton=
self._$addRecordDiv.parent().find("#AddRecordDialogSaveButton");var $addRecordForm=self._$addRecordDiv.find("form");if(self._trigger("formSubmitting",null,{form:$addRecordForm,formType:"create"})!=false){self._setEnabledOfDialogButton($saveButton,false,self.options.messages.saving);self._saveAddRecordForm($addRecordForm,$saveButton)}},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(options){var self=this;options=$.extend({clientOnly:false,animationsEnabled:self.options.animationsEnabled,
success:function(){},error:function(){}},options);if(!options.record){self._logWarn("options parameter in addRecord method must contain a record property.");return}if(options.clientOnly){self._addRow(self._createRowFromRecord(options.record),{isNewRow:true,animationsEnabled:options.animationsEnabled});options.success();return}var completeAddRecord=function(data){if(data.Result!="OK"){self._showError(data.Message);options.error(data);return}if(!data.Record){self._logError("Server must return the created Record object.");
options.error(data);return}self._onRecordAdded(data);self._addRow(self._createRowFromRecord(data.Record),{isNewRow:true,animationsEnabled:options.animationsEnabled});options.success(data)};if(!options.url&&$.isFunction(self.options.actions.createAction)){var funcResult=self.options.actions.createAction($.param(options.record));if(self._isDeferredObject(funcResult))funcResult.done(function(data){completeAddRecord(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError);
options.error()});else completeAddRecord(funcResult)}else self._submitFormUsingAjax(options.url||self.options.actions.createAction,$.param(options.record),function(data){completeAddRecord(data)},function(){self._showError(self.options.messages.serverCommunicationError);options.error()})},_showAddRecordForm:function(){var self=this;var $addRecordForm=$('<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form"></form>');for(var i=0;i<self._fieldList.length;i++){var fieldName=self._fieldList[i];
var field=self.options.fields[fieldName];if(field.key==true&&field.create!=true)continue;if(field.create==false)continue;if(field.type=="hidden"){$addRecordForm.append(self._createInputForHidden(fieldName,field.defaultValue));continue}var $fieldContainer=$("<div />").addClass("jtable-input-field-container").appendTo($addRecordForm);$fieldContainer.append(self._createInputLabelForRecordField(fieldName));$fieldContainer.append(self._createInputForRecordField({fieldName:fieldName,formType:"create",form:$addRecordForm}))}self._makeCascadeDropDowns($addRecordForm,
undefined,"create");$addRecordForm.submit(function(){self._onSaveClickedOnCreateForm();return false});self._$addRecordDiv.append($addRecordForm).dialog("open");self._trigger("formCreated",null,{form:$addRecordForm,formType:"create"})},_saveAddRecordForm:function($addRecordForm,$saveButton){var self=this;var completeAddRecord=function(data){if(data.Result!="OK"){self._showError(data.Message);self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save);return}if(!data.Record){self._logError("Server must return the created Record object.");
self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save);return}self._onRecordAdded(data);self._addRow(self._createRowFromRecord(data.Record),{isNewRow:true});self._$addRecordDiv.dialog("close")};$addRecordForm.data("submitting",true);if($.isFunction(self.options.actions.createAction)){var funcResult=self.options.actions.createAction($addRecordForm.serialize());if(self._isDeferredObject(funcResult))funcResult.done(function(data){completeAddRecord(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError);
self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save)});else completeAddRecord(funcResult)}else self._submitFormUsingAjax(self.options.actions.createAction,$addRecordForm.serialize(),function(data){completeAddRecord(data)},function(){self._showError(self.options.messages.serverCommunicationError);self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save)})},_onRecordAdded:function(data){this._trigger("recordAdded",null,{record:data.Record,serverResponse:data})}})})(jQuery);
(function($){var base={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord};$.extend(true,$.hik.jtable.prototype,{options:{recordUpdated:function(event,data){},rowUpdated:function(event,data){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function(){base._create.apply(this,arguments);if(!this.options.actions.updateAction)return;this._createEditDialogDiv()},
_createEditDialogDiv:function(){var self=this;self._$editDiv=$("<div></div>").appendTo(self._$mainContainer);self._$editDiv.dialog({autoOpen:false,show:self.options.dialogShowEffect,hide:self.options.dialogHideEffect,width:"auto",minWidth:"300",modal:true,title:self.options.messages.editRecord,buttons:[{text:self.options.messages.cancel,click:function(){self._$editDiv.dialog("close")}},{id:"EditDialogSaveButton",text:self.options.messages.save,click:function(){self._onSaveClickedOnEditForm()}}],close:function(){var $editForm=
self._$editDiv.find("form:first");var $saveButton=self._$editDiv.parent().find("#EditDialogSaveButton");self._trigger("formClosed",null,{form:$editForm,formType:"edit",row:self._$editingRow});self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save);$editForm.remove()}})},_onSaveClickedOnEditForm:function(){var self=this;if(self._$editingRow.hasClass("jtable-row-removed")){self._$editDiv.dialog("close");return}var $saveButton=self._$editDiv.parent().find("#EditDialogSaveButton");
var $editForm=self._$editDiv.find("form");if(self._trigger("formSubmitting",null,{form:$editForm,formType:"edit",row:self._$editingRow})!=false){self._setEnabledOfDialogButton($saveButton,false,self.options.messages.saving);self._saveEditForm($editForm,$saveButton)}},updateRecord:function(options){var self=this;options=$.extend({clientOnly:false,animationsEnabled:self.options.animationsEnabled,success:function(){},error:function(){}},options);if(!options.record){self._logWarn("options parameter in updateRecord method must contain a record property.");
return}var key=self._getKeyValueOfRecord(options.record);if(key==undefined||key==null){self._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.");return}var $updatingRow=self.getRowByKey(key);if($updatingRow==null){self._logWarn('Can not found any row by key "'+key+'" on the table. Updating row must be visible on the table.');return}if(options.clientOnly){$.extend($updatingRow.data("record"),options.record);self._updateRowTexts($updatingRow);
self._onRecordUpdated($updatingRow,null);if(options.animationsEnabled)self._showUpdateAnimationForRow($updatingRow);options.success();return}var completeEdit=function(data){if(data.Result!="OK"){self._showError(data.Message);options.error(data);return}$.extend($updatingRow.data("record"),options.record);self._updateRecordValuesFromServerResponse($updatingRow.data("record"),data);self._updateRowTexts($updatingRow);self._onRecordUpdated($updatingRow,data);if(options.animationsEnabled)self._showUpdateAnimationForRow($updatingRow);
options.success(data)};if(!options.url&&$.isFunction(self.options.actions.updateAction)){var funcResult=self.options.actions.updateAction($.param(options.record));if(self._isDeferredObject(funcResult))funcResult.done(function(data){completeEdit(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError);options.error()});else completeEdit(funcResult)}else self._submitFormUsingAjax(options.url||self.options.actions.updateAction,$.param(options.record),function(data){completeEdit(data)},
function(){self._showError(self.options.messages.serverCommunicationError);options.error()})},_addColumnsToHeaderRow:function($tr){base._addColumnsToHeaderRow.apply(this,arguments);if(this.options.actions.updateAction!=undefined)$tr.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function($row){var self=this;base._addCellsToRowUsingRecord.apply(this,arguments);if(self.options.actions.updateAction!=undefined){var $span=$("<span></span>").html(self.options.messages.editRecord);var $button=
$('<button title="'+self.options.messages.editRecord+'"></button>').addClass("jtable-command-button jtable-edit-command-button").append($span).click(function(e){e.preventDefault();e.stopPropagation();self._showEditForm($row)});$("<td></td>").addClass("jtable-command-column").append($button).appendTo($row)}},_showEditForm:function($tableRow){var self=this;var record=$tableRow.data("record");var $editForm=$('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form"></form>');for(var i=
0;i<self._fieldList.length;i++){var fieldName=self._fieldList[i];var field=self.options.fields[fieldName];var fieldValue=record[fieldName];if(field.key==true)if(field.edit!=true){$editForm.append(self._createInputForHidden(fieldName,fieldValue));continue}else $editForm.append(self._createInputForHidden("jtRecordKey",fieldValue));if(field.edit==false)continue;if(field.type=="hidden"){$editForm.append(self._createInputForHidden(fieldName,fieldValue));continue}var $fieldContainer=$('<div class="jtable-input-field-container"></div>').appendTo($editForm);
$fieldContainer.append(self._createInputLabelForRecordField(fieldName));var currentValue=self._getValueForRecordField(record,fieldName);$fieldContainer.append(self._createInputForRecordField({fieldName:fieldName,value:currentValue,record:record,formType:"edit",form:$editForm}))}self._makeCascadeDropDowns($editForm,record,"edit");$editForm.submit(function(){self._onSaveClickedOnEditForm();return false});self._$editingRow=$tableRow;self._$editDiv.append($editForm).dialog("open");self._trigger("formCreated",
null,{form:$editForm,formType:"edit",record:record,row:$tableRow})},_saveEditForm:function($editForm,$saveButton){var self=this;var completeEdit=function(data){if(data.Result!="OK"){self._showError(data.Message);self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save);return}var record=self._$editingRow.data("record");self._updateRecordValuesFromForm(record,$editForm);self._updateRecordValuesFromServerResponse(record,data);self._updateRowTexts(self._$editingRow);self._$editingRow.attr("data-record-key",
self._getKeyValueOfRecord(record));self._onRecordUpdated(self._$editingRow,data);if(self.options.animationsEnabled)self._showUpdateAnimationForRow(self._$editingRow);self._$editDiv.dialog("close")};if($.isFunction(self.options.actions.updateAction)){var funcResult=self.options.actions.updateAction($editForm.serialize());if(self._isDeferredObject(funcResult))funcResult.done(function(data){completeEdit(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError);self._setEnabledOfDialogButton($saveButton,
true,self.options.messages.save)});else completeEdit(funcResult)}else self._submitFormUsingAjax(self.options.actions.updateAction,$editForm.serialize(),function(data){completeEdit(data)},function(){self._showError(self.options.messages.serverCommunicationError);self._setEnabledOfDialogButton($saveButton,true,self.options.messages.save)})},_updateRecordValuesFromServerResponse:function(record,serverResponse){if(!serverResponse||!serverResponse.Record)return;$.extend(true,record,serverResponse.Record)},
_getValueForRecordField:function(record,fieldName){var field=this.options.fields[fieldName];var fieldValue=record[fieldName];if(field.type=="date")return this._getDisplayTextForDateRecordField(field,fieldValue);else return fieldValue},_updateRowTexts:function($tableRow){var record=$tableRow.data("record");var $columns=$tableRow.find("td");for(var i=0;i<this._columnList.length;i++){var displayItem=this._getDisplayTextForRecordField(record,this._columnList[i]);if(displayItem!=""&&displayItem==0)displayItem=
"0";$columns.eq(this._firstDataColumnOffset+i).html(displayItem||"")}this._onRowUpdated($tableRow)},_showUpdateAnimationForRow:function($tableRow){var className="jtable-row-updated";if(this.options.jqueryuiTheme)className=className+" ui-state-highlight";$tableRow.stop(true,true).addClass(className,"slow","",function(){$tableRow.removeClass(className,5E3)})},_onRowUpdated:function($row){this._trigger("rowUpdated",null,{row:$row,record:$row.data("record")})},_onRecordUpdated:function($row,data){this._trigger("recordUpdated",
null,{record:$row.data("record"),row:$row,serverResponse:data})}})})(jQuery);
(function($){var base={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord};$.extend(true,$.hik.jtable.prototype,{options:{deleteConfirmation:true,recordDeleted:function(event,data){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},
_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){base._create.apply(this,arguments);this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var self=this;if(!self.options.actions.deleteAction)return;self._$deleteRecordDiv=$('<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span class="jtable-delete-confirm-message"></span></p></div>').appendTo(self._$mainContainer);self._$deleteRecordDiv.dialog({autoOpen:false,show:self.options.dialogShowEffect,
hide:self.options.dialogHideEffect,modal:true,title:self.options.messages.areYouSure,buttons:[{text:self.options.messages.cancel,click:function(){self._$deleteRecordDiv.dialog("close")}},{id:"DeleteDialogButton",text:self.options.messages.deleteText,click:function(){if(self._$deletingRow.hasClass("jtable-row-removed")){self._$deleteRecordDiv.dialog("close");return}var $deleteButton=self._$deleteRecordDiv.parent().find("#DeleteDialogButton");self._setEnabledOfDialogButton($deleteButton,false,self.options.messages.deleting);
self._deleteRecordFromServer(self._$deletingRow,function(){self._removeRowsFromTableWithAnimation(self._$deletingRow);self._$deleteRecordDiv.dialog("close")},function(message){self._showError(message);self._setEnabledOfDialogButton($deleteButton,true,self.options.messages.deleteText)})}}],close:function(){var $deleteButton=self._$deleteRecordDiv.parent().find("#DeleteDialogButton");self._setEnabledOfDialogButton($deleteButton,true,self.options.messages.deleteText)}})},deleteRows:function($rows){var self=
this;if($rows.length<=0){self._logWarn("No rows specified to jTable deleteRows method.");return}if(self._isBusy()){self._logWarn("Can not delete rows since jTable is busy!");return}if($rows.length==1){self._deleteRecordFromServer($rows,function(){self._removeRowsFromTableWithAnimation($rows)},function(message){self._showError(message)});return}self._showBusy(self._formatString(self.options.messages.deleteProggress,0,$rows.length));var completedCount=0;var isCompleted=function(){return completedCount>=
$rows.length};var completed=function(){var $deletedRows=$rows.filter(".jtable-row-ready-to-remove");if($deletedRows.length<$rows.length)self._showError(self._formatString(self.options.messages.canNotDeletedRecords,$rows.length-$deletedRows.length,$rows.length));if($deletedRows.length>0)self._removeRowsFromTableWithAnimation($deletedRows);self._hideBusy()};var deletedCount=0;$rows.each(function(){var $row=$(this);self._deleteRecordFromServer($row,function(){++deletedCount;++completedCount;$row.addClass("jtable-row-ready-to-remove");
self._showBusy(self._formatString(self.options.messages.deleteProggress,deletedCount,$rows.length));if(isCompleted())completed()},function(){++completedCount;if(isCompleted())completed()})})},deleteRecord:function(options){var self=this;options=$.extend({clientOnly:false,animationsEnabled:self.options.animationsEnabled,url:self.options.actions.deleteAction,success:function(){},error:function(){}},options);if(options.key==undefined){self._logWarn("options parameter in deleteRecord method must contain a key property.");
return}var $deletingRow=self.getRowByKey(options.key);if($deletingRow==null){self._logWarn("Can not found any row by key: "+options.key);return}if(options.clientOnly){self._removeRowsFromTableWithAnimation($deletingRow,options.animationsEnabled);options.success();return}self._deleteRecordFromServer($deletingRow,function(data){self._removeRowsFromTableWithAnimation($deletingRow,options.animationsEnabled);options.success(data)},function(message){self._showError(message);options.error(message)},options.url)},
_addColumnsToHeaderRow:function($tr){base._addColumnsToHeaderRow.apply(this,arguments);if(this.options.actions.deleteAction!=undefined)$tr.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function($row){base._addCellsToRowUsingRecord.apply(this,arguments);var self=this;if(self.options.actions.deleteAction!=undefined){var $span=$("<span></span>").html(self.options.messages.deleteText);var $button=$('<button title="'+self.options.messages.deleteText+'"></button>').addClass("jtable-command-button jtable-delete-command-button").append($span).click(function(e){e.preventDefault();
e.stopPropagation();self._deleteButtonClickedForRow($row)});$("<td></td>").addClass("jtable-command-column").append($button).appendTo($row)}},_deleteButtonClickedForRow:function($row){var self=this;var deleteConfirm;var deleteConfirmMessage=self.options.messages.deleteConfirmation;if($.isFunction(self.options.deleteConfirmation)){var data={row:$row,record:$row.data("record"),deleteConfirm:true,deleteConfirmMessage:deleteConfirmMessage,cancel:false,cancelMessage:null};self.options.deleteConfirmation(data);
if(data.cancel){if(data.cancelMessage)self._showError(data.cancelMessage);return}deleteConfirmMessage=data.deleteConfirmMessage;deleteConfirm=data.deleteConfirm}else deleteConfirm=self.options.deleteConfirmation;if(deleteConfirm!=false){self._$deleteRecordDiv.find(".jtable-delete-confirm-message").html(deleteConfirmMessage);self._showDeleteDialog($row)}else self._deleteRecordFromServer($row,function(){self._removeRowsFromTableWithAnimation($row)},function(message){self._showError(message)})},_showDeleteDialog:function($row){this._$deletingRow=
$row;this._$deleteRecordDiv.dialog("open")},_deleteRecordFromServer:function($row,success,error,url){var self=this;var completeDelete=function(data){if(data.Result!="OK"){$row.data("deleting",false);if(error)error(data.Message);return}self._trigger("recordDeleted",null,{record:$row.data("record"),row:$row,serverResponse:data});if(success)success(data)};if($row.data("deleting")==true)return;$row.data("deleting",true);var postData={};postData[self._keyField]=self._getKeyValueOfRecord($row.data("record"));
if(!url&&$.isFunction(self.options.actions.deleteAction)){var funcResult=self.options.actions.deleteAction(postData);if(self._isDeferredObject(funcResult))funcResult.done(function(data){completeDelete(data)}).fail(function(){$row.data("deleting",false);if(error)error(self.options.messages.serverCommunicationError)});else completeDelete(funcResult)}else this._ajax({url:url||self.options.actions.deleteAction,data:postData,success:function(data){completeDelete(data)},error:function(){$row.data("deleting",
false);if(error)error(self.options.messages.serverCommunicationError)}})},_removeRowsFromTableWithAnimation:function($rows,animationsEnabled){var self=this;if(animationsEnabled==undefined)animationsEnabled=self.options.animationsEnabled;if(animationsEnabled){var className="jtable-row-deleting";if(this.options.jqueryuiTheme)className=className+" ui-state-disabled";$rows.stop(true,true).addClass(className,"slow","").promise().done(function(){self._removeRowsFromTable($rows,"deleted")})}else self._removeRowsFromTable($rows,
"deleted")}})})(jQuery);
(function($){var base={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:$.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:$.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:$.hik.jtable.prototype._onRowsRemoved};$.extend(true,$.hik.jtable.prototype,{options:{selecting:false,multiselect:false,selectingCheckboxes:false,selectOnRowClick:true,
selectionChanged:function(event,data){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:false,_create:function(){if(this.options.selecting&&this.options.selectingCheckboxes){++this._firstDataColumnOffset;this._bindKeyboardEvents()}base._create.apply(this,arguments)},_bindKeyboardEvents:function(){var self=this;$(document).keydown(function(event){switch(event.which){case 16:self._shiftKeyDown=true;break}}).keyup(function(event){switch(event.which){case 16:self._shiftKeyDown=
false;break}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function($rows){this._selectRows($rows);this._onSelectionChanged()},_addColumnsToHeaderRow:function($tr){if(this.options.selecting&&this.options.selectingCheckboxes)if(this.options.multiselect)$tr.append(this._createSelectAllHeader());else $tr.append(this._createEmptyCommandHeader());base._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function($row){if(this.options.selecting)this._makeRowSelectable($row);
base._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){if(this.options.selecting)this._storeSelectionList();base._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){if(this.options.selecting)this._restoreSelectionList();base._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function($rows,reason){if(this.options.selecting&&reason!="reloading"&&$rows.filter(".jtable-row-selected").length>0)this._onSelectionChanged();base._onRowsRemoved.apply(this,arguments)},
_createSelectAllHeader:function(){var self=this;var $columnHeader=$('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass($columnHeader,"ui-state-default");var $headerContainer=$("<div />").addClass("jtable-column-header-container").appendTo($columnHeader);self._$selectAllCheckbox=$('<input type="checkbox" />').appendTo($headerContainer).click(function(){if(self._$tableRows.length<=0){self._$selectAllCheckbox.attr("checked",false);
return}var allRows=self._$tableBody.find(">tr.jtable-data-row");if(self._$selectAllCheckbox.is(":checked"))self._selectRows(allRows);else self._deselectRows(allRows);self._onSelectionChanged()});return $columnHeader},_storeSelectionList:function(){var self=this;if(!self.options.selecting)return;self._selectedRecordIdsBeforeLoad=[];self._getSelectedRows().each(function(){self._selectedRecordIdsBeforeLoad.push(self._getKeyValueOfRecord($(this).data("record")))})},_restoreSelectionList:function(){var self=
this;if(!self.options.selecting)return;var selectedRowCount=0;for(var i=0;i<self._$tableRows.length;++i){var recordId=self._getKeyValueOfRecord(self._$tableRows[i].data("record"));if($.inArray(recordId,self._selectedRecordIdsBeforeLoad)>-1){self._selectRows(self._$tableRows[i]);++selectedRowCount}}if(self._selectedRecordIdsBeforeLoad.length>0&&self._selectedRecordIdsBeforeLoad.length!=selectedRowCount)self._onSelectionChanged();self._selectedRecordIdsBeforeLoad=[];self._refreshSelectAllCheckboxState()},
_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function($row){var self=this;if(self.options.selectOnRowClick)$row.click(function(){self._invertRowSelection($row)});if(self.options.selectingCheckboxes){var $cell=$("<td></td>").addClass("jtable-selecting-column");var $selectCheckbox=$('<input type="checkbox" />').appendTo($cell);if(!self.options.selectOnRowClick)$selectCheckbox.click(function(){self._invertRowSelection($row)});$row.append($cell)}},
_invertRowSelection:function($row){if($row.hasClass("jtable-row-selected"))this._deselectRows($row);else if(this._shiftKeyDown){var rowIndex=this._findRowIndex($row);var beforeIndex=this._findFirstSelectedRowIndexBeforeIndex(rowIndex)+1;if(beforeIndex>0&&beforeIndex<rowIndex)this._selectRows(this._$tableBody.find("tr").slice(beforeIndex,rowIndex+1));else{var afterIndex=this._findFirstSelectedRowIndexAfterIndex(rowIndex)-1;if(afterIndex>rowIndex)this._selectRows(this._$tableBody.find("tr").slice(rowIndex,
afterIndex+1));else this._selectRows($row)}}else this._selectRows($row);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(rowIndex){for(var i=rowIndex-1;i>=0;--i)if(this._$tableRows[i].hasClass("jtable-row-selected"))return i;return-1},_findFirstSelectedRowIndexAfterIndex:function(rowIndex){for(var i=rowIndex+1;i<this._$tableRows.length;++i)if(this._$tableRows[i].hasClass("jtable-row-selected"))return i;return-1},_selectRows:function($rows){if(!this.options.multiselect)this._deselectRows(this._getSelectedRows());
$rows.addClass("jtable-row-selected");this._jqueryuiThemeAddClass($rows,"ui-state-highlight");if(this.options.selectingCheckboxes)$rows.find(">td.jtable-selecting-column >input").prop("checked",true);this._refreshSelectAllCheckboxState()},_deselectRows:function($rows){$rows.removeClass("jtable-row-selected ui-state-highlight");if(this.options.selectingCheckboxes)$rows.find(">td.jtable-selecting-column >input").prop("checked",false);this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(!this.options.selectingCheckboxes||
!this.options.multiselect)return;var totalRowCount=this._$tableRows.length;var selectedRowCount=this._getSelectedRows().length;if(selectedRowCount==0){this._$selectAllCheckbox.prop("indeterminate",false);this._$selectAllCheckbox.attr("checked",false)}else if(selectedRowCount==totalRowCount){this._$selectAllCheckbox.prop("indeterminate",false);this._$selectAllCheckbox.attr("checked",true)}else{this._$selectAllCheckbox.attr("checked",false);this._$selectAllCheckbox.prop("indeterminate",true)}},_onSelectionChanged:function(){this._trigger("selectionChanged",
null,{})}})})(jQuery);
(function($){var base={load:$.hik.jtable.prototype.load,_create:$.hik.jtable.prototype._create,_setOption:$.hik.jtable.prototype._setOption,_createRecordLoadUrl:$.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:$.hik.jtable.prototype._createJtParamsForLoading,_addRowToTable:$.hik.jtable.prototype._addRowToTable,_addRow:$.hik.jtable.prototype._addRow,_removeRowsFromTable:$.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:$.hik.jtable.prototype._onRecordsLoaded};$.extend(true,
$.hik.jtable.prototype,{options:{paging:false,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:true,gotoPageArea:"combobox",messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count",gotoPageLabel:"Go to page"}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){base._create.apply(this,arguments);if(this.options.paging){this._loadPagingSettings();
this._createBottomPanel();this._createPageListArea();this._createGotoPageInput();this._createPageSizeSelection()}},_loadPagingSettings:function(){if(!this.options.saveUserPreferences)return;var pageSize=this._getCookie("page-size");if(pageSize)this.options.pageSize=this._normalizeNumber(pageSize,1,1E6,this.options.pageSize)},_createBottomPanel:function(){this._$bottomPanel=$("<div />").addClass("jtable-bottom-panel").insertAfter(this._$table);this._jqueryuiThemeAddClass(this._$bottomPanel,"ui-state-default");
$("<div />").addClass("jtable-left-area").appendTo(this._$bottomPanel);$("<div />").addClass("jtable-right-area").appendTo(this._$bottomPanel)},_createPageListArea:function(){this._$pagingListArea=$("<span></span>").addClass("jtable-page-list").appendTo(this._$bottomPanel.find(".jtable-left-area"));this._$pageInfoSpan=$("<span></span>").addClass("jtable-page-info").appendTo(this._$bottomPanel.find(".jtable-right-area"))},_createPageSizeSelection:function(){var self=this;if(!self.options.pageSizeChangeArea)return;
if(self._findIndexInArray(self.options.pageSize,self.options.pageSizes)<0){self.options.pageSizes.push(parseInt(self.options.pageSize));self.options.pageSizes.sort(function(a,b){return a-b})}self._$pageSizeChangeArea=$("<span></span>").addClass("jtable-page-size-change").appendTo(self._$bottomPanel.find(".jtable-left-area"));self._$pageSizeChangeArea.append("<span>"+self.options.messages.pageSizeChangeLabel+": </span>");var $pageSizeChangeCombobox=$("<select></select>").appendTo(self._$pageSizeChangeArea);
for(var i=0;i<self.options.pageSizes.length;i++)$pageSizeChangeCombobox.append('<option value="'+self.options.pageSizes[i]+'">'+self.options.pageSizes[i]+"</option>");$pageSizeChangeCombobox.val(self.options.pageSize);$pageSizeChangeCombobox.change(function(){self._changePageSize(parseInt($(this).val()))})},_createGotoPageInput:function(){var self=this;if(!self.options.gotoPageArea||self.options.gotoPageArea=="none")return;this._$gotoPageArea=$("<span></span>").addClass("jtable-goto-page").appendTo(self._$bottomPanel.find(".jtable-left-area"));
this._$gotoPageArea.append("<span>"+self.options.messages.gotoPageLabel+": </span>");if(self.options.gotoPageArea=="combobox"){self._$gotoPageInput=$("<select></select>").appendTo(this._$gotoPageArea).data("pageCount",1).change(function(){self._changePage(parseInt($(this).val()))});self._$gotoPageInput.append('<option value="1">1</option>')}else self._$gotoPageInput=$('<input type="text" maxlength="10" value="'+self._currentPageNo+'" />').appendTo(this._$gotoPageArea).keypress(function(event){if(event.which==
13){event.preventDefault();self._changePage(parseInt(self._$gotoPageInput.val()))}else if(event.which==43){event.preventDefault();self._changePage(parseInt(self._$gotoPageInput.val())+1)}else if(event.which==45){event.preventDefault();self._changePage(parseInt(self._$gotoPageInput.val())-1)}else{var isValid=47<event.keyCode&&event.keyCode<58&&event.shiftKey==false&&event.altKey==false||event.keyCode==8||event.keyCode==9;if(!isValid)event.preventDefault()}})},_refreshGotoPageInput:function(){if(!this.options.gotoPageArea||
this.options.gotoPageArea=="none")return;if(this._totalRecordCount<=0)this._$gotoPageArea.hide();else this._$gotoPageArea.show();if(this.options.gotoPageArea=="combobox"){var oldPageCount=this._$gotoPageInput.data("pageCount");var currentPageCount=this._calculatePageCount();if(oldPageCount!=currentPageCount){this._$gotoPageInput.empty();var pageStep=1;if(currentPageCount>1E4)pageStep=100;else if(currentPageCount>5E3)pageStep=10;else if(currentPageCount>2E3)pageStep=5;else if(currentPageCount>1E3)pageStep=
2;for(var i=pageStep;i<=currentPageCount;i+=pageStep)this._$gotoPageInput.append('<option value="'+i+'">'+i+"</option>");this._$gotoPageInput.data("pageCount",currentPageCount)}}this._$gotoPageInput.val(this._currentPageNo)},load:function(){this._currentPageNo=1;base.load.apply(this,arguments)},_setOption:function(key,value){base._setOption.apply(this,arguments);if(key=="pageSize")this._changePageSize(parseInt(value))},_changePageSize:function(pageSize){if(pageSize==this.options.pageSize)return;this.options.pageSize=
pageSize;var pageCount=this._calculatePageCount();if(this._currentPageNo>pageCount)this._currentPageNo=pageCount;if(this._currentPageNo<=0)this._currentPageNo=1;var $pageSizeChangeCombobox=this._$bottomPanel.find(".jtable-page-size-change select");if($pageSizeChangeCombobox.length>0)if(parseInt($pageSizeChangeCombobox.val())!=pageSize){var selectedOption=$pageSizeChangeCombobox.find("option[value="+pageSize+"]");if(selectedOption.length>0)$pageSizeChangeCombobox.val(pageSize)}this._savePagingSettings();
this._reloadTable()},_savePagingSettings:function(){if(!this.options.saveUserPreferences)return;this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var loadUrl=base._createRecordLoadUrl.apply(this,arguments);loadUrl=this._addPagingInfoToUrl(loadUrl,this._currentPageNo);return loadUrl},_createJtParamsForLoading:function(){var jtParams=base._createJtParamsForLoading.apply(this,arguments);if(this.options.paging){jtParams.jtStartIndex=(this._currentPageNo-1)*this.options.pageSize;
jtParams.jtPageSize=this.options.pageSize}return jtParams},_addRowToTable:function($tableRow,index,isNewRow){if(isNewRow&&this.options.paging){this._reloadTable();return}base._addRowToTable.apply(this,arguments)},_addRow:function($row,options){if(options&&options.isNewRow&&this.options.paging){this._reloadTable();return}base._addRow.apply(this,arguments)},_removeRowsFromTable:function($rows,reason){base._removeRowsFromTable.apply(this,arguments);if(this.options.paging){if(this._$tableRows.length<=
0&&this._currentPageNo>1)--this._currentPageNo;this._reloadTable()}},_onRecordsLoaded:function(data){if(this.options.paging){this._totalRecordCount=data.TotalRecordCount;this._createPagingList();this._createPagingInfo();this._refreshGotoPageInput()}base._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(url,pageNumber){if(!this.options.paging)return url;var jtStartIndex=(pageNumber-1)*this.options.pageSize;var jtPageSize=this.options.pageSize;return url+(url.indexOf("?")<0?"?":"&")+
"jtStartIndex="+jtStartIndex+"&jtPageSize="+jtPageSize},_createPagingList:function(){if(this.options.pageSize<=0)return;this._$pagingListArea.empty();if(this._totalRecordCount<=0)return;var pageCount=this._calculatePageCount();this._createFirstAndPreviousPageButtons();if(this.options.pageList=="normal")this._createPageNumberButtons(this._calculatePageNumbers(pageCount));this._createLastAndNextPageButtons(pageCount);this._bindClickEventsToPageNumberButtons()},_createFirstAndPreviousPageButtons:function(){var $first=
$("<span></span>").addClass("jtable-page-number-first").html("&lt&lt").data("pageNumber",1).appendTo(this._$pagingListArea);var $previous=$("<span></span>").addClass("jtable-page-number-previous").html("&lt").data("pageNumber",this._currentPageNo-1).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass($first,"ui-button ui-state-default","ui-state-hover");this._jqueryuiThemeAddClass($previous,"ui-button ui-state-default","ui-state-hover");if(this._currentPageNo<=1){$first.addClass("jtable-page-number-disabled");
$previous.addClass("jtable-page-number-disabled");this._jqueryuiThemeAddClass($first,"ui-state-disabled");this._jqueryuiThemeAddClass($previous,"ui-state-disabled")}},_createLastAndNextPageButtons:function(pageCount){var $next=$("<span></span>").addClass("jtable-page-number-next").html("&gt").data("pageNumber",this._currentPageNo+1).appendTo(this._$pagingListArea);var $last=$("<span></span>").addClass("jtable-page-number-last").html("&gt&gt").data("pageNumber",pageCount).appendTo(this._$pagingListArea);
this._jqueryuiThemeAddClass($next,"ui-button ui-state-default","ui-state-hover");this._jqueryuiThemeAddClass($last,"ui-button ui-state-default","ui-state-hover");if(this._currentPageNo>=pageCount){$next.addClass("jtable-page-number-disabled");$last.addClass("jtable-page-number-disabled");this._jqueryuiThemeAddClass($next,"ui-state-disabled");this._jqueryuiThemeAddClass($last,"ui-state-disabled")}},_createPageNumberButtons:function(pageNumbers){var previousNumber=0;for(var i=0;i<pageNumbers.length;i++){if(pageNumbers[i]-
previousNumber>1)$("<span></span>").addClass("jtable-page-number-space").html("...").appendTo(this._$pagingListArea);this._createPageNumberButton(pageNumbers[i]);previousNumber=pageNumbers[i]}},_createPageNumberButton:function(pageNumber){var $pageNumber=$("<span></span>").addClass("jtable-page-number").html(pageNumber).data("pageNumber",pageNumber).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass($pageNumber,"ui-button ui-state-default","ui-state-hover");if(this._currentPageNo==pageNumber){$pageNumber.addClass("jtable-page-number-active jtable-page-number-disabled");
this._jqueryuiThemeAddClass($pageNumber,"ui-state-active")}},_calculatePageCount:function(){var pageCount=Math.floor(this._totalRecordCount/this.options.pageSize);if(this._totalRecordCount%this.options.pageSize!=0)++pageCount;return pageCount},_calculatePageNumbers:function(pageCount){if(pageCount<=4){var pageNumbers=[];for(var i=1;i<=pageCount;++i)pageNumbers.push(i);return pageNumbers}else{var shownPageNumbers=[1,2,pageCount-1,pageCount];var previousPageNo=this._normalizeNumber(this._currentPageNo-
1,1,pageCount,1);var nextPageNo=this._normalizeNumber(this._currentPageNo+1,1,pageCount,1);this._insertToArrayIfDoesNotExists(shownPageNumbers,previousPageNo);this._insertToArrayIfDoesNotExists(shownPageNumbers,this._currentPageNo);this._insertToArrayIfDoesNotExists(shownPageNumbers,nextPageNo);shownPageNumbers.sort(function(a,b){return a-b});return shownPageNumbers}},_createPagingInfo:function(){if(this._totalRecordCount<=0){this._$pageInfoSpan.empty();return}var startNo=(this._currentPageNo-1)*
this.options.pageSize+1;var endNo=this._currentPageNo*this.options.pageSize;endNo=this._normalizeNumber(endNo,startNo,this._totalRecordCount,0);if(endNo>=startNo){var pagingInfoMessage=this._formatString(this.options.messages.pagingInfo,startNo,endNo,this._totalRecordCount);this._$pageInfoSpan.html(pagingInfoMessage)}},_bindClickEventsToPageNumberButtons:function(){var self=this;self._$pagingListArea.find(".jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last").not(".jtable-page-number-disabled").click(function(e){e.preventDefault();
self._changePage($(this).data("pageNumber"))})},_changePage:function(pageNo){pageNo=this._normalizeNumber(pageNo,1,this._calculatePageCount(),1);if(pageNo==this._currentPageNo){this._refreshGotoPageInput();return}this._currentPageNo=pageNo;this._reloadTable()}})})(jQuery);
(function($){var base={_initializeFields:$.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:$.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:$.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:$.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:$.hik.jtable.prototype._createJtParamsForLoading};$.extend(true,$.hik.jtable.prototype,{options:{sorting:false,multiSorting:false,defaultSorting:""},_lastSorting:null,_initializeFields:function(){base._initializeFields.apply(this,
arguments);this._lastSorting=[];if(this.options.sorting)this._buildDefaultSortingArray()},_normalizeFieldOptions:function(fieldName,props){base._normalizeFieldOptions.apply(this,arguments);props.sorting=props.sorting!=false},_createHeaderCellForField:function(fieldName,field){var $headerCell=base._createHeaderCellForField.apply(this,arguments);if(this.options.sorting&&field.sorting)this._makeColumnSortable($headerCell,fieldName);return $headerCell},_createRecordLoadUrl:function(){var loadUrl=base._createRecordLoadUrl.apply(this,
arguments);loadUrl=this._addSortingInfoToUrl(loadUrl);return loadUrl},_buildDefaultSortingArray:function(){var self=this;$.each(self.options.defaultSorting.split(","),function(orderIndex,orderValue){$.each(self.options.fields,function(fieldName,fieldProps){if(fieldProps.sorting){var colOffset=orderValue.indexOf(fieldName);if(colOffset>-1)if(orderValue.toUpperCase().indexOf(" DESC",colOffset)>-1)self._lastSorting.push({fieldName:fieldName,sortOrder:"DESC"});else self._lastSorting.push({fieldName:fieldName,
sortOrder:"ASC"})}})})},_makeColumnSortable:function($columnHeader,fieldName){var self=this;$columnHeader.addClass("jtable-column-header-sortable").click(function(e){e.preventDefault();if(!self.options.multiSorting||!e.ctrlKey)self._lastSorting=[];self._sortTableByColumn($columnHeader)});$.each(this._lastSorting,function(sortIndex,sortField){if(sortField.fieldName==fieldName)if(sortField.sortOrder=="DESC")$columnHeader.addClass("jtable-column-header-sorted-desc");else $columnHeader.addClass("jtable-column-header-sorted-asc")})},
_sortTableByColumn:function($columnHeader){if(this._lastSorting.length==0)$columnHeader.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc");for(var i=0;i<this._lastSorting.length;i++)if(this._lastSorting[i].fieldName==$columnHeader.data("fieldName"))this._lastSorting.splice(i--,1);if($columnHeader.hasClass("jtable-column-header-sorted-asc")){$columnHeader.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc");this._lastSorting.push({"fieldName":$columnHeader.data("fieldName"),
sortOrder:"DESC"})}else{$columnHeader.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc");this._lastSorting.push({"fieldName":$columnHeader.data("fieldName"),sortOrder:"ASC"})}this._reloadTable()},_addSortingInfoToUrl:function(url){if(!this.options.sorting||this._lastSorting.length==0)return url;var sorting=[];$.each(this._lastSorting,function(idx,value){sorting.push(value.fieldName+" "+value.sortOrder)});return url+(url.indexOf("?")<0?"?":"&")+"jtSorting="+
sorting.join(",")},_createJtParamsForLoading:function(){var jtParams=base._createJtParamsForLoading.apply(this,arguments);if(this.options.sorting&&this._lastSorting.length){var sorting=[];$.each(this._lastSorting,function(idx,value){sorting.push(value.fieldName+" "+value.sortOrder)});jtParams.jtSorting=sorting.join(",")}return jtParams}})})(jQuery);
(function($){var base={_create:$.hik.jtable.prototype._create,_normalizeFieldOptions:$.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:$.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:$.hik.jtable.prototype._createCellForRecordField};$.extend(true,$.hik.jtable.prototype,{options:{tableId:undefined,columnResizable:true,columnSelectable:true},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){base._create.apply(this,
arguments);this._createColumnResizeBar();this._createColumnSelection();if(this.options.saveUserPreferences)this._loadColumnSettings();this._normalizeColumnWidths()},_normalizeFieldOptions:function(fieldName,props){base._normalizeFieldOptions.apply(this,arguments);if(this.options.columnResizable)props.columnResizable=props.columnResizable!=false;if(!props.visibility)props.visibility="visible"},_createHeaderCellForField:function(fieldName,field){var $headerCell=base._createHeaderCellForField.apply(this,
arguments);if(this.options.columnResizable&&field.columnResizable&&fieldName!=this._columnList[this._columnList.length-1])this._makeColumnResizable($headerCell);if(field.visibility=="hidden")$headerCell.hide();return $headerCell},_createCellForRecordField:function(record,fieldName){var $column=base._createCellForRecordField.apply(this,arguments);var field=this.options.fields[fieldName];if(field.visibility=="hidden")$column.hide();return $column},changeColumnVisibility:function(columnName,visibility){this._changeColumnVisibilityInternal(columnName,
visibility);this._normalizeColumnWidths();if(this.options.saveUserPreferences)this._saveColumnSettings()},_changeColumnVisibilityInternal:function(columnName,visibility){var columnIndex=this._columnList.indexOf(columnName);if(columnIndex<0){this._logWarn('Column "'+columnName+'" does not exist in fields!');return}if(["visible","hidden","fixed"].indexOf(visibility)<0){this._logWarn('Visibility value is not valid: "'+visibility+'"! Options are: visible, hidden, fixed.');return}var field=this.options.fields[columnName];
if(field.visibility==visibility)return;var columnIndexInTable=this._firstDataColumnOffset+columnIndex+1;if(field.visibility!="hidden"&&visibility=="hidden")this._$table.find(">thead >tr >th:nth-child("+columnIndexInTable+"),>tbody >tr >td:nth-child("+columnIndexInTable+")").hide();else if(field.visibility=="hidden"&&visibility!="hidden")this._$table.find(">thead >tr >th:nth-child("+columnIndexInTable+"),>tbody >tr >td:nth-child("+columnIndexInTable+")").show().css("display","table-cell");field.visibility=
visibility},_createColumnSelection:function(){var self=this;this._$columnSelectionDiv=$("<div />").addClass("jtable-column-selection-container").appendTo(self._$mainContainer);this._$table.children("thead").bind("contextmenu",function(e){if(!self.options.columnSelectable)return;e.preventDefault();$("<div />").addClass("jtable-contextmenu-overlay").click(function(){$(this).remove();self._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return false}).appendTo(document.body);self._fillColumnSelection();
var containerOffset=self._$mainContainer.offset();var selectionDivTop=e.pageY-containerOffset.top;var selectionDivLeft=e.pageX-containerOffset.left;var selectionDivMinWidth=100;var containerWidth=self._$mainContainer.width();if(containerWidth>selectionDivMinWidth&&selectionDivLeft>containerWidth-selectionDivMinWidth)selectionDivLeft=containerWidth-selectionDivMinWidth;self._$columnSelectionDiv.css({left:selectionDivLeft,top:selectionDivTop,"min-width":selectionDivMinWidth+"px"}).show()})},_fillColumnSelection:function(){var self=
this;var $columnsUl=$("<ul></ul>").addClass("jtable-column-select-list");for(var i=0;i<this._columnList.length;i++){var columnName=this._columnList[i];var field=this.options.fields[columnName];var $columnLi=$("<li></li>").appendTo($columnsUl);var $label=$('<label for="'+columnName+'"></label>').append($("<span>"+(field.title||columnName)+"</span>")).appendTo($columnLi);var $checkbox=$('<input type="checkbox" name="'+columnName+'">').prependTo($label).click(function(){var $clickedCheckbox=$(this);
var clickedColumnName=$clickedCheckbox.attr("name");var clickedField=self.options.fields[clickedColumnName];if(clickedField.visibility=="fixed")return;self.changeColumnVisibility(clickedColumnName,$clickedCheckbox.is(":checked")?"visible":"hidden")});if(field.visibility!="hidden")$checkbox.attr("checked","checked");if(field.visibility=="fixed")$checkbox.attr("disabled","disabled")}this._$columnSelectionDiv.html($columnsUl)},_createColumnResizeBar:function(){this._$columnResizeBar=$("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},
_makeColumnResizable:function($columnHeader){var self=this;$("<div />").addClass("jtable-column-resize-handler").appendTo($columnHeader.find(".jtable-column-header-container")).mousedown(function(downevent){downevent.preventDefault();downevent.stopPropagation();var mainContainerOffset=self._$mainContainer.offset();var $nextColumnHeader=$columnHeader.nextAll("th.jtable-column-header:visible:first");if(!$nextColumnHeader.length)return;var minimumColumnWidth=10;self._currentResizeArgs={currentColumnStartWidth:$columnHeader.outerWidth(),
minWidth:minimumColumnWidth,maxWidth:$columnHeader.outerWidth()+$nextColumnHeader.outerWidth()-minimumColumnWidth,mouseStartX:downevent.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var resizeonmousemove=function(moveevent){if(!self._currentResizeArgs)return;var resizeBarX=self._normalizeNumber(moveevent.pageX,self._currentResizeArgs.minResizeX(),self._currentResizeArgs.maxResizeX());
self._$columnResizeBar.css("left",resizeBarX-mainContainerOffset.left+"px")};var resizeonmouseup=function(upevent){if(!self._currentResizeArgs)return;$(document).unbind("mousemove",resizeonmousemove);$(document).unbind("mouseup",resizeonmouseup);self._$columnResizeBar.hide();var mouseChangeX=upevent.pageX-self._currentResizeArgs.mouseStartX;var currentColumnFinalWidth=self._normalizeNumber(self._currentResizeArgs.currentColumnStartWidth+mouseChangeX,self._currentResizeArgs.minWidth,self._currentResizeArgs.maxWidth);
var nextColumnFinalWidth=$nextColumnHeader.outerWidth()+(self._currentResizeArgs.currentColumnStartWidth-currentColumnFinalWidth);var pixelToPercentRatio=$columnHeader.data("width-in-percent")/self._currentResizeArgs.currentColumnStartWidth;$columnHeader.data("width-in-percent",currentColumnFinalWidth*pixelToPercentRatio);$nextColumnHeader.data("width-in-percent",nextColumnFinalWidth*pixelToPercentRatio);$columnHeader.css("width",$columnHeader.data("width-in-percent")+"%");$nextColumnHeader.css("width",
$nextColumnHeader.data("width-in-percent")+"%");self._normalizeColumnWidths();self._currentResizeArgs=null;if(self.options.saveUserPreferences)self._saveColumnSettings()};self._$columnResizeBar.show().css({top:$columnHeader.offset().top-mainContainerOffset.top+"px",left:downevent.pageX-mainContainerOffset.left+"px",height:self._$table.outerHeight()+"px"});$(document).bind("mousemove",resizeonmousemove);$(document).bind("mouseup",resizeonmouseup)})},_normalizeColumnWidths:function(){var commandColumnHeaders=
this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%");var headerCells=this._$table.find(">thead th.jtable-column-header");var totalWidthInPixel=0;headerCells.each(function(){var $cell=$(this);if($cell.is(":visible"))totalWidthInPixel+=$cell.outerWidth()});var columnWidhts={};var availableWidthInPercent=100-commandColumnHeaders.length;headerCells.each(function(){var $cell=$(this);if($cell.is(":visible")){var fieldName=$cell.data("fieldName");var widthInPercent=
$cell.outerWidth()*availableWidthInPercent/totalWidthInPixel;columnWidhts[fieldName]=widthInPercent}});headerCells.each(function(){var $cell=$(this);if($cell.is(":visible")){var fieldName=$cell.data("fieldName");$cell.data("width-in-percent",columnWidhts[fieldName]).css("width",columnWidhts[fieldName]+"%")}})},_saveColumnSettings:function(){var self=this;var fieldSettings="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var $cell=$(this);var fieldName=$cell.data("fieldName");
var columnWidth=$cell.data("width-in-percent");var fieldVisibility=self.options.fields[fieldName].visibility;var fieldSetting=fieldName+"="+fieldVisibility+";"+columnWidth;fieldSettings=fieldSettings+fieldSetting+"|"});this._setCookie("column-settings",fieldSettings.substr(0,fieldSettings.length-1))},_loadColumnSettings:function(){var self=this;var columnSettingsCookie=this._getCookie("column-settings");if(!columnSettingsCookie)return;var columnSettings={};$.each(columnSettingsCookie.split("|"),function(inx,
fieldSetting){var splitted=fieldSetting.split("=");var fieldName=splitted[0];var settings=splitted[1].split(";");columnSettings[fieldName]={columnVisibility:settings[0],columnWidth:settings[1]}});var headerCells=this._$table.find(">thead >tr >th.jtable-column-header");headerCells.each(function(){var $cell=$(this);var fieldName=$cell.data("fieldName");var field=self.options.fields[fieldName];if(columnSettings[fieldName]){if(field.visibility!="fixed")self._changeColumnVisibilityInternal(fieldName,columnSettings[fieldName].columnVisibility);
$cell.data("width-in-percent",columnSettings[fieldName].columnWidth).css("width",columnSettings[fieldName].columnWidth+"%")}})}})})(jQuery);
(function($){var base={_removeRowsFromTable:$.hik.jtable.prototype._removeRowsFromTable};$.extend(true,$.hik.jtable.prototype,{options:{openChildAsAccordion:false},openChildTable:function($row,tableOptions,opened){var self=this;if(tableOptions.jqueryuiTheme==undefined)tableOptions.jqueryuiTheme=self.options.jqueryuiTheme;tableOptions.showCloseButton=tableOptions.showCloseButton!=false;if(tableOptions.showCloseButton&&!tableOptions.closeRequested)tableOptions.closeRequested=function(){self.closeChildTable($row)};
if(self.options.openChildAsAccordion)$row.siblings(".jtable-data-row").each(function(){self.closeChildTable($(this))});self.closeChildTable($row,function(){var $childRowColumn=self.getChildRow($row).children("td").empty();var $childTableContainer=$("<div />").addClass("jtable-child-table-container").appendTo($childRowColumn);$childRowColumn.data("childTable",$childTableContainer);$childTableContainer.jtable(tableOptions);self.openChildRow($row);$childTableContainer.hide().slideDown("fast",function(){if(opened)opened({childTable:$childTableContainer})})})},
closeChildTable:function($row,closed){var self=this;var $childRowColumn=this.getChildRow($row).children("td");var $childTable=$childRowColumn.data("childTable");if(!$childTable){if(closed)closed();return}$childRowColumn.data("childTable",null);$childTable.slideUp("fast",function(){$childTable.jtable("destroy");$childTable.remove();self.closeChildRow($row);if(closed)closed()})},isChildRowOpen:function($row){return this.getChildRow($row).is(":visible")},getChildRow:function($row){return $row.data("childRow")||
this._createChildRow($row)},openChildRow:function($row){var $childRow=this.getChildRow($row);if(!$childRow.is(":visible"))$childRow.show();return $childRow},closeChildRow:function($row){var $childRow=this.getChildRow($row);if($childRow.is(":visible"))$childRow.hide()},_removeRowsFromTable:function($rows,reason){if(reason=="deleted")$rows.each(function(){var $row=$(this);var $childRow=$row.data("childRow");if($childRow)$childRow.remove()});base._removeRowsFromTable.apply(this,arguments)},_createChildRow:function($row){var totalColumnCount=
this._$table.find("thead th").length;var $childRow=$("<tr></tr>").addClass("jtable-child-row").append('<td colspan="'+totalColumnCount+'"></td>');$row.after($childRow);$row.data("childRow",$childRow);$childRow.hide();return $childRow}})})(jQuery);(function(){var root=this,previous=root.Chart;var Chart=function(context){var chart=this;this.canvas=context.canvas;this.ctx=context;var computeDimension=function(element,dimension){if(element["offset"+dimension])return element["offset"+dimension];else return document.defaultView.getComputedStyle(element).getPropertyValue(dimension)};var width=this.width=computeDimension(context.canvas,"Width")||context.canvas.width;var height=this.height=computeDimension(context.canvas,"Height")||context.canvas.height;
width=this.width=context.canvas.width;height=this.height=context.canvas.height;this.aspectRatio=this.width/this.height;helpers.retinaScale(this);return this};Chart.defaults={global:{animation:true,animationSteps:60,animationEasing:"easeOutQuart",showScale:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleIntegersOnly:true,scaleBeginAtZero:false,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:false,maintainAspectRatio:true,showTooltips:true,customTooltips:false,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",
tooltipTitleFontColor:"#fff",tooltipTitleTemplate:"<%= label%>",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",segmentColorDefault:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#B4B482","#B15928"],segmentHighlightColorDefaults:["#CEF6FF","#47A0DC","#DAFFB2","#5BC854",
"#FFC2C1","#FF4244","#FFE797","#FFA728","#F2DAFE","#9265C2","#DCDCAA","#D98150"],onAnimationProgress:function(){},onAnimationComplete:function(){}}};Chart.types={};var helpers=Chart.helpers={};var each=helpers.each=function(loopable,callback,self){var additionalArgs=Array.prototype.slice.call(arguments,3);if(loopable)if(loopable.length===+loopable.length){var i;for(i=0;i<loopable.length;i++)callback.apply(self,[loopable[i],i].concat(additionalArgs))}else for(var item in loopable)callback.apply(self,
[loopable[item],item].concat(additionalArgs))},clone=helpers.clone=function(obj){var objClone={};each(obj,function(value,key){if(obj.hasOwnProperty(key))objClone[key]=value});return objClone},extend=helpers.extend=function(base){each(Array.prototype.slice.call(arguments,1),function(extensionObject){each(extensionObject,function(value,key){if(extensionObject.hasOwnProperty(key))base[key]=value})});return base},merge=helpers.merge=function(base,master){var args=Array.prototype.slice.call(arguments,
0);args.unshift({});return extend.apply(null,args)},indexOf=helpers.indexOf=function(arrayToSearch,item){if(Array.prototype.indexOf)return arrayToSearch.indexOf(item);else{for(var i=0;i<arrayToSearch.length;i++)if(arrayToSearch[i]===item)return i;return-1}},where=helpers.where=function(collection,filterCallback){var filtered=[];helpers.each(collection,function(item){if(filterCallback(item))filtered.push(item)});return filtered},findNextWhere=helpers.findNextWhere=function(arrayToSearch,filterCallback,
startIndex){if(!startIndex)startIndex=-1;for(var i=startIndex+1;i<arrayToSearch.length;i++){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},findPreviousWhere=helpers.findPreviousWhere=function(arrayToSearch,filterCallback,startIndex){if(!startIndex)startIndex=arrayToSearch.length;for(var i=startIndex-1;i>=0;i--){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},inherits=helpers.inherits=function(extensions){var parent=this;var ChartElement=
extensions&&extensions.hasOwnProperty("constructor")?extensions.constructor:function(){return parent.apply(this,arguments)};var Surrogate=function(){this.constructor=ChartElement};Surrogate.prototype=parent.prototype;ChartElement.prototype=new Surrogate;ChartElement.extend=inherits;if(extensions)extend(ChartElement.prototype,extensions);ChartElement.__super__=parent.prototype;return ChartElement},noop=helpers.noop=function(){},uid=helpers.uid=function(){var id=0;return function(){return"chart-"+id++}}(),
warn=helpers.warn=function(str){if(window.console&&typeof window.console.warn==="function")console.warn(str)},amd=helpers.amd=typeof define==="function"&&define.amd,isNumber=helpers.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},max=helpers.max=function(array){return Math.max.apply(Math,array)},min=helpers.min=function(array){return Math.min.apply(Math,array)},cap=helpers.cap=function(valueToCap,maxValue,minValue){if(isNumber(maxValue)){if(valueToCap>maxValue)return maxValue}else if(isNumber(minValue))if(valueToCap<
minValue)return minValue;return valueToCap},getDecimalPlaces=helpers.getDecimalPlaces=function(num){if(num%1!==0&&isNumber(num)){var s=num.toString();if(s.indexOf("e-")<0)return s.split(".")[1].length;else if(s.indexOf(".")<0)return parseInt(s.split("e-")[1]);else{var parts=s.split(".")[1].split("e-");return parts[0].length+parseInt(parts[1])}}else return 0},toRadians=helpers.radians=function(degrees){return degrees*(Math.PI/180)},getAngleFromPoint=helpers.getAngleFromPoint=function(centrePoint,anglePoint){var distanceFromXCenter=
anglePoint.x-centrePoint.x,distanceFromYCenter=anglePoint.y-centrePoint.y,radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter);var angle=Math.PI*2+Math.atan2(distanceFromYCenter,distanceFromXCenter);if(distanceFromXCenter<0&&distanceFromYCenter<0)angle+=Math.PI*2;return{angle:angle,distance:radialDistanceFromCenter}},aliasPixel=helpers.aliasPixel=function(pixelWidth){return pixelWidth%2===0?0:.5},splineCurve=helpers.splineCurve=function(FirstPoint,
MiddlePoint,AfterPoint,t){var d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),d12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),fa=t*d01/(d01+d12),fb=t*d12/(d01+d12);return{inner:{x:MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)},outer:{x:MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)}}},calculateOrderOfMagnitude=helpers.calculateOrderOfMagnitude=
function(val){return Math.floor(Math.log(val)/Math.LN10)},calculateScaleRange=helpers.calculateScaleRange=function(valuesArray,drawingSize,textSize,startFromZero,integersOnly){var minSteps=2,maxSteps=Math.floor(drawingSize/(textSize*1.5)),skipFitting=minSteps>=maxSteps;var values=[];each(valuesArray,function(v){v==null||values.push(v)});var minValue=min(values),maxValue=max(values);if(maxValue===minValue){maxValue+=.5;if(minValue>=.5&&!startFromZero)minValue-=.5;else maxValue+=.5}var valueRange=Math.abs(maxValue-
minValue),rangeOrderOfMagnitude=calculateOrderOfMagnitude(valueRange),graphMax=Math.ceil(10*(maxValue/(1*Math.pow(10,rangeOrderOfMagnitude))))/10*Math.pow(10,rangeOrderOfMagnitude),graphMin=startFromZero?0:Math.floor(minValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude),graphRange=graphMax-graphMin,stepValue=Math.pow(10,rangeOrderOfMagnitude),numberOfSteps=Math.round(graphRange/stepValue);while((numberOfSteps>maxSteps||numberOfSteps*2<maxSteps)&&!skipFitting)if(numberOfSteps>
maxSteps){stepValue*=2;numberOfSteps=Math.round(graphRange/stepValue);if(numberOfSteps%1!==0)skipFitting=true}else if(integersOnly&&rangeOrderOfMagnitude>=0)if(stepValue/2%1===0){stepValue/=2;numberOfSteps=Math.round(graphRange/stepValue)}else break;else{stepValue/=2;numberOfSteps=Math.round(graphRange/stepValue)}if(skipFitting){numberOfSteps=minSteps;stepValue=graphRange/numberOfSteps}return{steps:numberOfSteps,stepValue:stepValue,min:graphMin,max:graphMin+numberOfSteps*stepValue}},template=helpers.template=
function(templateString,valuesObject){if(templateString instanceof Function)return templateString(valuesObject);var cache={};function tmpl(str,data){var fn=!/\W/.test(str)?cache[str]=cache[str]:new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");
return data?fn(data):fn}return tmpl(templateString,valuesObject)},generateLabels=helpers.generateLabels=function(templateString,numberOfSteps,graphMin,stepValue){var labelsArray=new Array(numberOfSteps);if(templateString)each(labelsArray,function(val,index){labelsArray[index]=template(templateString,{value:graphMin+stepValue*(index+1)})});return labelsArray},easingEffects=helpers.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},
easeInOutQuad:function(t){if((t/=1/2)<1)return 1/2*t*t;return-1/2*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){if((t/=1/2)<1)return 1/2*t*t*t;return 1/2*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t;return-1/2*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*
((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t*t;return 1/2*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-1/2*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return t===0?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return t===1?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){if(t===0)return 0;if(t===1)return 1;if((t/=
1/2)<1)return 1/2*Math.pow(2,10*(t-1));return 1/2*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1)return t;return-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){if((t/=1/2)<1)return-1/2*(Math.sqrt(1-t*t)-1);return 1/2*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;s=p/4}else s=p/(2*Math.PI)*Math.asin(1/a);return-(a*
Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p))},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;s=p/4}else s=p/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin((t*1-s)*(2*Math.PI)/p)+1},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0)return 0;if((t/=1/2)==2)return 1;if(!p)p=1*(.3*1.5);if(a<Math.abs(1)){a=1;s=p/4}else s=p/(2*Math.PI)*Math.asin(1/a);if(t<1)return-.5*(a*Math.pow(2,
10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p)*.5+1},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;if((t/=1/2)<1)return 1/2*(t*t*(((s*=1.525)+1)*t-s));return 1/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:function(t){return 1-easingEffects.easeOutBounce(1-t)},easeOutBounce:function(t){if((t/=1)<1/
2.75)return 1*(7.5625*t*t);else if(t<2/2.75)return 1*(7.5625*(t-=1.5/2.75)*t+.75);else if(t<2.5/2.75)return 1*(7.5625*(t-=2.25/2.75)*t+.9375);else return 1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){if(t<1/2)return easingEffects.easeInBounce(t*2)*.5;return easingEffects.easeOutBounce(t*2-1)*.5+1*.5}},requestAnimFrame=helpers.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1E3/60)}}(),cancelAnimFrame=helpers.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(callback){return window.clearTimeout(callback,1E3/60)}}(),animationLoop=helpers.animationLoop=function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){var currentStep=
0,easingFunction=easingEffects[easingString]||easingEffects.linear;var animationFrame=function(){currentStep++;var stepDecimal=currentStep/totalSteps;var easeDecimal=easingFunction(stepDecimal);callback.call(chartInstance,easeDecimal,stepDecimal,currentStep);onProgress.call(chartInstance,easeDecimal,stepDecimal);if(currentStep<totalSteps)chartInstance.animationFrame=requestAnimFrame(animationFrame);else onComplete.apply(chartInstance)};requestAnimFrame(animationFrame)},getRelativePosition=helpers.getRelativePosition=
function(evt){var mouseX,mouseY;var e=evt.originalEvent||evt,canvas=evt.currentTarget||evt.srcElement,boundingRect=canvas.getBoundingClientRect();if(e.touches){mouseX=e.touches[0].clientX-boundingRect.left;mouseY=e.touches[0].clientY-boundingRect.top}else{mouseX=e.clientX-boundingRect.left;mouseY=e.clientY-boundingRect.top}return{x:mouseX,y:mouseY}},addEvent=helpers.addEvent=function(node,eventType,method){if(node.addEventListener)node.addEventListener(eventType,method);else if(node.attachEvent)node.attachEvent("on"+
eventType,method);else node["on"+eventType]=method},removeEvent=helpers.removeEvent=function(node,eventType,handler){if(node.removeEventListener)node.removeEventListener(eventType,handler,false);else if(node.detachEvent)node.detachEvent("on"+eventType,handler);else node["on"+eventType]=noop},bindEvents=helpers.bindEvents=function(chartInstance,arrayOfEvents,handler){if(!chartInstance.events)chartInstance.events={};each(arrayOfEvents,function(eventName){chartInstance.events[eventName]=function(){handler.apply(chartInstance,
arguments)};addEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName])})},unbindEvents=helpers.unbindEvents=function(chartInstance,arrayOfEvents){each(arrayOfEvents,function(handler,eventName){removeEvent(chartInstance.chart.canvas,eventName,handler)})},getMaximumWidth=helpers.getMaximumWidth=function(domNode){var container=domNode.parentNode,padding=parseInt(getStyle(container,"padding-left"))+parseInt(getStyle(container,"padding-right"));return container.clientWidth-padding},
getMaximumHeight=helpers.getMaximumHeight=function(domNode){var container=domNode.parentNode,padding=parseInt(getStyle(container,"padding-bottom"))+parseInt(getStyle(container,"padding-top"));return container.clientHeight-padding},getStyle=helpers.getStyle=function(el,property){return el.currentStyle?el.currentStyle[property]:document.defaultView.getComputedStyle(el,null).getPropertyValue(property)},getMaximumSize=helpers.getMaximumSize=helpers.getMaximumWidth,retinaScale=helpers.retinaScale=function(chart){var ctx=
chart.ctx,width=chart.canvas.width,height=chart.canvas.height;if(window.devicePixelRatio){ctx.canvas.style.width=width+"px";ctx.canvas.style.height=height+"px";ctx.canvas.height=height*window.devicePixelRatio;ctx.canvas.width=width*window.devicePixelRatio;ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}},clear=helpers.clear=function(chart){chart.ctx.clearRect(0,0,chart.width,chart.height)},fontString=helpers.fontString=function(pixelSize,fontStyle,fontFamily){return fontStyle+" "+pixelSize+
"px "+fontFamily},longestText=helpers.longestText=function(ctx,font,arrayOfStrings){ctx.font=font;var longest=0;each(arrayOfStrings,function(string){var textWidth=ctx.measureText(string).width;longest=textWidth>longest?textWidth:longest});return longest},drawRoundedRectangle=helpers.drawRoundedRectangle=function(ctx,x,y,width,height,radius){ctx.beginPath();ctx.moveTo(x+radius,y);ctx.lineTo(x+width-radius,y);ctx.quadraticCurveTo(x+width,y,x+width,y+radius);ctx.lineTo(x+width,y+height-radius);ctx.quadraticCurveTo(x+
width,y+height,x+width-radius,y+height);ctx.lineTo(x+radius,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-radius);ctx.lineTo(x,y+radius);ctx.quadraticCurveTo(x,y,x+radius,y);ctx.closePath()};Chart.instances={};Chart.Type=function(data,options,chart){this.options=options;this.chart=chart;this.id=uid();Chart.instances[this.id]=this;if(options.responsive)this.resize();this.initialize.call(this,data)};extend(Chart.Type.prototype,{initialize:function(){return this},clear:function(){clear(this.chart);
return this},stop:function(){Chart.animationService.cancelAnimation(this);return this},resize:function(callback){this.stop();var canvas=this.chart.canvas,newWidth=getMaximumWidth(this.chart.canvas),newHeight=this.options.maintainAspectRatio?newWidth/this.chart.aspectRatio:getMaximumHeight(this.chart.canvas);canvas.width=this.chart.width=newWidth;canvas.height=this.chart.height=newHeight;retinaScale(this.chart);if(typeof callback==="function")callback.apply(this,Array.prototype.slice.call(arguments,
1));return this},reflow:noop,render:function(reflow){if(reflow)this.reflow();if(this.options.animation&&!reflow){var animation=new Chart.Animation;animation.numSteps=this.options.animationSteps;animation.easing=this.options.animationEasing;animation.render=function(chartInstance,animationObject){var easingFunction=helpers.easingEffects[animationObject.easing];var stepDecimal=animationObject.currentStep/animationObject.numSteps;var easeDecimal=easingFunction(stepDecimal);chartInstance.draw(easeDecimal,
stepDecimal,animationObject.currentStep)};animation.onAnimationProgress=this.options.onAnimationProgress;animation.onAnimationComplete=this.options.onAnimationComplete;Chart.animationService.addAnimation(this,animation)}else{this.draw();this.options.onAnimationComplete.call(this)}return this},generateLegend:function(){return template(this.options.legendTemplate,this)},destroy:function(){this.clear();unbindEvents(this,this.events);var canvas=this.chart.canvas;canvas.width=this.chart.width;canvas.height=
this.chart.height;if(canvas.style.removeProperty){canvas.style.removeProperty("width");canvas.style.removeProperty("height")}else{canvas.style.removeAttribute("width");canvas.style.removeAttribute("height")}delete Chart.instances[this.id]},showTooltip:function(ChartElements,forceRedraw){if(typeof this.activeElements==="undefined")this.activeElements=[];var isChanged=function(Elements){var changed=false;if(Elements.length!==this.activeElements.length){changed=true;return changed}each(Elements,function(element,
index){if(element!==this.activeElements[index])changed=true},this);return changed}.call(this,ChartElements);if(!isChanged&&!forceRedraw)return;else this.activeElements=ChartElements;this.draw();if(this.options.customTooltips)this.options.customTooltips(false);if(ChartElements.length>0)if(this.datasets&&this.datasets.length>1){var dataArray,dataIndex;for(var i=this.datasets.length-1;i>=0;i--){dataArray=this.datasets[i].points||this.datasets[i].bars||this.datasets[i].segments;dataIndex=indexOf(dataArray,
ChartElements[0]);if(dataIndex!==-1)break}var tooltipLabels=[],tooltipColors=[],medianPosition=function(index){var Elements=[],dataCollection,xPositions=[],yPositions=[],xMax,yMax,xMin,yMin;helpers.each(this.datasets,function(dataset){dataCollection=dataset.points||dataset.bars||dataset.segments;if(dataCollection[dataIndex]&&dataCollection[dataIndex].hasValue())Elements.push(dataCollection[dataIndex])});helpers.each(Elements,function(element){xPositions.push(element.x);yPositions.push(element.y);
tooltipLabels.push(helpers.template(this.options.multiTooltipTemplate,element));tooltipColors.push({fill:element._saved.fillColor||element.fillColor,stroke:element._saved.strokeColor||element.strokeColor})},this);yMin=min(yPositions);yMax=max(yPositions);xMin=min(xPositions);xMax=max(xPositions);return{x:xMin>this.chart.width/2?xMin:xMax,y:(yMin+yMax)/2}}.call(this,dataIndex);(new Chart.MultiTooltip({x:medianPosition.x,y:medianPosition.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,
xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:tooltipLabels,
legendColors:tooltipColors,legendColorBackground:this.options.multiTooltipKeyBackground,title:template(this.options.tooltipTitleTemplate,ChartElements[0]),chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips})).draw()}else each(ChartElements,function(Element){var tooltipPosition=Element.tooltipPosition();(new Chart.Tooltip({x:Math.round(tooltipPosition.x),y:Math.round(tooltipPosition.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,
textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:template(this.options.tooltipTemplate,Element),chart:this.chart,custom:this.options.customTooltips})).draw()},this);return this},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});Chart.Type.extend=function(extensions){var parent=
this;var ChartType=function(){return parent.apply(this,arguments)};ChartType.prototype=clone(parent.prototype);extend(ChartType.prototype,extensions);ChartType.extend=Chart.Type.extend;if(extensions.name||parent.prototype.name){var chartName=extensions.name||parent.prototype.name;var baseDefaults=Chart.defaults[parent.prototype.name]?clone(Chart.defaults[parent.prototype.name]):{};Chart.defaults[chartName]=extend(baseDefaults,extensions.defaults);Chart.types[chartName]=ChartType;Chart.prototype[chartName]=
function(data,options){var config=merge(Chart.defaults.global,Chart.defaults[chartName],options||{});return new ChartType(data,config,this)}}else warn("Name not provided for this chart, so it hasn't been registered");return parent};Chart.Element=function(configuration){extend(this,configuration);this.initialize.apply(this,arguments);this.save()};extend(Chart.Element.prototype,{initialize:function(){},restore:function(props){if(!props)extend(this,this._saved);else each(props,function(key){this[key]=
this._saved[key]},this);return this},save:function(){this._saved=clone(this);delete this._saved._saved;return this},update:function(newProps){each(newProps,function(value,key){this._saved[key]=this[key];this[key]=value},this);return this},transition:function(props,ease){each(props,function(value,key){this[key]=(value-this._saved[key])*ease+this._saved[key]},this);return this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return isNumber(this.value)}});Chart.Element.extend=
inherits;Chart.Point=Chart.Element.extend({display:true,inRange:function(chartX,chartY){var hitDetectionRange=this.hitDetectionRadius+this.radius;return Math.pow(chartX-this.x,2)+Math.pow(chartY-this.y,2)<Math.pow(hitDetectionRange,2)},draw:function(){if(this.display){var ctx=this.ctx;ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.closePath();ctx.strokeStyle=this.strokeColor;ctx.lineWidth=this.strokeWidth;ctx.fillStyle=this.fillColor;ctx.fill();ctx.stroke()}}});Chart.Arc=Chart.Element.extend({inRange:function(chartX,
chartY){var pointRelativePosition=helpers.getAngleFromPoint(this,{x:chartX,y:chartY});var pointRelativeAngle=pointRelativePosition.angle%(Math.PI*2),startAngle=(Math.PI*2+this.startAngle)%(Math.PI*2),endAngle=(Math.PI*2+this.endAngle)%(Math.PI*2)||360;var betweenAngles=endAngle<startAngle?pointRelativeAngle<=endAngle||pointRelativeAngle>=startAngle:pointRelativeAngle>=startAngle&&pointRelativeAngle<=endAngle;var withinRadius=pointRelativePosition.distance>=this.innerRadius&&pointRelativePosition.distance<=
this.outerRadius;return betweenAngles&&withinRadius},tooltipPosition:function(){var centreAngle=this.startAngle+(this.endAngle-this.startAngle)/2,rangeFromCentre=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(centreAngle)*rangeFromCentre,y:this.y+Math.sin(centreAngle)*rangeFromCentre}},draw:function(animationPercent){var easingDecimal=animationPercent||1;var ctx=this.ctx;ctx.beginPath();ctx.arc(this.x,this.y,this.outerRadius<0?0:this.outerRadius,this.startAngle,this.endAngle);
ctx.arc(this.x,this.y,this.innerRadius<0?0:this.innerRadius,this.endAngle,this.startAngle,true);ctx.closePath();ctx.strokeStyle=this.strokeColor;ctx.lineWidth=this.strokeWidth;ctx.fillStyle=this.fillColor;ctx.fill();ctx.lineJoin="bevel";if(this.showStroke)ctx.stroke()}});Chart.Rectangle=Chart.Element.extend({draw:function(){var ctx=this.ctx,halfWidth=this.width/2,leftX=this.x-halfWidth,rightX=this.x+halfWidth,top=this.base-(this.base-this.y),halfStroke=this.strokeWidth/2;if(this.showStroke){leftX+=
halfStroke;rightX-=halfStroke;top+=halfStroke}ctx.beginPath();ctx.fillStyle=this.fillColor;ctx.strokeStyle=this.strokeColor;ctx.lineWidth=this.strokeWidth;ctx.moveTo(leftX,this.base);ctx.lineTo(leftX,top);ctx.lineTo(rightX,top);ctx.lineTo(rightX,this.base);ctx.fill();if(this.showStroke)ctx.stroke()},height:function(){return this.base-this.y},inRange:function(chartX,chartY){return chartX>=this.x-this.width/2&&chartX<=this.x+this.width/2&&(chartY>=this.y&&chartY<=this.base)}});Chart.Animation=Chart.Element.extend({currentStep:null,
numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null});Chart.Tooltip=Chart.Element.extend({draw:function(){var ctx=this.chart.ctx;ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var caretPadding=this.caretPadding=2;var tooltipWidth=ctx.measureText(this.text).width+2*this.xPadding,tooltipRectHeight=this.fontSize+2*this.yPadding,tooltipHeight=tooltipRectHeight+this.caretHeight+caretPadding;if(this.x+tooltipWidth/
2>this.chart.width)this.xAlign="left";else if(this.x-tooltipWidth/2<0)this.xAlign="right";if(this.y-tooltipHeight<0)this.yAlign="below";var tooltipX=this.x-tooltipWidth/2,tooltipY=this.y-tooltipHeight;ctx.fillStyle=this.fillColor;if(this.custom)this.custom(this);else{switch(this.yAlign){case "above":ctx.beginPath();ctx.moveTo(this.x,this.y-caretPadding);ctx.lineTo(this.x+this.caretHeight,this.y-(caretPadding+this.caretHeight));ctx.lineTo(this.x-this.caretHeight,this.y-(caretPadding+this.caretHeight));
ctx.closePath();ctx.fill();break;case "below":tooltipY=this.y+caretPadding+this.caretHeight;ctx.beginPath();ctx.moveTo(this.x,this.y+caretPadding);ctx.lineTo(this.x+this.caretHeight,this.y+caretPadding+this.caretHeight);ctx.lineTo(this.x-this.caretHeight,this.y+caretPadding+this.caretHeight);ctx.closePath();ctx.fill();break}switch(this.xAlign){case "left":tooltipX=this.x-tooltipWidth+(this.cornerRadius+this.caretHeight);break;case "right":tooltipX=this.x-(this.cornerRadius+this.caretHeight);break}drawRoundedRectangle(ctx,
tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius);ctx.fill();ctx.fillStyle=this.textColor;ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillText(this.text,tooltipX+tooltipWidth/2,tooltipY+tooltipRectHeight/2)}}});Chart.MultiTooltip=Chart.Element.extend({initialize:function(){this.font=fontString(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.titleHeight=this.title?this.titleFontSize*
1.5:0;this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+this.yPadding*2+this.titleHeight;this.ctx.font=this.titleFont;var titleWidth=this.ctx.measureText(this.title).width,labelWidth=longestText(this.ctx,this.font,this.labels)+this.fontSize+3,longestTextWidth=max([labelWidth,titleWidth]);this.width=longestTextWidth+this.xPadding*2;var halfHeight=this.height/2;if(this.y-halfHeight<0)this.y=halfHeight;else if(this.y+halfHeight>this.chart.height)this.y=this.chart.height-
halfHeight;if(this.x>this.chart.width/2)this.x-=this.xOffset+this.width;else this.x+=this.xOffset},getLineHeight:function(index){var baseLineHeight=this.y-this.height/2+this.yPadding,afterTitleIndex=index-1;if(index===0)return baseLineHeight+this.titleHeight/3;else return baseLineHeight+(this.fontSize*1.5*afterTitleIndex+this.fontSize/2)+this.titleHeight},draw:function(){if(this.custom)this.custom(this);else{drawRoundedRectangle(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);
var ctx=this.ctx;ctx.fillStyle=this.fillColor;ctx.fill();ctx.closePath();ctx.textAlign="left";ctx.textBaseline="middle";ctx.fillStyle=this.titleTextColor;ctx.font=this.titleFont;ctx.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));ctx.font=this.font;helpers.each(this.labels,function(label,index){ctx.fillStyle=this.textColor;ctx.fillText(label,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(index+1));ctx.fillStyle=this.legendColorBackground;ctx.fillRect(this.x+this.xPadding,
this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize);ctx.fillStyle=this.legendColors[index].fill;ctx.fillRect(this.x+this.xPadding,this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}});Chart.Scale=Chart.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];var stepDecimalPlaces=getDecimalPlaces(this.stepValue);for(var i=0;i<=this.steps;i++)this.yLabels.push(template(this.templateString,{value:(this.min+i*this.stepValue).toFixed(stepDecimalPlaces)}));
this.yLabelWidth=this.display&&this.showLabels?longestText(this.ctx,this.font,this.yLabels)+10:0},addXLabel:function(label){this.xLabels.push(label);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-this.fontSize*1.5-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var cachedEndPoint=this.endPoint;var cachedHeight=this.endPoint-
this.startPoint,cachedYLabelWidth;this.calculateYRange(cachedHeight);this.buildYLabels();this.calculateXLabelRotation();while(cachedHeight>this.endPoint-this.startPoint){cachedHeight=this.endPoint-this.startPoint;cachedYLabelWidth=this.yLabelWidth;this.calculateYRange(cachedHeight);this.buildYLabels();if(cachedYLabelWidth<this.yLabelWidth){this.endPoint=cachedEndPoint;this.calculateXLabelRotation()}}},calculateXLabelRotation:function(){this.ctx.font=this.font;var firstWidth=this.ctx.measureText(this.xLabels[0]).width,
lastWidth=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,firstRotated,lastRotated;this.xScalePaddingRight=lastWidth/2+3;this.xScalePaddingLeft=firstWidth/2>this.yLabelWidth?firstWidth/2:this.yLabelWidth;this.xLabelRotation=0;if(this.display){var originalLabelWidth=longestText(this.ctx,this.font,this.xLabels),cosRotation,firstRotatedWidth;this.xLabelWidth=originalLabelWidth;var xGridWidth=Math.floor(this.calculateX(1)-this.calculateX(0))-6;while(this.xLabelWidth>xGridWidth&&this.xLabelRotation===
0||this.xLabelWidth>xGridWidth&&this.xLabelRotation<=90&&this.xLabelRotation>0){cosRotation=Math.cos(toRadians(this.xLabelRotation));firstRotated=cosRotation*firstWidth;lastRotated=cosRotation*lastWidth;if(firstRotated+this.fontSize/2>this.yLabelWidth)this.xScalePaddingLeft=firstRotated+this.fontSize/2;this.xScalePaddingRight=this.fontSize/2;this.xLabelRotation++;this.xLabelWidth=cosRotation*originalLabelWidth}if(this.xLabelRotation>0)this.endPoint-=Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth+
3}else{this.xLabelWidth=0;this.xScalePaddingRight=this.padding;this.xScalePaddingLeft=this.padding}},calculateYRange:noop,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(value){var scalingFactor=this.drawingArea()/(this.min-this.max);return this.endPoint-scalingFactor*(value-this.min)},calculateX:function(index){var isRotated=this.xLabelRotation>0,innerWidth=this.width-(this.xScalePaddingLeft+this.xScalePaddingRight),valueWidth=innerWidth/Math.max(this.valuesCount-
(this.offsetGridLines?0:1),1),valueOffset=valueWidth*index+this.xScalePaddingLeft;if(this.offsetGridLines)valueOffset+=valueWidth/2;return Math.round(valueOffset)},update:function(newProps){helpers.extend(this,newProps);this.fit()},draw:function(){var ctx=this.ctx,yLabelGap=(this.endPoint-this.startPoint)/this.steps,xStart=Math.round(this.xScalePaddingLeft);if(this.display){ctx.fillStyle=this.textColor;ctx.font=this.font;each(this.yLabels,function(labelString,index){var yLabelCenter=this.endPoint-
yLabelGap*index,linePositionY=Math.round(yLabelCenter),drawHorizontalLine=this.showHorizontalLines;ctx.textAlign="right";ctx.textBaseline="middle";if(this.showLabels)ctx.fillText(labelString,xStart-10,yLabelCenter);if(index===0&&!drawHorizontalLine)drawHorizontalLine=true;if(drawHorizontalLine)ctx.beginPath();if(index>0){ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}else{ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor}linePositionY+=helpers.aliasPixel(ctx.lineWidth);
if(drawHorizontalLine){ctx.moveTo(xStart,linePositionY);ctx.lineTo(this.width,linePositionY);ctx.stroke();ctx.closePath()}ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor;ctx.beginPath();ctx.moveTo(xStart-5,linePositionY);ctx.lineTo(xStart,linePositionY);ctx.stroke();ctx.closePath()},this);each(this.xLabels,function(label,index){var xPos=this.calculateX(index)+aliasPixel(this.lineWidth),linePos=this.calculateX(index-(this.offsetGridLines?.5:0))+aliasPixel(this.lineWidth),isRotated=this.xLabelRotation>
0,drawVerticalLine=this.showVerticalLines;if(index===0&&!drawVerticalLine)drawVerticalLine=true;if(drawVerticalLine)ctx.beginPath();if(index>0){ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}else{ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor}if(drawVerticalLine){ctx.moveTo(linePos,this.endPoint);ctx.lineTo(linePos,this.startPoint-3);ctx.stroke();ctx.closePath()}ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor;ctx.beginPath();ctx.moveTo(linePos,this.endPoint);
ctx.lineTo(linePos,this.endPoint+5);ctx.stroke();ctx.closePath();ctx.save();ctx.translate(xPos,isRotated?this.endPoint+12:this.endPoint+8);ctx.rotate(toRadians(this.xLabelRotation)*-1);ctx.font=this.font;ctx.textAlign=isRotated?"right":"center";ctx.textBaseline=isRotated?"middle":"top";ctx.fillText(label,0,0);ctx.restore()},this)}}});Chart.RadialScale=Chart.Element.extend({initialize:function(){this.size=min([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):
this.size/2},calculateCenterOffset:function(value){var scalingFactor=this.drawingArea/(this.max-this.min);return(value-this.min)*scalingFactor},update:function(){if(!this.lineArc)this.setScaleSize();else this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2;this.buildYLabels()},buildYLabels:function(){this.yLabels=[];var stepDecimalPlaces=getDecimalPlaces(this.stepValue);for(var i=0;i<=this.steps;i++)this.yLabels.push(template(this.templateString,{value:(this.min+
i*this.stepValue).toFixed(stepDecimalPlaces)}))},getCircumference:function(){return Math.PI*2/this.valuesCount},setScaleSize:function(){var largestPossibleRadius=min([this.height/2-this.pointLabelFontSize-5,this.width/2]),pointPosition,i,textWidth,halfTextWidth,furthestRight=this.width,furthestRightIndex,furthestRightAngle,furthestLeft=0,furthestLeftIndex,furthestLeftAngle,xProtrusionLeft,xProtrusionRight,radiusReductionRight,radiusReductionLeft,maxWidthRadius;this.ctx.font=fontString(this.pointLabelFontSize,
this.pointLabelFontStyle,this.pointLabelFontFamily);for(i=0;i<this.valuesCount;i++){pointPosition=this.getPointPosition(i,largestPossibleRadius);textWidth=this.ctx.measureText(template(this.templateString,{value:this.labels[i]})).width+5;if(i===0||i===this.valuesCount/2){halfTextWidth=textWidth/2;if(pointPosition.x+halfTextWidth>furthestRight){furthestRight=pointPosition.x+halfTextWidth;furthestRightIndex=i}if(pointPosition.x-halfTextWidth<furthestLeft){furthestLeft=pointPosition.x-halfTextWidth;
furthestLeftIndex=i}}else if(i<this.valuesCount/2){if(pointPosition.x+textWidth>furthestRight){furthestRight=pointPosition.x+textWidth;furthestRightIndex=i}}else if(i>this.valuesCount/2)if(pointPosition.x-textWidth<furthestLeft){furthestLeft=pointPosition.x-textWidth;furthestLeftIndex=i}}xProtrusionLeft=furthestLeft;xProtrusionRight=Math.ceil(furthestRight-this.width);furthestRightAngle=this.getIndexAngle(furthestRightIndex);furthestLeftAngle=this.getIndexAngle(furthestLeftIndex);radiusReductionRight=
xProtrusionRight/Math.sin(furthestRightAngle+Math.PI/2);radiusReductionLeft=xProtrusionLeft/Math.sin(furthestLeftAngle+Math.PI/2);radiusReductionRight=isNumber(radiusReductionRight)?radiusReductionRight:0;radiusReductionLeft=isNumber(radiusReductionLeft)?radiusReductionLeft:0;this.drawingArea=largestPossibleRadius-(radiusReductionLeft+radiusReductionRight)/2;this.setCenterPoint(radiusReductionLeft,radiusReductionRight)},setCenterPoint:function(leftMovement,rightMovement){var maxRight=this.width-rightMovement-
this.drawingArea,maxLeft=leftMovement+this.drawingArea;this.xCenter=(maxLeft+maxRight)/2;this.yCenter=this.height/2},getIndexAngle:function(index){var angleMultiplier=Math.PI*2/this.valuesCount;return index*angleMultiplier-Math.PI/2},getPointPosition:function(index,distanceFromCenter){var thisAngle=this.getIndexAngle(index);return{x:Math.cos(thisAngle)*distanceFromCenter+this.xCenter,y:Math.sin(thisAngle)*distanceFromCenter+this.yCenter}},draw:function(){if(this.display){var ctx=this.ctx;each(this.yLabels,
function(label,index){if(index>0){var yCenterOffset=index*(this.drawingArea/this.steps),yHeight=this.yCenter-yCenterOffset,pointPosition;if(this.lineWidth>0){ctx.strokeStyle=this.lineColor;ctx.lineWidth=this.lineWidth;if(this.lineArc){ctx.beginPath();ctx.arc(this.xCenter,this.yCenter,yCenterOffset,0,Math.PI*2);ctx.closePath();ctx.stroke()}else{ctx.beginPath();for(var i=0;i<this.valuesCount;i++){pointPosition=this.getPointPosition(i,this.calculateCenterOffset(this.min+index*this.stepValue));if(i===
0)ctx.moveTo(pointPosition.x,pointPosition.y);else ctx.lineTo(pointPosition.x,pointPosition.y)}ctx.closePath();ctx.stroke()}}if(this.showLabels){ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily);if(this.showLabelBackdrop){var labelWidth=ctx.measureText(label).width;ctx.fillStyle=this.backdropColor;ctx.fillRect(this.xCenter-labelWidth/2-this.backdropPaddingX,yHeight-this.fontSize/2-this.backdropPaddingY,labelWidth+this.backdropPaddingX*2,this.fontSize+this.backdropPaddingY*2)}ctx.textAlign=
"center";ctx.textBaseline="middle";ctx.fillStyle=this.fontColor;ctx.fillText(label,this.xCenter,yHeight)}}},this);if(!this.lineArc){ctx.lineWidth=this.angleLineWidth;ctx.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){var centerOffset=null,outerPosition=null;if(this.angleLineWidth>0){centerOffset=this.calculateCenterOffset(this.max);outerPosition=this.getPointPosition(i,centerOffset);ctx.beginPath();ctx.moveTo(this.xCenter,this.yCenter);ctx.lineTo(outerPosition.x,outerPosition.y);
ctx.stroke();ctx.closePath()}if(this.backgroundColors&&this.backgroundColors.length==this.valuesCount){if(centerOffset==null)centerOffset=this.calculateCenterOffset(this.max);if(outerPosition==null)outerPosition=this.getPointPosition(i,centerOffset);var previousOuterPosition=this.getPointPosition(i===0?this.valuesCount-1:i-1,centerOffset);var nextOuterPosition=this.getPointPosition(i===this.valuesCount-1?0:i+1,centerOffset);var previousOuterHalfway={x:(previousOuterPosition.x+outerPosition.x)/2,y:(previousOuterPosition.y+
outerPosition.y)/2};var nextOuterHalfway={x:(outerPosition.x+nextOuterPosition.x)/2,y:(outerPosition.y+nextOuterPosition.y)/2};ctx.beginPath();ctx.moveTo(this.xCenter,this.yCenter);ctx.lineTo(previousOuterHalfway.x,previousOuterHalfway.y);ctx.lineTo(outerPosition.x,outerPosition.y);ctx.lineTo(nextOuterHalfway.x,nextOuterHalfway.y);ctx.fillStyle=this.backgroundColors[i];ctx.fill();ctx.closePath()}var pointLabelPosition=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);ctx.font=fontString(this.pointLabelFontSize,
this.pointLabelFontStyle,this.pointLabelFontFamily);ctx.fillStyle=this.pointLabelFontColor;var labelsCount=this.labels.length,halfLabelsCount=this.labels.length/2,quarterLabelsCount=halfLabelsCount/2,upperHalf=i<quarterLabelsCount||i>labelsCount-quarterLabelsCount,exactQuarter=i===quarterLabelsCount||i===labelsCount-quarterLabelsCount;if(i===0)ctx.textAlign="center";else if(i===halfLabelsCount)ctx.textAlign="center";else if(i<halfLabelsCount)ctx.textAlign="left";else ctx.textAlign="right";if(exactQuarter)ctx.textBaseline=
"middle";else if(upperHalf)ctx.textBaseline="bottom";else ctx.textBaseline="top";ctx.fillText(this.labels[i],pointLabelPosition.x,pointLabelPosition.y)}}}}});Chart.animationService={frameDuration:17,animations:[],dropFrames:0,addAnimation:function(chartInstance,animationObject){for(var index=0;index<this.animations.length;++index)if(this.animations[index].chartInstance===chartInstance){this.animations[index].animationObject=animationObject;return}this.animations.push({chartInstance:chartInstance,
animationObject:animationObject});if(this.animations.length==1)helpers.requestAnimFrame.call(window,this.digestWrapper)},cancelAnimation:function(chartInstance){var index=helpers.findNextWhere(this.animations,function(animationWrapper){return animationWrapper.chartInstance===chartInstance});if(index)this.animations.splice(index,1)},digestWrapper:function(){Chart.animationService.startDigest.call(Chart.animationService)},startDigest:function(){var startTime=Date.now();var framesToDrop=0;if(this.dropFrames>
1){framesToDrop=Math.floor(this.dropFrames);this.dropFrames-=framesToDrop}for(var i=0;i<this.animations.length;i++){if(this.animations[i].animationObject.currentStep===null)this.animations[i].animationObject.currentStep=0;this.animations[i].animationObject.currentStep+=1+framesToDrop;if(this.animations[i].animationObject.currentStep>this.animations[i].animationObject.numSteps)this.animations[i].animationObject.currentStep=this.animations[i].animationObject.numSteps;this.animations[i].animationObject.render(this.animations[i].chartInstance,
this.animations[i].animationObject);if(this.animations[i].animationObject.currentStep==this.animations[i].animationObject.numSteps){this.animations[i].animationObject.onAnimationComplete.call(this.animations[i].chartInstance);this.animations.splice(i,1);i--}}var endTime=Date.now();var delay=endTime-startTime-this.frameDuration;var frameDelay=delay/this.frameDuration;if(frameDelay>1)this.dropFrames+=frameDelay;if(this.animations.length>0)helpers.requestAnimFrame.call(window,this.digestWrapper)}};helpers.addEvent(window,
"resize",function(){var timeout;return function(){clearTimeout(timeout);timeout=setTimeout(function(){each(Chart.instances,function(instance){if(instance.options.responsive)instance.resize(instance.render,true)})},50)}}());if(amd)define(function(){return Chart});else if(typeof module==="object"&&module.exports)module.exports=Chart;root.Chart=Chart;Chart.noConflict=function(){root.Chart=previous;return Chart}}).call(this);
(function(){var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'};
Chart.Type.extend({name:"Bar",defaults:defaultConfig,initialize:function(data){var options=this.options;this.ScaleClass=Chart.Scale.extend({offsetGridLines:true,calculateBarX:function(datasetCount,datasetIndex,barIndex){var xWidth=this.calculateBaseWidth(),xAbsolute=this.calculateX(barIndex)-xWidth/2,barWidth=this.calculateBarWidth(datasetCount);return xAbsolute+barWidth*datasetIndex+datasetIndex*options.barDatasetSpacing+barWidth/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-
2*options.barValueSpacing},calculateBarWidth:function(datasetCount){var baseWidth=this.calculateBaseWidth()-(datasetCount-1)*options.barDatasetSpacing;return baseWidth/datasetCount}});this.datasets=[];if(this.options.showTooltips)helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeBars=evt.type!=="mouseout"?this.getBarsAtEvent(evt):[];this.eachBars(function(bar){bar.restore(["fillColor","strokeColor"])});helpers.each(activeBars,function(activeBar){activeBar.fillColor=activeBar.highlightFill;
activeBar.strokeColor=activeBar.highlightStroke});this.showTooltip(activeBars)});this.BarClass=Chart.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});helpers.each(data.datasets,function(dataset,datasetIndex){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,bars:[]};this.datasets.push(datasetObject);helpers.each(dataset.data,function(dataPoint,index){datasetObject.bars.push(new this.BarClass({value:dataPoint,
label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.strokeColor,fillColor:dataset.fillColor,highlightFill:dataset.highlightFill||dataset.fillColor,highlightStroke:dataset.highlightStroke||dataset.strokeColor}))},this)},this);this.buildScale(data.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(bar,index,datasetIndex){helpers.extend(bar,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,datasetIndex,
index),y:this.scale.endPoint});bar.save()},this);this.render()},update:function(){this.scale.update();helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])});this.eachBars(function(bar){bar.save()});this.render()},eachBars:function(callback){helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,callback,this,datasetIndex)},this)},getBarsAtEvent:function(e){var barsArray=[],eventPosition=helpers.getRelativePosition(e),
datasetIterator=function(dataset){barsArray.push(dataset.bars[barIndex])},barIndex;for(var datasetIndex=0;datasetIndex<this.datasets.length;datasetIndex++)for(barIndex=0;barIndex<this.datasets[datasetIndex].bars.length;barIndex++)if(this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y)){helpers.each(this.datasets,datasetIterator);return barsArray}return barsArray},buildScale:function(labels){var self=this;var dataTotal=function(){var values=[];self.eachBars(function(bar){values.push(bar.value)});
return values};var scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),
currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?
this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};if(this.options.scaleOverride)helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(scaleOptions)},
addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].bars.push(new this.BarClass({value:value,label:label,datasetLabel:this.datasets[datasetIndex].label,x:this.scale.calculateBarX(this.datasets.length,datasetIndex,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].strokeColor,fillColor:this.datasets[datasetIndex].fillColor}))},
this);this.scale.addXLabel(label);this.update()},removeData:function(){this.scale.removeXLabel();helpers.each(this.datasets,function(dataset){dataset.bars.shift()},this);this.update()},reflow:function(){helpers.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();var ctx=this.chart.ctx;this.scale.draw(easingDecimal);
helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,function(bar,index){if(bar.hasValue()){bar.base=this.scale.endPoint;bar.transition({x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.calculateY(bar.value),width:this.scale.calculateBarWidth(this.datasets.length)},easingDecimal).draw()}},this)},this)}})}).call(this);
(function(){var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};
Chart.Type.extend({name:"Doughnut",defaults:defaultConfig,initialize:function(data){this.segments=[];this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=Chart.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});if(this.options.showTooltips)helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments=evt.type!=="mouseout"?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])});
helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=activeSegment.highlightColor});this.showTooltip(activeSegments)});this.calculateTotal(data);helpers.each(data,function(datapoint,index){if(!datapoint.color)datapoint.color="hsl("+360*index/data.length+", 100%, 50%)";this.addData(datapoint,index,true)},this);this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[];var location=helpers.getRelativePosition(e);helpers.each(this.segments,function(segment){if(segment.inRange(location.x,
location.y))segmentsArray.push(segment)},this);return segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex!==undefined?atIndex:this.segments.length;if(typeof segment.color==="undefined"){segment.color=Chart.defaults.global.segmentColorDefault[index%Chart.defaults.global.segmentColorDefault.length];segment.highlight=Chart.defaults.global.segmentHighlightColorDefaults[index%Chart.defaults.global.segmentHighlightColorDefaults.length]}this.segments.splice(index,0,new this.SegmentArc({value:segment.value,
outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:segment.color,highlightColor:segment.highlight||segment.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:Math.PI*1.5,circumference:this.options.animateRotate?0:this.calculateCircumference(segment.value),label:segment.label}));if(!silent){this.reflow();
this.update()}},calculateCircumference:function(value){if(this.total>0)return Math.PI*2*(value/this.total);else return 0},calculateTotal:function(data){this.total=0;helpers.each(data,function(segment){this.total+=Math.abs(segment.value)},this)},update:function(){this.calculateTotal(this.segments);helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor"])});helpers.each(this.segments,function(segment){segment.save()});this.render()},removeData:function(atIndex){var indexToDelete=
helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1);this.reflow();this.update()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;helpers.each(this.segments,function(segment){segment.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},
draw:function(easeDecimal){var animDecimal=easeDecimal?easeDecimal:1;this.clear();helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.calculateCircumference(segment.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},animDecimal);segment.endAngle=segment.startAngle+segment.circumference;segment.draw();if(index===0)segment.startAngle=Math.PI*1.5;if(index<this.segments.length-1)this.segments[index+1].startAngle=
segment.endAngle},this)}});Chart.types.Doughnut.extend({name:"Pie",defaults:helpers.merge(defaultConfig,{percentageInnerCutout:0})})}).call(this);
(function(){var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,bezierCurve:true,bezierCurveTension:.4,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>',
offsetGridLines:false};Chart.Type.extend({name:"Line",defaults:defaultConfig,initialize:function(data){this.PointClass=Chart.Point.extend({offsetGridLines:this.options.offsetGridLines,strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(mouseX){return Math.pow(mouseX-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];if(this.options.showTooltips)helpers.bindEvents(this,
this.options.tooltipEvents,function(evt){var activePoints=evt.type!=="mouseout"?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor","strokeColor"])});helpers.each(activePoints,function(activePoint){activePoint.fillColor=activePoint.highlightFill;activePoint.strokeColor=activePoint.highlightStroke});this.showTooltip(activePoints)});helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,
pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject);helpers.each(dataset.data,function(dataPoint,index){datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this);this.buildScale(data.labels);
this.eachPoints(function(point,index){helpers.extend(point,{x:this.scale.calculateX(index),y:this.scale.endPoint});point.save()},this)},this);this.render()},update:function(){this.scale.update();helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])});this.eachPoints(function(point){point.save()});this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(e){var pointsArray=
[],eventPosition=helpers.getRelativePosition(e);helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point){if(point.inRange(eventPosition.x,eventPosition.y))pointsArray.push(point)})},this);return pointsArray},buildScale:function(labels){var self=this;var dataTotal=function(){var values=[];self.eachPoints(function(point){values.push(point.value)});return values};var scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,
textColor:this.options.scaleFontColor,offsetGridLines:this.options.offsetGridLines,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},
xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?
0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};if(this.options.scaleOverride)helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new Chart.Scale(scaleOptions)},addData:function(valuesArray,label){helpers.each(valuesArray,
function(value,datasetIndex){this.datasets[datasetIndex].points.push(new this.PointClass({value:value,label:label,datasetLabel:this.datasets[datasetIndex].label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this);this.scale.addXLabel(label);this.update()},removeData:function(){this.scale.removeXLabel();helpers.each(this.datasets,function(dataset){dataset.points.shift()},
this);this.update()},reflow:function(){var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();var ctx=this.chart.ctx;var hasValue=function(item){return item.value!==null},nextPoint=function(point,collection,index){return helpers.findNextWhere(collection,hasValue,index)||point},previousPoint=function(point,collection,index){return helpers.findPreviousWhere(collection,hasValue,index)||
point};if(!this.scale)return;this.scale.draw(easingDecimal);helpers.each(this.datasets,function(dataset){var pointsWithValues=helpers.where(dataset.points,hasValue);helpers.each(dataset.points,function(point,index){if(point.hasValue())point.transition({y:this.scale.calculateY(point.value),x:this.scale.calculateX(index)},easingDecimal)},this);if(this.options.bezierCurve)helpers.each(pointsWithValues,function(point,index){var tension=index>0&&index<pointsWithValues.length-1?this.options.bezierCurveTension:
0;point.controlPoints=helpers.splineCurve(previousPoint(point,pointsWithValues,index),point,nextPoint(point,pointsWithValues,index),tension);if(point.controlPoints.outer.y>this.scale.endPoint)point.controlPoints.outer.y=this.scale.endPoint;else if(point.controlPoints.outer.y<this.scale.startPoint)point.controlPoints.outer.y=this.scale.startPoint;if(point.controlPoints.inner.y>this.scale.endPoint)point.controlPoints.inner.y=this.scale.endPoint;else if(point.controlPoints.inner.y<this.scale.startPoint)point.controlPoints.inner.y=
this.scale.startPoint},this);ctx.lineWidth=this.options.datasetStrokeWidth;ctx.strokeStyle=dataset.strokeColor;ctx.beginPath();helpers.each(pointsWithValues,function(point,index){if(index===0)ctx.moveTo(point.x,point.y);else if(this.options.bezierCurve){var previous=previousPoint(point,pointsWithValues,index);ctx.bezierCurveTo(previous.controlPoints.outer.x,previous.controlPoints.outer.y,point.controlPoints.inner.x,point.controlPoints.inner.y,point.x,point.y)}else ctx.lineTo(point.x,point.y)},this);
if(this.options.datasetStroke)ctx.stroke();if(this.options.datasetFill&&pointsWithValues.length>0){ctx.lineTo(pointsWithValues[pointsWithValues.length-1].x,this.scale.endPoint);ctx.lineTo(pointsWithValues[0].x,this.scale.endPoint);ctx.fillStyle=dataset.fillColor;ctx.closePath();ctx.fill()}helpers.each(pointsWithValues,function(point){point.draw()})},this)}})}).call(this);
(function(){var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:true,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:true,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};
Chart.Type.extend({name:"PolarArea",defaults:defaultConfig,initialize:function(data){this.segments=[];this.SegmentArc=Chart.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,
fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:true,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/
2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:data.length});this.updateScaleRange(data);this.scale.update();helpers.each(data,function(segment,index){this.addData(segment,index,true)},this);if(this.options.showTooltips)helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments=evt.type!=="mouseout"?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])});helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=
activeSegment.highlightColor});this.showTooltip(activeSegments)});this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[];var location=helpers.getRelativePosition(e);helpers.each(this.segments,function(segment){if(segment.inRange(location.x,location.y))segmentsArray.push(segment)},this);return segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex||this.segments.length;this.segments.splice(index,0,new this.SegmentArc({fillColor:segment.color,highlightColor:segment.highlight||
segment.color,label:segment.label,value:segment.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(segment.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:Math.PI*1.5}));if(!silent){this.reflow();this.update()}},removeData:function(atIndex){var indexToDelete=helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1);this.reflow();this.update()},calculateTotal:function(data){this.total=0;helpers.each(data,
function(segment){this.total+=segment.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(datapoints){var valuesArray=[];helpers.each(datapoints,function(segment){valuesArray.push(segment.value)});var scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,
this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes,{size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);helpers.each(this.segments,function(segment){segment.save()});this.reflow();this.render()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/
2});this.updateScaleRange(this.segments);this.scale.update();helpers.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});helpers.each(this.segments,function(segment){segment.update({outerRadius:this.scale.calculateCenterOffset(segment.value)})},this)},draw:function(ease){var easingDecimal=ease||1;this.clear();helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(segment.value)},
easingDecimal);segment.endAngle=segment.startAngle+segment.circumference;if(index===0)segment.startAngle=Math.PI*1.5;if(index<this.segments.length-1)this.segments[index+1].startAngle=segment.endAngle;segment.draw()},this);this.scale.draw()}})}).call(this);
(function(){var root=this,Chart=root.Chart,helpers=Chart.helpers;Chart.Type.extend({name:"Radar",defaults:{scaleShowLine:true,angleShowLineOut:true,scaleShowLabels:false,scaleBeginAtZero:true,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'},
initialize:function(data){this.PointClass=Chart.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(data);if(this.options.showTooltips)helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activePointsCollection=evt.type!=="mouseout"?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor",
"strokeColor"])});helpers.each(activePointsCollection,function(activePoint){activePoint.fillColor=activePoint.highlightFill;activePoint.strokeColor=activePoint.highlightStroke});this.showTooltip(activePointsCollection)});helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject);helpers.each(dataset.data,
function(dataPoint,index){var pointPosition;if(!this.scale.animation)pointPosition=this.scale.getPointPosition(index,this.scale.calculateCenterOffset(dataPoint));datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,x:this.options.animation?this.scale.xCenter:pointPosition.x,y:this.options.animation?this.scale.yCenter:pointPosition.y,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||
dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(evt){var mousePosition=helpers.getRelativePosition(evt),fromCenter=helpers.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},mousePosition);var anglePerIndex=Math.PI*2/this.scale.valuesCount,pointIndex=Math.round((fromCenter.angle-
Math.PI*1.5)/anglePerIndex),activePointsCollection=[];if(pointIndex>=this.scale.valuesCount||pointIndex<0)pointIndex=0;if(fromCenter.distance<=this.scale.drawingArea)helpers.each(this.datasets,function(dataset){activePointsCollection.push(dataset.points[pointIndex])});return activePointsCollection},buildScale:function(data){this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,
fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backgroundColors:this.options.scaleBackgroundColors,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?
this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:data.labels,valuesCount:data.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(data.datasets);
this.scale.buildYLabels()},updateScaleRange:function(datasets){var valuesArray=function(){var totalDataArray=[];helpers.each(datasets,function(dataset){if(dataset.data)totalDataArray=totalDataArray.concat(dataset.data);else helpers.each(dataset.points,function(point){totalDataArray.push(point.value)})});return totalDataArray}();var scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+
this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes)},addData:function(valuesArray,label){this.scale.valuesCount++;helpers.each(valuesArray,function(value,datasetIndex){var pointPosition=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(value));this.datasets[datasetIndex].points.push(new this.PointClass({value:value,
label:label,datasetLabel:this.datasets[datasetIndex].label,x:pointPosition.x,y:pointPosition.y,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this);this.scale.labels.push(label);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();helpers.each(this.datasets,function(dataset){dataset.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(point){point.save()});
this.reflow();this.render()},reflow:function(){helpers.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(ease){var easeDecimal=ease||1,ctx=this.chart.ctx;this.clear();this.scale.draw();helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point,
index){if(point.hasValue())point.transition(this.scale.getPointPosition(index,this.scale.calculateCenterOffset(point.value)),easeDecimal)},this);ctx.lineWidth=this.options.datasetStrokeWidth;ctx.strokeStyle=dataset.strokeColor;ctx.beginPath();helpers.each(dataset.points,function(point,index){if(index===0)ctx.moveTo(point.x,point.y);else ctx.lineTo(point.x,point.y)},this);ctx.closePath();ctx.stroke();ctx.fillStyle=dataset.fillColor;if(this.options.datasetFill)ctx.fill();helpers.each(dataset.points,
function(point){if(point.hasValue())point.draw()})},this)}})}).call(this);(function(){var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'};
Chart.Type.extend({name:"Bar",defaults:defaultConfig,initialize:function(data){var options=this.options;var fullLabels=data.fullLabels;var checked=data.checked;this.ScaleClass=Chart.Scale.extend({offsetGridLines:true,calculateBarX:function(datasetCount,datasetIndex,barIndex){var xWidth=this.calculateBaseWidth(),xAbsolute=this.calculateX(barIndex)-xWidth/2,barWidth=this.calculateBarWidth(datasetCount),tempWidth=options.barMaxWidth>0?xWidth:barWidth;return xAbsolute+barWidth*datasetIndex+datasetIndex*
options.barDatasetSpacing+tempWidth/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*options.barValueSpacing},calculateBarWidth:function(datasetCount){var baseWidth=this.calculateBaseWidth()-(datasetCount-1)*options.barDatasetSpacing,tempWidth=baseWidth/datasetCount;return options.barMaxWidth>0&&tempWidth>options.barMaxWidth?options.barMaxWidth:tempWidth}});this.datasets=[];if(this.options.showTooltips)helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeBars=
evt.type!=="mouseout"?this.getBarsAtEvent(evt):[];if(activeBars&&activeBars.length)jQuery("#"+this.chart.canvas.id).css("cursor","pointer");else jQuery("#"+this.chart.canvas.id).css("cursor","default");this.eachBars(function(bar){bar.restore(["fillColor","strokeColor"])});helpers.each(activeBars,function(activeBar){activeBar.fillColor=activeBar.highlightFill;activeBar.strokeColor=activeBar.highlightStroke});this.showTooltip(activeBars)});this.BarClass=Chart.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,
showStroke:this.options.barShowStroke,ctx:this.chart.ctx});helpers.each(data.datasets,function(dataset,datasetIndex){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,bars:[]};this.datasets.push(datasetObject);helpers.each(dataset.data,function(dataPoint,index){datasetObject.bars.push(new this.BarClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,fullLabel:fullLabels[index],isChecked:checked[index],strokeColor:checked[index]?
dataset.checkedStrokeColor:dataset.strokeColor,fillColor:checked[index]?dataset.checkedFillColor:dataset.fillColor,highlightFill:checked[index]?dataset.checkedHighlightFill:dataset.highlightFill,highlightStroke:checked[index]?dataset.checkedHighlightStroke:dataset.highlightStroke}))},this)},this);this.buildScale(data.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(bar,index,datasetIndex){helpers.extend(bar,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,
datasetIndex,index),y:this.scale.endPoint});bar.save()},this);this.render()},update:function(){this.scale.update();helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])});this.eachBars(function(bar){bar.save()});this.render()},eachBars:function(callback){helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,callback,this,datasetIndex)},this)},getBarsAtEvent:function(e){var barsArray=[],eventPosition=helpers.getRelativePosition(e),
datasetIterator=function(dataset){barsArray.push(dataset.bars[barIndex])},barIndex;for(var datasetIndex=0;datasetIndex<this.datasets.length;datasetIndex++)for(barIndex=0;barIndex<this.datasets[datasetIndex].bars.length;barIndex++)if(this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y)){helpers.each(this.datasets,datasetIterator);return barsArray}return barsArray},buildScale:function(labels){var self=this;var dataTotal=function(){var values=[];self.eachBars(function(bar){values.push(bar.value)});
return values};var scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),
currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?
this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};if(this.options.scaleOverride)helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(scaleOptions)},
addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].bars.push(new this.BarClass({value:value,label:label,datasetLabel:this.datasets[datasetIndex].label,x:this.scale.calculateBarX(this.datasets.length,datasetIndex,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].strokeColor,fillColor:this.datasets[datasetIndex].fillColor}))},
this);this.scale.addXLabel(label);this.update()},removeData:function(){this.scale.removeXLabel();helpers.each(this.datasets,function(dataset){dataset.bars.shift()},this);this.update()},reflow:function(){helpers.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();var ctx=this.chart.ctx;this.scale.draw(easingDecimal);
helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,function(bar,index){if(bar.hasValue()){bar.base=this.scale.endPoint;bar.transition({x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.calculateY(bar.value),width:this.scale.calculateBarWidth(this.datasets.length)},easingDecimal).draw()}},this)},this)}})}).call(this);GIAPI.GINode=function(){var EXTRA_SMALL_SIZE=48;var SMALL_SIZE=96;var MEDIUM_SIZE=144;var LARGE_SIZE=288;var DEFAULT_DATA_SIZE=96;var random=GIAPI.random();var resultSet;var expandCallback;var giNode={};var report=arguments[0];var dabNode=arguments[1];var servicePath=arguments[2];var openSearchPath=arguments[3];if(!report)report={id:""+random,type:"simple",title:"Simple node "+random};else{if(report.topic)report.topic=report.topic.distinctValues();if(report.geossCategory)report.geossCategory=report.geossCategory.distinctValues();
if(report.keyword)report.keyword=report.keyword.distinctValues()}giNode._parent=null;giNode._id=report.id;giNode._title=report.title;giNode.uiId=GIAPI.random();giNode.expand=function(onResponse,pageSize,viewId){if(report.type==="simple")onResponse.apply(giNode,[GIAPI.Page([])],GIAPI.emptyResultSet());else{var start=1;if(arguments.length===4)start=arguments[3];else resultSet=null;var options={};options.start=start;options.pageSize=pageSize;var query=GIAPI.query(dabEndpoint(),null,options,report.id,
null,null,"expand_"+GIAPI.random(),viewId,servicePath,openSearchPath);expandCallback=onResponse;jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){resultSet=data.resultSet;if(resultSet.error){GIAPI.logger.log("expand error: "+resultSet.error,"error");onResponse.apply(dabNode,[GIAPI.Page(),resultSet]);return}var nodes=[];for(var i=0;i<data.reports.length;i++){var report=data.reports[i];var n;if(report.service&&report.service.source===true)n=GIAPI.DABSource(report,
giNode);else n=GIAPI.GINode(report,dabNode,servicePath,openSearchPath);n._parent=giNode;nodes.push(n)}nodes.sort(function(s1,s2){var t1=s1._title;var t2=s2._title;return t1.localeCompare(t2)});resultSet.page=GIAPI.Page(nodes);onResponse.apply(giNode,[resultSet])},complete:function(jqXHR,status){GIAPI.logger.log("expand complete status: "+status)},error:function(jqXHR,error,exception){error=error+(exception.message?", exception -> "+exception.message:"");GIAPI.logger.log("expand error: "+error,"error");
onResponse.apply(giNode,[GIAPI.emptyResultSet("Error occurred: "+error)])}})}};giNode.expandNext=function(onResponse,execute){if(report.type==="simple")return false;if(!resultSet)throw"node not expanded";var size=resultSet.size;var start=resultSet.start;var pageSize=resultSet.pageSize;if(start+pageSize>size)return false;if(execute){var callback=onResponse?onResponse:expandCallback;giNode.expand(expandCallback,null,pageSize,start+pageSize)}return true};giNode.accessOptions=function(onResponse){if(!giNode.isAccessible())return;
var endpoint=dabEndpoint();if(!endpoint.endsWith("/"))endpoint+="/";var optionsLink=endpoint+servicePath+"/api-rest/datasets/"+giNode.report().id+"/content/options";jQuery.ajax({type:"GET",url:optionsLink,dataType:"json",success:function(data,status,jqXHR){var createTemporalSubset=function(options){if(options.temporalBegin||options.temporalEnd){options.temporalSubset={};if(options.temporalBegin){options.temporalSubset.from=options.temporalBegin;delete options.temporalBegin}if(options.temporalEnd){options.temporalSubset.to=
options.temporalEnd;delete options.temporalEnd}}};var createSpatialSubset=function(options){if(options.subset){options.spatialSubset={};options.spatialSubset.south=parseFloat(parseFloat(options.subset.split(",")[0]).toFixed(3));options.spatialSubset.west=parseFloat(parseFloat(options.subset.split(",")[1]).toFixed(3));options.spatialSubset.north=parseFloat(parseFloat(options.subset.split(",")[2]).toFixed(3));options.spatialSubset.east=parseFloat(parseFloat(options.subset.split(",")[3]).toFixed(3));
if(options.subsetCRS){options.spatialSubset.CRS=options.subsetCRS;delete options.subsetCRS}delete options.subset}};if(data.defaultOption){createTemporalSubset(data.defaultOption);createSpatialSubset(data.defaultOption)}if(data.reducedOption){createTemporalSubset(data.reducedOption);createSpatialSubset(data.reducedOption)}for(var index in data.availableOptions){createTemporalSubset(data.availableOptions[index]);createSpatialSubset(data.availableOptions[index])}onResponse.apply(giNode,[data])},complete:function(jqXHR,
status){},error:function(jqXHR,msg,exception){var error=msg+(exception.message?", exception -> "+exception.message:"");GIAPI.logger.log("accessoptions error: "+error,"error");onResponse.apply(giNode,[null,error])}})};giNode.accessLink=function(onResponse,option){if(!giNode.isAccessible())return;var createLink=function(option){var endpoint=dabEndpoint();if(!endpoint.endsWith("/"))endpoint+="/";var contentLink=endpoint+servicePath+"/api-rest/datasets/"+giNode.report().id+"/content?";contentLink+="format="+
option.format+"&";if(option.spatialSubset)contentLink+="subset="+option.spatialSubset.south+","+option.spatialSubset.west+","+option.spatialSubset.north+","+option.spatialSubset.east+"&";contentLink+="subsetCRS=EPSG:4326&";if(option.temporalSubset&&option.temporalSubset.from)contentLink+="temporalBegin="+option.temporalSubset.from+"&";if(option.temporalSubset&&option.temporalSubset.to)contentLink+="temporalEnd="+option.temporalSubset.to+"&";var size=null;if(option.firstAxisSize&&option.secondAxisSize){size=
option.firstAxisSize.value+","+option.secondAxisSize.value;contentLink+="size="+size+"&"}contentLink+="CRS="+option.CRS;return contentLink};if(option)onResponse.apply(giNode,[createLink(option)]);else giNode.accessOptions(function(options,error){if(!error)onResponse.apply(giNode,[createLink(options.reducedOption)]);else onResponse.apply(giNode,[null,error])})},giNode.overview=function(id,onResponse,options){var overview=report.overview;if(!options)options={};if(!options.size)options.size="medium";
if(!options.index)options.index=0;if(overview&&(options.index<0||options.index>overview.length-1))throw Error("index out of bounds, must be >= 0 and <= "+(overview.length-1));if(!jQuery("#"+id).length===0)throw Error("element not found");var size=null;switch(options.size){case "extra small":size=EXTRA_SMALL_SIZE;break;case "small":size=SMALL_SIZE;break;case "large":size=LARGE_SIZE;break;case "original":size=null;break;case "medium":default:size=MEDIUM_SIZE;break}if(overview)overviewLink=overview[options.index];
else if(options.force)overviewLink="http://api.geodab.eu/docs/assets/img/no_overview_576.png";else return false;var ovrImg=new Image;var backgroundImg=new Image;if(!options.backgroundURL){var onLoad=function(event){onLoadImage(ovrImg,id,size,onResponse,giNode);if(this.error){onResponse.apply(giNode,["error","Image loading aborted"],ovrImg);return}onResponse.apply(giNode,["success","Image loaded",ovrImg])};ovrImg.onload=onLoad}else{ovrImg.overviewLink=overviewLink;var onLoad=function(event){onLoadImage(backgroundImg,
id,size,onResponse,giNode);ovrImg.src=ovrImg.overviewLink;ovrImg.onload=function(event){onLoadImage(ovrImg,id,size,onResponse,giNode);jQuery(ovrImg).css("position","relative");jQuery(ovrImg).css("top","-15px");jQuery(ovrImg).css("margin-top","-"+ovrImg.height+"px");onResponse.apply(giNode,["success","Image loaded",ovrImg])}};backgroundImg.onload=onLoad}var onError=function(event){if(options.force)try{ovrImg.src="http://api.geodab.eu/docs/assets/img/no_overview_576.png"}catch(e){GIAPI.logger.log("unable to load no preview image: "+
e.message,"error");onResponse.apply(giNode,["error","Unable to load no preview image: "+e.message],null);ovrImg.onerror=null;return}ovrImg.error=true;GIAPI.logger.log("image loading error");onResponse.apply(giNode,["error","Unable to load image, error occurred"],ovrImg)};ovrImg.onerror=onError;var onAbort=function(event){GIAPI.logger.log("image loading aborted");onResponse.apply(giNode,["error","Image loading aborted"],null)};ovrImg.onabort=onAbort;try{if(!options.backgroundURL)ovrImg.src=overviewLink;
else backgroundImg.src=options.backgroundURL}catch(e){GIAPI.logger.log("unable to load image: "+e.message,"error");onResponse.apply(giNode,["error","Unable to load image: "+e.message],null)}return overview};var onLoadImage=function(img,id,size,onResponse,giNode){if(size)if(img.width>img.height){img.height=img.height/img.width*size;img.width=size}else if(img.height>img.width){img.width=img.width/img.height*size;img.height=size}else{img.width=size;img.height=size}jQuery("#"+id).attr("width",img.width+
"px");jQuery("#"+id).attr("height",img.height+"px");jQuery("#"+id).css("width",img.width+"px");jQuery("#"+id).css("height",img.height+"px");jQuery("#"+id).append(img)};giNode.olWMS_Layer=function(initOptions){return ol_Layer("urn:ogc:serviceType:WebMapService:",initOptions)};giNode.googleImageMapType=function(map,initOptions){var online=report.online;var out=[];if(!initOptions)initOptions={};if(!initOptions.tileSize)initOptions.tileSize=new google.maps.Size(256,256);if(online)for(var i=0;i<online.length;i++){var on=
online[i];var protocol=on.protocol;var url=on.url;if(url)url=on.url.endsWith("?")?url:url+"?";if(protocol&&url&&protocol.toLowerCase().indexOf("axe")===-1&&url.toLowerCase().indexOf("axe")===-1&&protocol.toLowerCase().indexOf("urn:ogc:servicetype:webmapservice:")!=-1){var name=on.name;if(url.indexOf("http://svs.gsfc.nasa.gov/")==0)return[];var version=protocol.toLowerCase().replace("urn:ogc:servicetype:webmapservice:","").replace(":http","");if(version!=="1.3.0"&&version!=="1.1.1")version="1.3.0";
var code=version==="1.3.0"?"CRS":"SRS";out.push(new google.maps.ImageMapType({getTileUrl:function(coord,zoom){var proj=map.getProjection();var zfactor=Math.pow(2,zoom);coord=getNormalizedCoord(coord,zoom);if(!coord)return null;var bbox;var crs;if(true){crs="EPSG:3857";var minX=-2.002637639E7;var minY=-2.00489661E7;var maxX=2.002637639E7;var maxY=2.00489661E7;var yExtent=maxY-minY;var xExtent=maxX-minX;var tileSpanX=xExtent/zfactor;var tileSpanY=yExtent/zfactor;var minx=minX+coord.x*tileSpanX;var miny=
maxY-(coord.y+1)*tileSpanY;var maxy=maxY-coord.y*tileSpanY;var maxx=minX+(coord.x+1)*tileSpanX;var upperLeftPoint=new google.maps.Point(minx,maxy);var lowerRightPoint=new google.maps.Point(maxx,miny);bbox=minx+","+miny+","+maxx+","+maxy}else{crs="EPSG:4326";var upperLeftPoint=new google.maps.Point(coord.x*256/zfactor,(coord.y+1)*256/zfactor);var lowerRightPoint=new google.maps.Point((coord.x+1)*256/zfactor,coord.y*256/zfactor);var upperLeft=proj.fromPointToLatLng(upperLeftPoint);var lowerRight=proj.fromPointToLatLng(lowerRightPoint);
var deltaX=.0013;var deltaY=5.8E-4;var minY=Math.min(upperLeft.lat(),lowerRight.lat());var minX=Math.min(upperLeft.lng(),lowerRight.lng());var maxY=Math.max(upperLeft.lat(),lowerRight.lat());var maxX=Math.max(upperLeft.lng(),lowerRight.lng());var bbox_1=minX+deltaX+","+(minY+deltaY)+","+(maxX+deltaX)+","+(maxY+deltaY);var bbox_3=minY+deltaY+","+(minX+deltaX)+","+(maxY+deltaY)+","+(maxX+deltaX);bbox=version==="1.3.0"?bbox_3:bbox_1}var wms=this._url;if(!wms.endsWith("?")&&wms.indexOf("?")===-1)wms+=
"?";wms+="REQUEST=GetMap";wms+="&SERVICE=WMS";wms+="&VERSION="+version;wms+="&LAYERS="+name;wms+="&FORMAT=image/png";wms+="&BGCOLOR=0xFFFFFF";wms+="&TRANSPARENT=TRUE";wms+="&"+this._code+"="+crs;wms+="&BBOX="+bbox;wms+="&WIDTH=256";wms+="&HEIGHT=256";wms+="&STYLES=";return wms},_url:on.url,_code:code,name:name,tileSize:initOptions.tileSize,isPng:true}))}}return out};var getNormalizedCoord=function(coord,zoom){var y=coord.y;var x=coord.x;var tileRange=1<<zoom;if(y<0||y>=tileRange)return null;if(x<
0||x>=tileRange)x=(x%tileRange+tileRange)%tileRange;return{x:x,y:y}};giNode.olTiles_Layer=function(initOptions){return ol_Layer("urn:essi:serviceType:TiledMapService:",initOptions)};giNode.has_olVector_Layer=function(){var online=report.online;var out=[];var found=false;if(online)for(var i=0;i<online.length;i++){var on=online[i];var name=on.name;var url=on.url;var protocol=on.protocol;if(protocol&&protocol.indexOf("urn:essi:serviceType:Trajectory")!=-1)if(name)out.push(name);else out.push("Unknown Vector Name")}return out};
giNode.olVector_Layer=function(onResponse){var online=report.online;var out=[];var found=false;if(online)for(var i=0;i<online.length;i++){var on=online[i];var name=on.name;var url=on.url;var protocol=on.protocol;if(protocol&&protocol.indexOf("urn:essi:serviceType:Trajectory")!=-1){found=true;var cBack=function(response){response.defaultOptions.rasterFormat="GML 3.1.1";var onDataLinkResponse=function(result,error){if(error){alert(error+": "+JSON.stringify(result));return}var vector=new OpenLayers.Layer.Vector(name,
{protocol:new OpenLayers.Protocol.Script({url:result,format:new OpenLayers.Format.GML,parseFeatures:function(data){return this.format.read(data.results)}}),strategies:[new OpenLayers.Strategy.Fixed]});out.push(vector);onResponse.apply(giNode,[out])};giNode.accessLink(onDataLinkResponse,response.defaultOptions)};giNode.accessOptions(cBack)}}if(found===false)onResponse.apply(giNode,[[]])};giNode.directAccessLinks=function(){var out=[];if(report.online)for(var i=0;i<report.online.length;i++){var onlineInfo=
report.online[i];if(onlineInfo.accessType&&(onlineInfo.accessType==="direct"||onlineInfo.accessType==="simple")&&onlineInfo.url)out.push(onlineInfo.url)}return out};giNode.isDirectlyAccessible=function(){return giNode.directAccessLinks().length>0};giNode.isAccessible=function(){return axeOnline().length>0};giNode.report=function(newReport){if(newReport)report=newReport;return report};giNode.ol3WMS_Layer=function(opt_options){return ol3_Layer("urn:ogc:serviceType:WebMapService:",opt_options)};giNode.WFS_Service=
function(opt_options){return wfs_Service("urn:ogc:serviceType:WebFeatureService:",opt_options)};var ol_Layer=function(protocol,initOptions){var online=report.online;var out=[];if(online)for(var i=0;i<online.length;i++){var on=online[i];var prot=on.protocol;if(prot&&prot.indexOf(protocol)!=-1){var name=on.name;var url=on.url;var getMapParams={layers:name,transparent:"TRUE"};if(initOptions&&initOptions.params)for(key in initOptions.params)getMapParams[key]=initOptions.params[key];if(initOptions&&initOptions.options)out.push(new OpenLayers.Layer.WMS(name,
url,getMapParams,initOptions.options));else out.push(new OpenLayers.Layer.WMS(name,url,getMapParams))}}return out};var ol3_Layer=function(protocol,opt_options){var online=report.online;var out=[];if(online)for(var i=0;i<online.length;i++){var on=online[i];var prot=on.protocol;if(prot&&prot.indexOf(protocol)!=-1){var name=on.name;var url=on.url;var getMapParams={"LAYERS":name,"TRANSPARENT":"true"};if(opt_options&&opt_options.params)for(key in opt_options.params)getMapParams[key]=opt_options.params[key];
if(opt_options&&opt_options.attributions)out.push(new ol.layer.Tile({name:name,title:name,source:new ol.source.TileWMS({url:url,ratio:1,params:getMapParams,attributions:opt_options.attributions})}));else out.push(new ol.layer.Tile({name:name,title:name,source:new ol.source.TileWMS({url:url,ratio:1,params:getMapParams})}))}}return out};var wfs_Service=function(protocol,opt_options){var online=report.online;var out=[];if(online)for(var i=0;i<online.length;i++){var on=online[i];var prot=on.protocol;
if(prot&&prot.indexOf(protocol)!=-1)out.push(on)}return out};var axeOnline=function(){var out=[];var names={};if(report.online)for(var i=0;i<report.online.length;i++){var onlineInfo=report.online[i];if(onlineInfo.protocol&&onlineInfo.protocol.toLowerCase()==="gi-axe"&&onlineInfo.name&&!names[onlineInfo.name]){names[onlineInfo.name]=onlineInfo.name;out.push(onlineInfo)}}return out};var dabEndpoint=function(){return typeof dabNode==="string"?dabNode:dabNode.endpoint()};return giNode};GIAPI.DAB=function(dabEndpoint,viewId,servicePath,cswPath,openSearchPath){var report={id:"ROOT",type:"composed",title:"DAB"};if(!servicePath)servicePath="services";if(!cswPath)cswPath="cswiso";if(!openSearchPath)openSearchPath="opensearch";var dabNode=GIAPI.GINode(report,dabEndpoint,servicePath,openSearchPath);var timer;var sourcesCount;var view;GIAPI.tfHelper={};GIAPI.tfHelper.checkedItems=null;var pubSubManager=GIAPI.PubSubManager(dabNode);dabNode._paginator=function(onResponse,constraints,options,
onStatus){var queryID=GIAPI.random();var sources=dabNode.findSources(constraints);var query=GIAPI.query(dabEndpoint,constraints,options,null,null,sources,queryID,viewId,servicePath,openSearchPath);var paginator=arguments[4];var extension=paginator._resultSet.extension;var extended=options&&options.extension&&options.extension.relation&&(options.extension.keyword||options.extension.concepts);if(onStatus)timer=createTimer(onStatus,extended,queryID);jQuery.ajax({type:"GET",url:query,crossDomain:true,
dataType:"jsonp",success:function(data,status,jqXHR){var nodes=[];for(var i=0;i<data.reports.length;i++){var report=data.reports[i];report=JSON.parse(JSON.stringify(report));if(report.semantic)delete report.semantic;var n=GIAPI.GINode(report,dabNode,servicePath);nodes.push(n)}paginator._page=GIAPI.Page(nodes,paginator.pageSize);data.resultSet.paginator=paginator;paginator._resultSet=data.resultSet;if(extension)data.resultSet.extension=extension;createRefiners(data.termFrequency,onResponse,constraints,
data.resultSet,options,onStatus,dabNode,paginator);var response=[data.resultSet];response._origin="paginator";onResponse.apply(dabNode,[response]);if(timer)timer.stop()},complete:function(jqXHR,status){GIAPI.logger.log("_paginator complete status: "+status);if(timer)timer.stop()},error:function(jqXHR,msg,exception){error(msg,exception,onResponse)}})};dabNode.view=function(action,constraints){switch(action){case "enable":view=constraints;break;case "disable":view=null;break}return view};dabNode.discover=
function(onResponse,constraints,options,onStatus){var con=isConstraints(constraints)||isConstraints(options)||isConstraints(onStatus)||{};if(view)con=GIAPI.mergeConstraints(con,view);var opt=isOptions(constraints)||isOptions(options)||isOptions(onStatus)||{};var ext=opt&&opt.extension?opt.extension:null;if(ext&&ext.relation&&(!ext.keyword&&!ext.concepts))throw"Unable to expand discover, only relation selected. Please select keyword or concepts";if(ext&&!ext.relation&&(ext.keyword||ext.concepts)){var msg=
ext.keyword?"keyword selected":"concepts selected";throw"Unable to expand discover, only "+msg+". Please select a relation";}if(isTermFrequencyQuery(con)){opt.start=1;arguments[2].start=1}else GIAPI.tfHelper.checkedItems=null;var queryID=GIAPI.random();var sources=dabNode.findSources(con);var extended=opt&&opt.extension&&opt.extension.relation&&(opt.extension.keyword||opt.extension.concepts);if(extended&&opt.termFrequency)delete opt.termFrequency;var query=GIAPI.query(dabEndpoint,con,opt,null,null,
sources,queryID,viewId,servicePath,openSearchPath);var ons=isOnStatus(constraints)||isOnStatus(options)||isOnStatus(onStatus);if(ons)timer=createTimer(ons,extended,queryID);var discoverArgs=[];discoverArgs[1]=con;discoverArgs[2]=opt;discoverArgs[3]=ons;discoverArgs[4]=dabNode;var timeo=opt&&opt.timeout?opt.timeout:0;jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",timeout:timeo,success:function(data,status,jqXHR){if(data.resultSet&&data.resultSet.error){GIAPI.logger.log("discover error: "+
data.resultSet.error,"error");var response=[data.resultSet];response.error=data.resultSet.error;delete data.resultSet.error;onResponse.apply(dabNode,[response]);return}var response=[];response._origin="dab";if(discoverArgs[2]&&discoverArgs[2].extension&&data.reports.length>0){var nodesMap={};var width=0;for(var i=0;i<data.reports.length;i++){var report=data.reports[i];report=JSON.parse(JSON.stringify(report));var matchKeyword=getMatchKeyword(report.semantic.matchKeyword);var val=nodesMap[matchKeyword];
if(!val&&notIn(nodesMap,matchKeyword)){val=[];nodesMap[matchKeyword]=val;width++}if(val)val.push(GIAPI.GINode(report,dabNode,servicePath))}for(var matchKeyword in nodesMap){var nodes=nodesMap[matchKeyword];var sem=nodes[0].report().semantic;delete nodes[0].report().semantic;var args=GIAPI.clone(discoverArgs);args.length=discoverArgs.length;args.callee=discoverArgs.callee;var split=matchKeyword.split(",");if(split.length===1)args[1].what=matchKeyword;else{var w="";for(var k=0;k<split.length;k++){w+=
split[k].trim();if(k<split.length-1)w+=" OR "}args[1].what=w}args[1].subject=null;args[1].relation=null;args[2].extension=null;var resSet={};resSet.size=sem.matchCount;resSet.pageSize=parseInt(data.resultSet.pageSize);resSet.start=1;resSet.pageCount=pageCount(resSet.size,resSet.pageSize);resSet.pageIndex=parseInt(data.resultSet.pageIndex);resSet.extension={};resSet.extension.size=data.resultSet.size;resSet.extension.resultSetIndex=response.length;resSet.extension.label=matchKeyword;resSet.extension.uri=
sem.term||"none";resSet.extension.scheme=sem.scheme||"none";resSet.extension.language=sem.label&&sem.label.language?sem.label.language:"none";resSet.extension.width=width;var paginator=GIAPI.Paginator(args);paginator._page=GIAPI.Page(nodes,paginator.pageSize);paginator._resultSet=resSet;resSet.paginator=paginator;response.push(resSet)}}else{var nodes=[];for(var i=0;i<data.reports.length;i++){var report=data.reports[i];report=JSON.parse(JSON.stringify(report));nodes.push(GIAPI.GINode(report,dabNode,
servicePath))}var paginator=GIAPI.Paginator(discoverArgs);paginator._page=GIAPI.Page(nodes,paginator.pageSize);data.resultSet.paginator=paginator;data.resultSet.paginator._resultSet=data.resultSet;createRefiners(data.termFrequency,onResponse,con,data.resultSet,options,onStatus,dabNode,paginator);response.push(data.resultSet)}onResponse.apply(dabNode,[response]);if(timer)timer.stop()},complete:function(jqXHR,status){GIAPI.logger.log("discover complete status: "+status);if(timer)timer.stop()},error:function(jqXHR,
msg,exception){error(msg,exception,onResponse)}})};dabNode.find=function(id,onResponse){var query=GIAPI.query(dabEndpoint,null,null,null,id,null,null,null,servicePath,openSearchPath);jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){if(data.resultSet&&data.resultSet.error){GIAPI.logger.log("node error: "+data.resultSet.error,"error");onResponse.apply(dabNode,[null,"Error occurred:"+data.resultSet.error]);return}var node=null;if(data.reports.length){var report=
data.reports[0];node=GIAPI.GINode(report,dabNode,servicePath)}onResponse.apply(dabNode,[node])},complete:function(jqXHR,status){GIAPI.logger.log("node complete status: "+status)},error:function(jqXHR,msg,exception){msg=msg+(exception.message?", exception -> "+exception.message:"");GIAPI.logger.log("node error: "+msg,"error");onResponse.apply(dabNode,[null,"Error occurred: "+msg])}})};dabNode.sources=function(onResponse,viewId){dabNode.expand(function(resultSet){var sources=[];if(!resultSet.error){var page=
resultSet.page;var nodes=page.nodes();sourcesCount=nodes.length;dabNode._includedSources=[];for(var i=0;i<nodes.length;i++){var curNode=nodes[i];var report=curNode.report();var source=GIAPI.DABSource(report,dabNode);sources.push(source);dabNode._includedSources.push(report.id)}onResponse.apply(dabNode,[sources])}else onResponse.apply(dabNode,[sources,resultSet.error])},500,viewId)};dabNode.concept=function(keyword,onResponse,options){var query=GIAPI.concept(dabEndpoint,keyword,"",[],options,servicePath);
jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){if(data.resultSet&&data.resultSet.error){GIAPI.logger.log("extend concept error: "+data.resultSet.error,"error");onResponse.apply(dabNode,[[],"Error occurred:"+data.resultSet.error]);return}var con=data.concept;var concepts=[];for(var i=0;i<con.length;i++){var report=con[i];var concept=GIAPI.Concept(dabEndpoint,report);concepts.push(concept)}onResponse.apply(dabNode,[concepts])},complete:function(jqXHR,
status){GIAPI.logger.log("concept complete status: "+status)},error:function(jqXHR,msg,exception){msg=msg+(exception.message?", exception -> "+exception.message:"");GIAPI.logger.log("concept error: "+msg,"error");onResponse.apply(dabNode,[[],"Error occurred: "+msg])}})};dabNode.pubSubManager=function(){return pubSubManager};dabNode.endpoint=function(){return dabEndpoint};dabNode.servicePath=function(){return servicePath};dabNode.cswPath=function(){return cswPath};dabNode.openSearchPath=function(){return openSearchPath};
var createRefiners=function(termFrequency,onResponse,constraints,resultSet,options,onStatus,dabNode,paginator){var resetRefiner=!onResponse._origin;resultSet.refiner=GIAPI.Refiner(dabNode,constraints,options,onStatus,paginator,resetRefiner);if(termFrequency){var resetTf=!onResponse._origin||onResponse._origin==="refiner";resultSet.termFrequency=GIAPI.TermFrequency(dabNode,constraints,options,onStatus,onResponse,termFrequency,resetTf)}onResponse._origin=null};var createTimer=function(onStatus,extended,
queryID){var partialFunct=function(timerCallback,onStatus,queryID){return function(){return timerCallback(onStatus,extended,queryID)}};var timer=jQuery.timer(partialFunct(timerCallback,onStatus,queryID));timer.set({time:1E3,autostart:true});return timer};var timerCallback=function(onStatus,extended,queryID){var query=GIAPI.status(dabEndpoint,extended,queryID,servicePath);jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){var statusArray=[];var dabStatus;
for(var i=0;i<data.discoverStatus.length;i++){var status=data.discoverStatus[i];var s=GIAPI.SourceStatus(status);if(s.title()==="DAB")dabStatus=s;statusArray.push(s)}onStatus.apply(this,[statusArray]);if(dabStatus&&dabStatus.progress()===100)timer.stop()},complete:function(jqXHR,status){},error:function(jqXHR,msg,exception){onStatus.apply(this,[]);timer.stop()}})};var pageCount=function(matchCount,pageSize){var ct=parseInt(matchCount);var ps=parseInt(pageSize);return parseInt(ct<ps?"1":Math.ceil(ct/
ps))};var error=function(msg,exception,onResponse){msg=msg+(exception.message?", exception -> "+exception.message:"");GIAPI.logger.log("error occurred: "+msg,"error");if(timer)timer.stop();var paginator=GIAPI.Paginator();paginator._resultSet=GIAPI.emptyResultSet(msg);paginator._page=GIAPI.Page([]);onResponse.apply(dabNode,[[paginator]])};var isOptions=function(object){return object&&(object.start||object.pageSize||object.extension||object.termFrequency||object.searchFields||object.spatialRelation)?
object:null};var isConstraints=function(object){return object&&(object.where||object.when||object.what||object.who||object.keyword||object.format||object.protocol||object.sources||object.source||object.from||object.until||object.kvp||object.platformId||object.instrumentId||object.origOrgId||object.attributeId||object.instrumentTitle||object.organisationName||object.platformTitle||object.attributeTitle)?object:null};var isOnStatus=function(object){return object&&typeof object==="function"?object:null};
var getMatchKeyword=function(object){var index=object.indexOf("----")+4;return object.substring(index,object.length)};var notIn=function(map,target){for(var key in map)if(key.toLowerCase()===target.toLowerCase())return false;return true};var isTermFrequencyQuery=function(constraints){return constraints&&(constraints.format||constraints.keyword||constraints.source||constraints.protocol||constraints.platformId||constraints.instrumentId||constraints.origOrgId||constraints.attributeId||constraints.score||
constraints.instrumentTitle||constraints.platformTitle||constraints.organisationName||constraints.attributeTitle)};dabNode.findSources=function(constraints){var sources=sourcesCount&&sourcesCount===dabNode._includedSources.length?null:dabNode._includedSources;if(constraints&&constraints.source)sources=constraints.source;return sources};return dabNode};GIAPI.SourceStatus=function(status){return{id:function(){return status.id},title:function(){return status.title},progress:function(){return parseInt(status.progress)},message:function(){return status.message},phase:function(dataURL){if(dataURL)switch(status.phase){case "INIT":return this.INIT_DATA_URL;case "DISTRIBUTION":return this.DISTRIBUTION_DATA_URL;case "VALIDATION":return this.VALIDATION_DATA_URL;case "DECODING_REQUEST":return this.DECODING_REQUEST_DATA_URL;case "NETWORK_WAITING":return this.NETWORK_WAITING_DATA_URL;
case "DECODING_RESPONSE":return this.DECODING_RESPONSE_DATA_URL;case "JOIN":return this.JOIN_DATA_URL;case "PROCESSING":return this.PROCESSING_DATA_URL;case "COMPLETED":return this.COMPLETED_DATA_URL;case "ERROR":return this.ERROR_DATA_URL;case "TIMEOUT":return this.TIMEOUT_DATA_URL}else return status.phase},INIT_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADKUlEQVQ4T21TW0gUURj+zszszM7OurvOupar5m4rrZZam21WFoViFBQ9BN2oMJIosBChQopKeunNhx6KiIQigi4PvkhFdyGDoqCLBLJpdHHV3JtuOe7OTGemFKEGPv5z+b/vnPPP9xP856s4UB0o9gXqJpi0j2MJES1ifCQSffrqfM9Lmq7PppDZk+rDdYFAme8sxzM7oWjgRQFE16FaNaiiDk7lXvz8nG69dfRq7zRvRqDh9NZl3kLPAyYNp9sjwyZLIBzd5mgqCyhZBUPDUVhcApQfmUPX9l64aIiYAsGm5f4loco3OWnBWRAoAHgClagYy8SRVJNIqCnEtDh+YRKZEQU1vjBG+5Ibu9tu3DUF1p7ZdLWAce8pDQbMEyem0ljpDWNZUQgsy+JjvB+XI9fQm6IlyABSworykoVfunZc95M5e4L+ed7CT7XF1bDl2RFNRNFYtRP5cj4YhoHFYjFhjFt7T+DZEH2+oiOf8YD9zm4jlUdW7RM14cr6mnWIxAYRkiuwoiQMQgisVitEUTSjgeHJUWzu2gE9q4NVGMgWz0VS09bQLmr8qQpfEB+H+7ElsAF5nGwSjZMlSYLD4TCjMd/bfRCR+AD0KcBpz+0h4eP17XaIp1xSDlKZcazODcPN5cJms8Fut5tEA4Ygz/NofnQMA8nPQBZUWO4hVS1rWtiE2iHn50KnBfSzRShzlM4QDaFpcjI7juanxwCNVn5Sx1zZe4nM2bVgvtvmisicA0Ri8G30G5oqdkO0/Hm/AUEQzHjhbSdej70FVJ2uichj8prM31jZsvqJ8im1Vi52o38kAqeYgw3z67HIEzSvHcsmcP/rE7yL9ZlG1tIq5gaLku9PPveYAt79i0OyVXqsDKacMS5JvUCoCw0H0m3qQmLEv57VMxpcXjf4jLC9r+PFzRkrLzq8olFX9M7RgSGoFg1EMMhUiKFCBgzbKoDL74FV59vedfSem7HydGOUHqhe6nI4O7kJVE39VPArOwmd0WCl9ZBcdmRy8GUinm7tO//89j/NNLsrQ0fW1JeXlDW4nXKtwPFkbDz24fuP6MN77Xfu0Dx1du5vpjUHBLzx3/8AAAAASUVORK5CYII=",
DISTRIBUTION_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAACPElEQVQoU2NkwA44GTyLznKr+mh+vb3lOsP2PmOgsu/YlDJi1a9u0cHr2VX+9+8vBmZmNobP28s6GW6eqCDeAIeU83yGCQZ//vxgYGHhYPh0fsEFhgNzDIk3QMWwkd9vSt2fPz+BBrAzfNyU08Rw53w98QaAVGrZ9LLblRf9PNTZx3DtSDGOsGJADgNOBnZ2GaDC/ww/mX4w8HBaMPq3rv6/sTqU4cv3Ewzs/ziAcowMP38+QQ5QmAFiDEFNB1kEVDT+/fn1H2wbEzMDO5cI489vb/4z/PsLEWJhY/zz4c4NhnV19kDuK5AYxAA2Hi2mqGln/63O9QGL/f37m4GbT4/Ju3nSv621eQxfP10CRgcryHVMoZO3/FuWZczw68s1mAGiDFp2dex2ZZk/t1eWMTy83Ac2VMO2m92hrOTnga4ehhuHS8Fi8rpF7J7tXT8PdU1nuHaoCSjympHBo/gOj7qv8v///8Bx/mllQgoDG6cIf9CMDngsrMuoYPj1/Q1f+II5oLTByMjE8OXm5rsMO3pVGLnz9v0HaQYBcJyfmLCXgZmDn880wwSeDk7POMPw98dHPosCZ5AY2OlAQ75OcmJkZPCrvcUpa6PKCAw0JiYWhi9rMgsZOLn5eX36GuApcUtRA8P3rx95Qqb3//v3h+E/MFC/Pz5ym2FTsxojA4+AA4NT7ixuBUfVr1dX3WTYO8MEaMEvYF64gJQXDEBBzeCccYZbO0z964P9txn2TU5j+PLhAPa8AHYkcQAAFZXhD6YckjcAAAAASUVORK5CYII=",
VALIDATION_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC7ElEQVQ4T3WTW0iTYRjHn+/TzePmZO7g3GDTqbPZSIiwwFJsmXgjhV1kB2WywC7ydBGTaCYkCFmYSexGM2jEiLTw0FLTmlB5SNfKabVWqJjbch72be5z3/oUFU194b15eP6/9/nz/F8E9j8ihUIRK5PJWDqd7qfBYDCRra7/25G99BUVFZVKpbJSJBIRXq/X7na7AzUaTZ9KpSoh++3bNbsAWq02Jzs7R+f3Ew4URbCgoCDwA1BmZ/9w6+ruaO/X1xeTgJVNyC6AxWLpCg+nSX0+AgsOpgLuI5huzB2J4zhqNI5h6pu3Mo3Gkff7Avr6+mcEAsEShUIJRQMCWCgaEEQQPsDxVXC5lqG69t7nJFHScbW61LkG2TWBXv+6jcvlpgVSqJF0Og1QBAUvjoNnxQO/rFYwmi3g8nhGgUJkqEtLnTsA11U3CpaXFu9eyD/PoNHpsOYfQRDAMAzIiaCzSw9H09LBPDEBjY2NbR/f9eRuAcqrbjd75x2Xi4uvQsfLVhCL4+CkXL5udcHphNa2l5AolUFyshQmJyahqqYGTsizyzYBCJvNbr5YeOUSmxECkgNSWFhcBBaLDaQVWCX8wOXx1yeiUqkwNDgI7R2dlt7erjPbLfAThOyhaGYEJ16aAlMOD6yQvosURSDPOg0+ggC73QFfx8fhQUN9y9sevYocbmYLIOaFprCYUSMxvGg4nJkHNvtfmJ6eAgGLgLyMYHj8JgRGTd9s9jmbatw4/IQUY1tbEDKAERYR8UmSKBF+GB57deqsIosXzQIpxwpCLgqmuXgYMzu7mx5pyl3z819IoW9HDiQxYU0JEmmBY/pHy4DZUcHhcBqulZWcOygi4PscAzP0G6qf6bQPSdH67ndEOYEXmhvDFzynUf2WF4bJtDVf5GUfST02kF+odNfWqJXTVuswWcP3+jfIIXHUfFyskDphHs81/XZ1k01k9NcDxt/IvG2jtpcekNRkYTqTivHbR+ae7vfKnsqN4j/7KSLQfZStLgAAAABJRU5ErkJggg==",
DECODING_REQUEST_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADU0lEQVQ4T22TWUxTaRTH/1/pxZaW1lhaKAWxVqTCWJUiIHGZ+OCSkWjc4hKNOiSExAeXmJi4jGZi4gtGo4k+gBHimBlEfZghmnGJ0QdFlGiMKIyOUlahLN3uvvj1jhIS5yYnN/fec373/P/nOwT/cwWXH/JNzw+slSXVoRGFMEaDNNj3T8uTv0610XRtcgmZ/FCx+qivqHjpr6mmtK2aEkEKEaEqCaiwQuDHkvdQZPRz1a26vXe/1U0ANlQ3luT55t3T1LDdleGC2TIVmiJCYkdAGBM4NoreUAeMTBp4Tqq5XLv7UhKiA4I/HswoX7H9vYWJ2nO8cwFVgiSK8Nr6URbMQ921p3jWBbDxGPh4P4r8LgwMRze3XNl3XQds2veoMdtt3pGfXwBVlTEUZvF5OI4ti1kEfsgFy7I4feEB2t7KUGQWROnDLJ+vp+lStZd4/DsdZatqwiWBDKTbsxDqZxGJ0ojEkBh6i7NHS8EwBnAch9qLD/G8U4AisbBaxqlEy8+kYl3thuyZZc3Ll5VgoG8ABnEQiQSH8EgcCvXAbYth+8YkhFAIj/P1j9DexVOJ3bBZ3VdJZc2dk85M/3G/PwuFtnYEF3ihaRoIIVSOCkmSIAgiDR48L9DgcaL2PgZHOJhMpsfkp+o7J7Ny5hx3OF2o8LRhbmEOLf7P3yRAlmUdIorJYgFjo1GcqXtKATymmFIfk2Ubz25y5JY3efICUOL/IjHWQ42i86dmaqoIp3kcO7eUUoCoR/3vL/DqvUjldMFhn3GNzF64f2ZB+a4PTpcFTOo0dHfHKCChu53Cv8PhPbkwmY20CxmX/3iJ1x+hmyiJIUy1ZVXpza6uuv9byhRmW6anCH291LyvgDWBDhTPz9OlNDR34E0oVQez0U46sczIUO+gVwcku/CX726HxtoF1Q31K2Ce8wUqV85G481OdPSm0/csuFgPnYgGo8FY9fzvX+onjvKSdWdKbZ6ld0eHO23mdD9dGQ0SNwp+vBtGawYUMQ4+8YE6n0a/kYZnLYd2TRzlb4sRrLxQ7M4uOGdkhMWKIoMTwrR9ESmKQv8KSHxaT3Ss/0Dr7WPN3y3T5K1ctOZIaWFg4fpMh32+gcAaiYy0fvoUav2z4cANmqdMzv0C2tGZc8nM+tEAAAAASUVORK5CYII=",
NETWORK_WAITING_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACMUlEQVQ4T62TS2gTURSG/5kkk2RaCUkfxle1rRpcxNrUVUHBRYoUuqqbikXBRQhJC4IogkIFxY0ItonRUsSFKEgw1AdCKyJIfay0Dx/VvKTJpBgnsTFpMpnMxLFilEljNt7Vvedyv/vzcQ4B2bLb7QMkSfbI6/KzKIr3PR7PCCG/cDgcEy6Xy1oN4HQ6J91ud1dFgNE6BEKhKuMoaQMW7tpRFbC++wKUdGMZgK5V48ONQ/8RsIo0i8lkqnvyJgwoqFIChtMhlmlAWYJq0pjkMr7lebz7/AmpbA5+hsRBSz2ujgz/kvgbIJdGSHr3d+3AmaNWEEIei3E/WJ5GRNiM2dfvwUyMBn23rreWAHJpbWY9Bg4U8YWdAa22gKIaEY5HEMl2IMlp4H/2Ev6H5/srAo70taNzewDTwTvQUM1AQYf5UAzh7GFo6Rok56X91EVvRcDxwR7oVD7Mvh1HQVBAS2gR5feAFbshxFkkAimwfl+sBGjqHcMaPV2yvq9zNyBeQTTyCDRlQOE7BcF4GlBvQ2KGgZgnpFrwD0DeMcMPQnj8MYRM9CSUMKBGdwoc34J0QpAScWjbWYuvwRde4u8+MJvNepvNJn0NvJoO4MQ1AkVyCXzOC7WqHdk0CZFYwKbmjWjasgupOV//yiys1gtFqX773hwujWpQFBoA/VOQCgdyywzqDYPYatx7duxc79AK4F8jvMTXrQtGOwoZjlpbUB9DejExtcHQN/588vLNn29/AOPlFct62uwRAAAAAElFTkSuQmCC",
JOIN_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAB/0lEQVQoU6WTS2jUUBSGv3QycdpJE4Xqyo2PqvVFtV2ICxVFtOiiCONrUQQf4EawvgpCrV3VVwU3gg+QLlQcEBdKFVHQhbhotfiqtlU3rqQLEzPtNJNpPMk041AqFEzu5ZI/53z33D8nCv95KWG+zobKbVxTF1LtvuFLppt6UV29kb74MmpyH+l3HlArmpZsoEdbzWJviMHfjzgUAip3MaDOo5oyUGT+6uJoWQLT2E2b74mmgn2XtvEs1swmLvvjkiTT+85gCJh1Gl/u8FLiMPKcZ5Jklq+j3s8VtNGX9AjMqtjIpkArBIdDTtDIkLacBb5Agt2smxxQNKqMJjoigN1Fi+8ybO7nRliVZLof+FrwAGbHV9Ca3MJh5z4nvW90BqJALyS3cjzzmIsSfCLQ1Pk06zs4n3nC1dx72iOARLPUOEivfYvtYXF5ciRZaaa4YqU5QoZ3xJDD4Bv7eGhfpw6XT38BMEffw4tYFUuk7IIjMRk6St6R53zRIyU/zGfnDutF+VkKCCLKmcHcYBfGyGKyxthJ2r5HCovX8i4RVjfGD1lHJ3yccGGKRXrgkt5As9NNp/TCsakiJ1dQjFEXcdbYS2vxK9ym3RvgzGTIPwEVm3mbWEttBMi+om/kKaumDdBq6NBTnIo60Ulzzu2nZdqAwFBpsN6Sf6EuMq4U8gdpTqhx8Av8wQAAAABJRU5ErkJggg==",
PROCESSING_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADbklEQVQ4T21TbUxTZxR+Lr2FKm2xDYod1ZasgKSzkbSCia1KouimkogLP9YRNkt0kGVKf2hYBAZ+BJVoJEqi/vAjmYSJLiSDfUAQBomDLBCNRWpFxUxp7d0ovY29LZTutFmNyXyTm/ve957nOed53nMYvGfV1v5g37hxfb1czi56PK/H2toazt69+1PP+2KZxGFVVVsux02EZ2c9kcLC8l+i0Wie0ZgHiyUbjY1nxnp6uk6ZTDu4gYHWUa/XG0jg4gSdnfcrCgq0bYKwgImJmajb/SZVJAI2bMjBqlVpePTIjf7++xCJotFgkBtpbq6pCIW4xzFsnODo0RtnGSa1RqfLQnFxPiKRCORyEcLhMPx+AQzDElgMlmXx4oUPNlvZBYejz07Q+ThBSck3O3JzN/0sFotgtW5FTo4UTqcXHk8SJJJkcJwbwSAPnU5PlQzM19eXHRcE/ymChuIEjY3dJ1UqVa0ghFFaakAoFKRMKZQ1CT6fF3q9mmS4MD3NU/TC4pEju6sDAe5SXEJHx/iVrKwPrRw3u4Q0wmxWY2zMB0FgUVdXMcLzkozy8s+1NtvHuHlzGEqlCr29t8dHRn695nQOXmd4PmYM4Hb7oVbLkZQUgsvFYGioj7fbd1Zt315Tkp1tKGtq+gy3bv1BkpZDpcrEvXvDaGr6dC9z+vSNTqNx897k5BRotQoyD1SuQBKeBVtaGs5ZLFbr6tVKzb59Zly9Ooxly9SYm/sH1BfBrq4z1TEPluzZY281Gj+pzMxUkgfr8ODBc6Snq8lED3ngJ1kaPHnyEoODfyEtLY08q/htZsbRTtihuIknTvy4n8q8FAgEsGaNDgpFiACvYDBoqSIWDsdz9PU5ycx1pP+O//LlmoMEuxY3ccuW79jKyvJuvf6DYp9vjo6kWLEilTJz5MUz8Pwb6guW5MXI5HSNvaGWlgM2QeC+TzQSYzZ/fUEmy6o2mT7Crl3bMDU1RW4rIJWm0pWGsbAQpYpcWLpUiocP/8TFi4e+FYS/m4kgmpgFZUaG4SvSbdFqNcuVymyDTKYQFxUVYeVKFc6fb3g5Oto/KZFIJW73pMvvf9VK4PG3rfzOlMloL1+7tvhLjcZ0MD/flE4Lx4590c5xTw/TPyHWSfT4Epi30/gOyX9bcQENVB59pEQi85P0/v3/McC/d5diHn407noAAAAASUVORK5CYII=",
DECODING_RESPONSE_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADWklEQVQ4T2WTbWyTVRTH//e5z3vf17mx1naZTrYSAWHgjHG+BFBxhAScGoHwsim6hERjIiEhRKiBL76giUZNigEXMZpoRCSAH9xCYAkUNvYCjBYZ26qrbZG2G23XPuvj3YNriNzc8+XmnF/u+f/PIbj30NZPn3vR66lttJdbG3W9OBlPxS/2n+3/6de958/9P53c/bBy34KWsjm2j6Ws7CkgD0o1UJGDVK6C8hTTYv702FDsraPb+ntm60qA5g8XHCTQN+VuZ2GplSCYKSYTGhzVEtQyAYRlpoamUFHnTI91pVf8/M6d3xiAZ99/uG26oAU0MgWrV4agcnBPNGDt3C34LXwEiYZu441nQaJmcKZi6nQgtDi4f/Q6md9uc7irvMPJv5M2e73CEim8+SVo8bWC4zj0jfZiYN7h/wAUbnMN/rwcRV6bPvzl053rSfOeRW3J6K2AXM1DMHF4AI/ilYWvQ+AF5LQcDkR2Q63PlQBey0PI/6MhlhnHma/DD5KV/ke+vXUjsc5cJ6NWbMSrDVshiqIR3wcPImOPMiEJOJ61IFI4PCosNQQjAxHc6E68TJa95zuVy2ebnLIHbzy2Aw6rA7IkQ5RECIIAnueNVqDPXB1XIoMYX9qJWCyOsaFxP1m+x3cqm2UAxYN3l+2DLMsGQJIlSCJzg0FmALquMycILg73IL24D6EoA12N+ckL/oUd6Whqw4wGdcrjaGt6G4qsoKAX8GOwAylLxPi601wBk2KCVDkNd5ULXRdO4tq5SAtp9i9q5TL0QMaeNESsl5rQ/tR2KAqDFAvYG2xHpU+BzeyAVbXDpdYgGZ3AwM1uHPu8r3xmDmh7YM1wOBzy8PcXDBt9/JPY9sxOqKqKS2MDOKMewn3mKjjVSkPMcCiEvzIjHfubjm40BmnzJ8+/VGF3/XAl1guLS4bZYsJcPIF1jVvRM3IWadc15grTQgCuD0agWSdSJzo6a7s+CiVKo7z9m81vSrz8RSGjoXqeB6qFtTClw1TGXGA23k5mEY/HwJcXU6HekeVfbfzlfGmUZxfjtc9Wr3BW2QKYpF7ZIQGTzHumS1HUwNuAqWz+u2B3/67juy78cc8y3bWVZNXOJUvddZXNWrEgEEp0SunNcO/okd8/GCwVzub/C1MgLl8VCbqbAAAAAElFTkSuQmCC",
COMPLETED_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB4ElEQVQ4T2NkoBAwkqo/aJucNcPffxt/vPsvvC3+qQhJBoA0MzMzbHx3+7fwj7d/jh+tfx1MtAEwzb++/hd+e/n7ye93OU6cXfSkligDYJrFFEWF7x1/wfBqL+PEF3v/T3v69OlDggbANCupKQlfPnSb4efnP8deHfk3+/KK12uB4fcZxQCY4r9/GfzXeT06CuObatkKHz11kOHTw99X35z61wPV/AtowE+4ATDFaWZNwrNO1b0FGQIKMJDmK6+PMry+8pvh1032vr2t99qAGr+ANINiEGwAsmZYtIIMAWm+9/0iw6Pj78FO35vzMgQo/w6qBmFA6E65NyCbQRJvfj+BJ41v/z4xbDi4lOHvDwaGPzd4Qne139yPbDvcBSADGP8xcGhp6XNzMfHBDTh96wjDixPfnrHzMd3fk/syFKr5M3LiA3tBWlpazaCUvYFb/Y/fz2//mUV0OTj+fP/H8O72T4bvT3/fP1L+0fHHjx8gp4MDDsMAoAA70BB5HuPv+nJaIuY8Vj+KWXmAIfXkL8PvB2ypu+vur0d3OswQ5GjkhbpGUiuWO+2nwIdiIQ22zxsCnqhjczo2A0Bi7EDMBnSNJNDJAn/+/Hn78eNHUKiiOBubF5DFYGyQi1ACDJsiAIU/4VHlwvAFAAAAAElFTkSuQmCC",
ERROR_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADZUlEQVQ4T22TbUhbVxjH/+fm3tyb5N6YBtNkGndJfWmrcVqT6dBWtNUycBXW+qGoUJlQV6lbKaPr29Yvc1/GEPdhFMEKgzIo3Sxbi3RtSt0yRTojWGkjTZWqGSFMrY2makzcY7a+bgcOB855zu95/s8Lw/+tt6u2VCva3ZZgUGVIIGGxzX8fjf0E3+3A6+bslQv6+GEk1OlYXHhPkUTYbDaIjCEaCmFpeQWzkvzbNZ3u2K3RYd+zf88BxWXV7r2T92+aHGrK9uZm2F0uGI1GcByH1dVVRHw+BM6fh+J/8KTPuPnYN+O+ng3IPwDX7sxPg+PDqZXlKaVHj8JisYCLxcDCYfAE4O128LKMlbk5DNXXQ5j5E99mZLt/8XmHk4DG7Nx+1WIqLz93DmazGes3bmC9rw+a+XlwwSAEgsmHD0N34gTW6G6wqgohSbnb9tBfwDa8t4YDgeKPP0J6QQHY4CAyamuh1WoxU1cHSaPBm1euYPnpU8QuXIDx5EmEL17E6Gefozm/tIRV7txzvCw8/XXO2bOQKRqJHje3t0NRFMQXFiDpdFAomUskJ1xUBCs5SBDc43RiyPXOF2xXlrO9xGY6vfXQIUiPH0Pu7sYaaTafOgW9Xg8dAbjlZcw2NYH3+2Hu7YWQl4frOTkIO3f8TIDc9qK01NOO/fshkj5DZyc4kwmLbW2QrdYkhF9ZgXjmDNjEBFIoQpEAnsJCzDsL+1lFWdUn7tDkV7YjR8CiUShdXQg1NiIhSbBSGUWCbawNeWJLC1IuXQJHFblTXY0Rp/tLhpK9rqaHI3/kNdQjkZYG/egoZkmCjjyn9vRAVFVEDh6EngBGrxcySYl4PPB3dOC74oq6ZBlrs3K9qsjKHNRAa0tLkAYGwNEWKIkaeufT0yGUlsLQ0AA+HsdgayuikmGq49GEIwnYWlzhdk/eu/PGW/mw79uHOBnxJIefnobA89Bu2waRmotPJDBG1UrMzqE/y3ngV9/vPz5v5Z3OHR+oUxPdkkGP7JoayJQkDfWAIAjJHaHyBS5fhrgaw9j2/JZrQ96uF63872Rs2fXunsLpB92GUFDVUumMmZkAnYvUjZIoYtFmnxo3W48PjAz88J9hemkqmVpe8372XzOVmxjLZxT2k3U2NpmecXvcc7WX7OIvT/Df1VMsmVTz7HQAAAAASUVORK5CYII=",
TIMEOUT_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC2ElEQVQ4T11TTSisYRR+Xn8zTMICJaWoSZLBKErC2DALZWjEVdYspCykLKynGcrGQrJANIpm5GM1otQ0o+YzfjaIQoZYjMQdjO++59xG133rq9P3vuc853nOcwT+OYqi6D4/Py1fX1/K1dUVzs7OoGkaSkpK+JOxVafT+axWayyRJhKBz+czPTw8qDs7Ozg5OUF6ejpfxeNxpKWlIRqNIj8/H52dncjNza1sbW09pHsusL29bbq8vFRnZ2dRWFiI3t5e1NTUcCwRcX19jWAwiNXVVVBn3d3dMJlMlRaL5VBQ24+Pj79dLhfa29vR39+faBeSCoQQSEpK4m4kCObm5iBzMDY2hqqqKr1YX19v29jYUJ6fnzE1NYWCggJ+TNzpvL29Qa/Xc6Hk5GTc3t5iaGgIOTk5aG5utoqVlRXN4XBgdHQUdrv9G5USqAM61MHr6ytrkZKSgrW1NUxOTnIhMTExofn9fiwuLiI7O5uR6dH/J0GHCt/c3KCnpwc2mw1icHBQOz8/x9bWFicTGj06Pj7G7u4uqqurUVpaiszMTKZAhT4+Plgv+i+Gh4e1QCCA/f19vL+/MzoV2dzcxPLyMurr60H6FBcXo6WlhbkTUFNTE+rq6iCmp6c1t9vNI8rLy2N0+o6OjnB/f4+KigqEQiEYDAaOMzIymEJfXx+6urogPB4PizgyMoKOjg42DiGoqgo5XkjD/JCDutzb24PUjnOERG5bWlpSqHWn04mioiJOIA2enp7Q2NiIl5cXpkXod3d3kLpxLAGt30aamZmhubKRjEYjSNhIJILa2lqkpqZy0dPTUywsLLCRxsfH/xqJLmgPwuGwOj8/j7KyMva72WxmwbKystiB8p51Im0GBgZQXl5e2dDQcPhjmWTLqtfrxcXFBSMSMo0uFovx+Ige6STdysnfy5RQSa6vTopnkY5TaIGIL3GnLZRr/kuO3H1wcGCQixZN5PwBnSVjy2IX6jwAAAAASUVORK5CYII="}};GIAPI.DABSource=function(report,dabNode){var node=GIAPI.GINode(report,dabNode,dabNode.servicePath());var included=true;node.include=function(include){if(include!==undefined&&include!==null){if(include){Array.prototype.remove(dabNode._includedSources,report.id);dabNode._includedSources.push(report.id)}else if(!include)Array.prototype.remove(dabNode._includedSources,report.id);included=include}return included||!dabNode._includedSources.length};node.contentType=function(){return node.report().harvested?
"harvested":"distributed"};return node};GIAPI.SpatialRelation={CONTAINS:"contains",OVERLAPS:"overlaps",DISJOINT:"disjoint"};GIAPI.Paginator=function(){if(arguments&&arguments.length>0){var cnstr=arguments[0][1];var options=arguments[0][2];var onStatus=arguments[0][3];var gidab=arguments[0][4]}var index;var paginator={};paginator._id="paginator_"+GIAPI.random();paginator.next=function(onResponse,execute){if(!paginator._resultSet)throw"Paginator not ready";var size=paginator._resultSet.size;var start=paginator._resultSet.start;var pageSize=paginator._resultSet.pageSize;var pageCount=paginator._resultSet.pageCount;var pageIndex=
paginator._resultSet.pageIndex;if(!index)index=start;if(!size||pageIndex===pageCount)return false;if(!execute)return true;index+=pageSize;if(!options)options={};options.start=index;onResponse._origin="paginator";gidab._paginator(onResponse,cnstr,options,onStatus,this);return true};paginator.prev=function(onResponse,execute){if(!paginator._resultSet)throw"Paginator not ready";var size=paginator._resultSet.size;var start=paginator._resultSet.start;var pageSize=paginator._resultSet.pageSize;var pageIndex=
paginator._resultSet.pageIndex;if(!size||pageIndex===1)return false;if(!execute)return true;index-=pageSize;if(!options)options={};options.start=index;onResponse._origin="paginator";gidab._paginator(onResponse,cnstr,options,onStatus,this);return true};paginator.first=function(onResponse,execute){if(!paginator._resultSet)throw"Paginator not ready";var size=paginator._resultSet.size;var pageIndex=paginator._resultSet.pageIndex;if(!size||pageIndex===1)return false;if(!execute)return true;index=1;if(!options)options=
{};options.start=index;onResponse._origin="paginator";gidab._paginator(onResponse,cnstr,options,onStatus,this);return true};paginator.last=function(onResponse,execute){if(!paginator._resultSet)throw"Paginator not ready";var size=paginator._resultSet.size;var pageCount=paginator._resultSet.pageCount;var pageIndex=paginator._resultSet.pageIndex;var pageSize=paginator._resultSet.pageSize;if(!size||pageIndex===pageCount)return false;if(!execute)return true;index=(pageCount-1)*pageSize+1;if(!options)options=
{};options.start=index;onResponse._origin="paginator";gidab._paginator(onResponse,cnstr,options,onStatus,this);return true};paginator.skip=function(onResponse,newPageIndex,execute){var idx=typeof onResponse!="function"?onResponse:newPageIndex;newPageIndex=parseInt(idx);if(!paginator._resultSet)throw"Paginator not ready";var pageCount=paginator._resultSet.pageCount;var pageSize=paginator._resultSet.pageSize;var pageIndex=paginator._resultSet.pageIndex;if(newPageIndex===pageIndex||newPageIndex<1||newPageIndex>
pageCount)return false;if(!execute)return true;index=(newPageIndex-1)*pageSize+1;if(!options)options={};options.start=index;onResponse._origin="paginator";gidab._paginator(onResponse,cnstr,options,onStatus,this);return true};paginator.page=function(){return paginator._page};paginator._offset=function(action){var start=paginator._resultSet.start;var pageSize=paginator._resultSet.pageSize;var pageCount=paginator._resultSet.pageCount;switch(action){case "prev":return parseInt(index-pageSize);case "next":if(!index)return parseInt(start);
return parseInt(index+pageSize);case "first":return 1;case "last":return parseInt((pageCount-1)*pageSize+1)}};paginator._cnstr=function(_cnstr){cnstr=_cnstr};paginator._index=function(value){index=value};return paginator};GIAPI.Page=function(nodes,size){if(nodes&&!Array.isArray(nodes))throw"nodes is not an array";var index=0;return{next:function(){if(index===nodes.length)return null;return nodes[index++]},hasNext:function(){return index<nodes.length},nodes:function(){return nodes},size:function(){return size||"10"},count:function(){return nodes.length},reset:function(){index=0}}};GIAPI.Refiner=function(dabNode,cnstr,_options,onStatus,paginator,reset){var ref={};ref._id="refiner_"+GIAPI.random();if(!GIAPI.refHelper||reset){GIAPI.refHelper={};GIAPI.refHelper._cursor=0;GIAPI.refHelper._optionsChrono=[];GIAPI.refHelper._optionsChrono.push(GIAPI.clone(_options));GIAPI.refHelper._chronology=[];GIAPI.refHelper._chronology.push(GIAPI.clone(cnstr))}ref.refine=function(onResponse,constraints,options){var _targetCnst=null;if(!options||options.merge===undefined||options.merge)_targetCnst=
GIAPI.mergeConstraints(GIAPI.refHelper._chronology[0],constraints);else _targetCnst=GIAPI.clone(constraints);if(!options)options={};GIAPI.refHelper._optionsChrono[GIAPI.refHelper._cursor].start=_options.start;options.start=1;options.termFrequency=GIAPI.refHelper._optionsChrono[0].termFrequency;delete options.extension;if(GIAPI.refHelper._cursor===GIAPI.refHelper._chronology.length-1){GIAPI.refHelper._chronology.push(_targetCnst);GIAPI.refHelper._optionsChrono.push(options)}else{GIAPI.refHelper._chronology[GIAPI.refHelper._cursor+
1]=_targetCnst;GIAPI.refHelper._optionsChrono[GIAPI.refHelper._cursor+1]=options;GIAPI.refHelper._chronology.length=GIAPI.refHelper._cursor+2;GIAPI.refHelper._optionsChrono.length=GIAPI.refHelper._cursor+2}GIAPI.refHelper._cursor++;paginator._cnstr(_targetCnst);paginator._index(1);onResponse._origin="refiner";dabNode._paginator(onResponse,_targetCnst,options,onStatus,paginator)};ref.browse=function(onResponse,who,options){var constraints={"who":who};if(!options)options={};options.merge=false;ref.refine(onResponse,
constraints,options)};ref.restore=function(onResponse,cursor,_execute){cursor=parseInt(cursor);if(cursor<0||cursor>GIAPI.refHelper._chronology.length-1)return false;if(_execute===undefined)_execute=onResponse?true:false;if(!_execute)return true;GIAPI.refHelper._optionsChrono[GIAPI.refHelper._cursor].start=_options.start;GIAPI.refHelper._cursor=cursor;var options=GIAPI.refHelper._optionsChrono[cursor];paginator._cnstr(GIAPI.refHelper._chronology[cursor]);paginator._index(options.start);onResponse._origin=
"refiner";dabNode._paginator(onResponse,GIAPI.refHelper._chronology[cursor],options,onStatus,paginator);return true};ref.reset=function(){GIAPI.refHelper._cursor=0;GIAPI.refHelper._chronology.length=1;paginator._cnstr(GIAPI.refHelper._chronology[0])};ref.rewind=function(onResponse){var _execute=onResponse?true:false;return ref.restore(onResponse,GIAPI.refHelper._cursor-1,_execute)};ref.forward=function(onResponse){var _execute=onResponse?true:false;return ref.restore(onResponse,GIAPI.refHelper._cursor+
1,_execute)};ref.cursor=function(){return GIAPI.refHelper._cursor};ref.chronology=function(){return GIAPI.refHelper._chronology};return ref};GIAPI.TermFrequency=function(dabNode,cnstr,options,onStatus,onResponse,termFrequency,reset){var tf={};tf._id="termFrequency_"+GIAPI.random();tf._cnstr=GIAPI.clone(cnstr);var targets=[];if(!tf._cnstr)tf._cnstr={};if(!GIAPI.tfHelper.checkedItems||reset)GIAPI.tfHelper.checkedItems={};for(p in termFrequency)targets.push(p);tf.checkItems=function(target,targetItems){var items=tf.items(target);var checkedItems=GIAPI.tfHelper.checkedItems[target];var found=false;if(checkedItems&&targetItems.length<checkedItems.length){for(var i=
0;i<checkedItems.length;i++)for(var j=0;j<targetItems.length;j++){var chkItem=checkedItems[i];var trgItem=targetItems[j];if(chkItem.term===trgItem.term)chkItem.veryfied=true}var temp=[];for(var i=0;i<checkedItems.length;i++)if(checkedItems[i].veryfied){var item=checkedItems[i];delete item.veryfied;temp.push(item)}GIAPI.tfHelper.checkedItems[target]=temp}else for(var i=0;i<items.length&&!found;i++)for(var j=0;j<targetItems.length;j++){var item=items[i];var trgItem=targetItems[j];if(item.term===trgItem.term&&
!tf.isCheckedItem(target,item)){if(!GIAPI.tfHelper.checkedItems[target])GIAPI.tfHelper.checkedItems[target]=[];GIAPI.tfHelper.checkedItems[target].push(item);found=true}}};tf.refine=function(){for(var i=0;i<tf.targets().length;i++){var target=tf.targets()[i];delete tf._cnstr[target];var checkedItems=GIAPI.tfHelper.checkedItems[target];if(checkedItems){var values=[];for(var j=0;j<checkedItems.length;j++){var term=checkedItems[j].sourceId?checkedItems[j].sourceId:checkedItems[j].term;if(target=="score"){term=
term.replace(" - ",",");term="["+term+"]"}values.push(term)}tf._cnstr[target]=values}}tf._cnstr.tfDiscover=true;var _onResponse=function(response){var termFreq=response[0].termFrequency;for(var trg=0;trg<termFreq.targets().length;trg++){var curTarget=termFreq.targets()[trg];var checkedItems=termFreq.checkedItems(curTarget);if(checkedItems)for(var chk=0;chk<checkedItems.length;chk++){var curChk=termFreq.checkedItems(curTarget)[chk];for(var it=0;it<termFreq.items(curTarget).length;it++){var curItem=
termFreq.items(curTarget)[it];if(curChk.term===curItem.term)curChk.freq=curItem.freq}}}onResponse.apply(this,[response])};_onResponse._origin="termFrequency";dabNode.discover(_onResponse,tf._cnstr,options,onStatus)};tf.clearCheckedItems=function(target){GIAPI.tfHelper.checkedItems[target]=null};tf.checkedItems=function(target){return GIAPI.tfHelper.checkedItems[target]};tf.isCheckedItem=function(target,item){var items=GIAPI.tfHelper.checkedItems[target];if(items)for(var i=0;i<items.length;i++)if(items[i].term===
item.term)return true;return false};tf.targets=function(){return targets};tf.targetsCount=function(){return targets.length};tf.items=function(target){return termFrequency[target]};tf.itemsCount=function(target){return termFrequency[target].length};return tf};GIAPI.Concept=function(){var outConcept={};var dabEndpoint=arguments[0];outConcept._report=arguments[1];outConcept.extend=function(onResponse,relation,options){var rel=isRelation(relation)||isRelation(options);var opt=isOptions(relation)||isOptions(options);var query=GIAPI.concept(dabEndpoint,"",outConcept._report.uri,rel,opt,"services");jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",success:function(data){if(data.resultSet&&data.resultSet.error){GIAPI.logger.log("extend concept error: "+
data.resultSet.error,"error");onResponse.apply(outConcept,[[],"Error occurred:"+data.resultSet.error]);return}GIAPI.logger.log("extend success");var con=data.concept;var concepts=[];for(var i=0;i<con.length;i++){var report=con[i];var concept=GIAPI.Concept(dabEndpoint,report);concepts.push(concept)}onResponse.apply(outConcept,[concepts])},complete:function(jqXHR,status){GIAPI.logger.log("extend concept complete status: "+status)},error:function(jqXHR,error,exception){error=error+(exception.message?
", exception -> "+exception.message:"");GIAPI.logger.log("extend concept error: "+error,"error");onResponse.apply(outConcept,[[],"Error occurred:"+error])}})};outConcept.property=function(onResponse,name){var query=GIAPI.concept(dabEndpoint,"",outConcept._report.uri,[name],null);jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",success:function(data){if(data.resultSet&&data.resultSet.error){GIAPI.logger.log("concept property error: "+data.resultSet.error,"error");onResponse.apply(outConcept,
[null,"Error occurred:"+data.resultSet.error]);return}GIAPI.logger.log("concept property success");var values=data.properties&&data.properties.values?data.properties.values:null;var property=null;if(values)property={name:name,values:values};onResponse.apply(outConcept,[property])},complete:function(jqXHR,status){GIAPI.logger.log("concept property complete status: "+status)},error:function(jqXHR,error,exception){error=error+(exception.message?", exception -> "+exception.message:"");GIAPI.logger.log("concept property error: "+
error,"error");onResponse.apply(outConcept,[[],"Error occurred:"+error])}})};outConcept.uri=function(){return outConcept._report.uri};outConcept.label=function(){return outConcept._report.label};outConcept.extensionSize=function(relation){if(!relation)relation="all";var tot=0;if(relation.value===GIAPI.Relation.BROAD_MATCH.value||relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_broadMatch?outConcept._report.relatedConcepts_broadMatch:"0");if(relation.value===GIAPI.Relation.BROADER.value||
relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_broader?outConcept._report.relatedConcepts_broader:"0");if(relation.value===GIAPI.Relation.CLOSE_MATCH.value||relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_closeMatch?outConcept._report.relatedConcepts_closeMatch:"0");if(relation.value===GIAPI.Relation.EXACT_MATCH.value||relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_exactMatch?outConcept._report.relatedConcepts_exactMatch:"0");if(relation.value===
GIAPI.Relation.NARROW_MATCH.value||relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_narrowMatch?outConcept._report.relatedConcepts_narrowMatch:"0");if(relation.value===GIAPI.Relation.NARROWER.value||relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_narrower?outConcept._report.relatedConcepts_narrower:"0");if(relation.value===GIAPI.Relation.NONE.value||relation==="all")tot+=0;if(relation.value===GIAPI.Relation.RELATED.value||relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_related?
outConcept._report.relatedConcepts_related:"0");if(relation.value===GIAPI.Relation.RELATED_MATCH.value||relation==="all")tot+=parseInt(outConcept._report.relatedConcepts_relatedMatch?outConcept._report.relatedConcepts_relatedMatch:"0");return tot},outConcept.description=function(){return outConcept._report.description};outConcept.sourceThesaurus=function(){return outConcept._report.sourceThesaurus};outConcept.rootRelation=function(){return outConcept._report.rootRelation};outConcept.stringify=function(){return JSON.stringify(outConcept._report,
null,4)};var isRelation=function(object){return object&&Array.isArray(object)?object:null};var isOptions=function(object){return object&&(object.start||object.count)?object:null};return outConcept};GIAPI.Relation={"NONE":{"name":"None","value":"none"},"NARROWER":{"name":"Narrower","value":"skos%3Anarrower"},"BROADER":{"name":"Broader","value":"skos%3Abroader"},"NARROW_MATCH":{"name":"Narrow match","value":"skos%3AnarrowMatch"},"BROAD_MATCH":{"name":"Broad match","value":"skos%3AbroadMatch"},"CLOSE_MATCH":{"name":"Close match","value":"skos%3AcloseMatch"},"RELATED":{"name":"Related","value":"skos%3Arelated"},"RELATED_MATCH":{"name":"Related match","value":"skos%3ArelatedMatch"},"EXACT_MATCH":{"name":"Exact match",
"value":"skos%3AexactMatch"},decode:function(value){switch(value){case this.NONE.value:return this.NONE;case this.NARROWER.value:return this.NARROWER;case this.BROADER.value:return this.BROADER;case this.NARROW_MATCH.value:return this.NARROW_MATCH;case this.BROAD_MATCH.value:return this.BROAD_MATCH;case this.CLOSE_MATCH.value:return this.CLOSE_MATCH;case this.RELATED.value:return this.RELATED;case this.RELATED_MATCH.value:return this.RELATED_MATCH;case this.EXACT_MATCH.value:return this.EXACT_MATCH}throw"Unable to decode "+
value;}};GIAPI.PropertyName={SCOPE_NOTE:"skos%3AscopeNote",NOTE:"skos%3Anote",NOTATION:"skos%3Anotation",ALT_LABEL:"skos%3AaltLabel",CHANGE_NOTE:"skos%3AchangeNote",HIDDEN_LABEL:"skos%3AhiddenLabel",HISTORY_NOTE:"skos%3AhistoryNote",EDITORIAL_NOTE:"skos%3AeditorialNote",EXAMPLE:"skos%3Aexample"};GIAPI.PubSubManager=function(dabNode){var manager={};manager.subscribe=function(subscription,onUpdates,onExpiration,onConnectionError,timeZeroResultSet){var sources=dabNode.findSources(subscription.constraints());var query=GIAPI.query(dabNode.endpoint(),subscription.constraints(),subscription.options(),null,null,sources,subscription.id(),null,dabNode.servicePath(),dabNode.openSearchPath());if(timeZeroResultSet===null||timeZeroResultSet===undefined)timeZeroResultSet=true;var _onUpdates=function(event){var data=
JSON.parse(event.data);var result=JSON.parse(data.result);var updates=result.resultSet.size;var nodes=[];var discoverArgs=[];if(data.from){if(!discoverArgs[1])discoverArgs[1]={};discoverArgs[1].from=data.from}if(data.until){if(!discoverArgs[1])discoverArgs[1]={};discoverArgs[1].until=data.until}discoverArgs[4]=dabNode;for(var i=0;i<result.reports.length;i++){var report=result.reports[i];nodes.push(GIAPI.GINode(report,dabNode))}var paginator=GIAPI.Paginator([discoverArgs]);paginator._resultSet=result.resultSet;
result.resultSet.paginator=paginator;paginator._page=GIAPI.Page(nodes,paginator.pageSize);if(data.from)data.from=new Date(parseFloat(data.from));if(data.until)data.until=new Date(parseFloat(data.until));var timeRange={};timeRange.from=data.from;timeRange.to=data.until;var response=[];response[0]=result.resultSet;_onUpdates.clientFuntion.apply(manager,[response,timeRange,subscription])};var _onConnectionError=function(event){var msg="CONNECTION_LOST";if(event.data)msg=JSON.parse(event.data).error;
_onConnectionError.clientFuntion.apply(manager,[msg])};var _onExpiration=function(event){event.target.close();_onExpiration.clientFuntion.apply(manager,[subscription])};var encodedLabel=encodeURIComponent(subscription.label());var subscribe=query.replace("opensearch?","pubsub?client=js&request=subscribe"+"&clientID="+subscription.clientID()+"&subscriptionID="+subscription.id()+"&label="+encodedLabel+"&timeZeroRecordSet="+timeZeroResultSet+"&creation="+subscription.creation().getTime()+"&expiration="+
subscription.expiration().getTime()+"&");_onUpdates.clientFuntion=onUpdates;_onConnectionError.clientFuntion=onConnectionError;_onExpiration.clientFuntion=onExpiration;var source=new EventSource(subscribe);source.addEventListener(subscription.id(),_onUpdates,false);source.addEventListener("expiration",_onExpiration,false);source.addEventListener("error",_onConnectionError,false);source.addEventListener("close",function(event){source.close()},false)};manager.renew=function(subscription,onUpdates,onExpiration,
onConnectionError){manager.subscribe(subscription._renew(),onUpdates,onExpiration,onConnectionError,false)};manager.subscriptions=function(clientID,onResponse){var endpoint=dabNode.endpoint();if(!endpoint.endsWith("/"))endpoint+="/";var servicePath=dabNode.servicePath();jQuery.ajax({type:"GET",url:endpoint+servicePath+"/pubsub?client=js&clientID="+clientID+"&request=subscriptions",crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){var out=[];for(var i=0;i<data.length;i++){var json=
data[i];if(typeof json!=="object")json=JSON.parse(data[i]);var sub=GIAPI.Subscription(json.label,json.constraints,json.clientID);sub.creation(json.creation);sub.expiration(json.expiration);sub.id(json.id);out.push(sub)}onResponse.apply(manager,[out,clientID])},complete:function(jqXHR,status){},error:function(jqXHR,msg,exception){}})};manager.unsubscribe=function(subscriptionID,onResponse){var endpoint=dabEndpoint();if(!endpoint.endsWith("/"))endpoint+="/";var servicePath=dabNode.servicePath();jQuery.ajax({type:"GET",
url:endpoint+servicePath+"/pubsub?client=js&subscriptionID="+subscriptionID+"&request=unsubscribe",crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){onResponse.apply(manager,[data.message,data.subscriptionID])},complete:function(jqXHR,status){},error:function(jqXHR,msg,exception){}})};return manager};GIAPI.Subscription=function(_label,_constraints,_clientID){var subs={};var creation=new Date;var expiration=new Date(creation.getTime()+36E5*1);var id=GIAPI.random();var label=_label;var constraints=_constraints;var options={};var clientID=_clientID;subs.label=function(_label){if(_label)label=_label;return label};subs.options=function(_options){if(_options)options=_options;return options};subs.constraints=function(_constraints){if(_constraints)constraints=_constraints;return constraints};subs.clientID=
function(_clientID){if(_clientID)clientID=_clientID;return clientID};subs.id=function(_id){if(_id)id=_id;return id};subs.creation=function(_creation){if(_creation)creation=_creation;return creation};subs.expiration=function(_expiration){if(_expiration)expiration=_expiration;return expiration};subs._renew=function(){var sub=GIAPI.Subscription(label,constraints,clientID);sub.options(options);sub.creation(creation);sub.id(id);return sub};return subs};GIAPI.GINodeTree=function(dabNode,divId,options){if(!options)options={};if(!options.expandRoot)options.expandRoot=false;var _onLoadComplete=options.onLoadComplete;var createNodeData=function(id,giNode,parentTreeNode,expandNext,isRoot){var oData='<label expand="false" id="'+id+'" class="ygtvcontent-label">'+giNode.report().title+"</label>";if(expandNext)oData='<label expand="true" id="'+id+'" class="ygtvcontent-label">Click to get more results...</label>';else if(isRoot);return oData};var _pageSize=
options.pageSize?options.pageSize:10;var loadNodeData=function(prtTreeNode,fnLoadComplete){var callback=function(resultSet){var page=resultSet.page;var nodes=resultSet.error?[]:page.nodes();var treeNodes=[];var moreTreeNode;for(var i=0;nodes&&i<nodes.length;i++){var curNode=nodes[i];var type=curNode.report().type;var id=GIAPI.random();var oData=createNodeData(id,curNode,prtTreeNode,false,false);if(options.onCreateNode)oData=options.onCreateNode.apply(this,[id,oData,curNode,prtTreeNode,false,false]);
var tmpTreeNode=new YAHOO.widget.HTMLNode(oData,prtTreeNode,false,true);tmpTreeNode.data=curNode;tmpTreeNode.isLeaf=type==="simple";treeNodes.push(tmpTreeNode);if(i===nodes.length-1&&curNode._parent&&curNode._parent.expandNext()){var id=GIAPI.random();var oData=createNodeData(id,curNode,prtTreeNode,true,false);if(options.onCreateNode)oData=options.onCreateNode.apply(this,[id,oData,null,prtTreeNode,true,false]);moreTreeNode=new YAHOO.widget.HTMLNode(oData,prtTreeNode,false,true);moreTreeNode.data=
curNode._parent;moreTreeNode.isLeaf=false;moreTreeNode._expandNext=true}}if(resultSet.error&&options.onError)options.onError.apply(this,[prtTreeNode,resultSet.error]);prtTreeNode.loadComplete();if(nodeTree.nodeToRemove){nodeTree.tree.removeNode(nodeTree.nodeToRemove,true);nodeTree.nodeToRemove=null}if(_onLoadComplete)_onLoadComplete.apply(this,[page,treeNodes,moreTreeNode])};if(prtTreeNode._expandNext){prtTreeNode.data.expandNext(callback,true);nodeTree.nodeToRemove=prtTreeNode}else prtTreeNode.data.expand(callback,
_pageSize)};if(!options||!options.onError)onError=function(errorNode,error){errorNode.label=errorNode.label+" ("+error+")";nodeTree.tree.draw()};var nodeTree={};nodeTree.tree=new YAHOO.widget.TreeView(divId);nodeTree.tree.setDynamicLoad(loadNodeData);nodeTree.tree.subscribe("clickEvent",function(node){return node.node._expandNext?true:false});var oData=createNodeData(GIAPI.random(),dabNode,nodeTree.tree.getRoot(),false,true);nodeTree.treeRoot=new YAHOO.widget.HTMLNode(oData,nodeTree.tree.getRoot(),
options.expandRoot,true);nodeTree.treeRoot.data=dabNode;nodeTree.tree.draw();return nodeTree};GIAPI.ConceptTree=function(dabNode,id,options){var conceptKWD=options&&options.keyword;var _onLoadComplete=options&&options.onLoadComplete;var _onCreateNode=options&&options.onCreateNode?options.onCreateNode:function(element,parentTreeNode,isRoot){var oData=null;if(isRoot)oData=element.report().title;else oData=element.uri();return oData};var loadNodeData=function(prtTreeNode,fnLoadComplete){var callback=function(concepts,error){var treeNodes=[];for(var i=0;i<concepts.length;i++){var curConcept=concepts[i];
var uri=curConcept.uri();var oData=_onCreateNode(curConcept,prtTreeNode,false);var tmpTreeNode=new YAHOO.widget.HTMLNode(oData,prtTreeNode,false,true);tmpTreeNode.data=curConcept;tmpTreeNode.isLeaf=false;treeNodes.push(tmpTreeNode)}if(error)onError.apply(this,[prtTreeNode,error]);prtTreeNode.loadComplete();if(_onLoadComplete)_onLoadComplete.apply(this,[treeNodes])};var data=prtTreeNode.data;if(data.extend)if(prtTreeNode.relation)data.extend(callback,prtTreeNode.relation);else data.extend(callback);
else data.concept(conceptKWD,callback)};if(options&&options.onError)onError=options.onError;else onError=function(errorNode,error){errorNode.label=errorNode.label+" ("+error+")";conceptTree.tree.draw()};var conceptTree={};conceptTree.tree=new YAHOO.widget.TreeView(id);conceptTree.tree.setDynamicLoad(loadNodeData);var oData=_onCreateNode(dabNode,conceptTree.tree.getRoot(),true);conceptTree.treeRoot=new YAHOO.widget.HTMLNode(oData,conceptTree.tree.getRoot(),false,true);conceptTree.treeRoot.data=dabNode;
conceptTree.tree.draw();conceptTree.conceptKeyword=function(keyword){if(keyword)conceptKWD=keyword;return conceptKWD};conceptTree.onCreateNode=function(callback){if(callback)_onCreateNode=callback;return _onCreateNode};conceptTree.onLoadComplete=function(callback){_onLoadComplete=callback;return _onLoadComplete};conceptTree.relationExtension=function(treeNode,relation){if(relation)treeNode.relation=relation;return treeNode.relation};return conceptTree};GIAPI.TermFrequencyWidget=function(id,beforeRefine,afterRefine,options){var widget={};var jtables={};var idToTargetMap={};var charts={};var chartData={source:{},format:{},keyword:{},protocol:{},instrumentId:{},platformId:{},origOrgId:{},attributeId:{},sscScore:{}};var chartTabId;var chartStyles;var chartOptions;if(!options)options={};if(!options.divCSS)options.divCSS="width: 350px;display: inline-block;margin-left: 5px;margin-bottom: 5px;";if(!options.headerBckColor)options.headerBckColor="#2C3E50";
if(!options.headerBorder)options.headerBorder="1px solid #2C3E50";if(!options.headerLabelColor)options.headerLabelColor="white";if(!options.headerLabelWeight)options.headerLabelWeight="bold";if(!options.headerLabelFontFamily)options.headerLabelFontFamily="Helvetica Neue, Helvetica, Arial, sans-serif";if(options.itemBckColor)options.itemBckColor="background: "+options.itemBckColor;else options.itemBckColor="";if(!options.itemLabelColor)options.itemLabelColor="black";if(!options.itemLabelFontSize)options.itemLabelFontSize=
"100%";if(!options.itemLabelWeight)options.itemLabelWeight="normal";if(!options.itemLabelFontFamily)options.itemLabelFontFamily="Helvetica Neue, Helvetica, Arial, sans-serif";if(options.itemLineColor)options.itemLineColor="border-bottom: 1px solid "+options.itemLineColor;else options.itemLineColor="border-bottom: none";if(options.accordionMode===null||options.accordionMode===undefined)options.accordionMode=false;var style="";style+='[widget="tf"] div > div.ui-widget-header{ border: '+options.headerBorder+
"; background: "+options.headerBckColor+"; ";style+="color: "+options.headerLabelColor+"; font-weight: "+options.headerLabelWeight+"; font-family: "+options.headerLabelFontFamily+";} ";style+='[widget="tf"] div.jtable-main-container table.jtable tbody > tr { '+options.itemBckColor+"; "+options.itemLineColor+"; ";style+="font-size: "+options.itemLabelFontSize+"; color: "+options.itemLabelColor+"; font-weight: "+options.itemLabelWeight+"; font-family: "+options.itemLabelFontFamily+";} ";style+='[widget="tf"] div.jtable-main-container table.jtable tbody > tr > td { text-align: left }';
style+='[widget="tf"] div.jtable-main-container table.jtable tbody > tr > td:nth-child(4) { padding-right: 3px}';style+=".jtable-selecting-column {width: 10px;}";if(options.accordionMode){style+='[widget="tf"] div.jtable-main-container div.jtable-title { display: none;}';jQuery("#"+id).accordion()}GIAPI.UI_Utils.appendStyle(style);widget.chart=function(chartElementId,options,styles){if(!GIAPI._chartTab)GIAPI._chartTab=0;chartTabId=chartElementId;if(!options)options={};options.responsive=false;options.barMaxWidth=
85;chartOptions=options;try{jQuery("#"+chartTabId).tabs("destroy")}catch(e){}jQuery("#"+chartTabId).empty();jQuery("#"+chartTabId).append('<ul id="'+chartTabId+'-ul"></ul>');if(!styles){styles={};styles.format={canvasStyle:"background: white; margin: 5px; margin-top: 10px; box-shadow: 0 0 20px #999;",canvasWidth:1E3,canvasHeight:580,checkedFillColor:"#BBDAF7",checkedStrokeColor:"#378DE5",checkedHighlightFill:"rgba(55, 141, 229, 0.59)",checkedHighlightStroke:"#377DE5",fillColor:"rgba(151,187,205,0.5)",
strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)"};styles.source=GIAPI.clone(styles.format);styles.keyword=GIAPI.clone(styles.format);styles.protocol=GIAPI.clone(styles.format);styles.instrument=GIAPI.clone(styles.format);styles.platform=GIAPI.clone(styles.format);styles.originatorOrganisation=GIAPI.clone(styles.format);styles.attribute=GIAPI.clone(styles.format);styles.sscScore=GIAPI.clone(styles.format)}chartStyles=styles};widget.update=
function(resultSet){if(!resultSet.termFrequency){jQuery("#"+chartTabId).empty();return}jQuery("#"+id).empty();var tfObject=resultSet.termFrequency;var idList=[];for(var i=0;i<tfObject.targets().length;i++)idList.push(GIAPI.random());for(var i=0;i<tfObject.targets().length;i++){var currentId=idList[i];var target=tfObject.targets()[i];var label=null;switch(target){case "format":label="Format";break;case "source":label="Source";break;case "keyword":label="Keywords";break;case "protocol":label="Protocol";
break;case "instrumentTitle":label="Instrument";break;case "organisationName":label="Organization";break;case "platformTitle":label="Platform";break;case "attributeTitle":label="Attribute";break;case "attributeId":label="Attribute identifier";break;case "instrumentId":label="Instrument identifier";break;case "platformId":label="Platform identifier";break;case "origOrgId":label="Organization identifier";break;case "instrumentDescription":label="Instrument description";break;case "platformDescription":label=
"Platform description";break;case "origOrgDescription":label="Origin Organization description";break}if(options.accordionMode)jQuery("#"+id).append("<h3>"+label+'</h3><div style="'+options.divCSS+'" id="'+currentId+'"></div>');else jQuery("#"+id).append('<div style="'+options.divCSS+'" id="'+currentId+'"></div>');jtables[target]=currentId;jQuery("#"+currentId).attr("widget","tf");idToTargetMap[idList[i]]=target;jQuery("#"+currentId).jtable({title:target.toUpperCase(),selecting:true,multiselect:true,
selectingCheckboxes:true,selectOnRowClick:true,fields:{term:{visibility:"hidden"},decodedTerm:{key:true,title:"",width:"80%"},freq:{title:"",width:"20%"}},selectionChanged:function(event,data){var selRows=jQuery("#"+this.id).jtable("selectedRows");var id=this.id;if(selRows.length>0){if(selRows[selRows.length-1].ignoreEvent){delete selRows[selRows.length-1].ignoreEvent;return}var selectedItems=[];selRows.each(function(){var record=jQuery(this).data("record");selectedItems.push(record)});tfObject.checkItems(idToTargetMap[this.id],
selectedItems);if(beforeRefine)beforeRefine.apply(this,[]);tfObject.refine();if(afterRefine)afterRefine.apply(this,[])}else{var target=idToTargetMap[this.id];tfObject.clearCheckedItems(target);if(beforeRefine)beforeRefine.apply(this,[]);tfObject.refine();if(afterRefine)afterRefine.apply(this,[])}},rowInserted:function(event,data){if(tfObject.isCheckedItem(idToTargetMap[event.target.id],data.record)){data.row[0].ignoreEvent=true;jQuery("#"+currentId).jtable("selectRows",data.row)}}});jQuery(".jtable thead").remove();
var checkedItems=tfObject.checkedItems(target);if(checkedItems)for(var j=0;j<checkedItems.length;j++)jQuery("#"+currentId).jtable("addRecord",{record:checkedItems[j],clientOnly:true});var items=tfObject.items(target);for(var j=0;j<items.length;j++)if(!tfObject.isCheckedItem(target,items[j]))if(items[j].term!=null){if(items[j].term.length>32&&items[j].term.indexOf("%3A")!=-1)items[j].decodedTerm=items[j].decodedTerm.replace(/:/g," : ");jQuery("#"+currentId).jtable("addRecord",{record:items[j],clientOnly:true})}}if(options.accordionMode){var active=
jQuery("#"+id).accordion("option","active");jQuery("#"+id).accordion("refresh");jQuery("#"+id).accordion("option","active",active)}if(chartTabId){Chart.defaults.global.tooltipTemplate="<%if (fullLabel){%><%=fullLabel%>: <%}%><%= value %>";try{jQuery("#"+chartTabId).tabs("destroy")}catch(e){}jQuery("#"+chartTabId).empty();jQuery("#"+chartTabId).append('<ul id="'+chartTabId+'-ul"></ul>');for(var i=0;i<tfObject.targets().length;i++){var target=tfObject.targets()[i];var chartId=target+"-chart";initChart(tfObject,
target);var ctx=document.getElementById(chartId).getContext("2d");var chart=(new Chart(ctx)).Bar(chartData[target],chartOptions);charts[chartId]=chart;$("#"+chartId).click(function(e){var chartId=e.toElement.id;var bar=charts[chartId].getBarsAtEvent(e)[0];var trgt=chartId.replace("-chart","");var term=bar.fullLabel;jQuery('[data-record-key="'+term+'"] td input').click()})}jQuery("#"+chartTabId).tabs({activate:function(event,ui){GIAPI._chartTab=jQuery("#"+chartTabId).tabs("option","active")}});jQuery("#"+
chartTabId).tabs("option","active",GIAPI._chartTab)}};var initChart=function(tfObject,target){var items=tfObject.items(target);var chartId=target+"-chart";jQuery("#"+chartTabId+"-ul").append('<li><a href="#'+chartId+'">'+target.toUpperCase()+"</a></li>");var canvasStyle=chartStyles[target].canvasStyle;var canvasWidth=chartStyles[target].canvasWidth||1E3;var canvasHeight=chartStyles[target].canvasHeight||580;var canvas='<canvas width="'+canvasWidth+'" height="'+canvasHeight+'" id="'+chartId+'" style="'+
canvasStyle+'"/>';jQuery("#"+chartTabId).append(canvas);chartData[target].datasets=[];chartData[target].datasets.push({});chartData[target].datasets[0].checkedFillColor=chartStyles[target].checkedFillColor;chartData[target].datasets[0].checkedStrokeColor=chartStyles[target].checkedStrokeColor;chartData[target].datasets[0].checkedHighlightFill=chartStyles[target].checkedHighlightFill;chartData[target].datasets[0].checkedHighlightStroke=chartStyles[target].checkedHighlightStroke;chartData[target].datasets[0].fillColor=
chartStyles[target].fillColor;chartData[target].datasets[0].strokeColor=chartStyles[target].strokeColor;chartData[target].datasets[0].highlightFill=chartStyles[target].highlightFill;chartData[target].datasets[0].highlightStroke=chartStyles[target].highlightStroke;chartData[target].labels=[];chartData[target].fullLabels=[];chartData[target].checked=[];chartData[target].datasets[0].data=[];items.forEach(function(item){var term=item.decodedTerm;if(term){var shortTerm=term.length<20?term:term.substring(0,
20)+"...";var freq=item.freq;chartData[target].labels.push(shortTerm);chartData[target].fullLabels.push(term);chartData[target].checked.push(tfObject.isCheckedItem(target,item));chartData[target].datasets[0].data.push(freq)}})};return widget};GIAPI.ButtonsFactory={caleButton:function(label,options){if(!options)options={};if(!options.color)options.color="green";if(!options.title)options.title="";if(!options.id)options.id=GIAPI.random();var button='<ul title="'+options.title+'" id="'+options.id+'" ';if(options&&options.attr)options.attr.forEach(function(attr){button+=attr.name+'="'+attr.value+'" '});button+=' class="calebogden-button">';button+='<li><span class="'+options.color+'">&nbsp;</span><a style="text-decoration:none">'+label+"</a></li></ul>";
if(options.handler)jQuery(document).on("click","#"+options.id,options.handler);return"<div>"+button+"</div>"},onOffSwitchButton:function(onLabel,offLabel,options){if(!options)options={};if(!options.onBckColor)options.onBckColor="#467FC9";if(!options.offBckColor)options.offBckColor="#2c3e50";if(!options.onColor)options.onColor="white";if(!options.offColor)options.offColor="white";if(!options.id)options.id=GIAPI.random();if(options.checked||options.checked===undefined)options.checked="checked";else options.checked=
"";var size="";switch(options.size){case "small":size="small-";break;case "medium":size="medium-";break}var style='<style type="text/css">';style+="#"+options.id+"-inner."+size+'onoffswitch-inner:before{content: "'+onLabel+'"; background-color: '+options.onBckColor+"; color: "+options.onColor+";} ";style+="#"+options.id+"-inner."+size+'onoffswitch-inner:after{content: "'+offLabel+'"; background-color: '+options.offBckColor+"; color: "+options.offColor+";} ";style+="</style>";if(!options.borderColor)options.borderColor=
"transparent";if(!options.shadowColor)options.shadowColor="transparent";if(!options.switchColor)options.switchColor="white";if(!options.switchBorderColor)options.switchBorderColor="white";var button='<div class="'+size+'onoffswitch">'+style;button+='<input type="checkbox" name="onoffswitch" class="'+size+'onoffswitch-checkbox" id="'+options.id+'" ';if(options&&options.attr)options.attr.forEach(function(attr){button+=attr.name+'="'+attr.value+'" '});button+=options.checked+">";var labelStyle="border: 2px solid "+
options.borderColor+"; box-shadow: 4px 4px 3px 0 "+options.shadowColor+";";button+='<label id="'+options.id+'-label" class="'+size+'onoffswitch-label" for="'+options.id+'" style="'+labelStyle+'" >';button+='<span id="'+options.id+'-inner" class="'+size+'onoffswitch-inner"></span>';var switchStyle="background: "+options.switchColor+"; border: 2px solid "+options.switchBorderColor+";";button+='<span id="'+options.id+'-switch" class="'+size+'onoffswitch-switch" style="'+switchStyle+'"></span>';button+=
"</label></div>";if(options.handler)jQuery(document).on("click","#"+options.id,options.handler);return"<div>"+button+"</div>"},roundedCornerButton:function(label,options){if(!options)options={};if(options.enabled===undefined)options.enabled=true;if(!options.iconRadius)options.iconRadius=20;if(!options.borderRadius)options.borderRadius=20;if(!options.width)options.width=120;if(!options.iconX)options.iconX=options.width-25;if(!options.labelColor)options.labelColor="rgb(43, 44, 105)";if(!options.bckColor)options.bckColor=
"#F7F7F7";if(!options.hoverBckColor)options.hoverBckColor="rgb(187, 218, 247)";if(!options.borderColor)options.borderColor="rgba(63, 81, 181, 0.42)";if(!options.iconColor)options.iconColor="rgb(43, 44, 105)";if(!options.iconBorderColor)options.iconBorderColor="rgb(43, 44, 105)";if(!options.shadowColor)options.shadowColor="#999";if(!options.id)options.id=GIAPI.random();var disButtonProp="cursor: default;"+"color: rgba(128, 128, 128, 0.43);"+"background-color: rgba(170, 170, 170, 0.72);"+"border: 2px solid #c0c0c0;"+
"box-shadow: none;";var enaButtonProp="cursor: pointer;"+"color: "+options.labelColor+";"+"background-color: "+options.bckColor+";"+"border: 2px solid "+options.borderColor+";"+"box-shadow: 4px 4px 3px 0 "+options.shadowColor+";";var buttonProp=options.enabled?enaButtonProp:disButtonProp;var style="";style+="#"+options.id+".rounded-corner-button{"+buttonProp+" width: "+options.width+"px; border-radius: "+options.borderRadius+"px;}";if(options.enabled)style+="#"+options.id+".rounded-corner-button:hover { background-color: "+
options.hoverBckColor+"; }";else style+="#"+options.id+".rounded-corner-button:hover { background-color: rgba(170, 170, 170, 0.72); }";style+="#"+options.id+"-icon.rounded-corner-button-icon{border: 2px solid "+options.iconBorderColor+"; ";style+="background: "+options.iconColor+"; margin-left: "+options.iconX+"px;  border-radius: "+options.iconRadius+"px;}";style+="#"+options.id+"-icon.rounded-corner-button-icon-disabled{background: rgba(50, 51, 50, 0.05); border: 2px solid rgba(50, 51, 50, 0); }";
GIAPI.UI_Utils.appendStyle(style,options.id);var enButton=options.enabled?"":" disabled";var iconClass=options.enabled?"rounded-corner-button-icon":"rounded-corner-button-icon rounded-corner-button-icon-disabled";var button='<div><button class="rounded-corner-button" id="'+options.id+'"';if(options&&options.attr)options.attr.forEach(function(attr){button+=attr.name+'="'+attr.value+'" '});button+=enButton+">"+label+"</button>";button+='<div id="'+options.id+'-icon" class="'+iconClass+'"/></div>';if(options.handler)jQuery(document).on("click",
"#"+options.id,options.handler);return"<div>"+button+"</div>"}};GIAPI.ToggleButton=function(options){var button={};var buttonId=options.id;if(!buttonId)buttonId=GIAPI.random();var onLabel=options.onLabel;var offLabel=options.offLabel;var labelId=buttonId+"Label";var iconId=buttonId+"Icon";if(!options.onComplete)options.onComplete=function(){};if(!options.duration)options.duration=800;if(!options.width)options.width=135;button._state="off";var divStyle="width:"+options.width+"px;";var iconStyle="";var labelStyle="";var stateIcon={"on":"fa-angle-double-up","off":"fa-angle-double-down"};
button.stateIcon=function(state,icon){stateIcon[state]=icon};button.state=function(state){switch(state){case "on":if(button._state==="disabled")addListener();jQuery("#"+buttonId).attr("class","toggle-button toggle-button-on");jQuery("#"+iconId).attr("class","toggle-button-icon fa "+stateIcon.on);jQuery("#"+labelId).attr("class","toggle-button-icon-label");jQuery("#"+labelId).html(onLabel);break;case "off":if(button._state==="disabled")addListener();jQuery("#"+buttonId).attr("class","toggle-button toggle-button-off");
jQuery("#"+iconId).attr("class","toggle-button-icon fa "+stateIcon.off);jQuery("#"+labelId).attr("class","toggle-button-icon-label");jQuery("#"+labelId).html(offLabel);break;case "disabled":jQuery(document).off("click","#"+buttonId);jQuery("#"+buttonId).attr("class","toggle-button-disabled");jQuery("#"+labelId).attr("class","toggle-button-icon-label-disabled");jQuery("#"+labelId).html(offLabel);break}if(state)button._state=state;return button._state};button.setLabel=function(state,label){if(state===
"on")onLabel=label;else offLabel=label;jQuery("#"+labelId).html(label)};button.css=function(target,property,value){switch(target){case "div":jQuery("#"+buttonId).css(property,value);divStyle+=property+":"+value+";";break;case "label":jQuery("#"+buttonId+"Label").css(property,value);labelStyle+=property+":"+value+";";break;case "icon":jQuery("#"+buttonId+"Icon").css(property,value);iconStyle+=property+":"+value+";";break}};button.div=function(){var div_='<div id="'+buttonId+'" style="'+divStyle+'" class="toggle-button toggle-button-off"';
if(options&&options.attr)options.attr.forEach(function(attr){div_+=attr.name+'="'+attr.value+'" '});div_+=">";div_+='<i id="'+iconId+'"class="toggle-button-icon fa '+stateIcon.off+'" style="'+iconStyle+'" aria-hidden="true"></i>';div_+='<label id="'+labelId+'" style="'+labelStyle+'"  class="toggle-button-icon-label">'+offLabel+"</label></div>";return div_};var addListener=function(){jQuery(document).on("click","#"+buttonId,function(){switch(button._state){case "on":button.state("off");break;case "off":button.state("on");
break}var selector=options.targetSelector?options.targetSelector:"#"+options.targetId;if(options.beforeStart)options.beforeStart();jQuery(selector).slideToggle({duration:options.duration,complete:function(){options.onComplete(button._state)}})})};addListener();return button};GIAPI.ConstraintsWidget=function(dabNode,options){var widget={};var initOptions;if(!options)initOptions={};else initOptions=options;if(!initOptions.fieldsWidth)initOptions.fieldsWidth=205;var widgetId=GIAPI.random();var whatOptDialogId="what-options-dialog";var taxonDialogId=GIAPI.random();var keyDownEnabled=initOptions.keyDownAction?true:false;var fixedHeight=18;jQuery("head").append('<div id="'+whatOptDialogId+'"/>');jQuery("head").append('<div id="'+taxonDialogId+'"/>');var out='<div class="cnst-widget-div"><table cellpadding="0" class="cnst-widget-table">';
var timeObjects=[];var whereWidget;var whereOpt;var whatOpt;var whatOptDialog;var taxonDialog;var ids={};var _getId=function(constraint){if(!ids[constraint])ids[constraint]=GIAPI.random();return ids[constraint]};widget.getId=function(constraint){return _getId(constraint)};jQuery(document).on("click","#"+_getId("where"),function(){whereWidget.show()});jQuery(document).on("click","#"+_getId("from")+",#"+_getId("to"),function(){if(jQuery("#"+this.id).attr("class").indexOf("hasDatepicker")===-1)timeObjects.forEach(function(obj){createDatePicker(obj)});
jQuery("#"+this.id).datepicker("show")});widget.whatConstraint=function(op,options){if(!options)whatOpt={};else whatOpt=options;if(!whatOpt.label)whatOpt.label="Search terms";if(!whatOpt.help)whatOpt.help='The keyword(s) to search for.<br> Multiple keywords must be separated by " OR " or " AND " token (e.g.: "water OR fire", "sea AND sun")';if(whatOpt.showHelpIcon===undefined)options.showHelpIcon=true;if(whatOpt.showOptDialog===undefined)whatOpt.showOptDialog=true;if(!whatOpt.optDialogPosition)whatOpt.optDialogPosition=
"right";if(whatOpt.showTaxonDialog===undefined)whatOpt.showTaxonDialog=false;if(whatOpt.showResultSetExtensionOpt===undefined)whatOpt.showResultSetExtensionOpt=true;if(!whatOpt.value)if(whatOpt.values)whatOpt.value=0;else whatOpt.value="";var tr=createTextField(_getId("what"),whatOpt.label,whatOpt.help,whatOpt.values,false,null,null,whatOpt.readOnlyValues,whatOpt.showHelpIcon,whatOpt.value,whatOpt.resizable);switch(op){case "add":out+=tr;return null;case "get":return"<table>"+tr+"</table>"}};widget.whereConstraint=
function(op,options){if(!options)whereOpt={};else whereOpt=options;if(!options)options={};if(!options.label)options.label="Bounding box";if(!options.help)options.help="Rectangular area (bounding box) where the searched reasults must be contained or overlapped";if(options.showHelpIcon===undefined)options.showHelpIcon=true;if(!whereOpt.widgetWidth)whereOpt.widgetWidth=570;if(!whereOpt.widgetHeight)whereOpt.widgetHeight=470;if(!whereOpt.widgetPosition)whereOpt.widgetPosition="right";if(!whereOpt.zoom)whereOpt.zoom=
2;if(!whereOpt.lat)whereOpt.lat=0;if(!whereOpt.lng)whereOpt.lng=0;if(whereOpt.showSpatialRelationControl===undefined||whereOpt.showSpatialRelationControl===true)whereOpt.showSpatialRelationControl=true;if(whereOpt.scrollwheel===undefined)whereOpt.scrollwheel=true;if(whereOpt.panControl===undefined)whereOpt.panControl=true;if(whereOpt.panControlOptions===undefined)whereOpt.panControlOptions=true;if(whereOpt.streetViewControl===undefined)whereOpt.streetViewControl=false;if(whereOpt.overviewMapControl===
undefined)whereOpt.overviewMapControl=true;if(whereOpt.mapTypeControl===undefined)whereOpt.mapTypeControl=false;if(!whereOpt.mapTypeControlOptions)whereOpt.mapTypeControlOptions={style:google.maps.MapTypeControlStyle.DROPDOWN_MENU};if(!whereOpt.mapTypeId)whereOpt.mapTypeId=GIAPI.ui.mapTypeId||google.maps.MapTypeId.ROADMAP;if(whereOpt.navigationControl===undefined)whereOpt.navigationControl=false;if(whereOpt.fullscreenControl===undefined)whereOpt.fullscreenControl=true;if(!whereOpt.fullscreenControlOptions)whereOpt.fullscreenControlOptions=
{position:google.maps.ControlPosition.RIGHT_BOTTOM};if(!whereOpt.value)whereOpt.value={"south":-30,"west":-30,"north":30,"east":30};var value=whereOpt.applyValue?whereOpt.value.south+","+whereOpt.value.west+","+whereOpt.value.north+","+whereOpt.value.east:"";if(whereOpt.applyValue)whereOpt.applyValue=true;if(whereOpt.resultsMapWidget&&whereOpt.applyValue)whereOpt.resultsMapWidget.select({south:whereOpt.value.south,west:whereOpt.value.west,north:whereOpt.value.north,east:whereOpt.value.east});if(!whereOpt.selectionColor)whereOpt.selectionColor=
"#0000FF";if(!whereOpt.showLocationControl)whereOpt.showLocationControl=true;whereWidget=GIAPI._whereWidget(dabNode,whereOpt,_getId("where"));var tr=createTextField(_getId("where"),options.label,options.help,null,null,null,null,null,options.showHelpIcon,value);switch(op){case "add":out+=tr;return null;case "get":return"<table>"+tr+"</table>"}};widget.whenConstraint=function(op,property,options){if(!options)options={};if(!options.label)options.label=property==="from"?"Start time":"End time";if(!options.help)options.help=
property==="from"?"Start time of the period covered by the content of the dataset":"End time of the period covered by the content of the dataset";if(options.showHelpIcon===undefined)options.showHelpIcon=true;if(!options.value)options.value="";var id=property==="from"?_getId("from"):_getId("to");var tr=createTextField(id,options.label,options.help,null,true,options.minDate,options.maxDate,null,options.showHelpIcon,options.value);switch(op){case "add":out+=tr;return null;case "get":return"<table>"+
tr+"</table>"}};widget.numericConstraint=function(op,constraint,options){var help;var label;switch(constraint){case "minmag":help='The minimum magnitude of the searched event. This constraint affects only the "IRIS Event" source';label="Min mag.";break;case "maxmag":help='The maximum magnitude of the searched event. This constraint affects only the "IRIS Event" source';label="Max mag.";break;case "mind":help='The minimum depth (in kilometers) of the searched event depth. This constraint affects only the "IRIS Event" source';
label="Min depth";break;case "maxd":help='The maximum depth (in kilometers) of the searched event depth. This constraint affects only the "IRIS Event" source';label="Max depth";break;case "bandwl":help="Histogram mean";label="Hist. mean";break;case "proclev":help="Processing level";label="Proc. level";break;case "illazan":help="Illumination azimuth angle ";label="Ill. az. angle ";break;case "illzean":help="Illumination zenith angle value ";label="Ill. zen. a. val.";break;case "cloudcp":help="Cloud cover percentage ";
label="Cloud co. per.";break;case "sensorResolution":help="Sensor resolution";label="Sensor res.";break;case "sensorResolutionMax":help="Maximum sensor resolution";label="Max. sensor res.";break;case "sensorResolutionMin":help="Minimum sensor resolution";label="Min. sensor res.";break;default:throw"Invalid constraint: "+constraint;}if(!options)options={};if(!options.label)options.label=label;if(!options.help)options.help=help;if(options.showHelpIcon===undefined)options.showHelpIcon=true;if(!options.value)if(options.values)options.value=
0;else options.value="";var tr=createNumericField(_getId(constraint),options.label,options.help,options.minValue,options.maxValue,options.step,options.values,options.readOnlyValues,options.showHelpIcon,options.value);switch(op){case "add":out+=tr;return null;case "get":return"<table>"+tr+"</table>"}};widget.textConstraint=function(op,constraint,options){var help;var label;switch(constraint){case "loc":help='Name of a location where to constraint the search. E.g: "italy", "u.s.a", "africa"';label=
"Location";break;case "sba":help='"GEO Societal Benefit Area". E.g.:"agriculture", "climate", "disasters"';label="GEO S.B.A.";break;case "prot":help='Protocol used to access the data linked to the searched results. E.g: "HTTP", "urn:ogc:serviceType:WebMapService:1.1.1:HTTP", "OGC:WMS-1.1.1-http-get-map"';label="Protocol";break;case "format":help='Format of the data linked to the discovered nodes. E.g.: "image/gif", "application/zip"';label="Format";break;case "kwd":help="Keyword which describes the searched result";
label="Keyword";break;case "uselim":help="Limitation applied on the use of the data linked to the searched results";label="Use lim.";break;case "magt":help='The magnitude type of the searched event. This constraint affects only the "IRIS Event" source';label="Mag. type";break;case "inpe-sat-name":help='Satellite name (string). E.g.: "AQUA"';label="Sat. name";break;case "inpe-instr-name":help='Instrument name (string). E.g.: "MODIS"';label="Instr. name";break;case "sta":help="Station description";
label="Station desc.";break;case "sensor":help="Sensor description";label="Sensor desc.";break;case "sarPolCh":help="Polarisation channels";label="Pol. channels";break;case "sarPolMd":help="Polarisation mode";label="Pol. mode";break;case "instrumentId":help="Measuring instruments used to acquire the data";label="Instrument";break;case "platformId":help="Platform from which the data were taken";label="Platform";break;case "origOrgId":help="Organisation which created the resource";label="Originator organisation";
break;case "attributeId":help="Attribute described by the measurement value";label="Measured attribute";break;default:throw"Invalid constraint: "+constraint;}if(!options)options={};if(!options.label)options.label=label;if(!options.help)options.help=help;if(options.showHelpIcon===undefined)options.showHelpIcon=true;if(!options.value)if(options.values)options.value=0;else options.value="";var tr=createTextField(_getId(constraint),options.label,options.help,options.values,false,null,null,options.readOnlyValues,
options.showHelpIcon,options.value);switch(op){case "add":out+=tr;return null;case "get":return"<table>"+tr+"</table>"}};widget.booleanConstraint=function(op,constraint,options){var help;var label;var values;switch(constraint){case "gdc":values=[{"label":"Search all records","value":""},{"label":"Only GEOSS Data Core records","value":"true"},{"label":"Only Non GEOSS Data Core records","value":"false"}];help='Includes only or excludes all the "GEOSS Data Core" records from the search';label="GEOSS D.C.";
break;case "lac":values=[{"label":"Search all records","value":""},{"label":"Only records with legal access constraints","value":"true"},{"label":"Only records without legal access constraints","value":"false"}];help="Includes only or excludes all the records having some legal access constraints";label="Legal acc. const.";break;case "luc":values=[{"label":"Search all records","value":""},{"label":"Only records with legal use constraints","value":"true"},{"label":"Only records without legal use constraints",
"value":"false"}];label="Legal use const.";break;case "rosetta":values=[{"label":"Basic search by exact term","value":""},{"label":"Advanced search w/ Rosetta Stone translations","value":"true"},{"label":"Advanced search w/ Rosetta Stone narrow matches","value":"narrow"},{"label":"Advanced search w/ Rosetta Stone broad matches","value":"broad"}];label="Use ODIP Rosetta Stone service.";break;default:throw"Invalid constraint: "+constraint;}if(!options)options={};if(!options.label)options.label=label;
if(!options.help)options.help=help;if(options.showHelpIcon===undefined)options.showHelpIcon=true;if(!options.value)options.value=0;var tr=createTextField(_getId(constraint),options.label,options.help,values,false,null,null,true,options.showHelpIcon,options.value);switch(op){case "add":out+=tr;return null;case "get":return"<table>"+tr+"</table>"}};widget.hlConstraint=function(op,options){if(!options)options={};if(!options.label)options.label="Result type";if(!options.help)options.help="Type of records to search";
if(options.showHelpIcon===undefined)options.showHelpIcon=true;if(!options.value)options.value=0;var values=[{"label":"Search all records","value":""},{"label":"Only Dataset","value":"dataset"},{"label":"Only Collections","value":"series"}];var tr=createTextField(_getId("hl"),options.label,options.help,values,false,null,null,true,options.showHelpIcon,options.value);switch(op){case "add":out+=tr;return null;case "get":return"<table>"+tr+"</table>"}};widget.evtOrdConstraint=function(op,options){if(!options)options=
{};if(!options.label)options.label="Event ord.";if(!options.help)options.help='Ordering of the results. This constraint affects only the "IRIS Event" source';if(options.showHelpIcon===undefined)options.showHelpIcon=true;if(!options.value)options.value=0;var values=[{"label":"Order by Time","value":"time"},{"label":"Order by Magnitude","value":"magnitude"}];var tr=createTextField(_getId("evtOrd"),options.label,options.help,values,false,null,null,true,options.showHelpIcon,options.value);switch(op){case "add":out+=
tr;return null;case "get":return"<table>"+tr+"</table>"}};widget.append=function(id){out+="</table></div>";jQuery("#"+id).append(out);out='<div class="cnst-widget-div"><table cellpadding="0" class="cnst-widget-table">'};widget.constraints=function(){var constraints={};var what=jQuery("#"+_getId("what")).val();if(what)constraints.what=what;var where=jQuery("#"+_getId("where")).val();if(where)constraints.where={"south":parseFloat(where.split(",")[0]),"west":parseFloat(where.split(",")[1]),"north":parseFloat(where.split(",")[2]),
"east":parseFloat(where.split(",")[3])};var from=jQuery("#"+_getId("from")).val();var to=jQuery("#"+_getId("to")).val();if(from||to){constraints.when={};constraints.when.from=from;constraints.when.to=to}var keys=["maxmag","minmag","magType","evtOrd","mind","maxd","bandwl","proclev","illazan","illzean","cloudcp","sensorResolution","sensorResolutionMax","sensorResolutionMin","loc","sba","prot","format","kwd","uselim","magt","inpe-sat-name","inpe-instr-name","sta","sensor","sarPolCh","sarPolMd","hl",
"gdc","lac","luc","rosetta","instrumentId","platformId","origOrgId","attributeId"];constraints.kvp=[];keys.forEach(function(key){var val=jQuery("#"+_getId(key)).val();if(val)constraints.kvp.push({key:key,value:val})});return constraints};widget.options=function(){var options={};options.spatialRelation=whereWidget&&whereWidget.inputControl()?whereWidget.inputControl().spatialRelation():"CONTAINS";var searchFields=[];var anyText=jQuery("#"+_getId("anyTextCheck")).prop("checked")||jQuery("#"+_getId("anyTextCheck"))===
undefined;var title=jQuery("#"+_getId("titleCheck")).prop("checked")||jQuery("#"+_getId("titleCheck"))===undefined;var description=jQuery("#"+_getId("descCheck")).prop("checked")||jQuery("#"+_getId("descCheck"))===undefined;var keywords=jQuery("#"+_getId("kwdCheck")).prop("checked")||jQuery("#"+_getId("kwdCheck"))===undefined;if(anyText)searchFields.push("anytext");if(title)searchFields.push("title");if(description)searchFields.push("description");if(keywords)searchFields.push("keywords");if(searchFields.length>
0)options.searchFields=searchFields.toString();var ext=jQuery("#"+_getId("rsExtCheck")).prop("checked");var rel=jQuery("#"+_getId("moreGenRadio")).prop("checked")?GIAPI.Relation.BROADER:jQuery("#"+_getId("moreSpecRadio")).prop("checked")?GIAPI.Relation.NARROWER:GIAPI.Relation.RELATED;var what=jQuery("#"+_getId("what")).val();if(ext&&what){options.extension={};options.extension.relation=rel;options.extension.keyword=what}return options};var createNumericField=function(id,label,help,min,max,step,values,
readOnlyValues,helpIcon,initValue){if(keyDownEnabled)jQuery(document).on("keydown","#"+id,function(){GIAPI.UI_Utils.enterKeyDown(initOptions.keyDownAction)});var clearId=id+"-clear";jQuery(document).on("click","#"+clearId,function(){var id=clearId.replace("-clear","");clear(id)});var textInput='<td style="width: '+initOptions.fieldsWidth+'px;"  >';textInput+='<div style="height:'+fixedHeight+'px">';textInput+='<input style="width: '+initOptions.fieldsWidth+'px;" placeholder="'+label+'" class="cnst-widget-input" id="'+
id+'" max="'+max+'" min="'+min+'" step="'+step+'" type="number"/></div>';textInput+="</td>";var input=values?createSelect(id,label,values,readOnlyValues,min,max,step,initValue):textInput;var clearButton=createClearButton(values,id,clearId,true);var tr="<tr>";var _helpTd="";if(helpIcon){var helpId=GIAPI.random();_helpTd=helpTd(label,help,helpId);var trId=GIAPI.random();tr='<tr id="'+trId+'">'}return tr+"<td>"+"<table>"+"<tr>"+input+"<td>"+clearButton+"</td>"+_helpTd+"</tr>"+"</table>"+"</td></tr>"};
var createTextField=function(id,label,help,values,time,minDate,maxDate,ro,helpIcon,initValue,whatResizable){var taxonFieldWidth=id===_getId("what")&&whatOpt&&whatOpt.showTaxonDialog?"width: "+(initOptions.fieldsWidth-28)+"px;":"";var taxonDiv=id===_getId("what")&&whatOpt.showTaxonDialog?createTaxonDiv():"";var cursor=whatOpt&&id===_getId("what")&&whatOpt.showTaxonDialog||id===_getId("where")||id===_getId("from")||id===_getId("to")?"pointer":values?"default":"text";var readOnly=ro||whatOpt&&whatOpt.showTaxonDialog&&
id===_getId("what")?"readonly":"";var sel=id===_getId("where")&&whereOpt.applyValue&&whereOpt.value?whereOpt.value.south+","+whereOpt.value.west+","+whereOpt.value.north+","+whereOpt.value.east:"";var whatStyle=id===_getId("what")&&whatResizable?" min-width:"+initOptions.fieldsWidth+"px; padding-right:10px;display:flex;resize: horizontal; overflow-x: auto; overflow-y: hidden;":"";var textInput=id===_getId("what")?'<td style="width: '+initOptions.fieldsWidth+"px;"+whatStyle+'" >':'<td style="width: '+
initOptions.fieldsWidth+'px;">';if(id!=_getId("what"))textInput+='<div style="height:'+fixedHeight+'px;">';var width=id===_getId("what")&&whatResizable?"100%":initOptions.fieldsWidth+"px";textInput+='<input value="'+initValue+'" style="width: '+width+"; cursor: "+cursor+";"+taxonFieldWidth+'" placeholder="'+label+'" value="'+sel+'" class="cnst-widget-input" id="'+id+'" type="text" '+readOnly+"/>"+taxonDiv;if(id!=_getId("what"))textInput+="</div>";textInput+="</td>";var input=values?createSelect(id,
label,values,readOnly,null,null,null,initValue):textInput;if(keyDownEnabled)jQuery(document).on("keydown","#"+id,function(){GIAPI.UI_Utils.enterKeyDown(initOptions.keyDownAction)});var clearId=id+"-clear";jQuery(document).on("click","#"+clearId,function(){var id=clearId.replace("-clear","");clear(id);if(id===_getId("where"))if(whereOpt.resultsMapWidget){var mapType=whereOpt.resultsMapWidget.mapType();whereOpt.resultsMapWidget.select()}});if(time)timeObjects.push({"id":id,"minDate":minDate,"maxDate":maxDate});
var options=id===_getId("what")&&whatOpt&&!whatOpt.showTaxonDialog&&whatOpt.showOptDialog?createWhatOptButton():"";var clearButton=createClearButton(values,id,clearId,false,options);if(whatOpt&&whatOpt.showTaxonDialog&&id===_getId("what"))clearButton="";var tr="<tr>";var _helpTd="";if(helpIcon&&!(whatOpt&&whatOpt.showTaxonDialog&&id===_getId("what"))){var helpId=GIAPI.random();_helpTd=helpTd(label,help,helpId);var trId=GIAPI.random();tr='<tr id="'+trId+'">'}return tr+"<td>"+"<table>"+"<tr>"+input+
"<td>"+options+clearButton+"</td>"+_helpTd+"</tr>"+"</table>"+"</td></tr>"};var setRowListener=function(trId,helpId){jQuery(document).on("mouseover","#"+trId,function(){jQuery("#"+helpId+" i").css("display","")});jQuery(document).on("mouseout","#"+trId,function(){jQuery("#"+helpId+" i").css("display","none")})};var createClearButton=function(values,id,clearId,num,settings){var l=num?"margin-left: -40px":settings?"margin-left:-32px":"";var cl=!values?'<i title="Clear" id="'+clearId+'" style="display:none; '+
l+'" class="cnst-widget-clear-button fa fa-times" aria-hidden="true"></i>':"";if(cl){jQuery(document).on("mouseover","#"+id,function(){jQuery("#"+clearId).css("display","")});jQuery(document).on("mouseover","#"+clearId,function(){jQuery("#"+clearId).css("display","")});jQuery(document).on("mouseout","#"+id,function(){jQuery("#"+clearId).css("display","none")})}return cl};var createWhatOptButton=function(id){var id=GIAPI.random();var i='<i title="Options" id="'+id+'" class="cnst-widget-what-opt-button fa fa-cog" aria-hidden="true"></i>';
jQuery(document).on("click","#"+id,function(){showWhatOptionsDialog()});return i};var createSelect=function(id,label,values,readOnly,min,max,step,initValue){var sel='<td style="width: '+initOptions.fieldsWidth+'px;"  >';var n="";if(min||max||step){if(min)n='min="'+min+'" ';if(max)n+='max="'+max+'" ';if(step)n+='step="'+step+'" ';n+='type="number"'}if(!readOnly){sel+='<div style="height:'+fixedHeight+'px">';sel+='<input style="width: '+initOptions.fieldsWidth+'px;" class="cnst-widget-input" id="'+
id+'" list="'+id+'-list"/ '+n+" >";sel+="</div>";sel+='<datalist id="'+id+'-list">'}else{sel+='<div style="height:'+fixedHeight+'px">';sel+='<select style="height: 22px; width: '+(initOptions.fieldsWidth+4)+'px;" class="cnst-widget-select-input cnst-widget-input" id="'+id+'" '+n+">"}values.forEach(function(v,index){var selected=index===initValue?" selected":"";sel+='<option value="'+(v.value!==undefined?v.value:v.label)+'" '+selected+">"+v.label+"</option>"});sel+=!readOnly?"</datalist>":"</select></div>";
sel+="</td>";return sel};var createTaxonDiv=function(){var div='<div title="Click to edit the field" id="editField" class="cnst-widget-button-img cnst-widget-edit-img"/>';jQuery(document).on("click","#"+_getId("what"),function(){showTaxonDialog()});jQuery(document).on("click","#editField",function(){jQuery(document).off("click","#"+_getId("what"));jQuery("#"+_getId("what")).css("cursor","text");jQuery("#"+_getId("what")).removeAttr("readonly");jQuery("#"+_getId("what")).focus()});jQuery(document).on("blur",
"#"+_getId("what"),function(){jQuery(document).on("click","#"+_getId("what"),function(){showTaxonDialog()});jQuery("#"+_getId("what")).css("cursor","pointer");jQuery("#"+_getId("what")).attr("readonly","readonly")});return div};var createDatePicker=function(obj){var id=obj.id;jQuery("#"+id).datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,minDate:obj.minDate,maxDate:obj.maxDate})};var createWhatOptDialog=function(){var table='<table style="border-spacing: 0px; display: inline-block;  width: 130px;">';
var title="SEARCH FIELDS";var help="Set the metadata fields where the text search is performed.<br>";help+='As default the text search is performed on the "title" and "keyword" fields.<br>';help+='If you want to perform the text search in to the whole textual content of the dataset, select "Any text"<br><br>';var sf='<td style="width:300px; padding-left: 5px; padding-top: 5px; padding-bottom:15px"><label id="searchFieldsLabel" style="font-weight: bold;">SEARCH FIELDS</label></td><td>'+GIAPI.UI_Utils.helpImage(title,
help,"margin-top:5px;margin-left:2px");+"</td>";table+="<tr>"+sf+"</tr>";var title='<td style="padding-left: 5px;padding-top:5px"><label>Title</label></td><td style="padding-right: 5px;"><input id="'+_getId("titleCheck")+'" type="checkbox" checked/></td>';table+="<tr>"+title+"</tr>";var kwd='<td style="padding-left: 5px;padding-top:5px"><label>Keyword</label></td><td style="padding-right: 5px;"><input id="'+_getId("kwdCheck")+'" type="checkbox" checked/></td>';table+="<tr>"+kwd+"</tr>";var desc='<td style="padding-left: 5px;padding-top:5px"><label>Description</label></td><td style="padding-right: 5px;"><input id="'+
_getId("descCheck")+'" type="checkbox"/></td>';table+="<tr>"+desc+"</tr>";var anyText='<td style="padding-left: 5px;padding-top:5px"><label>Any text</label></td><td style="padding-right: 5px;padding-bottom:15px"><input id="'+_getId("anyTextCheck")+'" type="checkbox"/></td>';table+="<tr>"+anyText+"</tr>";table+="</table>";var preventEmptySelection=function(check){var anyText=jQuery("#"+_getId("anyTextCheck")).prop("checked");var title=jQuery("#"+_getId("titleCheck")).prop("checked");var description=
jQuery("#"+_getId("descCheck")).prop("checked");var keywords=jQuery("#"+_getId("kwdCheck")).prop("checked");if(check.id===_getId("anyTextCheck")&&anyText){jQuery("#"+_getId("anyTextCheck")).prop("checked",true);jQuery("#"+_getId("titleCheck")).prop("checked",true);jQuery("#"+_getId("descCheck")).prop("checked",true);jQuery("#"+_getId("kwdCheck")).prop("checked",true)}if(!anyText&&!title&&!description&&!keywords)jQuery(check).prop("checked",true)};jQuery(document).on("click","#"+_getId("anyTextCheck"),
function(e){preventEmptySelection(this)});jQuery(document).on("click","#"+_getId("titleCheck"),function(e){preventEmptySelection(this)});jQuery(document).on("click","#"+_getId("descCheck"),function(e){preventEmptySelection(this)});jQuery(document).on("click","#"+_getId("kwdCheck"),function(e){preventEmptySelection(this)});var extTable='<table style="border-spacing: 0px; display: inline-block; width: 180px;height: 133px;">';var title="RESULT SET EXTENSION";var help="Normally the response of a search is a single result set. With this option <b>you can get more than one result set</b>";
help+=' according to an interaction with a service called "semantic engine". This service is able to identify terms "semantically related" ';help+=' to the term specified by the "Search terms" constraint. The relation between terms can be "more general" or "more specific". The terms identified by the "semantic engine" ';help+=" are used to build additional queries to the DAB, and a result set is created for each query having at least one result.<br>";help+=" If the extension provides more than one result set, you will find in the response pane a tab for each result set. The label of each tab ";
help+=' provides the term identified by the "semantic engine" used to generate the correspondent result set.<br><br>';help+=' Note that because of the interaction with the "semantic engine" and the possible generation of additional queries, <i>the response time can be longer than usual</i><br><br>';var sf='<td style="width:300px; padding-left: 5px; padding-top: 5px; padding-bottom:15px"><label style="font-weight: bold;">RESULT SET EXTENSION</label></td>';sf+="<td>"+GIAPI.UI_Utils.helpImage(title,
help,"margin-top:5px;margin-left:2px");+"</td>";extTable+="<tr>"+sf+"</tr>";var title='<td style="padding-left: 5px;padding-top:5px"><label>Enabled</label></td><td style="padding-right: 5px;"><input id="'+_getId("rsExtCheck")+'" type="checkbox"/></td>';extTable+="<tr>"+title+"</tr>";var moreGen='<td style="padding-left: 5px;padding-top:5px"><label id="'+_getId("moreGenLabel")+'" style="margin-left:10px">- More general</label></td>';moreGen+='<td style="padding-right: 5px;"><input id="'+_getId("moreGenRadio")+
'" type="radio" name="rsExtRadio" checked/></td>';extTable+="<tr>"+moreGen+"</tr>";var moreSpec='<td style="padding-left: 5px;padding-top:5px"><label id="'+_getId("moreSpecLabel")+'" style="margin-left:10px">- More specific</label></td>';moreSpec+='<td style="padding-right: 5px;"><input id="'+_getId("moreSpecRadio")+'" type="radio" name="rsExtRadio"/></td>';extTable+="<tr>"+moreSpec+"</tr>";var related='<td style="padding-left: 5px;padding-top:5px"><label id="'+_getId("relLabel")+'" style="margin-left:10px">- Related</label></td>';
related+='<td style="padding-right: 5px;"><input id="'+_getId("relRadio")+'" type="radio" name="rsExtRadio"/></td>';extTable+="<tr>"+related+"</tr>";extTable+="</table>";var applyButton=GIAPI.FontAwesomeButton({"width":100,"label":"CLOSE","icon":"fa-times","handler":function(){jQuery("#"+whatOptDialogId).dialog("close");return false}});if(!whatOpt.showResultSetExtensionOpt)extTable="";var widget='<div class="cnst-widget-what-opt-div">'+table+" "+extTable+" "+applyButton.div()+"</div>";jQuery("#"+
whatOptDialogId).append(widget);var updateOnCheck=function(obj){if(obj&&obj.checked){jQuery("#"+_getId("moreGenLabel")).css("color","black");jQuery("#"+_getId("moreSpecLabel")).css("color","black");jQuery("#"+_getId("relLabel")).css("color","black");jQuery("#"+_getId("moreGenRadio")).removeAttr("disabled");jQuery("#"+_getId("moreSpecRadio")).removeAttr("disabled");jQuery("#"+_getId("relRadio")).removeAttr("disabled")}else{jQuery("#"+_getId("moreGenLabel")).css("color","#999999");jQuery("#"+_getId("moreSpecLabel")).css("color",
"#999999");jQuery("#"+_getId("relLabel")).css("color","#999999");jQuery("#"+_getId("moreGenRadio")).attr("disabled","disabled");jQuery("#"+_getId("moreSpecRadio")).attr("disabled","disabled");jQuery("#"+_getId("relRadio")).attr("disabled","disabled")}};jQuery(document).on("click","#"+_getId("rsExtCheck"),function(){updateOnCheck(this)});updateOnCheck();return widget};var showWhatOptionsDialog=function(){var pos=GIAPI.position(whatOpt.optDialogPosition);jQuery("#"+whatOptDialogId).dialog({width:whatOpt.showResultSetExtensionOpt?
345:160,autoOpen:false,resizable:false,dialogClass:"no-titlebar",position:{of:"#"+_getId("what"),my:pos.my,at:pos.at,collision:"none"}});jQuery("#"+whatOptDialogId).dialog("open");jQuery("#"+whatOptDialogId).parent().addClass("cnst-widget-what-opt-dialog");if(!whatOptDialog)whatOptDialog=createWhatOptDialog()};var createTaxonDialog=function(){var sModeTable='<table style="padding-bottom: 10px; background: white; width: 590px;">';var helpTitle="Search mode";var helpText="";var ts='<td style=" padding-left: 5px; padding-top: 5px; padding-bottom:10px">';
ts+='<label style="font-weight: bold;">Search mode</label></td><td></td>';sModeTable+="<tr>"+ts+"</tr>";var verNameEx='<td style=""><input id="verNameExact" type="radio" name="srcMode" checked/>';verNameEx+='<label style="vertical-align: top">&nbsp;Vernacular name exact</label></td>';var sciNameEx='<td style=""><input id="sciNameExact" type="radio" name="srcMode"/>';sciNameEx+='<label style="vertical-align: top">&nbsp;Scientific name exact</label></td>';var identifier='<td style=""><input id="identifier" type="radio" name="srcMode"/>';
identifier+='<label style="vertical-align: top">&nbsp;Find by identifier</label></td>';sModeTable+="<tr>"+verNameEx+sciNameEx+identifier+"</tr>";var verNameLk='<td style=""><input id="verNameLike" type="radio" name="srcMode"/>';verNameLk+='<label style="vertical-align: top">&nbsp;Vernacular name like</label></td>';var sciNameLk='<td style=""><input id="sciNameLike" type="radio" name="srcMode"/>';sciNameLk+='<label style="vertical-align: top">&nbsp;Scientific name like</label></td>';sModeTable+="<tr>"+
verNameLk+sciNameLk+"</tr>";sModeTable+="</table>";helpTitle="Vernacular name";helpText="";var verNameLabel='<label style="margin-left:5px; margin-top: 10px; display: inline:block"><b>Name/identifier:</b></label>';var verNameField='<input title="Press enter to start searching" id="taxonName" type="text" style="padding: 3px;border:none; margin-top: 10px;margin-left: 5px; width: 364px; display: inline:block"></input>';var verNameSearch=GIAPI.FontAwesomeButton({"id":"taxonSearch","label":"SEARCH","icon":"fa-search"});
verNameSearch.css("div","padding","3px");verNameSearch.css("div","padding-right","15px");verNameSearch.css("div","margin-left","5px");var verNameDiv='<div style="margin-top:5px">'+verNameLabel+verNameField+verNameSearch.div()+"</div>";var search=function(){jQuery(document).off("click","#taxonSearch",search);GIAPI.UI_Utils.setGlassPane("taxonSearch",{background:true});jQuery("#taxonName").attr("disabled","disabled");jQuery("#responseDiv").html("");jQuery("#responseDiv").append('<br><label style="color:blue">&nbsp;&nbsp;&nbsp;Performing request, please wait...</label>');
var name=jQuery("#taxonName").val();var mode=jQuery("#verNameExact").prop("checked")===true?"vernacularNameExact":jQuery("#verNameLike").prop("checked")===true?"vernacularNameLike":jQuery("#sciNameExact").prop("checked")===true?"scientificNameExact":jQuery("#sciNameLike").prop("checked")===true?"scientificNameLike":"findByIdentifier";var endpoint=dabNode.endpoint();endpoint=endpoint.endsWith("/")?endpoint:endpoint+"/";var servicePath=dabNode.servicePath();var query=endpoint+servicePath+"/opensearch?reqID=66w&taxonSearch&name="+
name+"&mode="+mode;jQuery(document).on("click","#cnst-widget-taxon-table tr",function(){jQuery(this).addClass("cnst-widget-taxon-resp-table-td-selected").siblings().removeClass("cnst-widget-taxon-resp-table-td-selected");var value=jQuery(this).find("td:first").text();jQuery("#"+_getId("what")).val(value);jQuery("#"+taxonDialogId).dialog("close")});jQuery.ajax({type:"GET",url:query,crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){jQuery("#responseDiv").html("");jQuery(document).on("click",
"#taxonSearch",search);GIAPI.UI_Utils.removeGlassPane("taxonSearch");jQuery("#taxonName").removeAttr("disabled");var query=data.response.query;if(!query){jQuery("#responseDiv").append('<br><label style="color:red">&nbsp;&nbsp;&nbsp;Error occurred, EU BON UTIS not available.<br>&nbsp;&nbsp;&nbsp;Please try later</label>');return}var table='<table id="cnst-widget-taxon-table" style="text-align: left;width: 100%;padding:3px; background: white;">';table+='<tr style="font-size:90%"><th>Scientific Name</th><th>Genus</th><th>Family</th><th>Order</th><th>Class</th><th>Phylum</th><th>Kingdom</th></tr>';
query[0].response.forEach(function(r){var checkList=r.checklist.toLowerCase();if(checkList==="pesi"){var taxon=r.taxon;var sName=taxon.taxonName.scientificName;var hClass=taxon.higherClassification;var values=[];values.push(sName);if(hClass.length===0)for(var i=1;i<7;i++)values[i]="-";hClass.forEach(function(cl){var rank=cl.rank;var name=cl.scientificName;var index;switch(rank){case "Genus":index=1;break;case "Family":index=2;break;case "Order":index=3;break;case "Class":index=4;break;case "Phylum":index=
5;break;case "Kingdom":index=6;break}values[index]=name});for(var i=0;i<values.length;i++){var value=values[i];if(!value)value="-";if(i===0){table+='<tr class="cnst-widget-taxon-resp-table-tr" title="Click to select Scientific Name">';table+='<td class="cnst-widget-taxon-resp-sc-name-td">'+value+"</td>"}else if(i===values.length)table+="</tr>";else table+='<td style=" font-size:80%;">'+value+"</td>"}}});table+="</table>";jQuery("#responseDiv").append(table)}})};jQuery(document).on("click","#taxonSearch",
search);jQuery(document).on("keydown","#taxonName",function(){GIAPI.UI_Utils.enterKeyDown(search)});var applyButton=GIAPI.FontAwesomeButton({"label":"CLOSE","icon":"fa-times","handler":function(){jQuery("#"+taxonDialogId).dialog("close");return false}});applyButton.css("div","padding-right","15px");applyButton.css("div","margin-top","10px");var responseDiv='<div style="background:white;width:800px;height:400px;margin-top:10px;overflow-y:auto" id="responseDiv"></div>';var widget='<div style="margin-left:-9px">'+
sModeTable+" "+verNameDiv+" "+responseDiv+" "+applyButton.div()+"</div>";jQuery("#"+taxonDialogId).append(widget);return widget};var showTaxonDialog=function(){var pos=GIAPI.position(whatOpt.taxonDialogPosition);jQuery("#"+taxonDialogId).dialog({title:"EU BON UTIS Taxonomic Search",height:650,width:810,modal:true,resizable:false,autoOpen:false});jQuery("#"+taxonDialogId).dialog("open");if(!taxonDialog)taxonDialog=createTaxonDialog()};var helpTd=function(title,help,id){var td="";if(help){var imageId=
"fa-question-circle-o";if(title.toLowerCase().includes("instrument"))imageId="fa-thermometer-full";if(title.toLowerCase().includes("platform"))imageId="fa-ship";if(title.toLowerCase().includes("originator"))imageId="fa-users";if(title.toLowerCase().includes("attribute"))imageId="fa-bar-chart";td='<td style="vertical-align: middle;height: '+(fixedHeight+1)+'px;" id="'+id+'">'+GIAPI.UI_Utils.helpImage(title,help,"margin-left: -4px;",imageId,"odip-help")+"</td>"}return td};var clear=function(id){jQuery("#"+
id).val("")};return widget};GIAPI.SourcesWidget=function(id,dabNode,options){var widget={};var sourcesCount=0;if(!options)options={};if(!options.width)options.width="width: 375px;";else if(options.width==="none")options.width="";else options.width="width: "+options.width+"px;";if(!options.height)options.height="height: 210px;";else if(options.height==="none")options.height="";else options.height="height: "+options.height+"px;";if(!options.include)options.include=function(){return true};widget.sourcesCount=function(){return sourcesCount};
var includeSources=function(sources,check){var indexes=jQuery(check).prop("id").replace("check_","").split("_");indexes.forEach(function(index){var source=sources[index];source.include(jQuery(check).is(":checked"))});if(check.checked)sourcesCount++;else sourcesCount--;if(!options.groups)setSelectedSources(sources)};dabNode.sources(function(sources,error){if(error&&options.errorHandler){options.errorHandler.apply(this,[error]);return}var table='<table class="sources-widget" style="'+options.width+
options.height+'">';if(!options.groups){var checkAllTable="<table>";checkAllTable+="<tr>";var checkId="check_all";checkAllTable+="<td>";checkAllTable+='<div style="margin-left: -10px; margin-top:5px; margin-bottom:-5px">'+GIAPI.ButtonsFactory.onOffSwitchButton("IN","OUT",{"id":checkId,"size":"small","offBckColor":"white","onBckColor":"white","offColor":"black","onColor":"black","switchColor":"#2c3e50","switchBorderColor":"#2c3e50","borderColor":"rgba(44, 62, 80, 0.07)"});checkAllTable+="</div></td>";
checkAllTable+='<td style="vertical-align: bottom;"><label class="sources-widget-all-label" id="check_all_label"></label></td>';checkAllTable+="</tr></table>";table+="<tr><td colspan=3>"+checkAllTable+"</td></tr>";jQuery(document).on("click","#check_all",function(event){if(jQuery("#check_all").is(":checked"))sourcesCount=sources.length;else sourcesCount=0;setSelectedSources(sources);for(var i=0;i<sources.length;i++){var checkId="check_"+i;jQuery("#"+checkId).prop("checked",this.checked);sources[i].include(this.checked)}});
for(var i=0;i<sources.length;i++){var source=sources[i];table+="<tr>";var checkId="check_"+i;table+='<td style="width: 40px;">';var checked=options.include(source);source.include(checked);if(checked)sourcesCount++;table+='<div style="margin-bottom:-5px">'+GIAPI.ButtonsFactory.onOffSwitchButton("IN","OUT",{"id":checkId,"checked":checked,"size":"small"});jQuery(document).on("click","#"+checkId,function(event){includeSources(sources,this)});var title=source.report().title;if(title.length>55)title=title.substring(0,
55)+"...";table+="</div></td>";var targetDivId=GIAPI.random();var infoButtonId="source-info-"+source.uiId;var toggleButton=GIAPI.ToggleButton({"id":infoButtonId,"width":18,"targetId":targetDivId,"offLabel":"","onLabel":"","attr":[{name:"title",value:"Source info"},{name:"init",value:"false"},{name:"target",value:targetDivId}],"source":source,"beforeStart":function(){var init=this.attr[1].value;if(init==="false"){var targetId=this.attr[2].value;this.sourceInfo=GIAPI.Source_UINode(this.source,targetId);
jQuery("#"+targetId+" > table").css("margin-left","-78px");jQuery("#"+targetId+" > table").css("margin-top","10px")}},"onComplete":function(){var init=this.attr[1].value;if(init==="false"){this.attr[1].value="true";this.sourceInfo.updateMap()}}});toggleButton.stateIcon("on","fa-info-circle");toggleButton.stateIcon("off","fa-info-circle");toggleButton.css("div","padding","0px");toggleButton.css("div","background","transparent");toggleButton.css("icon","color","#1A237E");toggleButton.css("icon","margin-left",
"2px");toggleButton.css("icon","font-size","15px");toggleButton.css("icon","vertical-align","middle");table+='<td style="width: 18px;" title="Source info">'+toggleButton.div()+"</td>";table+='<td title="'+source.report().title+'" style="vertical-align: bottom;"><label class="sources-widget-src-label">'+title+"</label></br>";var infoDiv='<div id="'+targetDivId+'" style="display:none"></div>';table+=infoDiv+"</td>";table+="</tr>"}if(sourcesCount===0)sourcesCount=sources.length}else{var groupCount=0;
for(var name in options.groups){table+="<tr>";var checkId="check_";var labels=options.groups[name];labels.forEach(function(label){for(var i=0;i<sources.length;i++){var source=sources[i];var title=source.report().title;if(title===label)checkId+=i+"_"}});checkId=checkId.substring(0,checkId.length-1);table+="<td>";table+="<div>"+GIAPI.ButtonsFactory.onOffSwitchButton("YES","NO",{"id":checkId,"size":"small"});jQuery(document).on("click","#"+checkId,function(event){includeSources(sources,this)});table+=
"</div></td>";table+="<td title="+name+' style="cursor:default; vertical-align: middle; ">'+name+"</td>";table+="</tr>";groupCount++}sourcesCount=groupCount}table+="</table>";jQuery("#"+id).append(table);if(!options.groups)setSelectedSources(sources);if(options.onSourcesReady)options.onSourcesReady.apply(widget,[sources])},options.viewId);var setSelectedSources=function(sources){if(sourcesCount===sources.length)jQuery("#check_all_label").html("<b>All</b> sources selected");else if(sourcesCount>0){var s=
sourcesCount>1?"s":"";jQuery("#check_all_label").html("<b>"+sourcesCount+"</b> source"+s+" selected")}else jQuery("#check_all_label").html("<b >No</b> sources selected")};return widget};GIAPI.UI_Utils=new function(){var obj={};var progressBar;var progressLabel;obj.glassPaneMap={};obj.appendStyle=function(css,id){if(!id)id="api-injected-file";if(jQuery("#"+id).length===0)jQuery("head").append('<style type="text/css" id="'+id+'"/>');jQuery("#"+id).append(css)};if(jQuery("#dialog").length===0){var discDialogDiv='<div id="discoverDialog"><div id="progressBar">';discDialogDiv+='<div class="progress-label">0%</div></div>';discDialogDiv+='<div><label id="status-label" style="font-weight: bold;font-size:11px">Searching...</label></div></div>';
jQuery("head").append(discDialogDiv);jQuery("head").append('<div id="dialog" ></div>');jQuery("head").append('<div id="overviewDialog" title="Overview"><div id="overviewDialogImg"></div></div>');jQuery(document).on("dblclick","#overviewDialog",function(){jQuery("#overviewDialog-maximize-button").click();return false});jQuery(function(){var css=".maximize-button{"+"cursor:pointer;"+"position: absolute;"+"right: 26px;"+"top: 50%;"+"width: 20px;"+"margin: -10px 0 0 0;"+"padding: 1px;"+"height: 20px; "+
"border:none;"+'background:url("http://api.geodab.eu/docs/assets/img/maximize.png") no-repeat center center;'+"}"+".maximize-button:active{"+'background:url("http://api.geodab.eu/docs/assets/img/maximize-active.png") no-repeat center center;'+"}"+".restore-button{"+'background:url("http://api.geodab.eu/docs/assets/img/restore.png") no-repeat center center;'+"}"+".restore-button:active{"+'background:url("http://api.geodab.eu/docs/assets/img/restore-active.png") no-repeat center center;'+"}";obj.appendStyle(css);
jQuery.fn.maximizeButton=function(set,handler){var id=jQuery(this).attr("id");var buttonId=id+"-maximize-button";var div=jQuery('[aria-describedby="'+id+'"] div[class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle"]');jQuery("#"+id).attr("maximized","no");if(set){jQuery("#"+buttonId).remove();div.append('<button id="'+buttonId+'" class="maximize-button"/>');jQuery("#"+buttonId).click(function(){var maximized=jQuery("#"+id).attr("maximized")==="yes";var dim=
null;if(maximized){jQuery("#"+id).attr("maximized","no");jQuery("#"+buttonId).removeClass("restore-button");dim=[jQuery("#"+id).attr("w"),jQuery("#"+id).attr("h")]}else{jQuery("#"+id).attr("maximized","yes");jQuery("#"+buttonId).addClass("restore-button");dim=handler.apply(jQuery("#"+id),[jQuery("#"+id)])}var maxw=handler.apply(jQuery("#"+id),[jQuery("#"+id)])[0];var maxh=handler.apply(jQuery("#"+id),[jQuery("#"+id)])[1];jQuery("#"+id).dialog({width:dim[0],height:dim[1],maxWidth:maxw,maxHeight:maxh});
return false})}else jQuery("#"+buttonId).remove()};jQuery("#dialog").dialog({autoOpen:false,height:"auto",width:500,modal:true});var css="color: black;";css+="padding: 3px;";css+="padding-top:15px;";css+="padding-bottom: 15px;";var div="<div >";var div='<div style="'+css+'" id="dialog-message"/>';div+="</div>";jQuery("#dialog").append(div);progressBar=jQuery("#progressBar");progressBar.lastValue=0;progressLabel=jQuery(".progress-label");progressBar.progressbar({value:false,change:function(){var value=
parseInt(progressBar.progressbar("value"));if(value>=50)progressLabel.css("color","white");else progressLabel.css("color","#2c3e50");progressLabel.text(progressBar.progressbar("value")+"%")},complete:function(){progressBar.lastValue=0;progressLabel.text("100%")}});jQuery("#discoverDialog").dialog({autoOpen:false,dialogClass:"no-titlebar",height:70,width:400,modal:true})})}obj.markerIcon=function(color){switch(color){case "red":return"http://api.geodab.eu/docs/assets/img/red-marker.png";break;case "blue":return"http://api.geodab.eu/docs/assets/img/blue-marker.png";
break;case "green":return"http://api.geodab.eu/docs/assets/img/green-marker.png";break;case "yellow":return"http://api.geodab.eu/docs/assets/img/yellow-marker.png";break}};obj.openNodeInfoPage=function(dabNode,targetNodeId){var endpoint=dabNode.endpoint();if(!endpoint.endsWith("/"))endpoint+="/";var servicePath=dabNode.servicePath();var cswPath=dabNode.cswPath();var link=endpoint+servicePath+"/"+cswPath+"?service=CSW&version=2.0.2&request=GetRecordById&id="+targetNodeId+"&outputschema=http://www.isotc211.org/2005/gmi&elementSetName=full";
window.open(link)};obj.discoverDialog=function(action,status,options){switch(action){case "open":progressBar.lastValue=0;if(options&&options.progressBarText)progressLabel.text(options.progressBarText);else{progressLabel.text("0%");progressBar.progressbar("value",0)}if(options&&options.progressBarTextLeft)jQuery(".progress-label").css("left",options.progressBarTextLeft+"%");if(options&&options.statusLabelText)jQuery("#status-label").text(options.statusLabelText);else jQuery("#status-label").text("Searching...");
jQuery("#discoverDialog").dialog("open");return;case "update":var value=status[0].progress();var msg=status[0].message();jQuery("#status-label").text(msg);if(value>=progressBar.lastValue){progressBar.lastValue=value;progressBar.progressbar("value",value)}return;case "isOpen":return jQuery("#discoverDialog").dialog("isOpen");case "empty":jQuery("#discoverDialog").empty();return;case "close":progressBar.lastValue=0;progressLabel.text("100%");progressBar.progressbar("value",100);jQuery("#status-label").text("Done");
jQuery("#discoverDialog").dialog("close");return}};obj.dialog=function(action,options){switch(action){case "open":jQuery("#dialog-message").empty();if(options.message)jQuery("#dialog-message").append(options.message);var maximize=options.maximize;var maxSize=options.maxSize;delete options.maximize;delete options.maxSize;delete options.message;jQuery("#dialog").dialog("option",options);if(maximize){if(!maxSize)maxSize=function(){var winW=jQuery(window).width()-jQuery(window).width()/100*10;var winH=
jQuery(window).height()-jQuery(window).height()/100*10;return[winW,winH]};jQuery("#dialog").dialog().maximizeButton(true,maxSize)}else jQuery("#dialog").dialog().maximizeButton(false);jQuery("#dialog").dialog("open");return;case "isOpen":return jQuery("#dialog").dialog("isOpen");case "empty":jQuery("#dialog").empty();return;case "close":jQuery("#dialog").dialog("close");return}};obj.removeDialogBorders=function(id){jQuery('[aria-describedby="'+id+'"]').css("background","transparent");jQuery('[aria-describedby="'+
id+'"]').css("border","none")};obj.addCloseButtonToTab=function(id,onClose){var css=" position: relative; float: right; margin-right: 5px; top: 15px;";var buttonId=GIAPI.random();var button='<button id="'+buttonId+'" style="'+css+'" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close" role="button" title="Close">';button+='<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">Close</span></button>';
if(jQuery("#"+id+"-ul").length>0)jQuery("#"+id+"-ul").append(button);else jQuery("#"+id+"-ol").append(button);jQuery("#"+buttonId).click(onClose)};obj.loadOverview=function(node,id,options){var onOverviewResponse=function(status,msg,image){if(status==="error")jQuery("#"+id).addClass("no-overview-div");else{if(!node.report().overview||!node.report().overview.length){jQuery("#"+id).addClass("no-overview-div");return}jQuery("#"+id).addClass("overview-div");if(options.maintainSize){jQuery("#"+id).attr("width",
"96px");jQuery("#"+id).attr("height","96px");jQuery("#"+id).css("width","96px");jQuery("#"+id).css("height","96px")}var length=node.report().overview.length;var addDivListener=false;if(length>1&&options.selector)if(jQuery("#"+id).parent().children().length===1){addDivListener=true;jQuery("#"+id).attr("idx","0");var css="width:100%; height: 20px;margin-top:2px";var selectDiv='<div style="'+css+'">';var prevId=GIAPI.random();var nextId=GIAPI.random();selectDiv+='<i id="'+prevId+'" title="Previous image" style="color:gray" class="fa fa-chevron-circle-left" aria-hidden="true"></i>';
selectDiv+='<i id="'+nextId+'" title="Next image" style="cursor:pointer; margin-left:3px" class="fa fa-chevron-circle-right" aria-hidden="true"></i>';selectDiv+="</div>";jQuery("#"+id).parent().append(selectDiv);jQuery("#"+prevId).click(function(){var idx=parseInt(jQuery("#"+id).attr("idx"));var exec=false;if(idx-1>=1){jQuery(this).css("color","black");jQuery(this).css("cursor","pointer");jQuery("#"+nextId).css("color","gray");jQuery("#"+nextId).css("cursor","default");exec=true}else{jQuery(this).css("color",
"gray");jQuery(this).css("cursor","default");jQuery("#"+nextId).css("color","black");jQuery("#"+nextId).css("cursor","pointer")}if(idx-1>=0){idx-=1;jQuery("#"+id).attr("idx",idx);jQuery("#"+id).empty();options.size="small";options.index=idx;node.overview(id,onOverviewResponse,options)}});jQuery("#"+nextId).click(function(){var idx=parseInt(jQuery("#"+id).attr("idx"));if(idx+1<length-1){jQuery(this).css("color","black");jQuery(this).css("cursor","pointer");jQuery("#"+prevId).css("color","gray");jQuery("#"+
prevId).css("cursor","default")}else{jQuery(this).css("color","gray");jQuery(this).css("cursor","default");jQuery("#"+prevId).css("color","black");jQuery("#"+prevId).css("cursor","pointer")}if(idx+1<length){idx+=1;jQuery("#"+id).attr("idx",idx);jQuery("#"+id).empty();options.size="small";options.index=idx;node.overview(id,onOverviewResponse,options)}})}if(length===1||addDivListener||!options.selector)jQuery("#"+id).click(function(){jQuery("#overviewDialogImg").empty();options.size="original";var idx=
jQuery("#"+id).attr("idx");if(idx)options.index=parseInt(idx);node.overview("overviewDialogImg",function(s,m,i){var title=node.report().title;if(title.length>60)title=title.substring(0,60)+"...";openOverviewDialog(i.width,i.height,title)},options)})}};if(!options)options={};options.size="small";node.overview(id,onOverviewResponse,options)};obj.separator=function(css){return'<div style="'+css+'" class="line"/>'};obj.exitFullScreen=function(){if(document.webkitExitFullscreen)document.webkitExitFullscreen();
else if(document.mozCancelFullscreen)document.mozCancelFullscreen();else if(document.exitFullscreen)document.exitFullscreen()};obj.isFullScreen=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement};obj.helpImage=function(title,helpMsg,css,imageId,imgClass){var id=GIAPI.random();if(css)css='style="cursor:pointer; '+css+'"';else css='style="cursor:pointer"';if(imageId==null)imageId="fa-question-circle-o";imgClass=
imgClass?imgClass:"";var img="<i "+css+' id="'+id+'" class="'+imgClass+" fa "+imageId+' " aria-hidden="true"></i>';jQuery(document).on("click","#"+id,function(){obj.dialog("open",{height:"auto",width:500,title:title,message:helpMsg,resizable:false})});return img};obj.enterKeyDown=function(handler){var keycode;if(window.event)keycode=window.event.keyCode;else if(e)keycode=e.which;if(keycode===13){handler.apply(this,[]);return false}return true};obj.setGlassPane=function(targetId,options){if(!options)options=
{};if(!options.background)options.background=false;if(!options.opacity)options.opacity=.2;var pos=jQuery("#"+targetId).position();var w=jQuery("#"+targetId).width();var h=jQuery("#"+targetId).height();var css="width: "+w+"px;";css+="height: "+h+"px;";css+="margin-top: -"+h+"px;";jQuery("#"+targetId).css("opacity",options.opacity);var glassPaneId=obj.glassPaneMap[targetId];if(!glassPaneId){glassPaneId=GIAPI.random();obj.glassPaneMap[targetId]=glassPaneId}jQuery("#"+glassPaneId).remove();var bck=options.background?
"glass-pane-background":"";jQuery("#"+targetId).append('<div id="'+glassPaneId+'" style="'+css+'" class="glass-pane '+bck+'"></div>');if(options.onClick)jQuery("#"+glassPaneId).click(function(){options.onClick()})};obj.removeGlassPane=function(targetId){var glassPaneId=obj.glassPaneMap[targetId];jQuery("#"+glassPaneId).remove();jQuery("#"+targetId).css("opacity",1)};obj.getTextWidth=function(text,font){var canvas=obj.canvas||(obj.canvas=document.createElement("canvas"));var context=canvas.getContext("2d");
context.font=font;var metrics=context.measureText(text);return metrics.width};var openOverviewDialog=function(imagew,imageh,title){var w=imagew>500?500:"auto";var h=imageh>500?500:"auto";jQuery("#overviewDialog").dialog({title:title,modal:true,autoOpen:false,width:w,height:h,maxWidth:imagew+60,maxHeight:imageh+55});jQuery("#overviewDialog").attr("w",w);jQuery("#overviewDialog").attr("h",h);if(w==="auto")jQuery("#overviewDialog").css("overflow","hidden");else jQuery("#overviewDialog").css("overflow",
"auto");var maxSize=function(id){var winW=jQuery(window).width()-jQuery(window).width()/100*10;var winH=jQuery(window).height()-jQuery(window).height()/100*10;var w=parseInt(jQuery("#"+id).attr("width"))+35;var h=parseInt(jQuery("#"+id).attr("height"))+60;return[Math.min(w,winW),Math.min(h,winH)]};if(w!=="auto")jQuery("#overviewDialog").dialog().maximizeButton(true,function(){return maxSize("overviewDialogImg")});else jQuery("#overviewDialog").dialog().maximizeButton(false);jQuery("#overviewDialog").dialog("open")};
obj.header=function(version){var header='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">'+'<link rel="shortcut icon" type="image/png" href="http://api.geodab.eu/docs/assets/favicon.png">'+"<div>  "+"<div>"+"<style>"+" .api-header{"+"height: 110px;"+"width: 100%;"+"border:1px solid;  "+" -moz-box-shadow:inset 0px 1px 0px 0px #bbdaf7;"+" -webkit-box-shadow:inset 0px 1px 0px 0px #bbdaf7;"+" box-shadow:inset 0px 1px 0px 0px #bbdaf7;"+" background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #79bbff), color-stop(1, #378de5) );"+
" background:-moz-linear-gradient( center top, #79bbff 5%, #378de5 100% );"+' filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#79bbff", endColorstr="#378de5");'+" background-color:#79bbff;"+" -moz-border-radius:6px;"+" -webkit-border-radius:6px;"+" border-radius:6px;"+" border:1px solid #84bbf3;"+" color:#ffffff;"+" font-family:arial;"+" font-size:15px;"+" font-weight:bold;"+" text-decoration:none;"+" text-shadow:1px 1px 0px #528ecc;"+" margin-top:30px;"+" margin-bottom:5px;"+" margin-left:-30px;"+
" margin-right:50px;"+" }"+"</style>"+'<a href="http://api.geodab.eu/index.html">'+' <table style="width:100%; margin-top: -20px; margin-bottom: -30px"><tr>'+' <td style="width:300px; height: 150px; background-color: white;"><img style="border: none;width: 350px" src="http://api.geodab.eu/docs/assets/img/api-logo.png" /></td>'+' <td style="background-color: white;">'+' <div class="api-header">'+' <span style="position:absolute; margin-top: 15px; margin-left: 10px; font-size: 270%">The GEOSS Discovery And Access Broker APIs</span><br>'+
' <span style="position:absolute; margin-top: 45px; margin-left: 10px; font-size: 110%">Authors: Fabrizio Papeschi, Mattia Santoro, Stefano Nativi</span><br>'+" </div></td>"+" </tr></table>"+" </a>"+' <div style="width: 100%;margin-left: 10px;margin-bottom: 5px">'+'<a style="text-decoration: none" href="http://www.eurogeoss.eu" target="_blank">'+' <img style="background-color: white;border: none" src="http://api.geodab.eu/docs/assets/img/eurogeoss.png" /> '+"</a>"+' <a style="margin-left: 10px; text-decoration: none" href="http://www.iia.cnr.it/" target="_blank">'+
'<img style="background-color: white;border: none" src="http://api.geodab.eu/docs/assets/img/iia.png" /> '+"</a>"+'<a style="margin-left: 10px; text-decoration: none" href="http://www.uos-firenze.essi-lab.eu/" target="_blank">'+'<img style="background-color: white;border: none" src="http://api.geodab.eu/docs/assets/img/essilab.png" /> '+"</a>"+'<a style="margin-left: 10px; text-decoration: none" href="http://ec.europa.eu/index_en.htm" target="_blank">'+'<img style="background-color: white;border: none" src="http://api.geodab.eu/docs/assets/img/jrc.png" /> '+
"</a>"+' <a style="margin-left: 50px; text-decoration: none" href="http://www.earthobservations.org/" target="_blank">'+' <img style="background-color: white;width: 320px;border: none" src="http://api.geodab.eu/docs/assets/img/geo.png" /> '+" </a> "+' <a style="margin-left: 50px; text-decoration: none" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">'+' <img style="background-color: white;float:right; margin-right: 65px; width: 120px;border: none" src="http://api.geodab.eu/docs/assets/img/ccbync.png" /> '+
"</a> "+"</div>"+'<div  style="margin-left: 10px">'+"<em>API version: "+version+"</em>"+"</div>"+"</div>"+"</div>";jQuery("body").prepend(header)};return obj};GIAPI._whereWidget=function(dabNode,whereOpt,inputId){var widget={};var initialized;var selection;var vectorSrc;var widgetMap;var mapDiv;var mapType=whereOpt.resultsMapWidget?whereOpt.resultsMapWidget.mapType():GIAPI.ui.mapType||"google";var mouseOver=false;var padding=30;var _inputControl;var dialogId=GIAPI.random();jQuery("head").append('<div id="'+dialogId+'"/>');widget.show=function(){if(!initialized){initialized=true;var pos=GIAPI.position(whereOpt.widgetPosition);jQuery("#"+dialogId).dialog({height:whereOpt.widgetHeight+
padding,width:whereOpt.widgetWidth+padding,modal:whereOpt.widgetModal,autoOpen:false,resizable:false,dialogClass:"no-titlebar",close:function(e){_inputControl.clearLocationLabel();switch(jQuery("#"+dialogId).attr("apply")){case "true":var where=_inputControl.where();if(whereOpt.resultsMapWidget)whereOpt.resultsMapWidget.select(where);jQuery("#"+inputId).val(where.south+","+where.west+","+where.north+","+where.east);jQuery("#"+inputId).blur();case "false":}if(GIAPI.UI_Utils.isFullScreen())jQuery("#"+
dialogId+" .gm-fullscreen-control")[0].click();return false},position:{of:"#"+inputId,my:pos.my,at:pos.at,collision:"none"}});jQuery("#"+dialogId).parent().css("box-shadow","0px 0px 6px 4px rgba(0,0,0,0.3)");jQuery("#"+dialogId).dialog("open");widget.init();return}jQuery("#"+dialogId).dialog("open");switch(mapType){case "ol":break;case "google":google.maps.event.trigger(widgetMap,"resize");break}};widget.init=function(target){var mapDivId=GIAPI.random();mapDiv='<div style="width: '+whereOpt.widgetWidth+
"px; height: "+whereOpt.widgetHeight+'px" class="map-widget-div">';switch(mapType){case "ol":mapDiv+='<div id="'+mapDivId+'" class="ol-fullscreen-map"></div></div>';break;case "google":mapDiv+='<div id="'+mapDivId+'" style="width: '+whereOpt.widgetWidth+"px; height: "+whereOpt.widgetHeight+'px"></div></div>';break}var dialogMode=false;if(!target){dialogMode=true;target=dialogId}jQuery("#"+target).append(mapDiv);whereOpt.longitude=whereOpt.lng;whereOpt.latitude=whereOpt.lat;whereOpt.divId=mapDivId;
whereOpt.dabNode=dabNode;whereOpt.dialogMode=dialogMode;whereOpt.dialogId=dialogId;switch(mapType){case "ol":var ol3Map=GIAPI.OL3_Map(whereOpt);widgetMap=ol3Map.map();whereOpt.widgetMap=widgetMap;whereOpt.ol3Map=ol3Map;_inputControl=GIAPI._whereInputControl(whereOpt);_inputControl.add(widgetMap);widgetMap.on("pointermove",function(){mouseOver=true});widgetMap.getViewport().addEventListener("mouseout",function(){mouseOver=false});break;case "google":widgetMap=new google.maps.Map(document.getElementById(mapDivId),
{center:{lat:whereOpt.lat,lng:whereOpt.lng},zoom:whereOpt.zoom,fullscreenControl:whereOpt.fullscreenControl,fullscreenControlOptions:whereOpt.fullscreenControlOptions,scrollwheel:whereOpt.scrollwheel,panControl:whereOpt.panControl,panControlOptions:whereOpt.panControlOptions,streetViewControl:whereOpt.streetViewControl,overviewMapControl:whereOpt.overviewMapControl,mapTypeControl:whereOpt.mapTypeControl,mapTypeControlOptions:whereOpt.mapTypeControlOptions,mapTypeId:whereOpt.mapTypeId,navigationControl:whereOpt.navigationControl});
selection=new google.maps.Rectangle({strokeColor:whereOpt.selectionColor,strokeOpacity:1,strokeWeight:3,fillColor:whereOpt.selectionColor,fillOpacity:.3,bounds:whereOpt.value,editable:true,draggable:true});selection.setMap(widgetMap);whereOpt.widgetMap=widgetMap;whereOpt.selection=selection;_inputControl=GIAPI._whereInputControl(whereOpt);_inputControl.updateWhereFields();_inputControl.add(widgetMap);google.maps.event.addListener(selection,"bounds_changed",function(){_inputControl.updateWhereFields()});
widgetMap.addListener("mouseover",function(){mouseOver=true});widgetMap.addListener("mouseout",function(){mouseOver=false});break}if(target===dialogId&&!whereOpt.widgetModal)addOnClickListener()};widget.mapDiv=function(){return mapDiv};widget.refreshMap=function(){google.maps.event.trigger(widgetMap,"resize");var north=selection.bounds.getNorthEast().lat().toFixed(2);var east=selection.bounds.getNorthEast().lng().toFixed(2);var south=selection.bounds.getSouthWest().lat().toFixed(2);var west=selection.bounds.getSouthWest().lng().toFixed(2);
widgetMap.fitBounds(new google.maps.LatLngBounds(new google.maps.LatLng(south,west),new google.maps.LatLng(north,east)))};widget.inputControl=function(){return _inputControl};var addOnClickListener=function(){jQuery(document).click(function(e){var parents=jQuery(e.target).parents();for(i=0;i<parents.length;i++){var cl=jQuery(parents[i]).attr("class");if(cl&&cl.indexOf("input-control"))return true}if(jQuery(e.target).hasClass("medium-onoffswitch-inner")||jQuery(e.target).hasClass("medium-onoffswitch-checkbox"))return true;
if(jQuery(e.target).children()&&jQuery(e.target).children()[0]&&jQuery(e.target).children()[0].id==="input-control")return true;if(GIAPI.UI_Utils.dialog("isOpen")||jQuery(e.target).hasClass("ui-icon"))return true;if(e.target.id===inputId||e.target.id==="helpDialog"||jQuery(e.target).hasClass("cnst-widget-where-input-control-button")||GIAPI.UI_Utils.isFullScreen()||jQuery(e.target).attr("class")==="gm-fullscreen-control"||jQuery(e.target).attr("class")==="gmnoprint gm-bundled-control"||jQuery(e.target).parents(".gmnoprint").length>
0)return true;if(!mouseOver){jQuery("#"+dialogId).attr("apply","false");jQuery("#"+dialogId).dialog("close")}})};return widget};GIAPI._whereInputControl=function(options){var inControl={};var mapType=options.resultsMapWidget?options.resultsMapWidget.mapType():GIAPI.ui.mapType||"google";var locInfoLabelId=GIAPI.random();var southFieldId=GIAPI.random();var westFieldId=GIAPI.random();var northFieldId=GIAPI.random();var eastFieldId=GIAPI.random();var topSearchButtonId=GIAPI.random();var topSearchFieldId=GIAPI.random();var inputControlId=GIAPI.random();var spRelId=GIAPI.random();var spRelDivId=GIAPI.random();var applyId=GIAPI.random();
if(options.ol3Map)options.ol3Map.inputControl(inControl);inControl.add=function(map){var controlDiv=document.createElement("div");if(!options.dialogMode)jQuery(controlDiv).attr("class","cnst-widget-where-input-control-div resultset-layout");else{jQuery(controlDiv).attr("class","cnst-widget-where-input-control-div");jQuery(controlDiv).css("margin-top","10px")}var control=create();jQuery(controlDiv).append(control);var openCloseDiv=document.createElement("div");jQuery(openCloseDiv).addClass("fa fa-caret-left");
jQuery(openCloseDiv).addClass("cnst-widget-where-input-control-button");jQuery(openCloseDiv).addClass("cnst-widget-where-input-control-button-open");if(!options.dialogMode)jQuery(openCloseDiv).addClass("cnst-widget-where-input-control-button-open-no-dialog");var openCloseDivId=GIAPI.random();jQuery(openCloseDiv).attr("id",openCloseDivId);jQuery(openCloseDiv).attr("state","open");jQuery(openCloseDiv).attr("title","Hide control panel");jQuery(controlDiv).append(openCloseDiv);jQuery(document).on("click",
"#"+openCloseDivId,function(){var effect="slide";var duration=200;var options={direction:"left"};var margin;switch(jQuery("#"+openCloseDivId).attr("state")){case "open":margin="-=145px";break;case "closed":margin="+=145px";jQuery(openCloseDiv).addClass("cnst-widget-where-input-control-button-open");jQuery(openCloseDiv).removeClass("cnst-widget-where-input-control-button-closed");break}jQuery("#"+openCloseDivId).animate({"margin-left":margin},duration);jQuery("#"+inputControlId).toggle(effect,options,
duration,function(){switch(jQuery("#"+openCloseDivId).attr("state")){case "open":jQuery(openCloseDiv).removeClass("cnst-widget-where-input-control-button-open");jQuery(openCloseDiv).addClass("cnst-widget-where-input-control-button-closed");jQuery(openCloseDiv).removeClass("fa fa-caret-left");jQuery(openCloseDiv).addClass("fa fa-caret-right");jQuery(openCloseDiv).attr("state","closed");jQuery(openCloseDiv).attr("title","Show control panel");break;case "closed":jQuery(openCloseDiv).removeClass("fa fa-caret-right");
jQuery(openCloseDiv).addClass("fa fa-caret-left");jQuery(openCloseDiv).attr("state","open");jQuery(openCloseDiv).attr("title","Hide control panel");break}})});switch(mapType){case "ol":controlDiv.className="map-control-div ol-control";jQuery(controlDiv).css({"margin-top":"10px","margin-left":"5px","background-color":"transparent"});var mirrorDiv=document.createElement("div");if(options.mapTypeControlOptions.position==="ol"){jQuery("#controlToggleButtonDiv").append(mirrorDiv);jQuery(mirrorDiv).css({"right":160,
"top":20,"margin-top":440,"position":"relative","float":"right","z-index":100})}else{jQuery(".ol-viewport").append(mirrorDiv);if(options.dialogMode)jQuery(mirrorDiv).position({of:"#"+options.dialogId,my:"left top",at:"left+12 top+55"});else jQuery(mirrorDiv).position({of:".ol-viewport",my:"left top",at:"left-3 top+50"});jQuery(mirrorDiv).css({"z-index":100})}var myControl=new ol.control.Control({element:controlDiv,target:mirrorDiv});map.addControl(myControl);break;case "google":if(!options.controlPosition)options.controlPosition=
google.maps.ControlPosition.TOP_LEFT;if(!map.controls[options.controlPosition])map.controls[options.controlPosition]=[];map.controls[options.controlPosition].push(controlDiv);break}};inControl.updateWhereFields=function(){switch(mapType){case "ol":jQuery("#"+southFieldId).val(options.ol3Map.where().south.toFixed(3));jQuery("#"+westFieldId).val(options.ol3Map.where().west.toFixed(3));jQuery("#"+northFieldId).val(options.ol3Map.where().north.toFixed(3));jQuery("#"+eastFieldId).val(options.ol3Map.where().east.toFixed(3));
break;case "google":if(!options.selection.bounds)return;jQuery("#"+southFieldId).val(options.selection.bounds.getSouthWest().lat().toFixed(3));jQuery("#"+westFieldId).val(options.selection.bounds.getSouthWest().lng().toFixed(3));jQuery("#"+northFieldId).val(options.selection.bounds.getNorthEast().lat().toFixed(3));jQuery("#"+eastFieldId).val(options.selection.bounds.getNorthEast().lng().toFixed(3));break}};inControl.spatialRelation=function(){var contains=jQuery("#containsButton").attr("check")===
"true";return contains||contains===undefined?"CONTAINS":"OVERLAPS"};inControl.where=function(){var south=parseFloat(jQuery("#"+southFieldId).val());var west=parseFloat(jQuery("#"+westFieldId).val());var north=parseFloat(jQuery("#"+northFieldId).val());var east=parseFloat(jQuery("#"+eastFieldId).val());return{"south":south,"west":west,"north":north,"east":east}};inControl.selection=function(){return options.selection};inControl.clearLocationLabel=function(){jQuery("#"+locInfoLabelId).text("")};inControl.fitMapToBounds=
function(){fitMapToBounds()};var updateSelection=function(){switch(mapType){case "ol":options.ol3Map.select(inControl.where());break;case "google":options.selection.setBounds(inControl.where());break}};var fitMapToBounds=function(){switch(mapType){case "ol":options.ol3Map.fitBounds(inControl.where());break;case "google":options.widgetMap.fitBounds(inControl.where());break}};var create=function(){var style='style="';if(!options.dialogMode);if(mapType==="ol")style+='font-size: 80%"';else style+='"';
var inputTable="<table "+style+' id="'+inputControlId+'" class="cnst-widget-where-input-control">';inputTable+='<caption id="whereTableCaption" class="cnst-widget-where-input-table-caption">BOUNDING BOX</caption>';if(!options.value){options.value={};options.value.south="";options.value.west="";options.value.north="";options.value.east=""}var southVal=options.value.south;var westVal=options.value.west;var northVal=options.value.north;var eastVal=options.value.east;var south='<td style="padding-left: 5px;padding-top:15px"><label>South</label></td>';
south+='<td style="padding-top:10px;padding-right: 5px;"><input value="'+southVal+'" style="font-size: 11px;width: 140px" id="'+southFieldId+'" min="-90" max="90" step="0.1" type="number"/></td>';inputTable+="<tr>"+south+"</tr>";var west='<td style="padding-left: 5px;padding-top:5px"><label>West</label></td>';west+='<td style="padding-right: 5px;"><input value="'+westVal+'" style="font-size: 11px;width: 140px" id="'+westFieldId+'" min="-180" max="180" step="0.1" type="number"/></td>';inputTable+=
"<tr>"+west+"</tr>";var north='<td style="padding-left: 5px;padding-top:5px"><label>North</label></td>';north+='<td style="padding-right: 5px;"><input value="'+northVal+'" style="font-size: 11px;width: 140px"  min="-90" max="90" id="'+northFieldId+'" step="0.1" type="number"/></td>';inputTable+="<tr>"+north+"</tr>";var east='<td style="padding-left: 5px;padding-top:5px"><label>East</label></td>';east+='<td style="padding-right: 5px; padding-bottom:10px"><input value="'+eastVal+'" style="font-size: 11px;width: 140px"  min="-180" max="180" id="'+
eastFieldId+'" step="0.1" type="number"/></td>';inputTable+="<tr>"+east+"</tr>";var containsButton=GIAPI.FontAwesomeButton({"id":"containsButton","width":90,"label":"CONTAINS","icon":"fa-dot-circle-o","attr":[{"name":"check","value":true}],"handler":function(){if(jQuery("#containsButton").attr("check")==="true")return false;jQuery("#containsButton").attr("check","true");jQuery("#overlapsButton").attr("check",
"false");jQuery("#containsButtonIcon").attr("class","font-awesome-button-icon fa fa-dot-circle-o");jQuery("#overlapsButtonIcon").attr("class","font-awesome-button-icon fa fa-circle-o");return false}});containsButton.css("icon","font-size"," 16px");containsButton.css("icon","color","#25418f");containsButton.css("div","margin-left","3px");containsButton.css("div","background","transparent");containsButton.css("div","padding","0px");containsButton.css("label","color","#25418f");containsButton.css("label",
"vertical-align","text-bottom");var overlapsButton=GIAPI.FontAwesomeButton({"id":"overlapsButton","width":90,"label":"OVERLAPS","icon":"fa-circle-o","attr":[{"name":"check","value":false}],"handler":function(){if(jQuery("#overlapsButton").attr("check")==="true")return false;jQuery("#containsButton").attr("check","false");jQuery("#overlapsButton").attr("check","true");jQuery("#overlapsButtonIcon").attr("class","font-awesome-button-icon fa fa-dot-circle-o");jQuery("#containsButtonIcon").attr("class",
"font-awesome-button-icon fa fa-circle-o");return false}});overlapsButton.css("icon","font-size"," 16px");overlapsButton.css("icon","color","#25418f");overlapsButton.css("div","background","transparent");overlapsButton.css("div","padding","0px");overlapsButton.css("label","color","#25418f");overlapsButton.css("label","vertical-align","text-bottom");var contains='<td colspan="2">'+containsButton.div()+overlapsButton.div()+"</td>";if(options.showSpatialRelationControl)inputTable+="<tr>"+contains+"</tr>";
var applyButton;var closeButton;if(options.dialogMode){applyButton=GIAPI.FontAwesomeButton({"id":"applybboxbutton","width":85,"label":"Apply","icon":"fa-check","handler":function(){jQuery("#"+options.dialogId).attr("apply","true");jQuery("#"+options.dialogId).dialog("close");return false}});applyButton.css("div","margin-left","3px");applyButton.css("div","background","#25418F");applyButton.css("div","margin-left","3px");closeButton=GIAPI.FontAwesomeButton({"id":"closebboxbutton","width":85,"label":"Close",
"icon":"fa-times","handler":function(){jQuery("#"+options.dialogId).attr("apply","false");jQuery("#"+options.dialogId).dialog("close");return false}});closeButton.css("div","margin-left","3px");closeButton.css("div","margin-bottom","5px")}else switch(mapType){case "ol":closeButton=GIAPI.FontAwesomeButton({"id":GIAPI.random(),"width":85,"label":"CLEAR","icon":"fa-times","handler":function(){options.ol3Map.selectionVisible(false);jQuery("#"+southFieldId).val("");jQuery("#"+westFieldId).val("");jQuery("#"+
northFieldId).val("");jQuery("#"+eastFieldId).val("");return false}});closeButton.css("div","margin-left","3px");break;case "google":var closeId=GIAPI.random();var applyDivId=GIAPI.random();var closeDivId=GIAPI.random();applyButton=GIAPI.FontAwesomeButton({"id":applyId,"width":170,"label":"DRAW BOUNDING BOX","icon":"fa-edit","attr":[{"name":"check","value":false}]});applyButton.css("div","margin-left","3px");applyButton.css("div","margin-bottom","5px");applyButton.css("div","margin-top","10px");applyButton.css("div",
"background","#5e5a5a");applyButton.css("label","vertical-align","text-bottom");applyButton.css("icon","font-size"," 14px");options.selection.setVisible(false);jQuery("#"+southFieldId).val("");jQuery("#"+westFieldId).val("");jQuery("#"+northFieldId).val("");jQuery("#"+eastFieldId).val("");jQuery(document).on("click","#"+applyId,function(e){if(jQuery(this).attr("check")==="true"){jQuery("#"+applyId).attr("check","false");jQuery("#"+applyId+"Label").text("DRAW BOUNDING BOX");jQuery("#"+applyId+"Icon").attr("class",
"font-awesome-button-icon fa fa-edit");options.selection.setVisible(false);jQuery("#"+southFieldId).val("");jQuery("#"+westFieldId).val("");jQuery("#"+northFieldId).val("");jQuery("#"+eastFieldId).val("");jQuery("#"+options.inputId).blur();return false}jQuery("#"+applyId).attr("check","true");jQuery("#"+applyId+"Label").text("CLEAR BOUNDING BOX");jQuery("#"+applyId+"Icon").attr("class","font-awesome-button-icon fa fa-times");if(!jQuery("#"+southFieldId).val()){var centerLat=options.widgetMap.map.getCenter().toJSON().lat;
var centerLng=options.widgetMap.map.getCenter().toJSON().lng;var zoom=options.widgetMap.map.getZoom();var extent1=60;for(var i=0;i<zoom;i++)extent1/=2;var bounds={};bounds.west=centerLng-extent1;bounds.south=centerLat-extent1;bounds.east=centerLng+extent1;bounds.north=centerLat+extent1;options.selection.setBounds(bounds)}options.selection.setVisible(true);options.selection.setEditable(true);options.selection.setDraggable(true);inControl.updateWhereFields();jQuery("#"+options.inputId).blur();return false});
break}title="Select Bounding Box";switch(mapType){case "ol":if(options.dialogMode)help='Click CTRL-key (meta-key on Mac) and left mouse to select the desired spatial extent and click the "APPLY" button. Click the "CLEAR" button to clear the selection';else help='Click CTRL-key (meta-key on Mac) and left mouse to select and apply the desired spatial extent. Click the "CLEAR" button to clear the selection';break;case "google":if(options.dialogMode)help='Drag and edit the default spatial extent on the desired area and click the "APPLY" button. Click the "CLOSE" button to close the dialog without apply the selection<br>';
else help='Drag and edit the default spatial extent on the desired area and click the "Apply bounding box" button. Click the "Edit bounding box" button to edit the area<br>';break}var css="display: inherit;float: right;margin-right: 14px;";if(options.dialogMode){inputTable+='<tr><td style="" colspan="2">'+applyButton.div()+GIAPI.UI_Utils.helpImage(title,help,css)+"</td></tr>";inputTable+='<tr><td  colspan="2"><div class="line" style="width: 120px;"></div></td></tr>';inputTable+='<tr><td  colspan="2">'+
closeButton.div()+"</td></tr>"}else{inputTable+='<tr><td colspan="2"></td></tr>';switch(mapType){case "ol":inputTable+='<tr><td colspan="2">'+closeButton.div()+GIAPI.UI_Utils.helpImage(title,help,css)+"</td></tr>";break;case "google":inputTable+='<tr><td colspan="2"><div>'+applyButton.div()+"</td></tr>";break}}inputTable+="</table>";jQuery(document).on("change","#"+northFieldId,function(e){updateSelection()});jQuery(document).on("change","#"+eastFieldId,function(e){updateSelection()});jQuery(document).on("change",
"#"+southFieldId,function(e){updateSelection()});jQuery(document).on("change","#"+westFieldId,function(e){updateSelection()});return inputTable};return inControl};GIAPI.OL3_Map=function(options){var obj={};var selVisible=false;var selectionVector=new ol.source.Vector;var markersVector=new ol.source.Vector({features:[]});var markersLayer;var arrayFeatures={};var flagLayer;var flagSource;var extent=[-30,-30,-30,-30];var where={south:-30,west:-30,east:-30,north:-30};var polygon=ol.geom.Polygon.fromExtent(extent);var feature=new ol.Feature({geometry:polygon});var hexColor="#0000FF";var color=ol.color.asArray(hexColor);color=color.slice();color[3]=.2;var style=
new ol.style.Style({fill:new ol.style.Fill({color:color,weight:10}),stroke:new ol.style.Stroke({color:hexColor,width:1.5})});feature.setStyle(style);selectionVector.clear();selectionVector.addFeature(feature);var controls=[new ol.control.Attribution,new ol.control.MousePosition({projection:"EPSG:4326",coordinateFormat:function(coordinate){return ol.coordinate.format(coordinate,"{x}, {y}",3)}}),new ol.control.ScaleLine,new ol.control.Zoom({className:"custom-zoom"}),new ol.control.Rotate({autoHide:true})];
if(options.fullscreenControl)controls.push(new ol.control.FullScreen);var overlayGroup=new ol.layer.Group({title:"Overlays",layers:[]});var attributions='<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a><a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>';var map=new ol.Map({target:options.divId,layers:[new ol.layer.Group({"title":"Base maps",layers:[new ol.layer.Tile({title:"Water color",type:"base",visible:false,source:new ol.source.Stamen({layer:"watercolor"}),wrapX:false}),new ol.layer.Tile({title:"OSM",type:"base",visible:true,source:new ol.source.OSM,wrapX:false}),new ol.layer.Tile({title:"Satellite",type:"base",
visible:false,source:new ol.source.XYZ({attributions: attributions,url:"https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key=SxEF6iVAIInskgqkJKps"})})],})],interactions:options.scrollwheel?ol.interaction.defaults():ol.interaction.defaults({mouseWheelZoom:false}),controls:controls,view:new ol.View({projection:"EPSG:4326",center:[options.longitude,options.latitude],zoom:options.zoom})});var olLayerV=new ol.layer.Vector({projection:"EPSG:4326",source:selectionVector});var interaction=new ol.interaction.DragBox({condition:ol.events.condition.platformModifierKeyOnly,
style:new ol.style.Style({stroke:new ol.style.Stroke({color:[0,0,255,1]})})});obj.select=function(_where){where=_where;if(!obj.selectionVisible())obj.selectionVisible(true);var extent=[where.west,where.south,where.east,where.north];var polygon=ol.geom.Polygon.fromExtent(extent);var feature=new ol.Feature({geometry:polygon});feature.setStyle(style);selectionVector.clear();selectionVector.addFeature(feature)};obj.where=function(){return where};obj.selectionVisible=function(set){if(set!=undefined&&set!=
null){selVisible=set;switch(set){case true:map.addLayer(olLayerV);break;case false:map.removeLayer(olLayerV);break}}return selVisible};obj.markerIcon=function(node,options){var features=markersVector.getFeatures();features.forEach(function(feature,index){if(feature.getProperties().name===node.uiId)if(options.url){flagSource=new ol.source.Vector({features:[]});var iconFeature=new ol.Feature({geometry:feature.getGeometry(),name:feature.getProperties().name});flagSource.addFeature(iconFeature);feature.icon=
options.url;var iconStyle=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:feature.icon})});flagLayer=new ol.layer.Vector({source:flagSource,style:iconStyle});map.addLayer(flagLayer)}else{flagSource.clear();map.removeLayer(flagLayer)}})};obj.addLayers=function(layers){layers.forEach(function(layer){var group=map.getLayerGroup().getLayers();var isOverlay=false;group.forEach(function(l){var title=l.get("title");if(title==="Overlays")isOverlay=true});if(!isOverlay)map.addLayer(overlayGroup);
var curLayers=overlayGroup.getLayers();var addLayer=true;curLayers.forEach(function(curLayer){if(curLayer.get("name")===layer.get("name"))addLayer=false});if(addLayer)overlayGroup.getLayers().push(layer)})};obj.markers=function(options){markersVector.clear();map.removeLayer(markersLayer);while(options.page.hasNext()){var node=options.page.next();var title=node.report().title;if(node.report().where){var where=node.report().where[0];var ext=[where.west,where.south,where.east,where.north];var lonlat=
new ol.extent.getCenter(ext);var iconFeature=new ol.Feature({geometry:new ol.geom.Point([lonlat[0],lonlat[1]]),name:node.uiId});markersVector.addFeature(iconFeature);arrayFeatures[iconFeature.getProperties().name]=node}}var markerURL=function(){if(options.markerURL)return options.markerURL;else return GIAPI.UI_Utils.markerIcon(options.markerColor)};var iconStyle=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:markerURL()})});markersLayer=new ol.layer.Vector({source:markersVector,style:iconStyle});
map.addLayer(markersLayer);if(options.onMarkerClick){map.on("pointermove",function(e){var pixel=widget.map.getEventPixel(e.originalEvent);var hit=widget.map.hasFeatureAtPixel(pixel);widget.map.getTargetElement().style.cursor=hit?"pointer":""});map.on("click",function(evt){var feature=widget.map.forEachFeatureAtPixel(evt.pixel,function(feature,layer){return feature});if(feature){var n=arrayFeatures[feature.getProperties().name];options.onMarkerClick(n)}})}};obj.fitBounds=function(where){map.getView().fit([where.west,
where.south,where.east,where.north],map.getSize())};obj.inputControl=function(inControl){interaction.on("boxend",function(evt){var geom=evt.target.getGeometry();var ext=geom.getExtent();obj.select({west:ext[0],south:ext[1],east:ext[2],north:ext[3]});var ext=geom.getExtent();inControl.updateWhereFields(ext)});map.addInteraction(interaction)};obj.map=function(){return map};return obj};GIAPI.PaginatorWidget=function(id,onResponse,options){var widget={};var paginator;if(!options)options={};if(!options.border)options.border="1px solid #2C3E50";if(!options.borderRadius)options.borderRadius=8;if(jQuery("#maxOffsetDialog").length===0){jQuery(document).on("click",'[id^="pgn_but_"]',function(){if(jQuery(this).attr("class").indexOf("disabled")>-1)return false;var action=jQuery(this).attr("action");pagination(action)});jQuery(document).on("click",'[id^="page_but_"]',function(){if(jQuery(this).attr("class").indexOf("selected")>
-1)return false;var page=jQuery(this).attr("page");paginator.skip(onResponse,parseInt(page),true);if(options.onPagination)options.onPagination.apply(widget,[page])});jQuery("head").append('<div id="maxOffsetDialog"/>')}widget.update=function(resultSet){paginator=resultSet.paginator;jQuery("#"+id).empty();var style=resultSet.size?"font-weight:bold":"";var results='Matching results: <span style="'+style+'">'+GIAPI.thousandsSeparator(resultSet.size)+"</span>";var first=createButton("first");var prev=
createButton("prev");var next=createButton("next");var last=createButton("last");var resultsLabel='<div style=""><label class="paginator-widget-results-label" id="paginator-widget-top-label">'+results+"</label>";var pageIndex=resultSet.pageIndex;var pageCount=resultSet.pageCount;var array=[];var startValue=pageIndex+5<=pageCount?pageIndex:pageCount>=5?pageCount-4:1;var stop=Math.min(pageCount,5);for(var i=0;i<stop;i++)array.push(startValue++);var pagesDiv='<div style="display:inline-block">';for(var i=
0;i<stop;i++)pagesDiv+=createPageButton(array[i],array[i]===pageIndex);var pgnDiv='<table style="width:100%" id="paginator-div">';pgnDiv+="<tr><td>"+resultsLabel+"</td></tr>";pgnDiv+="<tr><td>"+first+prev+pagesDiv+next+last+"</td></tr></table>";jQuery("#"+id).append(pgnDiv)};var createPageButton=function(page,selected){var width=(page+"").length<=2?20:(page+"").length*10;width="width:"+width+"px";var cl=selected?"paginator-widget-button paginator-widget-button-selected":"paginator-widget-button";
var title=!selected?"Skip to page "+page:"";return'<div title="'+title+'" page="'+page+'" id="page_but_'+page+'" style="margin-left:5px;'+width+'" class="'+cl+'">'+page+"</div>"};var createButton=function(action){var cl;var divClass;var title;switch(action){case "first":cl="fa-step-backward";divClass=paginator.first()?"paginator-widget-button-first paginator-widget-button":"paginator-widget-button-first paginator-widget-button paginator-widget-button-disabled";title="Skip to the first page";break;
case "prev":cl="fa-backward";divClass=paginator.prev()?"paginator-widget-button paginator-widget-button-prev":"paginator-widget-button-prev paginator-widget-button paginator-widget-button-disabled";title="Back to the previous page";break;case "next":cl="fa-forward";divClass=paginator.next()?"paginator-widget-button paginator-widget-button-next":"paginator-widget-button-next paginator-widget-button paginator-widget-button-disabled";title="Forward to the next page";break;case "last":cl="fa-step-forward";
divClass=paginator.last()?"paginator-widget-button-last paginator-widget-button":"paginator-widget-button-last paginator-widget-button paginator-widget-button-disabled";title="Skip to the last page";break}return'<div title="'+title+'" class="'+divClass+'" action="'+action+'" style="margin-left:5px;" id="pgn_but_'+action+'"><i class="fa '+cl+'" aria-hidden="true"></i></div>'};var pagination=function(action){switch(action){case "next":if(options.maxOffset&&paginator._offset("next")>options.maxOffset){showMaxOffsetDialog(options.offsetExceededTitle,
options.offsetExceededMessage);return}paginator.next(onResponse,true);break;case "prev":paginator.prev(onResponse,true);break;case "last":if(options.maxOffset&&paginator._offset("last")>options.maxOffset){showMaxOffsetDialog(options.offsetExceededTitle,options.offsetExceededMessage);return}paginator.last(onResponse,true);break;case "first":paginator.first(onResponse,true);break}if(options.onPagination)options.onPagination.apply(widget,[action])};var showMaxOffsetDialog=function(title,desc){jQuery("#maxOffsetDialog").empty();
jQuery("#maxOffsetDialog").append("<br>"+desc);jQuery("#maxOffsetDialog").dialog({dialogClass:"alert",title:title,height:"auto",width:"auto",modal:true})};return widget};GIAPI.ResultsMapWidget=function(id,latitude,longitude,options){var widget={};var selection;var noResultsOverlay;var ol3Map;var showRectangles=true;var rectanglesArray=[];var _inputControl;if(!options)options={};if(!options.mapType)options.mapType=GIAPI.ui.mapType||"google";var mapType=options.mapType;if(!options.width)options.width="368px";else if(!jQuery.isNumeric(options.width)&&options.width.indexOf("%")===0)options.width+="px";if(!options.height)options.height="300px";else if(!jQuery.isNumeric(options.height)&&
options.height.indexOf("%")===0)options.height+="px";if(options.showSelectionControl===undefined)options.showSelectionControl=true;if(options.showNoResultsMsg===undefined)options.showNoResultsMsg=false;if(!options.noResultsMsg)options.noResultsMsg="No geolocalized results to show";if(options.showSpatialRelationControl===undefined||showSpatialRelationControl===true)options.showSpatialRelationControl=true;if(!options.markerTitle)options.markerTitle=function(node){return node.report().title};if(!options.markerColor)options.markerColor=
"red";if(!options.selectionColor)options.selectionColor="#0000FF";if(options.showLayersControl===undefined)options.showLayersControl=false;if(options.addLayers===undefined)options.addLayers=false;if(!options.layersControlWidth)options.layersControlWidth=155;if(!options.layersControlHeight)options.layersControlHeight=100;if(!options.layersControlOpacity)options.layersControlOpacity=.8;var style="";style+=".layers-control-table-div{ opacity: "+options.layersControlOpacity+"; width: "+options.layersControlWidth+
"px; ";style+=" height: "+options.layersControlHeight+"px; margin-left: -"+(options.layersControlWidth+15)+"px;}";GIAPI.UI_Utils.appendStyle(style);if(!options.zoom)options.zoom=6;if(options.scrollwheel===undefined)options.scrollwheel=true;if(options.panControl===undefined)options.panControl=true;if(options.panControlOptions===undefined)options.panControlOptions=true;if(options.streetViewControl===undefined)options.streetViewControl=false;if(options.overviewMapControl===undefined)options.overviewMapControl=
true;if(options.mapTypeControl===undefined)options.mapTypeControl=true;if(!options.mapTypeControlOptions){options.mapTypeControlOptions={style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR};options.mapTypeControlOptions.position=google.maps.ControlPosition.TOP_LEFT}if(options.navigationControl===undefined)options.navigationControl=false;if(options.fullscreenControl===undefined)options.fullscreenControl=true;if(!options.fullscreenControlOptions)options.fullscreenControlOptions={position:google.maps.ControlPosition.RIGHT_BOTTOM};
if(!options.mapTypeId)options.mapTypeId=GIAPI.ui.mapTypeId||google.maps.MapTypeId.ROADMAP;if(options.zoomControl===undefined)options.zoomControl=true;if(!options.zoomControlOptions)options.zoomControlOptions={position:google.maps.ControlPosition.RIGHT_BOTTOM};if(options.showLocationControl===undefined||options.showLocationControl===null)options.showLocationControl=true;var divId=GIAPI.random();var div="";switch(mapType){case "ol":div='<div style="width: '+options.width+
"; height: "+options.height+'px" class="map-widget-div"><div id="'+divId+'"  class="ol-fullscreen-map"></div></div>';break;case "google":div='<div style="width:'+options.width+'; " class="map-widget-div"><div id="'+divId+'" style="position: relative; width: '+options.width+"px; height: "+options.height+'px"></div></div>';break}jQuery("#"+id).append(div);options.longitude=longitude;options.latitude=latitude;options.divId=divId;options.dialogMode=false;switch(mapType){case "ol":ol3Map=GIAPI.OL3_Map(options);
widget.map=ol3Map.map();options.widgetMap=widget.map;options.ol3Map=ol3Map;if(options.showSelectionControl){_inputControl=GIAPI._whereInputControl(options);_inputControl.updateWhereFields();_inputControl.add(widget.map)}break;case "google":widget.map=new GMaps({div:"#"+divId,lat:latitude,lng:longitude,minZoom:2,fullscreenControl:options.fullscreenControl,fullscreenControlOptions:options.fullscreenControlOptions,zoomControl:options.zoomControl,zoomControlOptions:options.zoomControlOptions,scrollwheel:options.scrollwheel,
panControl:options.panControl,panControlOptions:options.panControlOptions,streetViewControl:options.streetViewControl,overviewMapControl:options.overviewMapControl,mapTypeId:options.mapTypeId,mapTypeControl:options.mapTypeControl,mapTypeControlOptions:options.mapTypeControlOptions,navigationControl:options.navigationControl});widget.map.setZoom(options.zoom);selection=new google.maps.Rectangle({strokeColor:"#0000FF",strokeOpacity:1,strokeWeight:3,fillColor:"#0000FF",fillOpacity:.3,bounds:options.value,
editable:true,draggable:true});selection.setMap(widget.map.map);selection.setVisible(options.showSelectionControl);options.controlPosition=google.maps.ControlPosition.LEFT_TOP;options.widgetMap=widget.map;options.selection=selection;if(options.showSelectionControl){_inputControl=GIAPI._whereInputControl(options);_inputControl.updateWhereFields();google.maps.event.addListener(selection,"bounds_changed",function(){_inputControl.updateWhereFields()});_inputControl.add(widget.map.map)}break}widget.update=
function(resultSet){var paginator=resultSet.paginator;var page=paginator.page();arrayFeatures=new Object;switch(mapType){case "ol":if(options.showNoResultsMsg&&count===0)jQuery("#no-results-div").css("display","inline");else jQuery("#no-results-div").css("display","none");var copy=jQuery.extend({},page);options.page=copy;ol3Map.markers(options);page.reset();while(page.hasNext()){var node=page.next();var title=node.report().title;var layers=node.ol3WMS_Layer({});if(layers.length>0&&options.addLayers)addLayers(layers)}page.reset();
break;case "google":widget.map.removeMarkers();for(var i=0;i<rectanglesArray.length;i++)rectanglesArray[i].setMap(null);rectanglesArray=[];var count=0;while(page.hasNext()){var node=page.next();var title=node.report().title;var layers=node.googleImageMapType(widget.map.map);if(layers.length>0&&options.addLayers)addLayers(layers);if(node.report().where){var where=node.report().where[0];var bounds=new google.maps.LatLngBounds(new google.maps.LatLng(where.south,where.west),new google.maps.LatLng(where.north,
where.east));var center=bounds.getCenter();var opt={lat:center.lat(),lng:center.lng(),title:options.markerTitle(node),uiId:node.uiId};if(options.markerURL)opt.icon=markerURL;else opt.icon=GIAPI.UI_Utils.markerIcon(options.markerColor);var clickable=false;if(options.onMarkerClick){clickable=true;opt.click=function(n){return function(){options.onMarkerClick(n)}}(node)}if(options.onMarkerMouseOver){clickable=true;opt.mouseover=function(n){return function(){options.onMarkerMouseOver(n)}}(node)}if(options.onMarkerMouseOut){clickable=
true;opt.mouseout=function(n){return function(){options.onMarkerMouseOut(n)}}(node)}opt.clickable=clickable;widget.map.addMarker(opt);var rect=new google.maps.Rectangle({strokeColor:"#ffff00",strokeOpacity:1,strokeWeight:1,fillColor:"#ffff00",fillOpacity:.05,bounds:bounds,editable:false,draggable:false,clickable:false});rect.setMap(widget.map.map);rect.setVisible(showRectangles);rectanglesArray.push(rect);count++}}if(options.showNoResultsMsg&&count===0)jQuery("#no-results-div").css("display","inline");
else jQuery("#no-results-div").css("display","none");page.reset();break}};widget.where=function(){switch(mapType){case "ol":if(!ol3Map.selectionVisible())return null;break;case "google":if(!selection.getVisible())return null;break}return _inputControl.where()};widget.spatialRelation=function(){if(!_inputControl)return"CONTAINS";return _inputControl.spatialRelation()};widget.addLayersButton=function(node){var layers;switch(mapType){case "ol":layers=node.ol3WMS_Layer({});break;case "google":layers=
node.googleImageMapType(widget.map.map);break}if(layers.length>0){var button=GIAPI.FontAwesomeButton({"width":24,"label":"","icon":"fa-map-o","handler":function(){addLayers(layers);return false},"attr":[{name:"title",value:"Add layers"}]});button.css("div","padding","4px");button.css("div","background"," #2196f3");button.css("icon","font-size","12.5px");return button}return null};widget.markerIcon=function(node,options){switch(mapType){case "ol":ol3Map.markerIcon(node,options);break;case "google":var markers=
widget.map.markers;markers.forEach(function(mark,index){if(mark.uiId===node.uiId){mark.icon=options.color?GIAPI.UI_Utils.markerIcon(options.color):options.url;markers.splice(index,1);widget.map.addMarker(mark);return}});break}};widget.select=function(where){switch(mapType){case "ol":if(!where)ol3Map.selectionVisible(false);else ol3Map.select(where);break;case "google":if(!where){selection.setVisible(false);return}selection.setBounds(where);selection.setVisible(true);selection.setDraggable(false);
selection.setEditable(false);widget.map.fitBounds(where)}if(options.showSelectionControl)_inputControl.updateWhereFields()};widget.mapType=function(){return mapType};var addLayers=function(layers){switch(mapType){case "ol":ol3Map.addLayers(layers);break;case "google":layers.forEach(function(layer){var curLayers=widget.map.map.overlayMapTypes;var addLayer=true;curLayers.forEach(function(curLayer){if(curLayer.name===layer.name)addLayer=false});if(addLayer)widget.map.map.overlayMapTypes.push(layer)});
updateLayersTable();break}};var createNoResultsOverlay=function(){var div=document.createElement("div");div.id="no-results-div";jQuery(div).attr("class","results-map-widget-no-results-div");div.innerHTML='<label style="font-weight: bold;font-style: italic">'+options.noResultsMsg+"</label>";switch(mapType){case "ol":var popup=new ol.Overlay({element:document.getElementById("no-results-div")});widget.map.addOverlay(popup);popup.setPosition([longitude,latitude]);popup.setPositioning("top-right");break;
case "google":widget.map.map.controls[google.maps.ControlPosition.CENTER].push(div);break}};var createLayersControl=function(){switch(mapType){case "ol":var layerSwitcher=new ol.control.LayerSwitcher({tipLabel:"Legend"});widget.map.addControl(layerSwitcher);break;case "google":var controlDiv=document.createElement("div");controlDiv.style.padding="5px";var controlButton=document.createElement("div");var controlButtonId="control-button";controlButton.id=controlButtonId;jQuery(controlButton).addClass("layers-control-button");
jQuery(controlButton).attr("title","Layers control");jQuery(controlButton).attr("pressed",false);jQuery(controlDiv).append(controlButton);var controlTableDiv=document.createElement("div");jQuery(controlTableDiv).addClass("layers-control-table-div");jQuery(controlDiv).append(controlTableDiv);var controlTable=document.createElement("table");jQuery(controlTable).addClass("layers-control-table");var controlTableId="layers-table";controlTable.id=controlTableId;jQuery(controlTableDiv).append(controlTable);
jQuery(controlTableDiv).css("visibility","hidden");jQuery(controlTable).append(userSelectionControl());jQuery(controlTable).append(showRectanglesControl());widget.map.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(controlDiv);jQuery(controlButton).click(function(){if(jQuery(this).attr("pressed")==="true"){jQuery(controlTableDiv).css("visibility","hidden");jQuery(controlButton).removeClass("layers-control-button-pressed");jQuery(controlButton).attr("pressed",false)}else{jQuery(controlTableDiv).css("visibility",
"visible");jQuery(controlButton).addClass("layers-control-button-pressed");jQuery(controlButton).attr("pressed",true)}});break}};var userSelectionControl=function(){var content='<caption id="layersCaption" class="layers-caption">LAYERS</caption>';content+='<tr><td><input class="layers-control-check" type="checkbox" id="user-selection" checked/></td>';content+="<td>User selection</td>";content+="</tr>";jQuery(document).on("click","#user-selection",function(){selection.setVisible(this.checked)});return content};
var showRectanglesControl=function(){var checked=showRectangles?" checked":"";var content="<tr>";content+='<td><input class="layers-control-check" type="checkbox" id="rectangles" '+checked+"/></td>";content+="<td>Results area</td>";content+="</tr>";jQuery(document).on("click","#rectangles",function(){showRectangles=this.checked;for(var i=0;i<rectanglesArray.length;i++)rectanglesArray[i].setVisible(this.checked)});return content};var updateLayersTable=function(){var normalizeLayerName=function(name){return name.replace(/:/g,
"","_")};var layers=widget.map.map.overlayMapTypes;jQuery("#layers-table").html("");var content='<tr><td colspan="2"><input class="layers-control-check" type="checkbox" id="layer-check_all" checked/></td></tr>';content+=userSelectionControl();content+=showRectanglesControl();layers.forEach(function(layer){if(layer.name){var name=normalizeLayerName(layer.name);var checked=layer.opacity===1||layer.opacity===undefined?" checked":"";content+="<tr>";content+='<td><input class="layers-control-check" type="checkbox" id="layer-check_'+
name+'"'+checked+"/></td>";content+='<td title="'+name+'">'+name+"</td>";content+="</tr>"}});jQuery("#layers-table").append(content);jQuery('[id^="layer-check_"]').click(function(){var layerName=this.id.replace("layer-check_","");var opacity=this.checked?1:0;layers.forEach(function(layer){if(layer.name===layerName||layerName==="all"){layer.setOpacity(opacity);jQuery("#layer-check_"+normalizeLayerName(layer.name)).prop("checked",opacity?"checked":"")}})})};if(options.showLayersControl)createLayersControl();
if(options.showNoResultsMsg)createNoResultsOverlay();return widget};GIAPI.NodeMapWidget=function(id,node,options){var widget={};widget.map;if(!options)options={};if(!options.mode)options.mode=GIAPI.Common_UINode.mapMode||"a";if(!options.height)options.height=180;if(!options.coordinatesDialog)options.coordinatesDialog=true;if(!options.coordinatesDialogPosition)options.coordinatesDialogPosition="left";if(!options.areaColor)options.areaColor="#0000FF";if(!options.markerColor)options.markerColor="red";if(!options.mapType)options.mapType=GIAPI.Common_UINode.mapType||GIAPI.ui.mapType||
"google";if(!options.mapTypeId)options.mapTypeId=GIAPI.Common_UINode.mapTypeId||GIAPI.ui.mapTypeId||google.maps.MapTypeId.ROADMAP;if(jQuery("#coordinatesDialog").length===0)jQuery("head").append('<div id="coordinatesDialog"/>');widget.init=function(){if(node.report().where){var divId=GIAPI.random();var div='<div class="map-widget-div">';var w=options.width?" width: "+options.width+"px;":"";div+='<div id="'+divId+'" style="position: relative; '+w+" height: "+options.height+'px"></div>';div+="</div>";
jQuery("#"+id).append(div);createNodeMap(node,divId,options);if(options.mapType.toLowerCase()==="ol"||options.mapType.toLowerCase().indexOf("openlayer")!=-1){var layers=node.ol3WMS_Layer({});if(layers&&(options.mode==="l"||options.mode==="al"))layers.forEach(function(layer){widget.map.addLayer(layer)})}else{var layers=node.googleImageMapType(widget.map.map);if(layers&&(options.mode==="l"||options.mode==="al"))layers.forEach(function(layer){widget.map.map.overlayMapTypes.push(layer)})}}};var createNodeMap=
function(node,id,options){var where=node.report().where[0];var info='<div class="node-map-widget-coordinates-div">';info+="<table>";info+="<tr><td>South:</td><td>"+where.south.toFixed(3)+"</td></tr>";info+="<tr><td>West:</td><td>"+where.west.toFixed(3)+"</td></tr>";info+="<tr><td>North:</td><td>"+where.north.toFixed(3)+"</td></tr>";info+="<tr><td>East:</td><td>"+where.east.toFixed(3)+"</td></tr>";info+="</table>";info+="</div>";if(options.mapType.toLowerCase()==="ol"||options.mapType.toLowerCase().indexOf("openlayer")!=
-1){var controls=[new ol.control.Attribution,new ol.control.MousePosition({undefinedHTML:"outside",projection:"EPSG:4326",coordinateFormat:function(coordinate){return ol.coordinate.format(coordinate,"{x}, {y}",4)}}),new ol.control.OverviewMap({collapsed:false}),new ol.control.Rotate({autoHide:true}),new ol.control.ScaleLine,new ol.control.Zoom,new ol.control.ZoomSlider,new ol.control.ZoomToExtent,new ol.control.FullScreen];widget.map=new ol.Map({target:id,layers:[new ol.layer.Tile({source:new ol.source.OSM,
wrapX:false})],interactions:ol.interaction.defaults({mouseWheelZoom:false}),view:new ol.View({projection:"EPSG:4326"})});if(options.zoom)widget.map.getView().setZoom(options.zoom);var extent=[where.west,where.south,where.east,where.north];if(where.south===where.north&&where.west===where.east){var iconFeature=new ol.Feature({geometry:new ol.geom.Point([where.west,where.south])});var vectorSource=new ol.source.Vector({features:[iconFeature]});var marker=function(){if(options.markerURL)return options.markerURL;
else switch(options.markerColor){case "red":return"http://api.geodab.eu/docs/assets/img/red-marker.png";break;case "blue":return"http://api.geodab.eu/docs/assets/img/blue-marker.png";break;case "green":return"http://api.geodab.eu/docs/assets/img/green-marker.png";break;case "yellow":return"http://api.geodab.eu/docs/assets/img/yellow-marker.png";break}};var iconStyle=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:marker()})});var vectorLayer=new ol.layer.Vector({source:vectorSource,
style:iconStyle});widget.map.getView().fit(extent,widget.map.getSize());if(options.zoom)widget.map.getView().setZoom(options.zoom);widget.map.addLayer(vectorLayer);return}widget.map.getView().fit(extent,widget.map.getSize());if(where.west>-180&&where.east<180&&where.south>-90&&where.north<90){var polygon=ol.geom.Polygon.fromExtent(extent);var feature=new ol.Feature({geometry:polygon});var vectorSrc=new ol.source.Vector;var olLayerV=new ol.layer.Vector({projection:"EPSG:4326",source:vectorSrc});var hexColor=
options.areaColor;var color=ol.color.asArray(hexColor);color=color.slice();color[3]=.2;feature.setStyle(new ol.style.Style({fill:new ol.style.Fill({color:color,weight:10}),stroke:new ol.style.Stroke({color:hexColor,width:1.5})}));vectorSrc.addFeature(feature);widget.map.addLayer(olLayerV)}}else{var bounds=new google.maps.LatLngBounds(new google.maps.LatLng(where.south,where.west),new google.maps.LatLng(where.north,where.east));var center=bounds.getCenter();widget.map=new GMaps({div:"#"+id,lat:center.lat(),
lng:center.lng(),panControl:false,panControlOptions:false,streetViewControl:false,overviewMapControl:false,mapTypeControl:false,scrollwheel:false,mapTypeId:options.mapTypeId});if(options.zoom)widget.map.setZoom(options.zoom);if(where.south===where.north&&where.west===where.east){var opt={lat:center.lat(),lng:center.lng(),title:node.report().title,clickable:false};if(options.markerURL)opt.icon=markerURL;else switch(options.markerColor){case "red":opt.icon="http://api.geodab.eu/docs/assets/img/red-marker.png";
break;case "blue":opt.icon="http://api.geodab.eu/docs/assets/img/blue-marker.png";break;case "green":opt.icon="http://api.geodab.eu/docs/assets/img/green-marker.png";break;case "yellow":opt.icon="http://api.geodab.eu/docs/assets/img/yellow-marker.png";break}widget.map.addMarker(opt);return}widget.map.fitBounds(bounds);var path=[[where.south,where.west],[where.north,where.west],[where.north,where.east],[where.south,where.east,where.south,where.west]];if(where.west>-180&&where.east<180&&where.south>
-90&&where.north<90)widget.map.drawPolygon({paths:path,strokeColor:options.areaColor,strokeOpacity:1,strokeWeight:1,fillColor:options.areaColor,fillOpacity:.3})}jQuery("#"+id).mouseover(function(){if(options.coordinatesDialog)openCoordinatesDialog(info,id)});jQuery("#"+id).mouseout(function(){jQuery("#coordinatesDialog").dialog("close")});if(options.mode==="l")return};var openCoordinatesDialog=function(info,divId){var pos=GIAPI.position(options.coordinatesDialogPosition);jQuery("#coordinatesDialog").empty();
jQuery("#coordinatesDialog").append(info);jQuery("#coordinatesDialog").dialog({dialogClass:"no-titlebar",height:120,width:60,modal:false,position:{of:"#"+divId,my:pos.my,at:pos.at,collision:"none"}});jQuery("#coordinatesDialog").css("background","transparent");jQuery("#coordinatesDialog").css("padding","0px");jQuery('[aria-describedby="coordinatesDialog"]').css("background","none");jQuery('[aria-describedby="coordinatesDialog"]').css("border","none")};return widget};GIAPI.ResultSetLayout=function(id,options){var layout={};var resultSets=[];var preservedNodes=[];var extensions=[];var renderedNodes=[];var refButton;var whereWidg;var inputControl;var browser;if(!options)options={};if(options.preserve===null||options.preserve===undefined)options.preserve=false;if(!options.commonUINode)options.commonUINode=GIAPI.Common_UINode;if(!options.columnCount)options.columnCount=1;if(!options.maxHeight)options.maxHeight=0;layout.update=function(response){renderedNodes=[];if(response[0].extension)if(response._origin===
"dab"){if(jQuery("#"+id).tabs("instance"))jQuery("#"+id).tabs("destroy");jQuery("#"+id).empty();resultSets=[];var ul='<ul class="resultset-layout-ul">';response.forEach(function(rs,index){resultSets.push(rs);var label=GIAPI.formatWords(rs.extension.label);ul+='<li><a href="#resSet-'+index+'">'+label+"</a></li>"});ul+="</ul>";jQuery("#"+id).append(ul);jQuery("#"+id).tabs();jQuery("#"+id).tabs({activate:function(event,ui){var selector=ui.newPanel.selector;var index=selector.substring(selector.indexOf("-")+
1,selector.length);updateWidgets(resultSets[index],response[0].termFrequency)}})}else{var ext=response[0].extension;var index=ext.resultSetIndex;resultSets[index]=response[0];updateWidgets(resultSets[index],response[0].termFrequency)}else jQuery("#"+id).empty();response.forEach(function(rs,index){var resultSet=rs;var paginator=resultSet.paginator;var refiner=resultSet.refiner;var page=paginator.page();options.response=response;var tableId=GIAPI.random();var headerDivId=GIAPI.random();var collectionsDiv=
'<div  id="'+headerDivId+'"></div>';var content=collectionsDiv;if(!options.height)options.height="";else options.height="height:"+options.height+"px";if(options.maxHeight>0){content+='<div class="resultset-layout-table-div" style="max-height:'+options.maxHeight+'px; overflow-y:auto">';content+='<table style="'+options.height+'" class="resultset-layout-table"><tbody id="'+tableId+'"/></table></div>'}else content+='<table style="'+options.height+'" class="resultset-layout-table"><tbody id="'+tableId+
'"/></table>';var tabId="resSet-0";if(resultSet.extension){tabId="resSet-"+index;if(response._origin==="paginator"){var ext=resultSet.extension;index=ext.resultSetIndex;tabId="resSet-"+index;jQuery("#"+tabId).remove()}content='<div id="'+tabId+'">'+content+"</div>"}jQuery("#"+id).append(content);if(refiner&&options.browseCollection){browser=GIAPI.SeriesBrowserWidget(options);browser.init(headerDivId,refiner)}var rowNumber=0;var nodes=[];var tmp=[];while(page.hasNext()){var n=page.next();nodes.push(n);
tmp.push(n)}if(options.preserve){for(var i=0;i<preservedNodes.length;i++)tmp.push(preservedNodes[i]);preservedNodes=tmp;nodes=preservedNodes;if(options.sortingFunction)nodes.sort(options.sortingFunction)}page.reset();if(response.length===1||index===0){if(options.preserve){resultSet.size=nodes.length;resultSet.pageSize=nodes.length;paginator._page=GIAPI.Page(nodes,resultSet.pageSize);resultSet.paginator=paginator}updateWidgets(resultSet,response[0].termFrequency)}var nodeIndex=0;for(var rowNumber=
0;nodeIndex<nodes.length;rowNumber++){var rowId=tabId+"_row_"+rowNumber;jQuery("#"+tableId).append("<tr id="+rowId+"/>");for(var colNumber=0;colNumber<options.columnCount&&nodeIndex<nodes.length;colNumber++){var currentNode=nodes[nodeIndex];var opt={};opt.layout=layout;for(property in options)opt[property]=options[property];var renderedNode=opt.commonUINode(opt);var sectionDom=opt.sectionDom;var asideDom=opt.asideDom;var onSectionReady=opt.onSectionReady;var onAsideReady=opt.onAsideReady;if(opt.uiNodes)for(var i=
opt.uiNodes.length-1;i>=0;i--){var uiNodeClass=opt.uiNodes[i];var uiNodeInstance=uiNodeClass(opt);if(uiNodeInstance.isRenderable(currentNode)){renderedNode=uiNodeInstance;break}else{opt.sectionDom=sectionDom;opt.asideDom=asideDom;opt.onSectionReady=onSectionReady;opt.onAsideReady=onAsideReady}}var colId="cell-"+currentNode.uiId;jQuery("#"+rowId).append('<td class="resultset-layout-td" id="'+colId+'">');renderedNode.render(currentNode,rowNumber,rowId,colNumber,colId);renderedNodes.push(renderedNode);
jQuery("#"+rowId).append("</td>");nodeIndex++}}if(jQuery("#"+id).tabs("instance"))jQuery("#"+id).tabs("refresh");if(options.onUpdateReady)options.onUpdateReady.apply(this,[renderedNodes])})};layout.empty=function(){preservedNodes=[];layout.update(GIAPI.emptyResponse())};layout.browser=function(){return browser};var updateWidgets=function(resultSet,tf){if(options.mapWidget)options.mapWidget.update(resultSet);if(options.pagWidget)options.pagWidget.update(resultSet);if(tf&&options.tfWidget)options.tfWidget.update(resultSet)};
return layout};GIAPI.UINode=function(options){var uiNode={};if(!options)options={};options.sectionDom=function(node,options,sectionId){return"<div></div>"};options.asideDom=function(node,options,asideId){return"<div></div>"};options.onAsideReady=function(aside,node){};options.onSectionReady=function(aside,node){};uiNode.render=function(node,rowNumber,rowId,colNumber,colId){var sectionId="section-"+node.uiId;var section='<section class="ui-node-section" id="'+sectionId+'"></section>';jQuery("#"+colId).append(section);
var sectionDom=options.sectionDom(node,options,sectionId);jQuery("#"+sectionId).append(sectionDom);if(options.onSectionReady)options.onSectionReady.apply(this,[jQuery("#"+sectionId),node]);var asideDom=options.asideDom(node,options,asideId);if(!asideDom)jQuery("#"+sectionId).css("width","100%");else{var asideId="aside-"+node.uiId;var aside='<aside class="ui-node-aside" id="'+asideId+'"></aside>';jQuery("#"+colId).append(aside);jQuery("#"+asideId).append(asideDom);if(options.onAsideReady)options.onAsideReady.apply(this,
[jQuery("#"+asideId),node])}};uiNode.isRenderable=function(node){return true};return uiNode};GIAPI.Common_UINode=function(options){var uiNode=GIAPI.UINode(options);var nodeMapId=GIAPI.random();var layout=options.layout;GIAPI.Common_UINode.mapType;GIAPI.Common_UINode.mapTypeId;GIAPI.Common_UINode.mapMode;GIAPI.Common_UINode.authorRow=function(report){var out="";if(report.author&&report.author.length>0){out+='<tr><td colspan="2" class="common-ui-node-report-content-table-left-td"><label style="margin-top:5px;margin-bottom: 5px;" class="common-ui-node-report-content-table-left">Contacts</label></td></tr>';
var first=true;report.author.forEach(function(auth){if(!first)out+='<tr><td colspan="2">'+GIAPI.UI_Utils.separator("margin-left:40px; width: 110px;")+"</td></tr>";first=false;var indName=auth.individualName;var posName=auth.positionName;var orgName=auth.organizationName;var email=auth.email;var city=auth.city;var url=null;if(auth.online&&auth.online.length>0)url=auth.online[0].url;if(indName){out+='<tr><td class="common-ui-node-report-content-table-left-td"><label style="margin-left:40px">Name</label></td>';
out+='<td class="common-ui-node-report-content-table-right-td"><label>'+indName+"</label></td></tr>"}if(posName){out+='<tr><td class="common-ui-node-report-content-table-left-td"><label style="margin-left:40px">Position</label></td>';out+='<td class="common-ui-node-report-content-table-right-td"><label>'+posName+"</label></td></tr>"}if(orgName){out+='<tr><td style="width: 150px;" class="common-ui-node-report-content-table-left-td"><label style="margin-left:40px">Organization</label></td>';out+='<td class="common-ui-node-report-content-table-right-td"><label>'+
orgName+"</label></td></tr>"}if(city){out+='<tr><td class="common-ui-node-report-content-table-left-td"><label style="margin-left:40px">City</label></td>';out+='<td class="common-ui-node-report-content-table-right-td"><label>'+city+"</label></td></tr>"}if(url){if(url.endsWith("/"))url=url.substring(0,url.length-1);out+='<tr><td style="width: 150px;" class="common-ui-node-report-content-table-left-td"><label style="margin-left:40px">Home page</label></td>';out+='<td class="common-ui-node-report-content-table-right-td"><a style="color:blue;cursor:pointer;text-decoration: underline;" target=_blank href='+
url+">"+url+"</a></td></tr>"}if(email){out+='<tr><td class="common-ui-node-report-content-table-left-td"><label style="margin-left:40px">Email</label></td>';out+='<td class="common-ui-node-report-content-table-right-td"><a style="color:blue;cursor:pointer;text-decoration: underline;" target=_blank href=mailto:'+email+">"+email+"</a></td></tr>"}})}return out};GIAPI.Common_UINode.createdRow=function(report){var out="";if(report.created){var createdId=GIAPI.random();out+="<tr><td></td></tr>";out+='<tr><td class="common-ui-node-report-content-table-left-td"><label class="common-ui-node-report-content-table-left">Created</td>';
out+='<td id="'+createdId+'" class="common-ui-node-report-content-table-right-td">';out+='<div style="margin-top:2px"><label style="cursor: pointer;">'+report.created+"</label></div></td></tr>";jQuery(document).on("click","#"+createdId,function(event){var date=report.created.substring(0,10);var time=report.created.substring(11);jQuery("#"+createdId).datepicker("dialog",date,null,{dateFormat:"yy-mm-dd",minDate:date,maxDate:date},[event.pageX,event.pageY-100]);jQuery("#ui-datepicker-div").append('<div style="border: 1px solid rgba(0, 0, 0, 0.21);padding:5px"><label style="font-weight: bold;;margin-left:56px">'+
time+"</label></div>")})}return out};GIAPI.Common_UINode.whenRow=function(report){var out="";if(report.when&&report.when.length>0){var toId=GIAPI.random();out+='<tr><td colspan=2><table style="margin-top:5px; width: 450px"><tbody><tr>';if(report.when[0].start||report.when[0].from)out+='<td style="width:200px">'+GIAPI.Common_UINode.whenDiv("from",report)+"</td>";if(report.when[0].end||report.when[0].to)out+='<td style="width:200px">'+GIAPI.Common_UINode.whenDiv("to",report)+"</td>";out+="</tr></tbody></table></td></tr>"}return out};
GIAPI.Common_UINode.whenDiv=function(time,report){var id=GIAPI.random();var value="";var label="";switch(time){case "from":label="Start time";value=report.when[0].start||report.when[0].from;break;case "to":label="End time";value=report.when[0].end||report.when[0].to;break}value=value.substring(0,19);var width=GIAPI.UI_Utils.getTextWidth(value,"normal 1.1em 'Helvetica Neue', Helvetica, Arial, sans-serif");width+=30;var out='<div style="width:150px">';out+='<label class="common-ui-node-report-content-table-left">'+
label+"</label></div>";var timeLabel=value.replace("T"," ");out+='<label class="common-ui-node-time-label" id='+id+">"+timeLabel+"</label>";out+="</div>";jQuery(document).on("click","#"+id,function(event){var date=value.substring(0,10);var time=value.substring(11);jQuery("#"+id).datepicker("dialog",date,null,{dateFormat:"yy-mm-dd",minDate:date,maxDate:date},[event.pageX,event.pageY-100]);jQuery("#ui-datepicker-div").append('<div style="border: 1px solid rgba(0, 0, 0, 0.21);padding:5px"><label style="font-weight: bold;;margin-left:56px">'+
time+"</label></div>")});return out};options.sectionDom=function(node,options,sectionId){var sectionDivId="section-div-"+node.uiId;var sectionDiv='<div id="'+sectionDivId+'" class="common-ui-node-report-div">';jQuery(document).on("mouseover","#"+sectionDivId,function(){if(options.mapWidget)options.mapWidget.markerIcon(node,{url:"http://api.geodab.eu/docs/assets/img/circle-yellow-marker.png"})});jQuery(document).on("mouseout","#"+sectionDivId,function(){if(options.mapWidget)options.mapWidget.markerIcon(node,
{color:"red"})});sectionDiv+=subSection1(node,sectionId);var reportDivId=GIAPI.random();var measurementDivId=GIAPI.random();var downloadDivId=GIAPI.random();sectionDiv+=buttonsDiv(node,sectionId,measurementDivId,reportDivId,downloadDivId);sectionDiv+=reportContentDiv(node,reportDivId);sectionDiv+=measurementContentDiv(node,measurementDivId);sectionDiv+='<div style="display:none" id="'+downloadDivId+'"></div>';return sectionDiv};options.asideDom=function(node,options,asideId){var out=null;if(node.report().where)out=
"<div id="+nodeMapId+' class="common-ui-node-node-map-div"></div>';return out};options.onAsideReady=function(aside,node){var nodeMapWidget=GIAPI.NodeMapWidget(nodeMapId,node,{"mapType":GIAPI.Common_UINode.mapType||GIAPI.ui.mapType||"google","mapTypeId":GIAPI.Common_UINode.mapTypeId||GIAPI.ui.mapTypeId||google.maps.MapTypeId.ROADMAP,"mode":GIAPI.Common_UINode.mapMode||"al","zoom":9,"height":140});nodeMapWidget.init()};var subSection1=function(node){var desc=node.report().description;if(!desc||desc===
"none")desc="No description available";var title=node.report().title;var out='<a name="node-'+node.uiId+'"/>';var divId="overview_div_"+node.uiId;out+="<table><tr>";out+='<td><div class="no-overview-div" style="width:96px;height:96px" id="'+divId+'"></div></td>';GIAPI.UI_Utils.loadOverview(node,divId,{"force":true,"selector":true,"maintainSize":true});out+='<td style="width:100%">';if(!options.noTitle)out+='<label class="common-ui-node-report-title">'+title+"</label><br><br>";out+='<textarea rows="4" class="common-ui-node-report-desc" readonly>'+
desc+"</textarea></td>";var fromDiv="";var toDiv="";if(node.report().when){if(node.report().when[0].start||node.report().when[0].from){var style="margin-bottom: 15px;";fromDiv='<div style="'+style+'">'+GIAPI.Common_UINode.whenDiv("from",node.report())+"</div>"}if(node.report().when[0].end||node.report().when[0].to)toDiv=GIAPI.Common_UINode.whenDiv("to",node.report())}out+="<td>"+fromDiv+toDiv+"</td>";out+="</tr></table>";return out};var buttonsDiv=function(node,sectionId,measurementDivId,reportDivId,
downloadDivId){var out='<div class="common-ui-node-button-div" style="margin-bottom:5px; margin-top:5px; display:inline-block">';var minfoButtonId="minfo-button-"+node.uiId;var mtoggleButton=GIAPI.ToggleButton({"id":minfoButtonId,"width":18,"targetId":measurementDivId,"offLabel":"","onLabel":"","attr":[{name:"title",value:"Measurement info"}]});mtoggleButton.stateIcon("on","fa-bar-chart");mtoggleButton.stateIcon("off","fa-bar-chart");mtoggleButton.css("div","padding","4px");mtoggleButton.css("div",
"background","#009688");mtoggleButton.css("icon","margin-left","2px");mtoggleButton.css("icon","font-size","15px");mtoggleButton.css("icon","vertical-align","middle");out+='<div style="margin-left:3px; display: inline-block;">'+mtoggleButton.div()+"</div>";var infoButtonId="info-button-"+node.uiId;var toggleButton=GIAPI.ToggleButton({"id":infoButtonId,"width":18,"targetId":reportDivId,"offLabel":"","onLabel":"","attr":[{name:"title",value:"More info"}]});toggleButton.stateIcon("on","fa-info-circle");
toggleButton.stateIcon("off","fa-info-circle");toggleButton.css("div","padding","4px");toggleButton.css("div","background","#005aef");toggleButton.css("icon","margin-left","2px");toggleButton.css("icon","font-size","15px");toggleButton.css("icon","vertical-align","middle");out+='<div style="margin-left:3px; display: inline-block;">'+toggleButton.div()+"</div>";if(GIAPI.Common_UINode.dabNode||options.dabNode){var dabNode=GIAPI.Common_UINode.dabNode||options.dabNode;var xmlButton=GIAPI.FontAwesomeButton({"width":22,
"label":"","icon":"fa-file-text-o","attr":[{"name":"nodeid","value":node.report().id},{"name":"title","value":"Full metadata"}],"handler":function(){GIAPI.UI_Utils.openNodeInfoPage(dabNode,jQuery(this).attr("nodeid"));return false}});xmlButton.css("div","margin-left","3px");xmlButton.css("icon","font-size","13px");xmlButton.css("div","padding","4px");xmlButton.css("div","background","#005aef");out+='<div style="margin-left:3px; display: inline-block;">'+xmlButton.div()+"</div>"}var insertCR=false;
var resultSet=options.response&&options.response[0];if(node.report().type==="composed"&&resultSet&&resultSet.refiner&&(GIAPI.Common_UINode.onDiscoverResponse||options.onDiscoverResponse)){var buttonId=GIAPI.random();var iconId=GIAPI.random();out+='<input nodeid="'+node.report().id+'" id="'+buttonId+'" class="common-ui-node-browse-collection-button" value="" type="button"/>';out+='<i title="Browse collection content" nodeid="'+node.report().id+'" id="'+iconId+'" class="common-ui-node-browse-collection-icon fa fa-folder-open-o" aria-hidden="true"/>';
var handler=function(){GIAPI.UI_Utils.discoverDialog("open");resultSet.refiner.browse(GIAPI.Common_UINode.onDiscoverResponse||options.onDiscoverResponse,jQuery(this).attr("nodeid"),{"pageSize":GIAPI.Common_UINode.pageSize||options.pageSize})};jQuery(document).on("click","#"+buttonId,handler);jQuery(document).on("click","#"+iconId,handler);if(options.browseCollection)out+=createCollectionCheck(resultSet.refiner,node)}if(options.mapWidget){var button=options.mapWidget.addLayersButton(node);if(button)out+=
'<div style="margin-left: 5px; display:inline-block">'+button.div()+"</div>"}var links=node.directAccessLinks();if(links&&links.length>0){var stop=Math.min(links.length,5);insertCR=true;for(var i=0;i<stop;i++){var link=links[i];var label="";if(link.indexOf(".tar.gz")>-1||link.indexOf(".gz")>-1)label="TAR GZ";else if(link.indexOf("anonymous")>-1||link.indexOf("earthexplorer")>-1&&link.indexOf("sceneid")>-1)label="PNG";else if(link.indexOf(".avi")>-1||link.indexOf("/video/")>-1)label="AVI Directory";
else if(link.indexOf("rinex")>-1||link.indexOf("gsacapi/file/search")>-1)label="RINEX Directory";else if(link.indexOf("kml")>-1)continue;else if(link.indexOf("atom")>-1)label="ATOM";else if(link.indexOf(".N1")>-1)label="N1";else if(link.indexOf("dataselect")>-1)label="MiniSEED";else if(link.indexOf("position")>-1)label="Position";else if(link.indexOf("velocity")>-1)label="Velocity";else if(link.indexOf("event/1/query")>-1)label="QuakeML";var button=GIAPI.FontAwesomeButton({"label":label,"icon":"fa-external-link",
"attr":[{"name":"link","value":link},{"name":"title","value":"Download "+label}],"handler":function(){var link=jQuery(this).attr("link");window.open(link);return false}});button.css("div","margin-left","5px");out+=button.div()}}var wfslinks=node.WFS_Service();if(wfslinks&&wfslinks.length>0){var stop=Math.min(wfslinks.length,5);insertCR=true;for(var j=0;j<stop;j++){var on=wfslinks[j];var name=on.name;var url=on.url;var prot=on.protocol;if((url.indexOf("energic-od.eu")>-1||url.indexOf("essi-lab.eu")>
-1)&&url.indexOf("protocol=urn:ogc:serviceType:WebFeatureService")>-1){var query=url+"service=WFS&version=1.0.0&request=GetFeature&typename="+name+"&outputFormat=application%2Fgeo%2Bjson";var width=GIAPI.UI_Utils.getTextWidth(label,"normal 1.1em 'Helvetica Neue', Helvetica, Arial, sans-serif");width+=60;var button=GIAPI.FontAwesomeButton({"width":width,"label":"GeoJSON","icon":"fa-download","attr":[{"name":"link","value":query}],"handler":function(){var link=jQuery(this).attr("link");window.open(link);
return false}});button.css("div","margin-left","3px");out+=button.div()}}}out+="</div>";return out};var measurementContentDiv=function(node,measurementDivId){var div="";var report=node.report();var table='<table class="common-ui-node-report-content-table"><tbody>';var content="";var line=GIAPI.UI_Utils.separator("margin-left:10px; display:inline-block; width:495px;vertical-align: middle");if(report.instrumentDescription&&report.instrumentDescription.length){content+="<tr><td colspan=2>"+line+"</td></tr>";
content+='<tr><td style="width: 10px;"><i style="background: white;text-align: center; width: 15px;margin-left: 10px; margin-right: 10px; border: 1px solid gray; padding: 5px" title="Measuring instruments used to acquire the data" class="fa fa-thermometer-full" aria-hidden="true"></i></td>';content+='<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<report.instrumentDescription.length;i++){var value=report.instrumentDescription[i];content+='<label class="common-ui-node-report-content-table-right">'+
value+"</label></br>"}content+="</td>";content+="</tr>"}if(report.platformDescription&&report.platformDescription.length){content+="<tr><td colspan=2>"+line+"</td></tr>";content+='<tr><td style="width: 10px;"><i style="background: white;margin-left: 10px; margin-right: 10px; border: 1px solid gray; padding: 5px" title="Platform from which the data were taken" class="fa fa-ship" aria-hidden="true"></i></td>';content+='<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<report.platformDescription.length;i++){var value=
report.platformDescription[i];content+='<label class="common-ui-node-report-content-table-right">'+value+"</label></br>"}content+="</td>";content+="</tr>"}if(report.origOrgDesc&&report.origOrgDesc.length){content+="<tr><td colspan=2>"+line+"</td></tr>";content+='<tr><td style="width: 10px;"><i style="background: white;margin-left: 10px; margin-right: 10px; border: 1px solid gray; padding: 5px" title="Organisation which created the resource" class="fa fa-users" aria-hidden="true"></i></td>';content+=
'<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<report.origOrgDesc.length;i++){var value=report.origOrgDesc[i];content+='<label class="common-ui-node-report-content-table-right">'+value+"</label></br>"}content+="</td>";content+="</tr>"}if(report.attributeDescription&&report.attributeDescription.length){content+="<tr><td colspan=2>"+line+"</td></tr>";content+='<tr><td style="width: 10px;"><i style="background: white;margin-left: 10px;  margin-right: 10px; border: 1px solid gray; padding: 5px" title="Attribute described by the measurement value" class="fa fa-bar-chart" aria-hidden="true"></i></td>';
content+='<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<report.attributeDescription.length;i++){var value=report.attributeDescription[i];content+='<label class="common-ui-node-report-content-table-right">'+value+"</label></br>"}content+="</td>";content+="</tr>"}if(!content)table='<div style="margin-left: 3px;"><label style="font-size:11px; font-weight: bold">No measurement info</label></div>';else table+=content+"</tbody></table><br>";div='<div class="common-ui-node-report-content-div" id="'+
measurementDivId+'">'+table+"</div>";return div};var reportContentDiv=function(node,reportDivId){var div="";var report=node.report();var table='<table class="common-ui-node-report-content-table"><tbody>';var line=GIAPI.UI_Utils.separator("margin-left:3px; display:inline-block; width:100%;vertical-align: middle");table+="<tr><td colspan=2>"+line+"</td></tr>";var content=GIAPI.Common_UINode.authorRow(report);if(report.keyword&&report.keyword.length){content+='<tr><td class="common-ui-node-report-content-table-left-td"><label class="common-ui-node-report-content-table-left">Keywords</td>';
content+='<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<report.keyword.length;i++)content+='<label class="common-ui-node-report-content-table-right">'+report.keyword[i]+"</label><br>";content+="</td></tr>"}if(report.format&&report.format.length){content+='<tr><td class="common-ui-node-report-content-table-left-td"><label class="common-ui-node-report-content-table-left">Formats</td>';content+='<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<report.format.length;i++)content+=
'<label class="common-ui-node-report-content-table-right">'+report.format[i]+"</label><br>";content+="</td></tr>"}if(report.content&&report.content.length){content+='<tr><td class="common-ui-node-report-content-table-left-td"><label class="common-ui-node-report-content-table-left">Contents</td>';content+='<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<report.content.length;i++)content+='<label class="common-ui-node-report-content-table-right">'+report.content[i]+"</label><br>";
content+="</td></tr>"}if(report.parentId==="INGVIE"){var grbyidUrl="http://med-suv.essi-lab.eu/dab/services/cswisogeo?service=CSW&request=GetRecordById&id="+report.id+"&outputschema=http://quakeml.org/xmlns/bed/1.2&elementSetName=full";if(!report.online)report.online=[];report.online.push({url:grbyidUrl,protocol:"HTTP_GET",description:"Formatted QuakeML metatada"})}if(report.online){var links=[];for(var i=0;i<report.online.length;i++)links.push(report.online[i]);if(links.length>0){content+='<tr><td class="common-ui-node-report-content-table-left-td"><label class="common-ui-node-report-content-table-left">Links</td>';
content+='<td class="common-ui-node-report-content-table-right-td">';for(var i=0;i<links.length;i++){content+='<a target="_blank" class="dont-break-out common-ui-node-report-content-table-right" style="color:blue;text-decoration: none;" href="'+links[i].url+'">"'+links[i].url+'"</a><br>';if(links[i].protocol)content+='<label class="common-ui-node-report-content-table-right">Protocol: "'+links[i].protocol+'"</label><br>';if(links[i].description)content+='<label class="common-ui-node-report-content-table-right">Description: "'+
links[i].description+'"</label><br>';if(i<links.length-1)content+="<br>"}content+="</td></tr>"}}if(report.verticalExtent&&report.verticalExtent.length>0){content+='<tr><td class="common-ui-node-report-content-table-left-td"><label class="common-ui-node-report-content-table-left">Elevation</td>';content+='<td class="common-ui-node-report-content-table-right-td"><label class="common-ui-node-report-content-table-right">Min: '+report.verticalExtent[0].min+"</label><br>";content+='<label class="common-ui-node-report-content-table-right">Max: '+
report.verticalExtent[0].max+"</label>";content+="</td></tr>"}content+=GIAPI.Common_UINode.createdRow(report);if(!content)table='<div style="margin-left: 3px;"><label style="font-size:11px; font-weight: bold">No additional info</label></div>';else table+=content+"</tbody></table><br>";div+='<div class="common-ui-node-report-content-div" id="'+reportDivId+'">'+table+"</div>";return div};GIAPI.Common_UINode._deselectAll=function(){jQuery('[id^="ref-check-"]').attr("check","false");jQuery('[id^="ref-check-"]').removeClass("fa-minus");
jQuery('[id^="ref-check-"]').addClass("fa-plus");jQuery('[id^="ref-check-"]').css("background","transparent");jQuery('[id^="ref-check-"]').css("color","black")};var createCollectionCheck=function(refiner,currentNode){var title="Add collection to browse";var check="";var checkId="ref-check-"+currentNode.uiId;var collections=layout.browser().collections();if(collections.indexOf(currentNode.report().id)>-1)check+='<i title="'+title+'" id="'+checkId+'" style="background: #666; color:white" check="true" node="'+
currentNode.uiId+'" class="common-ui-node-collection-check fa fa-minus" aria-hidden="true"></i>';else check+='<i title="'+title+'" id="'+checkId+'" check="false" node="'+currentNode.uiId+'" class="common-ui-node-collection-check fa fa-plus" aria-hidden="true"></i>';var handler=function(check,node){switch(jQuery(check).attr("check")){case "true":jQuery(check).attr("check","false");jQuery(check).removeClass("fa-minus");jQuery(check).addClass("fa-plus");jQuery("#"+checkId).css("background","transparent");
jQuery("#"+checkId).css("color","black");layout.browser().update("remove",node.report().id);break;case "false":jQuery(check).attr("check","true");jQuery(check).addClass("fa-minus");jQuery(check).removeClass("fa-plus");jQuery("#"+checkId).css("background","#666");jQuery("#"+checkId).css("color","white");layout.browser().update("add",node.report().id);break}};jQuery(document).on("click","#"+checkId,function(){handler(this,currentNode)});jQuery(document).on("click","#div-"+checkId,function(){handler(this,
currentNode)});return check};return uiNode};GIAPI.GBIF_UINode=function(options){var uiNode=GIAPI.Common_UINode(options);options.asideDom=function(node,options,asideId){var out=null;if(node.report().GBIF_Dataset&&node.report().where){var nodeMapId="node-map-"+node.uiId;out="<div id="+nodeMapId+' class="common-ui-node-node-map-div"></div>'}return out};options.onAsideReady=function(aside,node){var nodeMapId="node-map-"+node.uiId;var nodeMapWidget=GIAPI.NodeMapWidget(nodeMapId,node,{"mapType":GIAPI.Common_UINode.mapType||GIAPI.ui.mapType||"google",
"mapTypeId":GIAPI.Common_UINode.mapTypeId||GIAPI.ui.mapTypeId||google.maps.MapTypeId.ROADMAP,"mode":GIAPI.Common_UINode.mapMode||"al","zoom":9,"height":200});nodeMapWidget.init()};options.onSectionReady=function(aside,node){if(node.report().type==="simple"){var nodeMapWidget=GIAPI.NodeMapWidget("node-map-"+node.uiId,node,{"mapType":GIAPI.Common_UINode.mapType||GIAPI.ui.mapType||"google","mapTypeId":GIAPI.Common_UINode.mapTypeId||GIAPI.ui.mapTypeId||google.maps.MapTypeId.ROADMAP,"mode":"al","zoom":9,
"height":140});nodeMapWidget.init()}};options.sectionDom=function(node,options,sectionId){var report=node.report();var reportId=report.id;var type=report.type;var title=report.title;var desc=report.description==="none"||!report.description?"No descripion available":report.description;var ovr=report.overview;var type=report.type;var keyword=report.keyword;var rowDivId=GIAPI.random();var datasetDivId=GIAPI.random();var sectionDivId="section-div-"+node.uiId;var div='<div id="'+sectionDivId+'" class="common-ui-node-report-div">';
div+='<a name="node-'+node.uiId+'"/>';switch(type){case "simple":jQuery(document).on("mouseover","#"+sectionDivId,function(){if(options.mapWidget)options.mapWidget.markerIcon(node,{url:"http://api.geodab.eu/docs/assets/img/circle-yellow-marker.png"})});jQuery(document).on("mouseout","#"+sectionDivId,function(){if(options.mapWidget)options.mapWidget.markerIcon(node,{color:"red"})});var topTable="<table><tr>";topTable+="<td>"+createOccurrenceTable(report);topTable+="<br>";topTable+=createClassificationTable(report.GBIF_Occurrence);
topTable+="</td>";if(node.report().where)topTable+='<td><div style="width:300px" id="node-map-'+node.uiId+'" class="common-ui-node-node-map-div"></div></td>';topTable+="</tr></table>";div+=topTable;if(ovr){div+="<br>";for(var i=0;i<ovr.length;i++){var divId="overview_div_"+GIAPI.random();div+='<div style="display:inline-block" class="common-ui-node-overview-div" id="'+divId+'" ></div>';GIAPI.UI_Utils.loadOverview(node,divId,{"index":i})}div+="<br>"}div+='<div class="gbif-ui-node-occ-button-div">';
if(node.directAccessLinks().length>1){var link=node.directAccessLinks()[1];var darwinButton=GIAPI.FontAwesomeButton({"label":"DARWIN CORE ARCHIVE","icon":"fa-download","attr":[{"name":"link","value":link},{"name":"title","value":"Download the Darwin Core Archive"}],"handler":function(){var link=jQuery(this).attr("link");window.open(link)}});darwinButton.css("div","margin-top","10px");darwinButton.css("div","margin-right","5px");darwinButton.css("div","padding-right","10px");div+='<div style="display:inline-block">'+
darwinButton.div()+"</div>"}var link=node.directAccessLinks()[0];var jsonButton=GIAPI.FontAwesomeButton({"label":"FULL JSON","icon":"fa-file-text-o","attr":[{"name":"link","value":link},{"name":"title","value":"Download in JSON format"}],"handler":function(){var link=jQuery(this).attr("link");window.open(link)}});jsonButton.css("div","margin-top","10px");jsonButton.css("div","background","#467fc9");jsonButton.css("div","padding-right","10px");div+='<div style="display:inline-block">'+jsonButton.div()+
"</div>";var datasetKey=report.GBIF_Occurrence.datasetKey;if(datasetKey){var dsButtonId="dataset-button-"+node.uiId;var what="datasetKey="+datasetKey;div+='<div style="vertical-align: middle;display:inline-block; margin-left:10px">'+GIAPI.ButtonsFactory.onOffSwitchButton("DATASET","DATASET",{"id":dsButtonId,"size":"medium","attr":[{"name":"what","value":what}],"handler":function(){var w=jQuery(this).attr("what");var empty=!jQuery("#"+datasetDivId+" div")[0];if(empty&&!jQuery(this).prop("checked"))options.dabNode.discover(function(response){var resultSet=
response[0];var paginator=resultSet.paginator;var node=paginator.page().next();jQuery("#"+datasetDivId).empty();var div='<div style="margin-top:5px; ">'+datasetSubSection1(node);div+=datasetSubSection2(node)+"</div>";jQuery("#"+datasetDivId).append(div)},{"what":w});jQuery("#"+datasetDivId).slideToggle({duration:800})}})+"</div>";div+="</div>";div+='<div class="common-ui-node-report-content-div" id="'+datasetDivId+'"></div>'}else div+="</div>";break;case "composed":if(report.GBIF_Dataset){div+=datasetSubSection1(node);
div+=datasetSubSection2(node);if(report.online){for(var o=0;o<report.online.length;o++){var link=report.online[o].url;var label="DOWNLOAD";if(report.format&&report.format[o])label=report.format[o].toUpperCase();var format=report.format[o]?" in "+report.format[o]+" format":"";var downloadButton=GIAPI.FontAwesomeButton({"width":GIAPI.UI_Utils.getTextWidth(label,'"Helvetica Neue", Helvetica, Arial, sans-serif;')+100,"label":label,"icon":"fa-download","attr":[{"name":"link","value":link},{"name":"title",
"value":"Download "+format}],"handler":function(){var link=jQuery(this).attr("link");window.open(link)}});downloadButton.css("div","background","#447700");downloadButton.css("div","margin-right","3px");div+='<div style=" display:inline-block">'+downloadButton.div()+"</div>"}div+="<br>"}var taxonKey=report.GBIF_Dataset.taxonKey;var constWidget=GIAPI.ConstraintsWidget(options.dabNode,{"fieldsWidth":350});var occButton=createOccurrencesButton(reportId,constWidget,"GET DATASET OCCURRENCES",taxonKey);
var count=report.GBIF_Dataset.occurrencesCount;var countDiv='<div class="gbif-ui-node-occurrence-count-div">';countDiv+="<label>Occurrences count: <b>"+count+"</b></div>";div+=createFiltersDiv(constWidget,occButton,"GET DATASET OCCURRENCES",countDiv)}else{var headerTable="<table><tr>";headerTable+="<td>";var ovrDiv='<div style="height: 100px;">';if(ovr)for(var i=0;i<ovr.length;i++){var divId="overview_div_"+GIAPI.random();ovrDiv+='<div style="display:inline-block" class="common-ui-node-overview-div" id="'+
divId+'" ></div>';GIAPI.UI_Utils.loadOverview(node,divId,{"backgroundURL":"http://2.maps.nlp.nokia.com/maptile/2.1/maptile/newest/normal.day.grey/0/0/0/256/png8?app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ","index":i})}else ovrDiv+='<img src="http://api.geodab.eu/docs/assets/img/no_overview_576.png" width="96" height="96">';headerTable+=ovrDiv;headerTable+="</td>";headerTable+='<td style="width:100%"><label class="common-ui-node-report-title">'+title+"</label><br>";var href="";headerTable+=
'<textarea style="margin-top: 5px;" rows="4" class="common-ui-node-report-desc" readonly>'+desc+"</textarea>";headerTable+=href;headerTable+="<br><br>";headerTable+="</td>";headerTable+="</tr></table>";div+=headerTable;div+='<div style="margin-top: 10px;">'+createClassificationTable(report.GBIF_Species)+"</div><br>";if(report.GBIF_Species.nubKey){var nubKey=report.GBIF_Species.nubKey;uiNode.taxonKey=nubKey}uiNode.occCountDivId=GIAPI.random();var constWidget=GIAPI.ConstraintsWidget(options.dabNode,
{"fieldsWidth":350});var buttonLabel="GET OCCURRENCES";var occButton=createOccurrencesButton(reportId,constWidget,buttonLabel);div+=createFiltersDiv(constWidget,occButton,buttonLabel);div+="</div>"}}return div};var createOccurrencesButton=function(id,constWidget,label,datasetTaxonKey){var occButton=GIAPI.FontAwesomeButton({"label":label,"icon":"fa-paw","attr":[{"name":"parent","value":id}],"handler":function(){GIAPI.UI_Utils.discoverDialog("open");var constrains=datasetTaxonKey?{"who":jQuery(this).attr("parent"),
"kvp":{"key":"kwd","value":"taxonKey%3D"+datasetTaxonKey},"where":constWidget.constraints().where,"when":constWidget.constraints().when}:{"who":jQuery(this).attr("parent"),"where":constWidget.constraints().where,"when":constWidget.constraints().when,"what":constWidget.constraints().what};var opt=datasetTaxonKey?{"pageSize":GIAPI.GBIF_UINode.pageSize}:{"pageSize":GIAPI.GBIF_UINode.pageSize,"merge":false};var resultSet=options.response[0];if(resultSet.refiner)resultSet.refiner.refine(options.onDiscoverResponse,
constrains,opt);else options.dabNode.discover(options.onDiscoverResponse,constrains,{"pageSize":GIAPI.GBIF_UINode.pageSize})}});occButton.css("div","padding-top","10px");occButton.css("div","padding-bottom","10px");occButton.css("div","padding-right","15px");occButton.css("div","font-size","110%");return occButton};var createFiltersDiv=function(constWidget,occButton,buttonLabel,datasetOccDiv){var filtersDivId=GIAPI.random();var filtersButton=GIAPI.ToggleButton({"width":190,"targetId":filtersDivId,
"offLabel":"OCCURRENCES FILTERS","onLabel":"OCCURRENCES FILTERS"});filtersButton.css("div","margin-top","5px");var divCSS="position: relative; display:inline-block";var div='<div class="gbif-ui-node-filters-button-div" style="'+divCSS+'">'+occButton.div();if(!datasetOccDiv){div+='<div class="gbif-ui-node-occurrence-count-div">';div+='<label id="'+uiNode.occCountDivId+'">Calculating occurrences...</label></div>'}else div+='<div style="margin-left: 5px;display:inline-block">'+datasetOccDiv+"</div>";
div+=filtersButton.div()+"</div><br>";var filtersDiv='<div class="gbif-ui-node-filters-div" id="'+filtersDivId+'" style="width:100%; padding-bottom: 5px; display:none">';if(!datasetOccDiv)filtersDiv+='<div style="margin-bottom:-5px">'+constWidget.whatConstraint("get",{"showOptDialog":false,"label":"Occurrence keyword"})+"</div>";var whereConst=constWidget.whereConstraint("get",{"resultsMapWidget":options.mapWidget,"widgetModal":true});filtersDiv+='<div style="margin-bottom:-5px">'+whereConst+"</div>";
filtersDiv+='<div style="margin-bottom:-5px">'+constWidget.whenConstraint("get","from")+"</div>";filtersDiv+='<div style="margin-bottom:-5px">'+constWidget.whenConstraint("get","to")+"</div>";filtersDiv+="</div>";div+=filtersDiv;return div};uiNode.isRenderable=function(node){return node.report().id.indexOf("GBIF")>-1};var createOccurrenceTable=function(report){var table='<table class="classification-table" id="occTable">';table+='<tr><th colspan="5">'+report.title+"</th></tr>";table+='<tr><th colspan="5">'+
GIAPI.UI_Utils.separator("width:100%")+"</th></tr>";table+="<tr><th>ID</th><th>Event date</th><th>Country</th><th>Lat</th><th>Lon</th></tr>";var occurrenceKey=report.GBIF_Occurrence.key;table+="<tr>";table+='<td style="font-size:90%;">'+occurrenceKey+"</td>";if(report.when)table+='<td style="font-size:90%;">'+report.when[0].from+"</td>";else table+='<td style="font-size:90%;">-</td>';var country=report.GBIF_Occurrence.country;if(country)table+='<td style="font-size:90%;">'+country+"</td>";else table+=
'<td style="font-size:90%;">-</td>';if(report.where){var s=report.where[0].south?report.where[0].south:"-";table+='<td style="font-size:90%;">'+s+"</td>";var w=report.where[0].west?report.where[0].west:"-";table+='<td style="font-size:90%;">'+w+"</td>"}else{table+='<td style="font-size:90%;">-</td>';table+='<td style="font-size:90%;">-</td>'}table+="</tr></table>";return table};var createClassificationTable=function(extension){var table='<table class="classification-table" id="classifTable">';table+=
"<tr><th>Genus</th><th>Family</th><th>Order</th><th>Class</th><th>Phylum</th><th>Kingdom</th></tr>";if(extension){var values=[];values[0]=extension.genus;values[1]=extension.family;values[2]=extension.order;values[3]=extension.clazz;values[4]=extension.phylum;values[5]=extension.kingdom;for(var i=0;i<values.length;i++){var value=values[i];if(!value)value="-";if(i===values.length)table+="</tr>";else table+='<td style=" font-size:90%;">'+value+"</td>"}}table+="</table>";return table};var datasetSubSection1=
function(node){var report=node.report();var desc=report.description;if(!desc||desc==="none")desc="No description available";var title=report.title;var out='<a name="node-'+node.uiId+'"/>';out+='<label class="common-ui-node-report-title">'+title+"</label><br><br>";out+='<textarea rows="4" class="common-ui-node-report-desc" readonly>'+desc+"</textarea>";return out};var datasetSubSection2=function(node){var out="";var report=node.report();var table='<table style=" " class="common-ui-node-report-content-table"><tbody>';
var altTitle=report.alternateTitle;if(altTitle){table+='<tr><td class="common-ui-node-report-content-table-left-td"><label class="common-ui-node-report-content-table-left">Citation</td>';table+='<td class="common-ui-node-report-content-table-right-td">';table+='<label class="common-ui-node-report-content-table-right">'+altTitle+"</label></td></tr>"}table+=GIAPI.Common_UINode.authorRow(report)+"<br><br>";table+=GIAPI.Common_UINode.createdRow(report);table+=GIAPI.Common_UINode.whenRow(report);table+=
"</tbody></table><br>";out+='<div style="display:initial; border:none" class="common-ui-node-report-content-div" >'+table+"</div>";return out};return uiNode};
GIAPI.GBIF_UINode.onUpdateReady=function(dabNode,renderedNodes){if(arguments.length==1)renderedNodes=dabNode;var keys=[];renderedNodes.forEach(function(uiNode){if(uiNode.taxonKey)keys.push(uiNode.taxonKey)});if(!keys.length)return;var endpoint=GIAPI.GBIF_UINode.dabNode.endpoint();endpoint=endpoint.endsWith("/")?endpoint:endpoint+"/";var servicePath=dabNode.servicePath();var query=endpoint+servicePath+"/opensearch?reqID="+GIAPI.random()+"&occurrencesCount="+keys;jQuery.ajax({type:"GET",url:query,crossDomain:true,
dataType:"jsonp",success:function(data,status,jqXHR){if(data.response)data.response.forEach(function(o){var key=o.taxonKey;renderedNodes.forEach(function(uiNode){if(!uiNode.taxonKey)GIAPI.GBIF_UINode.occurrenceCount(uiNode);else if(uiNode.taxonKey===key){GIAPI.GBIF_UINode.occurrenceCount(uiNode,o.count);return}})})}})};
GIAPI.GBIF_UINode.occurrenceCount=function(uiNode,count){if(!count)count="unknown";else count=GIAPI.thousandsSeparator(count);jQuery("#"+uiNode.occCountDivId).html("Available occurrences: <b>"+count+"</b>")};GIAPI.IrisEvent_UINode=function(options){var uiNode=GIAPI.Common_UINode(options);options.sectionDom=function(node,options,sectionId){var report=node.report();var id=report.id;var type=report.type;var title=report.title;var desc=report.description==="none"||!report.description?"No descripion available":report.description;var ovr=report.overview;var type=report.type;var keyword=report.keyword;var rowDivId=GIAPI.random();var datasetDivId=GIAPI.random();var sectionDivId="section-div-"+node.uiId;var div=
'<div id="'+sectionDivId+'" class="common-ui-node-report-div">';id=id.length>100?id.substr(0,100)+"...":id;jQuery(document).on("mouseover","#"+sectionDivId,function(){if(options.mapWidget)options.mapWidget.markerIcon(node,{url:"http://api.geodab.eu/docs/assets/img/circle-yellow-marker.png"})});jQuery(document).on("mouseout","#"+sectionDivId,function(){if(options.mapWidget)options.mapWidget.markerIcon(node,{color:"red"})});div+=createEventTable(report.QuakeML);if(node.directAccessLinks().length>0){var link=
node.directAccessLinks()[0].replace("quakeml:","http://");var label="FULL QuakeML";var width=GIAPI.UI_Utils.getTextWidth(label,"normal 1.1em 'Helvetica Neue', Helvetica, Arial, sans-serif");width+=60;var button=GIAPI.FontAwesomeButton({"width":width,"label":label,"icon":"fa-external-link","attr":[{"name":"link","value":link}],"handler":function(){var link=jQuery(this).attr("link");window.open(link);return false}});button.css("div","margin-top","10px");div+=button.div()}return div};uiNode.isRenderable=
function(node){return node.report().QuakeML?true:false};var createEventTable=function(quakeML){var table='<table class="classification-table" id="occTable">';var title=GIAPI.formatWords(quakeML.type);var region=GIAPI.formatWords(quakeML.region);if(region==="Unknown")region="Unknown Region";title+=" localized in "+region;table+='<tr><th colspan="5">'+title+"</th></tr>";table+='<tr><td colspan="5">'+GIAPI.UI_Utils.separator(" width:100%; vertical-align: top;")+"</td></tr>";table+="<tr><th>Magnitude value</th><th>Depth</th><th>Lat</th><th>Lon</th><th>Time</th></tr>";
table+="<tr>";table+='<td style="font-size:90%;">'+normalize(quakeML.magnValue)+"</td>";table+='<td style="font-size:90%;">'+normalize(quakeML.depth)+"</td>";table+='<td style="font-size:90%;">'+normalize(quakeML.lat)+"</td>";table+='<td style="font-size:90%;">'+normalize(quakeML.lon)+"</td>";table+='<td style="font-size:90%;">'+normalize(quakeML.time)+"</td>";table+='<tr><td colspan="5"></td></tr>';table+='<tr><td colspan="5"></td></tr>';table+="<tr><th>Region</th><th>Magnitude type</th><th>Event type</th><th>Author</th><th>Contributor</th></tr>";
table+="<tr>";table+='<td style="font-size:90%;">'+normalize(region)+"</td>";table+='<td style="font-size:90%;">'+normalize(GIAPI.formatWords(quakeML.magnType))+"</td>";table+='<td style="font-size:90%;">'+normalize(GIAPI.formatWords(quakeML.type))+"</td>";table+='<td style="font-size:90%;">'+normalize(GIAPI.formatWords(quakeML.author))+"</td>";table+='<td style="font-size:90%;">'+normalize(GIAPI.formatWords(quakeML.contributor))+"</td>";table+="</tr></table>";return table};var normalize=function(string){return(""+
string).toLowerCase()==="unknown"?"-":string};return uiNode};GIAPI.SeriesBrowserWidget=function(options){var widget={};if(!GIAPI.ui.collections)GIAPI.ui.collections=[];var constWidget;var toggleButton;var browseButton;var browseButtonId=GIAPI.random();var toggleButtonId=GIAPI.random();var infoLabelId=GIAPI.random();var rwdButtonId=GIAPI.random();var fwdButtonId=GIAPI.random();var clearId=GIAPI.random();var browserDivId=GIAPI.random();widget.init=function(headerDivId,refiner){createHeader(browserDivId,headerDivId,refiner);createDiv(browserDivId,refiner);widget.update()};
widget.update=function(action,id){switch(action){case "remove":Array.prototype.remove(GIAPI.ui.collections,id);break;case "add":GIAPI.ui.collections.push(id);break}if(GIAPI.ui.collections.length>0){toggleButton.state("off");enableBrowseButton(true);if(jQuery("#"+browserDivId).css("display")==="none")jQuery("#"+toggleButtonId).click()}else{if(toggleButton.state()!=="disabled")jQuery("#"+toggleButtonId).click();toggleButton.state("disabled");enableBrowseButton(false)}var label;var textLabel;switch(GIAPI.ui.collections.length){case 0:label=
"Add collections to browse with optional filters";textLabel=label;break;case 1:label='You have <span style="color:blue; font-weight:bold; font-style:italic">'+GIAPI.ui.collections.length+" collection</span> to browse";textLabel="You have "+GIAPI.ui.collections.length+" collection to browse";jQuery("#"+toggleButtonId).fadeOut(300);jQuery("#"+toggleButtonId).fadeIn(300);jQuery("#"+toggleButtonId).fadeOut(300);jQuery("#"+toggleButtonId).fadeIn(300);break;default:label='You have <span style="color:blue; font-weight:bold; font-style:italic">'+
GIAPI.ui.collections.length+" collections</span> to browse";textLabel="You have "+GIAPI.ui.collections.length+" collections to browse";jQuery("#"+toggleButtonId).fadeOut(300);jQuery("#"+toggleButtonId).fadeIn(300);jQuery("#"+toggleButtonId).fadeOut(300);jQuery("#"+toggleButtonId).fadeIn(300);break}jQuery("#"+infoLabelId).html(label)};widget.collections=function(){return GIAPI.ui.collections};var enableBrowseButton=function(enable){browseButton.enable(enable);if(enable){browseButton.css("div","background",
"#2C3E50");browseButton.css("div","cursor","pointer");browseButton.css("label","cursor","pointer");browseButton.css("label","color","white");browseButton.css("icon","color","white");jQuery("#"+browseButtonId).hover(function(){jQuery("#"+browseButtonId).css("box-shadow","0px 0px 6px 4px rgba(0,0,0,0.3)")},function(){jQuery("#"+browseButtonId).css("box-shadow","none")});browseButton.css("icon","font-size","13px");browseButton.css("label"," font-size","12px")}else{jQuery("#"+browseButtonId).hover(function(){jQuery("#"+
browseButtonId).css("box-shadow","none")},function(){jQuery("#"+browseButtonId).css("box-shadow","none")});browseButton.css("div","background","rgba(128, 128, 128, 0.28)");browseButton.css("div","cursor","default");browseButton.css("label","cursor","default");browseButton.css("label","color","lightgray");browseButton.css("icon","color","lightgray");browseButton.css("icon","font-size","13px");browseButton.css("label"," font-size","12px")}};var createHeader=function(browserDivId,headerDivId,refiner){var table=
'<table class="series-browser-widget-table">';toggleButton=GIAPI.ToggleButton({"id":toggleButtonId,"targetId":browserDivId,"offLabel":"Show browsing collection filters","onLabel":"Hide browsing collection filters","attr":[{name:"type",value:"series-browser-widget-toggle"}],"duration":400,"width":300});var clearCSS="margin-right: 5px;";clearCSS+="margin-left: 5px;";clearCSS+="font-size: 1em;";if(refiner.chronology().length>1){clearCSS+="color: black;";clearCSS+="cursor: pointer;"}else{clearCSS+="color: #666;";
clearCSS+="cursor: #default;"}var clear='<i title="Clear browsing history" id="'+clearId+'" style="'+clearCSS+'" class="fa fa-times-circle" aria-hidden="true"></i>';jQuery(document).on("click","#"+clearId,function(){GIAPI.ui.collections=[];refiner.reset();jQuery("#collDiv").html("");if(toggleButton.state()==="on"){jQuery("#"+toggleButtonId).click();toggleButton.state("disabled");enableBrowseButton(false)}jQuery("#"+clearId).css("color","#666");jQuery("#"+clearId).css("cursor","default");jQuery("#"+
rwdButtonId).attr("enabled","false");jQuery("#"+rwdButtonId).addClass("ref-button-a-disabled");jQuery("#"+rwdButtonId).addClass("ref-button-a-disabled:before");jQuery("#"+fwdButtonId).attr("enabled","false");jQuery("#"+fwdButtonId).addClass("ref-button-a-disabled");jQuery("#"+fwdButtonId).addClass("ref-button-a-disabled:before");GIAPI.Common_UINode._deselectAll();widget.update();if(options.onBrowsingReady)options.onBrowsingReady.apply(this,[refiner])});rwdButtonId=GIAPI.random();fwdButtonId=GIAPI.random();
var backButton='<div title="Back to search results" enabled="false" id="'+rwdButtonId+'" class="ref-rwd-a ref-button-a "></div>';var collDiv='<div style="display:inline-block; margin-left: 5px; "id="collDiv"></div>';var fwdButton='<div title="Next browsing results" style="margin-left:5px" enabled="false" id="'+fwdButtonId+'" class="ref-fwd-a ref-button-a "></div>';var handler=function(){GIAPI.UI_Utils.discoverDialog("open");var constraints=constWidget.constraints();refiner.refine(options.onDiscoverResponse,
{"who":GIAPI.ui.collections.toString(),"where":constraints.where,"when":constraints.when,"what":constraints.what},{merge:false,searchFields:"title,keyword,description"})};browseButton=GIAPI.FontAwesomeButton({"id":browseButtonId,"width":70,"label":"Browse","icon":"fa-folder-open","handler":handler});browseButton.css("div","padding","5px");browseButton.css("div","text-align","center");browseButton.css("div","margin-top","5px");browseButton.css("div","margin-bottom","0px");browseButton.css("div","margin-left",
"8px");browseButton.css("icon","font-size","13px");browseButton.css("icon","margin-left","-5px");browseButton.css("label","vertical-align","baseline");browseButton.css("label","font-size","12px");var labelCss="font-size: 12px; margin-left: 7px; color: black;";table+='<tr><td colspan="2" align="left"><div style="display:inline-block"><label style="'+labelCss+'" id="'+infoLabelId+'">You have 0 collections to browse</label></div></td></tr>';table+='<tr><td style="width: 70px;">'+browseButton.div()+'</td><td style="vertical-align: middle;"><div style="margin-top:7px;margin-bottom:-5px;">'+
clear+backButton+collDiv+fwdButton+"</div></td></tr>";table+='<tr><td style="display: none;" colspan="2" align="left"><div style="display:inline-block">'+toggleButton.div()+"</div></td></tr>";var css="display: none;";css+="width:100%;";table+='<tr><td colspan="2"  align="left" ><div style="'+css+'" id='+browserDivId+" ></div></td></tr></table>";jQuery("#"+headerDivId).append(table);jQuery("#"+rwdButtonId).click(function(){if(jQuery("#"+rwdButtonId).attr("enabled")==="true"){GIAPI.UI_Utils.discoverDialog("open");
refiner.rewind(options.onDiscoverResponse)}});jQuery("#"+fwdButtonId).click(function(){if(jQuery("#"+fwdButtonId).attr("enabled")==="true"){GIAPI.UI_Utils.discoverDialog("open");refiner.forward(options.onDiscoverResponse)}});switch(refiner.cursor()){case 1:jQuery("#"+rwdButtonId).attr("title","Back to search results");break;default:jQuery("#"+rwdButtonId).attr("title","Back to previous browsing results");break}var cur=refiner.cursor();var chron=refiner.chronology()[cur+1];GIAPI.ui.collections=[];
if(chron&&chron.who){var who=chron.who.split(",");who.forEach(function(id){GIAPI.ui.collections.push(id)})}var title=function(j){var chrono=refiner.chronology()[j];var len=chrono.who.split(",").length;var sub=j>1?"sub":"";return len+" opened "+sub+" collection"+(len>1?"s":"")};if(refiner.chronology().length>1){var chronology="";for(var j=0;j<refiner.chronology().length;j++)if(j===0)if(refiner.cursor()===0)chronology+='<i title="Search results"  class="fa fa-search series-browser-widget-history-icon" aria-hidden="true"></i> >';
else chronology+='<i title="Search results" style="color: #666;" class="fa fa-search series-browser-widget-history-icon" aria-hidden="true"></i> >';else if(refiner.cursor()===j)chronology+='<i title="'+title(j)+'" style="margin-left:3px" class="fa fa-folder-open series-browser-widget-history-icon" aria-hidden="true"></i> >';else chronology+='<i  title="'+title(j)+'" style="color: #666;margin-left:3px" class="fa fa-folder-o series-browser-widget-history-icon" aria-hidden="true"></i> >';chronology=
chronology.substring(0,chronology.length-2);jQuery("#collDiv").append(chronology)}if(refiner.rewind()){jQuery("#"+rwdButtonId).attr("enabled","true");jQuery("#"+rwdButtonId).removeClass("ref-button-a-disabled");jQuery("#"+rwdButtonId).removeClass("ref-button-a-disabled:before")}else{jQuery("#"+rwdButtonId).attr("enabled","false");jQuery("#"+rwdButtonId).addClass("ref-button-a-disabled");jQuery("#"+rwdButtonId).addClass("ref-button-a-disabled:before")}if(refiner.forward()){jQuery("#"+fwdButtonId).attr("enabled",
"true");jQuery("#"+fwdButtonId).removeClass("ref-button-a-disabled");jQuery("#"+fwdButtonId).removeClass("ref-button-a-disabled:before")}else{jQuery("#"+fwdButtonId).attr("enabled","false");jQuery("#"+fwdButtonId).addClass("ref-button-a-disabled");jQuery("#"+fwdButtonId).addClass("ref-button-a-disabled:before")}toggleButton.state("disabled");enableBrowseButton(false);if(options.onBrowsingReady)options.onBrowsingReady.apply(this,[refiner])};var createDiv=function(browserDivId,refiner){constWidget=
GIAPI.ConstraintsWidget(options.dabNode,{"keyDownAction":function(){jQuery("#"+browseButtonId).click()},"fieldsWidth":255});var who;var what;var where;var from;var to;var len=refiner.chronology().length;var cur=refiner.cursor();if(len>1&&cur===len-2){var chrono=refiner.chronology()[cur+1];what=chrono.what||"";where=chrono.where||null;from=chrono.when&&chrono.when.from||"";to=chrono.when&&chrono.when.to||"";who=chrono.who}constWidget.whatConstraint("add",{"showHelpIcon":false,"showOptDialog":false,
"value":what});var apply=where?true:false;var where=constWidget.whereConstraint("add",{widgetPosition:"bottom","showHelpIcon":false,"value":where,"applyValue":apply});var from=constWidget.whenConstraint("get","from",{"showHelpIcon":false,"value":from});var to=constWidget.whenConstraint("get","to",{"showHelpIcon":false,"value":to});var css="margin-left: 14px; margin-top: -5px;";var timeDiv='<table style="'+css+'"><tr><td>'+from+"</td><td>"+to+"</td></tr></table>";constWidget.append(browserDivId);jQuery("#"+
browserDivId).append(timeDiv);jQuery("#"+constWidget.getId("what")).css("font-size","85%");jQuery("#"+constWidget.getId("where")).css("font-size","85%");jQuery("#"+constWidget.getId("from")).css("width","123px");jQuery("#"+constWidget.getId("from")).css("font-size","85%");jQuery("#"+constWidget.getId("from")).css("margin-left","-15px");jQuery("#"+constWidget.getId("from")).parent("div").parent("td").css("width","123px");jQuery("#"+constWidget.getId("to")).css("width","123px");jQuery("#"+constWidget.getId("to")).css("font-size",
"85%");jQuery("#"+constWidget.getId("to")).css("margin-left","-15px");jQuery("#"+constWidget.getId("to")).parent("div").parent("td").css("width","123px")};return widget};GIAPI.PageSizeWidget=function(id,options){var widget={};if(!options)options={};if(!options.width)options.width=380;var sliderWidth=options.width-135;if(!options.label)options.label="- Max results";if(!options.min)options.min=10;if(!options.max)options.max=50;if(!options.step)options.step=10;if(!options.value)options.value=10;if(!options.help)options.help="Set the maximum number of results to show (with a limit of "+options.max+").<br> Please note that incrementing this value"+" the response time and the amount of necessary browser memory can significantly grow<br>";
var divId=GIAPI.random();var sliderId=GIAPI.random();var labelId=GIAPI.random();var helpDivId=GIAPI.random();jQuery(document).on("change","#"+sliderId,function(){jQuery("#"+labelId).text(this.value);GIAPI.Common_UINode.pageSize=this.value});jQuery(document).on("mouseover","#"+divId,function(){jQuery("#"+helpDivId+" i").css("display","inline-block")});jQuery(document).on("mouseout","#"+divId,function(){jQuery("#"+helpDivId+" i").css("display","none")});var div='<div id="'+divId+'" style="width: '+
(options.width+10)+'px; display:inline-block; margin-top: 10px;margin-left: 5px;">';div+='<label style="vertical-align: super;">'+options.label+"</label>";div+='<input id="'+sliderId+'" style="margin-left:5px;width:'+sliderWidth+'px" value="'+options.value+'" type="range" step="'+options.step+'" min="'+options.min+'" max="'+options.max+'"/>';div+='<label style="margin-left:5px;vertical-align: super;" id="'+labelId+'">'+options.value+"</label>";div+='<div style="display:inline-block" id="'+helpDivId+
'">'+GIAPI.UI_Utils.helpImage("Max results",options.help,"vertical-align: super;margin-left: 5px; display:none")+"</div></div>";jQuery("#"+id).append(div);widget.value=function(){return jQuery("#"+sliderId).val()};return widget};GIAPI.FontAwesomeButton=function(options){var button={};var enabled=true;var buttonId=options.id;if(!buttonId)buttonId=GIAPI.random();var _label=options.label;var labelId=buttonId+"Label";var iconId=buttonId+"Icon";if(!options.handler)options.handler=function(){};if(!options.iconSize)options.iconSize="13";var divStyle=options.width?"width:"+options.width+"px;":"";var iconStyle="font-size:"+options.iconSize+"px;";var labelStyle="";jQuery(document).on("click","#"+buttonId,function(){if(enabled)options.handler.apply(this,
[])});button.label=function(state){jQuery("#"+labelId).html(label);_label=label};button.css=function(target,property,value){switch(target){case "div":jQuery("#"+buttonId).css(property,value);divStyle+=property+":"+value+";";break;case "label":jQuery("#"+buttonId+"Label").css(property,value);labelStyle+=property+":"+value+";";break;case "icon":jQuery("#"+buttonId+"Icon").css(property,value);iconStyle+=property+":"+value+";";break}};button.enable=function(value){enabled=value};button.div=function(){var div_=
'<div id="'+buttonId+'" style="'+divStyle+'" class="font-awesome-button"';if(options&&options.attr)options.attr.forEach(function(attr){div_+=attr.name+'="'+attr.value+'" '});div_+=">";div_+='<i id="'+iconId+'"class="font-awesome-button-icon fa '+options.icon+'" style="'+iconStyle+'" aria-hidden="true"></i>';div_+='<label id="'+labelId+'" style="'+labelStyle+'"  class="font-awesome-button-label">'+_label+"</label></div>";return div_};return button};GIAPI.DownloadWidget=function(options){var widget={};var endpoint=GIAPI.Common_UINode.dabNode.endpoint();if(!endpoint.endsWith("/"))endpoint+="/";var contentOptions;var formatSelectId=GIAPI.random();var formatTdId=GIAPI.random();var gridCRSSelectId=GIAPI.random();var gridCRSTdId=GIAPI.random();var firstResLabelId=GIAPI.random();var firstResSelectId=GIAPI.random();var firstResTdId=GIAPI.random();var secondResLabelId=GIAPI.random();var secondResSelectId=GIAPI.random();var secondResTdId=GIAPI.random();
var rightTableId=GIAPI.random();var whereDivId=GIAPI.random();var downButtonTdId=GIAPI.random();var infoLabelId=GIAPI.random();var tmpDivLabelId=GIAPI.random();var tmpDiv='<div style="margin-left: 3px"><label id="'+tmpDivLabelId+'" style="font-size:11px; font-weight: bold;height:50px">Loading data, please wait...</label></div>';jQuery("#"+options.divId).append(tmpDiv);if(!options.node.isAccessible()){jQuery("#"+tmpDivLabelId).text("No download options available");return}options.node.accessOptions(function(options,
error){if(!options)jQuery("#"+tmpDivLabelId).text("No download options available");else update(options)});jQuery(document).on("change","#"+formatSelectId,function(){var selectedFormat=this.value;var avOptions=contentOptions.availableOptions;var compliantOptions=findCompliantOptions(avOptions,"format",selectedFormat);var gridCRSSet=createSet("gridCRS",compliantOptions);jQuery("#"+gridCRSSelectId).empty();var sel=true;for(var gridCRS in gridCRSSet){var selected=sel?" selected":"";sel=false;jQuery("#"+
gridCRSSelectId).append('<option value="'+gridCRS+'" '+selected+">"+gridCRS+"</option>")}setNotAvailbleOption("format",!jQuery("#"+gridCRSSelectId+" option").length)});jQuery(document).on("change","#"+gridCRSSelectId,function(){var selectedCRS=this.value;var avOptions=contentOptions.availableOptions;var compliantOptions=findCompliantOptions(avOptions,"gridCRS",selectedCRS);var formatSet=createSet("format",compliantOptions);jQuery("#"+formatSelectId).empty();var sel=true;for(var format in formatSet){var selected=
sel?" selected":"";sel=false;jQuery("#"+formatSelectId).append('<option value="'+format+'" '+selected+">"+format+"</option>")}setNotAvailbleOption("gridCRS",!jQuery("#"+formatSelectId+" option").length)});var findCompliantOptions=function(avOptions,target,selectedValue){var compliantOptions=[];for(var i=0;i<avOptions.length;i++){var option=avOptions[i];var subsetCRS=option.spatialSubset.CRS;var format=option.format;var gridCRS=option.CRS;var value=target==="format"?format:gridCRS;if(value===selectedValue&&
subsetCRS==="EPSG:4326")compliantOptions.push(option)}return compliantOptions};var createSet=function(target,compliantOptions){var set={};for(var i=0;i<compliantOptions.length;i++){var option=compliantOptions[i];var format=option.format;var gridCRS=option.CRS;var value=target==="format"?format:gridCRS;set[value]=value}return set};var setNotAvailbleOption=function(target,set){if(set){GIAPI.UI_Utils.setGlassPane(firstResTdId);GIAPI.UI_Utils.setGlassPane(secondResTdId);GIAPI.UI_Utils.setGlassPane(rightTableId);
if(target==="format")GIAPI.UI_Utils.setGlassPane(gridCRSTdId);else GIAPI.UI_Utils.setGlassPane(formatTdId);GIAPI.UI_Utils.setGlassPane(downButtonTdId);if(target==="gridCRS")target="CRS";jQuery("#"+infoLabelId).text("The selected option is not availble. Please select another "+target)}else{GIAPI.UI_Utils.removeGlassPane(firstResTdId);GIAPI.UI_Utils.removeGlassPane(secondResTdId);GIAPI.UI_Utils.removeGlassPane(rightTableId);GIAPI.UI_Utils.removeGlassPane(gridCRSTdId);GIAPI.UI_Utils.removeGlassPane(formatTdId);
GIAPI.UI_Utils.removeGlassPane(downButtonTdId);jQuery("#"+infoLabelId).text("")}};var update=function(data){contentOptions=data;var leftTable='<table style="width: 200px">';var formatLabel='<label class="common-ui-node-download-widget-label">Format</label>';var formatSelect='<select style="width: 198px; margin-left:3px; height: 18px" class="common-ui-node-download-widget-input"  id="'+formatSelectId+'"></select>';leftTable+='<tr><td id="'+formatTdId+'">'+formatLabel+formatSelect+"</td></tr>";var gridInfoLabel=
'<label style="margin-top:3px" class="common-ui-node-download-widget-header">Grid info</label>';leftTable+='<tr><td><div style="margin-top:5px" >'+gridInfoLabel+"</div></td></tr>";var gridCRSLabel='<label class="common-ui-node-download-widget-label">CRS</label>';var gridCRSSelect='<select class="common-ui-node-download-widget-input" style="margin-left:3px;width: 210px; height: 18px" id="'+gridCRSSelectId+'"></select>';leftTable+='<tr><td id="'+gridCRSTdId+'">'+gridCRSLabel+gridCRSSelect+"</td></tr>";
var firstResLabel='<label id="'+firstResLabelId+'" class="common-ui-node-download-widget-label"></label>';var firstResInput='<input class="cnst-widget-input common-ui-node-download-widget-input" style="margin-left:-3px;width:100%;" type="number" id="'+firstResSelectId+'"></input>';var labelDiv='<div style="display: table-cell;width:auto">'+firstResLabel+"</div>";var inputDiv='<div style="display: table-cell;width:60%">'+firstResInput+"</div>";var firstDiv='<div style="display:table; width: 100%">'+
labelDiv+inputDiv+"</div>";leftTable+='<tr><td id="'+firstResTdId+'">'+firstDiv+"</td></tr>";var secondResLabel='<label id="'+secondResLabelId+'" class="common-ui-node-download-widget-label"></label>';var secondResInput='<input class="cnst-widget-input common-ui-node-download-widget-input" style="margin-left:-3px;width: 100%" type="number" id="'+secondResSelectId+'"></input>';var labelDiv='<div style="display: table-cell;width:auto">'+secondResLabel+"</div>";var inputDiv='<div style="display: table-cell;width:60%">'+
secondResInput+"</div>";var secondDiv='<div style="display:table; width: 100%">'+labelDiv+inputDiv+"</div>";leftTable+='<tr><td id="'+secondResTdId+'">'+secondDiv+"</td></tr>";leftTable+="</table>";var rightTable='<table id="'+rightTableId+'" style="width: 230px">';var subsetLabel='<label class="common-ui-node-download-widget-header">Spatial subset</label>';rightTable+='<tr><td><div style="margin-top: -3px;" >'+subsetLabel+"</div></td></tr>";var constWidget=GIAPI.ConstraintsWidget(options.dabNode,
{"fieldsWidth":172});var bboxLabel='<label class="common-ui-node-download-widget-label">Bbox</label>';rightTable+='<tr><td><div style="margin-top:-1px"><div style="display:inline-block">'+bboxLabel+'</div><div id="'+whereDivId+'" style="vertical-align: middle;display:inline-block"></div></div></td></tr>';var tempSubLabel='<label class="common-ui-node-download-widget-header">Temporal subset</label>';rightTable+='<tr><td><div style="margin-top: -3px;">'+tempSubLabel+"</div></td></tr>";var availOptions=
contentOptions.availableOptions;var minTemp="3000-01-01T00:00:00Z";var maxTemp="0000-01-01T00:00:00Z";for(var index in availOptions){var option=availOptions[index];var temporalBegin=option.temporalSubset&&option.temporalSubset.from;if(temporalBegin)temporalBegin=temporalBegin.substring(0,temporalBegin.indexOf("T"));var temporalEnd=option.temporalSubset&&option.temporalSubset.to;if(temporalEnd)temporalEnd=temporalEnd.substring(0,temporalEnd.indexOf("T"));if(temporalBegin<minTemp)minTemp=temporalBegin;
if(temporalEnd>maxTemp)maxTemp=temporalEnd}var minDate=new Date(minTemp);var maxDate=new Date(maxTemp);var from=constWidget.whenConstraint("get","from",{showHelpIcon:false,minDate:minDate,maxDate:maxDate});var labelDiv='<div style="vertical-align: middle;display: table-cell;width:auto"><label class="common-ui-node-download-widget-label">Start</label></div>';var inputDiv='<div style="display: table-cell;width:90%">'+from+"</div>";var fromDiv='<div style="margin-top: -5px;display:table; width: 100%">'+
labelDiv+inputDiv+"</div>";rightTable+="<tr><td>"+fromDiv+"</td></tr>";var to=constWidget.whenConstraint("get","to",{showHelpIcon:false,minDate:minDate,maxDate:maxDate});var labelDiv='<div style="vertical-align: middle;display: table-cell;width:auto"><label class="common-ui-node-download-widget-label">End</label></div>';var inputDiv='<div style="display: table-cell;width:90%">'+to+"</div>";var toDiv='<div style="margin-top:-12px;display:table; width: 100%">'+labelDiv+inputDiv+"</div>";rightTable+=
"<tr><td>"+toDiv+"</td></tr>";rightTable+="</table>";var mainTable="<table>";mainTable+="<tr><td>"+leftTable+"</td><td>"+rightTable+"</td></tr>";var downloadButton=GIAPI.FontAwesomeButton({"width":120,"label":"Start download","icon":"fa-download","handler":function(){var option={};option.format=jQuery("#"+formatSelectId).val();option.CRS=jQuery("#"+gridCRSSelectId).val();if(jQuery("#"+firstResSelectId).val()&&jQuery("#"+secondResSelectId).val()){option.firstAxisSize={value:parseFloat(jQuery("#"+firstResSelectId).val())};
option.secondAxisSize={value:parseFloat(jQuery("#"+secondResSelectId).val())}}if(constWidget.constraints().where)option.spatialSubset=constWidget.constraints().where;var temporalBegin=constWidget.constraints().when&&constWidget.constraints().when.from;var temporalEnd=constWidget.constraints().when&&constWidget.constraints().when.to;if(temporalBegin&&temporalEnd)option.temporalSubset={from:temporalBegin,to:temporalEnd};options.node.accessLink(function(link,error){if(!error)window.open(link)},option);
return false}});downloadButton.css("div","margin-left","3px");downloadButton.css("icon","vertical-align","middle");downloadButton.css("div","font-size","12px");downloadButton.css("div","margin-top","5px");var infoDiv='<div style="margin-top:13px; margin-left:-105px"><label class="common-ui-node-download-widget-label" style="font-weight: bold;color:red;" id="'+infoLabelId+'"></label></div>';mainTable+='<tr><td id="'+downButtonTdId+'">'+downloadButton.div()+"</td><td>"+infoDiv+"</td></tr>";mainTable+=
"</table>";var widgetDiv="<div>";var line=GIAPI.UI_Utils.separator("display:inline-block; width:100%;vertical-align: middle");widgetDiv+=line;widgetDiv+=mainTable;widgetDiv+="</div>";jQuery("#"+options.divId).empty();jQuery("#"+options.divId).append(widgetDiv);jQuery("#"+constWidget.getId("from")).addClass("common-ui-node-download-widget-input");jQuery("#"+constWidget.getId("to")).addClass("common-ui-node-download-widget-input");jQuery("#"+constWidget.getId("from")).parent("table").css("display",
"inline-block");jQuery("#"+constWidget.getId("to")).parent("table").css("display","inline-block");jQuery("#"+constWidget.getId("from")).parent("div").parent("td").css("width","97px");jQuery("#"+constWidget.getId("to")).parent("div").parent("td").css("width","97px");jQuery("#"+constWidget.getId("from")).css("width","97px");jQuery("#"+constWidget.getId("to")).css("width","97px");jQuery("#"+constWidget.getId("from")).css("height","15px");jQuery("#"+constWidget.getId("to")).css("height","15px");var reducedOption=
contentOptions.reducedOption;var firstSize=reducedOption.firstAxisSize&&reducedOption.firstAxisSize.value;var secondSize=reducedOption.secondAxisSize&&reducedOption.secondAxisSize.value;if(firstSize&&secondSize){jQuery("#"+firstResSelectId).val(firstSize);jQuery("#"+secondResSelectId).val(secondSize);jQuery("#"+firstResLabelId).text(reducedOption.firstAxisSize.label+" resolution");jQuery("#"+secondResLabelId).text(reducedOption.secondAxisSize.label+" resolution")}else{jQuery("#"+firstResSelectId).remove();
jQuery("#"+secondResSelectId).remove()}var tempSubset=reducedOption.temporalSubset;var fromVal=tempSubset&&tempSubset.from&&tempSubset.from.substring(0,tempSubset.from.indexOf("T"));var toVal=tempSubset&&tempSubset.to&&tempSubset.to.substring(0,tempSubset.to.indexOf("T"));if(fromVal)jQuery("#"+constWidget.getId("from")).val(fromVal);else jQuery("#"+constWidget.getId("from")).attr("disabled","disabled");if(toVal)jQuery("#"+constWidget.getId("to")).val(toVal);else jQuery("#"+constWidget.getId("to")).attr("disabled",
"disabled");if(reducedOption.spatialSubset)delete reducedOption.spatialSubset.CRS;var where=constWidget.whereConstraint("get",{widgetPosition:"right","showHelpIcon":false,"value":reducedOption.spatialSubset,"applyValue":reducedOption.spatialSubset?true:false,"showSpatialRelationControl":false});jQuery("#"+whereDivId).append(where);jQuery("#"+constWidget.getId("where")).addClass("common-ui-node-download-widget-input");jQuery("#"+constWidget.getId("where")).css("height","15px");if(!reducedOption.spatialSubset)jQuery("#"+
constWidget.getId("where")).attr("disabled","disabled");var formatMap={};var gridCRSMap={};var subsetCRSMap={};for(var i=0;i<availOptions.length;i++){var opt=availOptions[i];formatMap[opt.format]=opt.format;gridCRSMap[opt.CRS]=opt.CRS;subsetCRSMap[opt.CRS]=opt.subsetCRS}for(var format in formatMap){var selected=reducedOption.format===format?" selected":"";jQuery("#"+formatSelectId).append('<option value="'+format+'" '+selected+">"+format+"</option>")}for(var gridCRS in gridCRSMap){var selected=reducedOption.CRS===
gridCRS?" selected":"";jQuery("#"+gridCRSSelectId).append('<option value="'+gridCRS+'" '+selected+">"+gridCRS+"</option>")}};return widget};GIAPI.Source_UINode=function(source,id){var widget={};var report=source.report();var where=report.where&&report.where[0];var nodeMapId=GIAPI.random();var css="border: 1px solid #BDBDBD;";css+="padding: 3px;";var mainDiv='<table style="'+css+'">';mainDiv+="<tr>";mainDiv+="<tr>";mainDiv+="<td colspan=2>";mainDiv+='<div style="margin-top:2px; font-size: 11px"><label>Service URL: </label>';mainDiv+='<a target="_blank" class="dont-break-out common-ui-node-report-content-table-right" style="color:blue;text-decoration: none;" href="'+
report.online[0].url+'">'+report.online[0].url+"</a>";mainDiv+="</td>";mainDiv+="</tr>";if(report.harvested){if(report.where){var width=report.when?"375":"450";mainDiv+='<td style="height: 140px; width: '+width+'px;">';var mapDiv='<div style="margin-top:3px; height: 140px; width: 100%"  id="'+nodeMapId+'"></div>';mainDiv+=mapDiv;mainDiv+="</td>"}if(report.when){mainDiv+="<td>";mainDiv+="<div>"+GIAPI.Common_UINode.whenDiv("from",report)+"</div>";mainDiv+='<div style="margin-top: 10px">'+GIAPI.Common_UINode.whenDiv("to",
report)+"</div>";mainDiv+="</td>"}mainDiv+="</tr>";if(report.keyword||report.thesaurusKeyword){mainDiv+="<tr>";mainDiv+="<td colspan=2>";mainDiv+='<div style="margin-top:3px; margin-bottom:3px; font-size: 11px"><label>Keywords: </label></div>';var css="margin-left: -27px;";css+="max-height: 200px;";css+="font-size: 11px;";css+="overflow: auto;";mainDiv+='<div style="'+css+'"><ul>';if(report.thesaurusKeyword)for(var i=0;i<report.thesaurusKeyword.length;i++){var keyword=report.thesaurusKeyword[i].keyword;
for(var j=0;j<keyword.length;j++)mainDiv+="<li><label>"+keyword[j]+"</label></li>"}else for(var i=0;i<report.keyword.length;i++)mainDiv+="<li><label>"+report.keyword[i]+"</label></li>";mainDiv+="</ul></div>"}mainDiv+="</td>";mainDiv+="</tr>"}mainDiv+="</table>";jQuery("#"+id).append(mainDiv);widget.updateMap=function(){if(where){var nodeMapWidget=GIAPI.NodeMapWidget(nodeMapId,source,{"mapType":GIAPI.Common_UINode.mapType||GIAPI.ui.mapType||"google","mapTypeId":google.maps.MapTypeId.ROADMAP,"mode":GIAPI.Common_UINode.mapMode||
"al","zoom":9,"height":140,"coordinatesDialogPosition":"right"});nodeMapWidget.init()}};widget.div=function(){return mainDiv};return widget};GIAPI.ODIPWidget=function(dialogId,relativeId,dabNode){var widget={};var termLabelStyle=".termLabel{ font-size: 80%}";termLabelStyle+=".termLabel:hover{  font-weight: bold; padding-top:4px; padding-bottom: 4px; background-color: #97b0d9; cursor:pointer}";GIAPI.UI_Utils.appendStyle(termLabelStyle);var profilesDiv='<input id="suggestionInput" style="width: 397px; margin-left: -4px" placeholder="Suggestion" type="text">';profilesDiv+='<div style="margin-left: -8px;border: none;background: transparent;" id="profile-tab">';
profilesDiv+='<ul style="width:394px">';profilesDiv+='<li style="margin-left:100px"><a style="background: transparent" href="#cdi-tab">CDI</a></li>';profilesDiv+='<li><a style="border: transparent" href="#mcp-tab">MCP</a></li>';profilesDiv+='<li><a  style="background: transparent" href="#nodc-tab">NODC</a></li>';profilesDiv+="</ul>";profilesDiv+='<div class="tabs-element" id="cdi-tab">';profilesDiv+="</div>";profilesDiv+='<div class="tabs-element" id="mcp-tab">';profilesDiv+="</div>";profilesDiv+=
'<div class="tabs-element" id="nodc-tab">';profilesDiv+="</div>";profilesDiv+="</div>";var pos=GIAPI.position("bottom");pos.at=pos.at+"+5";jQuery("#"+dialogId).append(profilesDiv);jQuery("#suggestionInput").keyup(function(){var active=jQuery("#profile-tab").tabs("option","active");var target=null;switch(active){case 0:target="CDI";break;case 1:target="MCP";break;case 2:target="NODC";break}var suggestion=jQuery("#suggestionInput").val();updateLabels(null,"labelsDiv",target,null,suggestion)});jQuery("#profile-tab").tabs({activate:function(event,
ui){jQuery("#suggestionInput").val("");switch(ui.newPanel.selector){case "#cdi-tab":updateLabels(null,"labelsDiv","CDI",null);break;case "#nodc-tab":updateLabels(null,"labelsDiv","NODC",null);break;case "#mcp-tab":updateLabels(null,"labelsDiv","MCP",null);break}}});jQuery("#"+dialogId).dialog({autoOpen:false,height:330,width:425,resizable:false,modal:false,position:{of:"#"+relativeId,my:pos.my,at:pos.at,collision:"none"}});widget.showDialog=function(textFieldId,target){widget.target=target;widget.textFieldId=
textFieldId;var title="";switch(target){case "INSTRUMENTS":title="INSTRUMENTS";break;case "PLATFORMS":title="PLATFORMS";break;case "ORIG_ORGANIZATIONS":title="ORIGINATOR ORGANISATIONS";break;case "PARAMETERS":title="MEASURED ATTRIBUTE";break}jQuery("#"+dialogId).dialog("option","title",title);if(!jQuery("#"+dialogId).dialog("isOpen"))jQuery("#"+dialogId).dialog("open");jQuery("#profile-tab").tabs({active:0});updateLabels(textFieldId,"labelsDiv","CDI",target)};var updateLabels=function(textFieldId,
divIdentifier,profile,target,suggestion){if(!target)target=widget.target;if(!textFieldId)textFieldId=widget.textFieldId;if(!suggestion)suggestion="";var endpoint=dabNode.endpoint().endsWith("/")?dabNode.endpoint():dabNode.endpoint()+"/";endpoint=endpoint+"services/support/odip?profile="+profile+"&target="+target+"&suggestion="+suggestion;jQuery.ajax({type:"GET",url:endpoint,crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){console.log("updatelabels: "+data);jQuery("#"+divIdentifier).remove();
var labelsDiv='<div style="height:200px; overflow: auto" id="labelsDiv">';var labels=data.labels;if(labels.length===0)labelsDiv+='<label style="font-size: 80%">No labels found</label><br>';else{for(var i=0;i<labels.length;i++){var id=GIAPI.random();labelsDiv+='<label id="'+id+'" class="termLabel">'+labels[i]+"</label><br>";jQuery(document).on("click","#"+id,function(){setTerm(textFieldId,this,profile,target)})}labelsDiv+="</div>"}jQuery("#"+dialogId).append(labelsDiv)},complete:function(jqXHR,status){},
error:function(jqXHR,msg,exception){}})};var setTerm=function(textFieldId,label,profile,target){console.log("START setTerm");var labelId=label.id;var label=jQuery("#"+labelId).text();label=encodeURIComponent(label);var endpoint=dabNode.endpoint().endsWith("/")?dabNode.endpoint():dabNode.endpoint()+"/";endpoint=endpoint+"services/support/odip?profile="+profile+"&target="+target+"&label="+label;jQuery.ajax({type:"GET",url:endpoint,crossDomain:true,dataType:"jsonp",success:function(data,status,jqXHR){console.log("END setTerm: "+
data);jQuery("#"+textFieldId).val(data.term)},complete:function(jqXHR,status){},error:function(jqXHR,msg,exception){}})};return widget};GIAPI.ODIPSourcesWidget=function(id,dabNode,options){var widget={};var sourcesCount=0;if(!options)options={};if(!options.width)options.width="width: 375px;";else if(options.width==="none")options.width="";else options.width="width: "+options.width+"px;";if(!options.height)options.height="height: 210px;";else if(options.height==="none")options.height="";else options.height="height: "+options.height+"px;";if(!options.include)options.include=function(){return true};widget.sourcesCount=function(){return sourcesCount};
var includeSources=function(sources,check){var indexes=jQuery(check).prop("id").replace("check_","").split("_");indexes.forEach(function(index){var source=sources[index];source.include(jQuery(check).is(":checked"))});if(check.checked)sourcesCount++;else sourcesCount--;if(!options.groups)setSelectedSources(sources)};dabNode.sources(function(sources,error){if(error&&options.errorHandler){options.errorHandler.apply(this,[error]);return}var table='<table class="sources-widget" style="'+options.width+
options.height+'">';if(!options.groups){var checkAllTable="<table>";checkAllTable+="<tr>";var checkId="check_all";checkAllTable+='<td style="vertical-align: bottom;"><label class="sources-widget-all-label" id="check_all_label"></label></td>';checkAllTable+="<td>";checkAllTable+='<div style="margin-left: 320px; margin-top:5px; margin-bottom:-5px">'+GIAPI.ButtonsFactory.onOffSwitchButton("IN","OUT",{"id":checkId,"size":"small","offBckColor":"#11aeb1","onBckColor":"white","offColor":"white","onColor":"#25418f",
"switchColor":"#25418f","switchBorderColor":"#25418f","borderColor":"transparent"});checkAllTable+="</div></td>";checkAllTable+="</tr></table>";table+="<tr><td colspan=3>"+checkAllTable+"</td></tr>";jQuery(document).on("click","#check_all",function(event){if(jQuery("#check_all").is(":checked"))sourcesCount=sources.length;else sourcesCount=0;setSelectedSources(sources);for(var i=0;i<sources.length;i++){var checkId="check_"+i;jQuery("#"+checkId).prop("checked",this.checked);sources[i].include(this.checked)}});
for(var i=0;i<sources.length;i++){var source=sources[i];var title=source.report().title;table+="<tr>";var targetDivId=GIAPI.random();var infoButtonId="source-info-"+source.uiId;var toggleButton=GIAPI.ToggleButton({"id":infoButtonId,"width":18,"targetId":targetDivId,"offLabel":"","onLabel":"","attr":[{name:"title",value:"Source info"},{name:"init",value:"false"},{name:"target",value:targetDivId}],"source":source,"beforeStart":function(){var init=this.attr[1].value;if(init==="false"){var targetId=this.attr[2].value;
this.sourceInfo=GIAPI.Source_UINode(this.source,targetId);jQuery("#"+targetId+" > table").css("margin-left","-20px");jQuery("#"+targetId+" > table").css("margin-top","10px");jQuery("#"+targetId+" > table").css("border","1px solid white")}},"onComplete":function(){var init=this.attr[1].value;if(init==="false"){this.attr[1].value="true";this.sourceInfo.updateMap()}}});toggleButton.stateIcon("on","fa-info-circle");toggleButton.stateIcon("off","fa-info-circle");toggleButton.css("div","padding","0px");
toggleButton.css("div","background","transparent");toggleButton.css("icon","color","#1A237E");toggleButton.css("icon","margin-left","2px");toggleButton.css("icon","font-size","15px");toggleButton.css("icon","vertical-align","middle");table+='<td style="width: 18px;" title="Source info">'+toggleButton.div()+"</td>";var checkId="check_"+i;table+='<td title="'+source.report().title+'" style="vertical-align: bottom;"><label class="sources-widget-src-label">'+title+"</label></br>";var infoDiv='<div id="'+
targetDivId+'" style="display:none"></div>';table+=infoDiv+"</td>";table+='<td style="width: 40px;">';var checked=options.include(source);source.include(checked);if(checked)sourcesCount++;table+='<div style="margin-bottom:-5px; margin-left:-3px">'+GIAPI.ButtonsFactory.onOffSwitchButton("IN","OUT",{"id":checkId,"checked":checked,"size":"small","offBckColor":"#11aeb1","onBckColor":"white","offColor":"white","onColor":"#25418f","switchColor":"#25418f","switchBorderColor":"#25418f","borderColor":"transparent"});
jQuery(document).on("click","#"+checkId,function(event){includeSources(sources,this)});if(title.length>55)title=title.substring(0,55)+"...";table+="</div></td>";table+="</tr>"}if(sourcesCount===0)sourcesCount=sources.length}else{var groupCount=0;for(var name in options.groups){table+="<tr>";var checkId="check_";var labels=options.groups[name];labels.forEach(function(label){for(var i=0;i<sources.length;i++){var source=sources[i];var title=source.report().title;if(title===label)checkId+=i+"_"}});checkId=
checkId.substring(0,checkId.length-1);table+="<td>";table+="<div>"+GIAPI.ButtonsFactory.onOffSwitchButton("YES","NO",{"id":checkId,"size":"small","offBckColor":"#11aeb1","onBckColor":"white","offColor":"white","onColor":"#25418f","switchColor":"#25418f","switchBorderColor":"#25418f","borderColor":"transparent"});jQuery(document).on("click","#"+checkId,function(event){includeSources(sources,this)});table+="</div></td>";table+="<td title="+name+' style="cursor:default; vertical-align: middle; ">'+name+
"</td>";table+="</tr>";groupCount++}sourcesCount=groupCount}table+="</table>";jQuery("#"+id).append(table);if(!options.groups)setSelectedSources(sources);if(options.onSourcesReady)options.onSourcesReady.apply(widget,[sources])},options.viewId);var setSelectedSources=function(sources){if(sourcesCount===sources.length)jQuery("#check_all_label").html("<b>All</b> sources selected");else if(sourcesCount>0){var s=sourcesCount>1?"s":"";jQuery("#check_all_label").html("<b>"+sourcesCount+"</b> source"+s+" selected")}else jQuery("#check_all_label").html("<b >No</b> sources selected")};
return widget};
